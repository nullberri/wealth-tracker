var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{g as getAugmentedNamespace}from"./@babel-Da9QAQIm.js";/**
          * @ag-grid-community/all-modules - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue * @version v31.1.1
          * @link https://www.ag-grid.com/
          * @license MIT
          */function makeNull(value){return value==null||value===""?null:value}__name(makeNull,"makeNull");function exists(value,allowEmptyString){return allowEmptyString===void 0&&(allowEmptyString=!1),value!=null&&(value!==""||allowEmptyString)}__name(exists,"exists");function missing(value){return!exists(value)}__name(missing,"missing");function missingOrEmpty(value){return value==null||value.length===0}__name(missingOrEmpty,"missingOrEmpty");function toStringOrNull(value){return value!=null&&typeof value.toString=="function"?value.toString():null}__name(toStringOrNull,"toStringOrNull");function attrToNumber(value){if(value!==void 0){if(value===null||value==="")return null;if(typeof value=="number")return isNaN(value)?void 0:value;var valueParsed=parseInt(value,10);return isNaN(valueParsed)?void 0:valueParsed}}__name(attrToNumber,"attrToNumber");function attrToBoolean(value){if(value!==void 0)return value===null||value===""?!1:typeof value=="boolean"?value:/true/i.test(value)}__name(attrToBoolean,"attrToBoolean");function attrToString(value){if(!(value==null||value===""))return value}__name(attrToString,"attrToString");function jsonEquals(val1,val2){var val1Json=val1?JSON.stringify(val1):null,val2Json=val2?JSON.stringify(val2):null;return val1Json===val2Json}__name(jsonEquals,"jsonEquals");function defaultComparator(valueA,valueB,accentedCompare){accentedCompare===void 0&&(accentedCompare=!1);var valueAMissing=valueA==null,valueBMissing=valueB==null;if(valueA&&valueA.toNumber&&(valueA=valueA.toNumber()),valueB&&valueB.toNumber&&(valueB=valueB.toNumber()),valueAMissing&&valueBMissing)return 0;if(valueAMissing)return-1;if(valueBMissing)return 1;function doQuickCompare(a,b){return a>b?1:a<b?-1:0}if(__name(doQuickCompare,"doQuickCompare"),typeof valueA!="string"||!accentedCompare)return doQuickCompare(valueA,valueB);try{return valueA.localeCompare(valueB)}catch{return doQuickCompare(valueA,valueB)}}__name(defaultComparator,"defaultComparator");function values(object){if(object instanceof Set||object instanceof Map){var arr_1=[];return object.forEach(function(value){return arr_1.push(value)}),arr_1}return Object.values(object)}__name(values,"values");var GenericUtils=Object.freeze({__proto__:null,makeNull,exists,missing,missingOrEmpty,toStringOrNull,attrToNumber,attrToBoolean,attrToString,jsonEquals,defaultComparator,values}),ColumnKeyCreator=function(){function ColumnKeyCreator2(){this.existingKeys={}}return __name(ColumnKeyCreator2,"ColumnKeyCreator"),ColumnKeyCreator2.prototype.addExistingKeys=function(keys2){for(var i=0;i<keys2.length;i++)this.existingKeys[keys2[i]]=!0},ColumnKeyCreator2.prototype.getUniqueKey=function(colId,colField){colId=toStringOrNull(colId);for(var count=0;;){var idToTry=void 0;if(colId?(idToTry=colId,count!==0&&(idToTry+="_"+count)):colField?(idToTry=colField,count!==0&&(idToTry+="_"+count)):idToTry=count,!this.existingKeys[idToTry])return this.existingKeys[idToTry]=!0,String(idToTry);count++}},ColumnKeyCreator2}(),__values$b=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$b"),__read$D=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$D");function iterateObject(object,callback){var e_1,_a;if(object!=null){if(Array.isArray(object)){for(var i=0;i<object.length;i++)callback(i.toString(),object[i]);return}try{for(var _b=__values$b(Object.entries(object)),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read$D(_c.value,2),key=_d[0],value=_d[1];callback(key,value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}}__name(iterateObject,"iterateObject");function cloneObject(object){for(var copy={},keys2=Object.keys(object),i=0;i<keys2.length;i++){var key=keys2[i],value=object[key];copy[key]=value}return copy}__name(cloneObject,"cloneObject");function deepCloneDefinition(object,keysToSkip){if(object){var obj=object,res={};return Object.keys(obj).forEach(function(key){if(!(keysToSkip&&keysToSkip.indexOf(key)>=0)){var value=obj[key],sourceIsSimpleObject=isNonNullObject(value)&&value.constructor===Object;sourceIsSimpleObject?res[key]=deepCloneDefinition(value):res[key]=value}}),res}}__name(deepCloneDefinition,"deepCloneDefinition");function getAllValuesInObject(obj){if(!obj)return[];var anyObject=Object;if(typeof anyObject.values=="function")return anyObject.values(obj);var ret=[];for(var key in obj)obj.hasOwnProperty(key)&&obj.propertyIsEnumerable(key)&&ret.push(obj[key]);return ret}__name(getAllValuesInObject,"getAllValuesInObject");function mergeDeep(dest,source,copyUndefined,makeCopyOfSimpleObjects){copyUndefined===void 0&&(copyUndefined=!0),makeCopyOfSimpleObjects===void 0&&(makeCopyOfSimpleObjects=!1),exists(source)&&iterateObject(source,function(key,sourceValue){var destValue=dest[key];if(destValue!==sourceValue){if(makeCopyOfSimpleObjects){var objectIsDueToBeCopied=destValue==null&&sourceValue!=null;if(objectIsDueToBeCopied){var sourceIsSimpleObject=typeof sourceValue=="object"&&sourceValue.constructor===Object,dontCopy=sourceIsSimpleObject;dontCopy&&(destValue={},dest[key]=destValue)}}isNonNullObject(sourceValue)&&isNonNullObject(destValue)&&!Array.isArray(destValue)?mergeDeep(destValue,sourceValue,copyUndefined,makeCopyOfSimpleObjects):(copyUndefined||sourceValue!==void 0)&&(dest[key]=sourceValue)}})}__name(mergeDeep,"mergeDeep");function getValueUsingField(data,field,fieldContainsDots){if(!(!field||!data)){if(!fieldContainsDots)return data[field];for(var fields=field.split("."),currentObject=data,i=0;i<fields.length;i++){if(currentObject==null)return;currentObject=currentObject[fields[i]]}return currentObject}}__name(getValueUsingField,"getValueUsingField");function removeAllReferences(obj,preserveKeys,preDestroyLink){preserveKeys===void 0&&(preserveKeys=[]),Object.keys(obj).forEach(function(key){var value=obj[key];typeof value=="object"&&!preserveKeys.includes(key)&&(obj[key]=void 0)});var proto=Object.getPrototypeOf(obj),properties={},msgFunc=__name(function(key){return"AG Grid: Grid API function ".concat(key,`() cannot be called as the grid has been destroyed.
    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: `).concat(preDestroyLink)},"msgFunc");Object.getOwnPropertyNames(proto).forEach(function(key){var value=proto[key];if(typeof value=="function"&&!preserveKeys.includes(key)){var func=__name(function(){console.warn(msgFunc(key))},"func");properties[key]={value:func,writable:!0}}}),Object.defineProperties(obj,properties)}__name(removeAllReferences,"removeAllReferences");function isNonNullObject(value){return typeof value=="object"&&value!==null}__name(isNonNullObject,"isNonNullObject");var ObjectUtils=Object.freeze({__proto__:null,iterateObject,cloneObject,deepCloneDefinition,getAllValuesInObject,mergeDeep,getValueUsingField,removeAllReferences,isNonNullObject}),doOnceFlags={};function doOnce(func,key){doOnceFlags[key]||(func(),doOnceFlags[key]=!0)}__name(doOnce,"doOnce");function warnOnce(msg){doOnce(function(){return console.warn("AG Grid: "+msg)},msg)}__name(warnOnce,"warnOnce");function errorOnce(msg){doOnce(function(){return console.error("AG Grid: "+msg)},msg)}__name(errorOnce,"errorOnce");function getFunctionName(funcConstructor){if(funcConstructor.name)return funcConstructor.name;var matches=/function\s+([^\(]+)/.exec(funcConstructor.toString());return matches&&matches.length===2?matches[1].trim():null}__name(getFunctionName,"getFunctionName");function isFunction(val){return!!(val&&val.constructor&&val.call&&val.apply)}__name(isFunction,"isFunction");function executeInAWhile(funcs){executeAfter(funcs,400)}__name(executeInAWhile,"executeInAWhile");var executeNextVMTurnFuncs=[],executeNextVMTurnPending=!1;function executeNextVMTurn(func){executeNextVMTurnFuncs.push(func),!executeNextVMTurnPending&&(executeNextVMTurnPending=!0,window.setTimeout(function(){var funcsCopy=executeNextVMTurnFuncs.slice();executeNextVMTurnFuncs.length=0,executeNextVMTurnPending=!1,funcsCopy.forEach(function(func2){return func2()})},0))}__name(executeNextVMTurn,"executeNextVMTurn");function executeAfter(funcs,milliseconds){milliseconds===void 0&&(milliseconds=0),funcs.length>0&&window.setTimeout(function(){return funcs.forEach(function(func){return func()})},milliseconds)}__name(executeAfter,"executeAfter");function debounce(func,delay){var timeout;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this;window.clearTimeout(timeout),timeout=window.setTimeout(function(){func.apply(context,args)},delay)}}__name(debounce,"debounce");function throttle(func,wait){var previousCall=0;return function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var context=this,currentCall=new Date().getTime();currentCall-previousCall<wait||(previousCall=currentCall,func.apply(context,args))}}__name(throttle,"throttle");function waitUntil(condition,callback,timeout,timeoutMessage){timeout===void 0&&(timeout=100);var timeStamp=new Date().getTime(),interval=null,executed=!1,internalCallback=__name(function(){var reachedTimeout=new Date().getTime()-timeStamp>timeout;(condition()||reachedTimeout)&&(callback(),executed=!0,interval!=null&&(window.clearInterval(interval),interval=null),reachedTimeout&&timeoutMessage&&console.warn(timeoutMessage))},"internalCallback");internalCallback(),executed||(interval=window.setInterval(internalCallback,10))}__name(waitUntil,"waitUntil");function compose(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return function(arg){return fns.reduce(function(composed,f){return f(composed)},arg)}}__name(compose,"compose");var noop=__name(function(){},"noop"),FunctionUtils=Object.freeze({__proto__:null,doOnce,warnOnce,errorOnce,getFunctionName,isFunction,executeInAWhile,executeNextVMTurn,executeAfter,debounce,throttle,waitUntil,compose,noop}),ModuleNames;(function(ModuleNames2){ModuleNames2.CommunityCoreModule="@ag-grid-community/core",ModuleNames2.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",ModuleNames2.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",ModuleNames2.CsvExportModule="@ag-grid-community/csv-export",ModuleNames2.EnterpriseCoreModule="@ag-grid-enterprise/core",ModuleNames2.RowGroupingModule="@ag-grid-enterprise/row-grouping",ModuleNames2.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",ModuleNames2.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",ModuleNames2.MenuModule="@ag-grid-enterprise/menu",ModuleNames2.SetFilterModule="@ag-grid-enterprise/set-filter",ModuleNames2.MultiFilterModule="@ag-grid-enterprise/multi-filter",ModuleNames2.StatusBarModule="@ag-grid-enterprise/status-bar",ModuleNames2.SideBarModule="@ag-grid-enterprise/side-bar",ModuleNames2.RangeSelectionModule="@ag-grid-enterprise/range-selection",ModuleNames2.MasterDetailModule="@ag-grid-enterprise/master-detail",ModuleNames2.RichSelectModule="@ag-grid-enterprise/rich-select",ModuleNames2.GridChartsModule="@ag-grid-enterprise/charts",ModuleNames2.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",ModuleNames2.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",ModuleNames2.ExcelExportModule="@ag-grid-enterprise/excel-export",ModuleNames2.ClipboardModule="@ag-grid-enterprise/clipboard",ModuleNames2.SparklinesModule="@ag-grid-enterprise/sparklines",ModuleNames2.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",ModuleNames2.AngularModule="@ag-grid-community/angular",ModuleNames2.ReactModule="@ag-grid-community/react",ModuleNames2.VueModule="@ag-grid-community/vue"})(ModuleNames||(ModuleNames={}));var __read$C=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$C"),__spreadArray$u=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$u"),ModuleRegistry=function(){function ModuleRegistry2(){}return __name(ModuleRegistry2,"ModuleRegistry"),ModuleRegistry2.register=function(module){ModuleRegistry2.__register(module,!0,void 0)},ModuleRegistry2.registerModules=function(modules){ModuleRegistry2.__registerModules(modules,!0,void 0)},ModuleRegistry2.__register=function(module,moduleBased,gridId){ModuleRegistry2.runVersionChecks(module),gridId!==void 0?(ModuleRegistry2.areGridScopedModules=!0,ModuleRegistry2.gridModulesMap[gridId]===void 0&&(ModuleRegistry2.gridModulesMap[gridId]={}),ModuleRegistry2.gridModulesMap[gridId][module.moduleName]=module):ModuleRegistry2.globalModulesMap[module.moduleName]=module,ModuleRegistry2.setModuleBased(moduleBased)},ModuleRegistry2.__unRegisterGridModules=function(gridId){delete ModuleRegistry2.gridModulesMap[gridId]},ModuleRegistry2.__registerModules=function(modules,moduleBased,gridId){ModuleRegistry2.setModuleBased(moduleBased),modules&&modules.forEach(function(module){return ModuleRegistry2.__register(module,moduleBased,gridId)})},ModuleRegistry2.isValidModuleVersion=function(module){var _a=__read$C(module.version.split(".")||[],2),moduleMajor=_a[0],moduleMinor=_a[1],_b=__read$C(ModuleRegistry2.currentModuleVersion.split(".")||[],2),currentModuleMajor=_b[0],currentModuleMinor=_b[1];return moduleMajor===currentModuleMajor&&moduleMinor===currentModuleMinor},ModuleRegistry2.runVersionChecks=function(module){if(ModuleRegistry2.currentModuleVersion||(ModuleRegistry2.currentModuleVersion=module.version),module.version?ModuleRegistry2.isValidModuleVersion(module)||console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(module.moduleName,"' is version ").concat(module.version," but the other modules are version ").concat(this.currentModuleVersion,". Please update all modules to the same version.")):console.error("AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '".concat(module.moduleName,"' is incompatible. Please update all modules to the same version.")),module.validate){var result=module.validate();if(!result.isValid){var errorResult=result;console.error("AG Grid: ".concat(errorResult.message))}}},ModuleRegistry2.setModuleBased=function(moduleBased){ModuleRegistry2.moduleBased===void 0?ModuleRegistry2.moduleBased=moduleBased:ModuleRegistry2.moduleBased!==moduleBased&&doOnce(function(){console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")},ModuleRegistry2.__setIsBundled=function(){ModuleRegistry2.isBundled=!0},ModuleRegistry2.__assertRegistered=function(moduleName,reason,gridId){var _a;if(this.__isRegistered(moduleName,gridId))return!0;var warningKey=reason+moduleName,warningMessage;if(ModuleRegistry2.isBundled)warningMessage="AG Grid: unable to use ".concat(reason,` as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`);else if(ModuleRegistry2.moduleBased||ModuleRegistry2.moduleBased===void 0){var modName=(_a=Object.entries(ModuleNames).find(function(_a2){var _b=__read$C(_a2,2);_b[0];var v=_b[1];return v===moduleName}))===null||_a===void 0?void 0:_a[0];warningMessage="AG Grid: unable to use ".concat(reason," as the ").concat(modName," is not registered").concat(ModuleRegistry2.areGridScopedModules?" for gridId: ".concat(gridId):"",`. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { `).concat(modName," } from '").concat(moduleName,`';
    
    ModuleRegistry.registerModules([ `).concat(modName,` ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`)}else warningMessage="AG Grid: unable to use ".concat(reason,` as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';
            
For more info see: https://www.ag-grid.com/javascript-grid/packages/`);return doOnce(function(){console.warn(warningMessage)},warningKey),!1},ModuleRegistry2.__warnEnterpriseChartDisabled=function(chartType){var reason="ag-charts-enterprise",warningKey=reason+":"+chartType,url="https://ag-grid.com/javascript-data-grid/integrated-charts/",warningMessage="AG Grid: the '".concat(chartType,"' chart type is not supported in AG Charts Community. See ").concat(url," for more details.");doOnce(function(){console.warn(warningMessage)},warningKey)},ModuleRegistry2.__isRegistered=function(moduleName,gridId){var _a;return!!ModuleRegistry2.globalModulesMap[moduleName]||!!(!((_a=ModuleRegistry2.gridModulesMap[gridId])===null||_a===void 0)&&_a[moduleName])},ModuleRegistry2.__getRegisteredModules=function(gridId){return __spreadArray$u(__spreadArray$u([],__read$C(values(ModuleRegistry2.globalModulesMap)),!1),__read$C(values(ModuleRegistry2.gridModulesMap[gridId]||{})),!1)},ModuleRegistry2.__getGridRegisteredModules=function(gridId){var _a;return values((_a=ModuleRegistry2.gridModulesMap[gridId])!==null&&_a!==void 0?_a:{})||[]},ModuleRegistry2.__isPackageBased=function(){return!ModuleRegistry2.moduleBased},ModuleRegistry2.globalModulesMap={},ModuleRegistry2.gridModulesMap={},ModuleRegistry2.areGridScopedModules=!1,ModuleRegistry2}(),__read$B=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$B"),__spreadArray$t=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$t"),Context=function(){function Context2(params,logger){if(this.beanWrappers={},this.destroyed=!1,!(!params||!params.beanClasses)){this.contextParams=params,this.logger=logger,this.logger.log(">> creating ag-Application Context"),this.createBeans();var beanInstances=this.getBeanInstances();this.wireBeans(beanInstances),this.logger.log(">> ag-Application Context ready - component is alive")}}return __name(Context2,"Context"),Context2.prototype.getBeanInstances=function(){return values(this.beanWrappers).map(function(beanEntry){return beanEntry.beanInstance})},Context2.prototype.createBean=function(bean,afterPreCreateCallback){if(!bean)throw Error("Can't wire to bean since it is null");return this.wireBeans([bean],afterPreCreateCallback),bean},Context2.prototype.wireBeans=function(beanInstances,afterPreCreateCallback){this.autoWireBeans(beanInstances),this.methodWireBeans(beanInstances),this.callLifeCycleMethods(beanInstances,"preConstructMethods"),exists(afterPreCreateCallback)&&beanInstances.forEach(afterPreCreateCallback),this.callLifeCycleMethods(beanInstances,"postConstructMethods")},Context2.prototype.createBeans=function(){var _this=this;this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),iterateObject(this.beanWrappers,function(key,beanEntry){var constructorParamsMeta;beanEntry.bean.__agBeanMetaData&&beanEntry.bean.__agBeanMetaData.autowireMethods&&beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor&&(constructorParamsMeta=beanEntry.bean.__agBeanMetaData.autowireMethods.agConstructor);var constructorParams=_this.getBeansForParameters(constructorParamsMeta,beanEntry.bean.name),newInstance=new(beanEntry.bean.bind.apply(beanEntry.bean,__spreadArray$t([null],__read$B(constructorParams),!1)));beanEntry.beanInstance=newInstance});var createdBeanNames=Object.keys(this.beanWrappers).join(", ");this.logger.log("created beans: ".concat(createdBeanNames))},Context2.prototype.createBeanWrapper=function(BeanClass){var metaData=BeanClass.__agBeanMetaData;if(!metaData){var beanName=void 0;BeanClass.prototype.constructor?beanName=getFunctionName(BeanClass.prototype.constructor):beanName=""+BeanClass,console.error("Context item ".concat(beanName," is not a bean"));return}var beanEntry={bean:BeanClass,beanInstance:null,beanName:metaData.beanName};this.beanWrappers[metaData.beanName]=beanEntry},Context2.prototype.autoWireBeans=function(beanInstances){var _this=this;beanInstances.forEach(function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,function(metaData,beanName){var attributes=metaData.agClassAttributes;attributes&&attributes.forEach(function(attribute){var otherBean=_this.lookupBeanInstance(beanName,attribute.beanName,attribute.optional);beanInstance[attribute.attributeName]=otherBean})})})},Context2.prototype.methodWireBeans=function(beanInstances){var _this=this;beanInstances.forEach(function(beanInstance){_this.forEachMetaDataInHierarchy(beanInstance,function(metaData,beanName){iterateObject(metaData.autowireMethods,function(methodName,wireParams){if(methodName!=="agConstructor"){var initParams=_this.getBeansForParameters(wireParams,beanName);beanInstance[methodName].apply(beanInstance,initParams)}})})})},Context2.prototype.forEachMetaDataInHierarchy=function(beanInstance,callback){for(var prototype=Object.getPrototypeOf(beanInstance);prototype!=null;){var constructor=prototype.constructor;if(constructor.hasOwnProperty("__agBeanMetaData")){var metaData=constructor.__agBeanMetaData,beanName=this.getBeanName(constructor);callback(metaData,beanName)}prototype=Object.getPrototypeOf(prototype)}},Context2.prototype.getBeanName=function(constructor){if(constructor.__agBeanMetaData&&constructor.__agBeanMetaData.beanName)return constructor.__agBeanMetaData.beanName;var constructorString=constructor.toString(),beanName=constructorString.substring(9,constructorString.indexOf("("));return beanName},Context2.prototype.getBeansForParameters=function(parameters,beanName){var _this=this,beansList=[];return parameters&&iterateObject(parameters,function(paramIndex,otherBeanName){var otherBean=_this.lookupBeanInstance(beanName,otherBeanName);beansList[Number(paramIndex)]=otherBean}),beansList},Context2.prototype.lookupBeanInstance=function(wiringBean,beanName,optional){if(optional===void 0&&(optional=!1),this.destroyed)return this.logger.log("AG Grid: bean reference ".concat(beanName," is used after the grid is destroyed!")),null;if(beanName==="context")return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(beanName))return this.contextParams.providedBeanInstances[beanName];var beanEntry=this.beanWrappers[beanName];return beanEntry?beanEntry.beanInstance:(optional||console.error("AG Grid: unable to find bean reference ".concat(beanName," while initialising ").concat(wiringBean)),null)},Context2.prototype.callLifeCycleMethods=function(beanInstances,lifeCycleMethod){var _this=this;beanInstances.forEach(function(beanInstance){return _this.callLifeCycleMethodsOnBean(beanInstance,lifeCycleMethod)})},Context2.prototype.callLifeCycleMethodsOnBean=function(beanInstance,lifeCycleMethod,methodToIgnore){var allMethods={};this.forEachMetaDataInHierarchy(beanInstance,function(metaData){var methods=metaData[lifeCycleMethod];methods&&methods.forEach(function(methodName){methodName!=methodToIgnore&&(allMethods[methodName]=!0)})});var allMethodsList=Object.keys(allMethods);allMethodsList.forEach(function(methodName){return beanInstance[methodName]()})},Context2.prototype.getBean=function(name){return this.lookupBeanInstance("getBean",name,!0)},Context2.prototype.destroy=function(){if(!this.destroyed){this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");var beanInstances=this.getBeanInstances();this.destroyBeans(beanInstances),this.contextParams.providedBeanInstances=null,ModuleRegistry.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}},Context2.prototype.destroyBean=function(bean){bean&&this.destroyBeans([bean])},Context2.prototype.destroyBeans=function(beans){var _this=this;return beans?(beans.forEach(function(bean){_this.callLifeCycleMethodsOnBean(bean,"preDestroyMethods","destroy");var beanAny=bean;typeof beanAny.destroy=="function"&&beanAny.destroy()}),[]):[]},Context2.prototype.isDestroyed=function(){return this.destroyed},Context2.prototype.getGridId=function(){return this.contextParams.gridId},Context2}();function PreConstruct(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.preConstructMethods||(props.preConstructMethods=[]),props.preConstructMethods.push(methodName)}__name(PreConstruct,"PreConstruct");function PostConstruct(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.postConstructMethods||(props.postConstructMethods=[]),props.postConstructMethods.push(methodName)}__name(PostConstruct,"PostConstruct");function PreDestroy(target,methodName,descriptor){var props=getOrCreateProps$1(target.constructor);props.preDestroyMethods||(props.preDestroyMethods=[]),props.preDestroyMethods.push(methodName)}__name(PreDestroy,"PreDestroy");function Bean(beanName){return function(classConstructor){var props=getOrCreateProps$1(classConstructor);props.beanName=beanName}}__name(Bean,"Bean");function Autowired(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!1,target,propertyKey,null)}}__name(Autowired,"Autowired");function Optional(name){return function(target,propertyKey,descriptor){autowiredFunc(target,name,!0,target,propertyKey,null)}}__name(Optional,"Optional");function autowiredFunc(target,name,optional,classPrototype,methodOrAttributeName,index){if(name===null){console.error("AG Grid: Autowired name should not be null");return}if(typeof index=="number"){console.error("AG Grid: Autowired should be on an attribute");return}var props=getOrCreateProps$1(target.constructor);props.agClassAttributes||(props.agClassAttributes=[]),props.agClassAttributes.push({attributeName:methodOrAttributeName,beanName:name,optional})}__name(autowiredFunc,"autowiredFunc");function Qualifier(name){return function(classPrototype,methodOrAttributeName,index){var constructor=typeof classPrototype=="function"?classPrototype:classPrototype.constructor,props;if(typeof index=="number"){var methodName=void 0;methodOrAttributeName?(props=getOrCreateProps$1(constructor),methodName=methodOrAttributeName):(props=getOrCreateProps$1(constructor),methodName="agConstructor"),props.autowireMethods||(props.autowireMethods={}),props.autowireMethods[methodName]||(props.autowireMethods[methodName]={}),props.autowireMethods[methodName][index]=name}}}__name(Qualifier,"Qualifier");function getOrCreateProps$1(target){return target.hasOwnProperty("__agBeanMetaData")||(target.__agBeanMetaData={}),target.__agBeanMetaData}__name(getOrCreateProps$1,"getOrCreateProps$1");var __decorate$2O=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2O"),__param$8=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$8"),EventService=function(){function EventService2(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}return __name(EventService2,"EventService"),EventService2.prototype.setBeans=function(gridOptionsService,frameworkOverrides,globalEventListener,globalSyncEventListener){if(globalEventListener===void 0&&(globalEventListener=null),globalSyncEventListener===void 0&&(globalSyncEventListener=null),this.frameworkOverrides=frameworkOverrides,this.gridOptionsService=gridOptionsService,globalEventListener){var async=gridOptionsService.useAsyncEvents();this.addGlobalListener(globalEventListener,async)}globalSyncEventListener&&this.addGlobalListener(globalSyncEventListener,!1)},EventService2.prototype.setFrameworkOverrides=function(frameworkOverrides){this.frameworkOverrides=frameworkOverrides},EventService2.prototype.getListeners=function(eventType,async,autoCreateListenerCollection){var listenerMap=async?this.allAsyncListeners:this.allSyncListeners,listeners=listenerMap.get(eventType);return!listeners&&autoCreateListenerCollection&&(listeners=new Set,listenerMap.set(eventType,listeners)),listeners},EventService2.prototype.noRegisteredListenersExist=function(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0},EventService2.prototype.addEventListener=function(eventType,listener,async){async===void 0&&(async=!1),this.getListeners(eventType,async,!0).add(listener)},EventService2.prototype.removeEventListener=function(eventType,listener,async){async===void 0&&(async=!1);var listeners=this.getListeners(eventType,async,!1);if(listeners&&(listeners.delete(listener),listeners.size===0)){var listenerMap=async?this.allAsyncListeners:this.allSyncListeners;listenerMap.delete(eventType)}},EventService2.prototype.addGlobalListener=function(listener,async){async===void 0&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).add(listener)},EventService2.prototype.removeGlobalListener=function(listener,async){async===void 0&&(async=!1),(async?this.globalAsyncListeners:this.globalSyncListeners).delete(listener)},EventService2.prototype.dispatchEvent=function(event){var agEvent=event;this.gridOptionsService&&this.gridOptionsService.addGridCommonParams(agEvent),this.dispatchToListeners(agEvent,!0),this.dispatchToListeners(agEvent,!1),this.firedEvents[agEvent.type]=!0},EventService2.prototype.dispatchEventOnce=function(event){this.firedEvents[event.type]||this.dispatchEvent(event)},EventService2.prototype.dispatchToListeners=function(event,async){var _this=this,_a,eventType=event.type;if(async&&"event"in event){var browserEvent=event.event;browserEvent instanceof Event&&(event.eventPath=browserEvent.composedPath())}var processEventListeners=__name(function(listeners2,originalListeners2){return listeners2.forEach(function(listener){if(originalListeners2.has(listener)){var callback=_this.frameworkOverrides?function(){return _this.frameworkOverrides.wrapIncoming(function(){return listener(event)})}:function(){return listener(event)};async?_this.dispatchAsync(callback):callback()}})},"processEventListeners"),originalListeners=(_a=this.getListeners(eventType,async,!1))!==null&&_a!==void 0?_a:new Set,listeners=new Set(originalListeners);listeners.size>0&&processEventListeners(listeners,originalListeners);var globalListeners=new Set(async?this.globalAsyncListeners:this.globalSyncListeners);globalListeners.forEach(function(listener){var callback=_this.frameworkOverrides?function(){return _this.frameworkOverrides.wrapIncoming(function(){return listener(eventType,event)})}:function(){return listener(eventType,event)};async?_this.dispatchAsync(callback):callback()})},EventService2.prototype.dispatchAsync=function(func){var _this=this;this.asyncFunctionsQueue.push(func),this.scheduled||(this.frameworkOverrides.wrapIncoming(function(){window.setTimeout(_this.flushAsyncQueue.bind(_this),0)}),this.scheduled=!0)},EventService2.prototype.flushAsyncQueue=function(){this.scheduled=!1;var queueCopy=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],queueCopy.forEach(function(func){return func()})},__decorate$2O([__param$8(0,Qualifier("gridOptionsService")),__param$8(1,Qualifier("frameworkOverrides")),__param$8(2,Qualifier("globalEventListener")),__param$8(3,Qualifier("globalSyncEventListener"))],EventService2.prototype,"setBeans",null),EventService2=__decorate$2O([Bean("eventService")],EventService2),EventService2}(),FrameworkEventListenerService=function(){function FrameworkEventListenerService2(frameworkOverrides){this.frameworkOverrides=frameworkOverrides,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}return __name(FrameworkEventListenerService2,"FrameworkEventListenerService"),FrameworkEventListenerService2.prototype.wrap=function(userListener){var _this=this,listener=userListener;return this.frameworkOverrides.shouldWrapOutgoing&&(listener=__name(function(event){_this.frameworkOverrides.wrapOutgoing(function(){return userListener(event)})},"listener"),this.wrappedListeners.set(userListener,listener)),listener},FrameworkEventListenerService2.prototype.wrapGlobal=function(userListener){var _this=this,listener=userListener;return this.frameworkOverrides.shouldWrapOutgoing&&(listener=__name(function(eventType,event){_this.frameworkOverrides.wrapOutgoing(function(){return userListener(eventType,event)})},"listener"),this.wrappedGlobalListeners.set(userListener,listener)),listener},FrameworkEventListenerService2.prototype.unwrap=function(userListener){var _a;return(_a=this.wrappedListeners.get(userListener))!==null&&_a!==void 0?_a:userListener},FrameworkEventListenerService2.prototype.unwrapGlobal=function(userListener){var _a;return(_a=this.wrappedGlobalListeners.get(userListener))!==null&&_a!==void 0?_a:userListener},FrameworkEventListenerService2}(),__decorate$2N=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2N"),COL_DEF_DEFAULTS={resizable:!0,sortable:!0},instanceIdSequence$4=0;function getNextColInstanceId(){return instanceIdSequence$4++}__name(getNextColInstanceId,"getNextColInstanceId");var Column=function(){function Column2(colDef,userProvidedColDef,colId,primary){this.instanceId=getNextColInstanceId(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new EventService,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.colId=colId,this.primary=primary,this.setState(colDef)}return __name(Column2,"Column"),Column2.prototype.getInstanceId=function(){return this.instanceId},Column2.prototype.setState=function(colDef){colDef.sort!==void 0?(colDef.sort==="asc"||colDef.sort==="desc")&&(this.sort=colDef.sort):(colDef.initialSort==="asc"||colDef.initialSort==="desc")&&(this.sort=colDef.initialSort);var sortIndex=colDef.sortIndex,initialSortIndex=colDef.initialSortIndex;sortIndex!==void 0?sortIndex!==null&&(this.sortIndex=sortIndex):initialSortIndex!==null&&(this.sortIndex=initialSortIndex);var hide=colDef.hide,initialHide=colDef.initialHide;hide!==void 0?this.visible=!hide:this.visible=!initialHide,colDef.pinned!==void 0?this.setPinned(colDef.pinned):this.setPinned(colDef.initialPinned);var flex=colDef.flex,initialFlex=colDef.initialFlex;flex!==void 0?this.flex=flex:initialFlex!==void 0&&(this.flex=initialFlex)},Column2.prototype.setColDef=function(colDef,userProvidedColDef,source){this.colDef=colDef,this.userProvidedColDef=userProvidedColDef,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",source))},Column2.prototype.getUserProvidedColDef=function(){return this.userProvidedColDef},Column2.prototype.setParent=function(parent){this.parent=parent},Column2.prototype.getParent=function(){return this.parent},Column2.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},Column2.prototype.getOriginalParent=function(){return this.originalParent},Column2.prototype.initialise=function(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()},Column2.prototype.initDotNotation=function(){var suppressDotNotation=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=exists(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!suppressDotNotation,this.tooltipFieldContainsDots=exists(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!suppressDotNotation},Column2.prototype.initMinAndMaxWidths=function(){var colDef=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(colDef),this.maxWidth=this.columnUtils.calculateColMaxWidth(colDef)},Column2.prototype.initTooltip=function(){this.tooltipEnabled=exists(this.colDef.tooltipField)||exists(this.colDef.tooltipValueGetter)||exists(this.colDef.tooltipComponent)},Column2.prototype.resetActualWidth=function(source){var initialWidth=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(initialWidth,source,!0)},Column2.prototype.isEmptyGroup=function(){return!1},Column2.prototype.isRowGroupDisplayed=function(colId){if(missing(this.colDef)||missing(this.colDef.showRowGroup))return!1;var showingAllGroups=this.colDef.showRowGroup===!0,showingThisGroup=this.colDef.showRowGroup===colId;return showingAllGroups||showingThisGroup},Column2.prototype.isPrimary=function(){return this.primary},Column2.prototype.isFilterAllowed=function(){var filterDefined=!!this.colDef.filter;return filterDefined},Column2.prototype.isFieldContainsDots=function(){return this.fieldContainsDots},Column2.prototype.isTooltipEnabled=function(){return this.tooltipEnabled},Column2.prototype.isTooltipFieldContainsDots=function(){return this.tooltipFieldContainsDots},Column2.prototype.addEventListener=function(eventType,userListener){var _a,_b;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new FrameworkEventListenerService(this.frameworkOverrides));var listener=(_b=(_a=this.frameworkEventListenerService)===null||_a===void 0?void 0:_a.wrap(userListener))!==null&&_b!==void 0?_b:userListener;this.eventService.addEventListener(eventType,listener)},Column2.prototype.removeEventListener=function(eventType,userListener){var _a,_b,listener=(_b=(_a=this.frameworkEventListenerService)===null||_a===void 0?void 0:_a.unwrap(userListener))!==null&&_b!==void 0?_b:userListener;this.eventService.removeEventListener(eventType,listener)},Column2.prototype.createColumnFunctionCallbackParams=function(rowNode){return this.gridOptionsService.addGridCommonParams({node:rowNode,data:rowNode.data,column:this,colDef:this.colDef})},Column2.prototype.isSuppressNavigable=function(rowNode){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){var params=this.createColumnFunctionCallbackParams(rowNode),userFunc=this.colDef.suppressNavigable;return userFunc(params)}return!1},Column2.prototype.isCellEditable=function(rowNode){return rowNode.group&&!this.gridOptionsService.get("enableGroupEdit")?!1:this.isColumnFunc(rowNode,this.colDef.editable)},Column2.prototype.isSuppressFillHandle=function(){return!!this.colDef.suppressFillHandle},Column2.prototype.isAutoHeight=function(){return!!this.colDef.autoHeight},Column2.prototype.isAutoHeaderHeight=function(){return!!this.colDef.autoHeaderHeight},Column2.prototype.isRowDrag=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.rowDrag)},Column2.prototype.isDndSource=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.dndSource)},Column2.prototype.isCellCheckboxSelection=function(rowNode){return this.isColumnFunc(rowNode,this.colDef.checkboxSelection)},Column2.prototype.isSuppressPaste=function(rowNode){return this.isColumnFunc(rowNode,this.colDef?this.colDef.suppressPaste:null)},Column2.prototype.isResizable=function(){return!!this.getColDefValue("resizable")},Column2.prototype.getColDefValue=function(key){var _a;return(_a=this.colDef[key])!==null&&_a!==void 0?_a:COL_DEF_DEFAULTS[key]},Column2.prototype.isColumnFunc=function(rowNode,value){if(typeof value=="boolean")return value;if(typeof value=="function"){var params=this.createColumnFunctionCallbackParams(rowNode),editableFunc=value;return editableFunc(params)}return!1},Column2.prototype.setMoving=function(moving,source){this.moving=moving,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",source))},Column2.prototype.createColumnEvent=function(type,source){return this.gridOptionsService.addGridCommonParams({type,column:this,columns:[this],source})},Column2.prototype.isMoving=function(){return this.moving},Column2.prototype.getSort=function(){return this.sort},Column2.prototype.setSort=function(sort,source){this.sort!==sort&&(this.sort=sort,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",source))),this.dispatchStateUpdatedEvent("sort")},Column2.prototype.setMenuVisible=function(visible,source){this.menuVisible!==visible&&(this.menuVisible=visible,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",source)))},Column2.prototype.isMenuVisible=function(){return this.menuVisible},Column2.prototype.isSortable=function(){return!!this.getColDefValue("sortable")},Column2.prototype.isSortAscending=function(){return this.sort==="asc"},Column2.prototype.isSortDescending=function(){return this.sort==="desc"},Column2.prototype.isSortNone=function(){return missing(this.sort)},Column2.prototype.isSorting=function(){return exists(this.sort)},Column2.prototype.getSortIndex=function(){return this.sortIndex},Column2.prototype.setSortIndex=function(sortOrder){this.sortIndex=sortOrder,this.dispatchStateUpdatedEvent("sortIndex")},Column2.prototype.setAggFunc=function(aggFunc){this.aggFunc=aggFunc,this.dispatchStateUpdatedEvent("aggFunc")},Column2.prototype.getAggFunc=function(){return this.aggFunc},Column2.prototype.getLeft=function(){return this.left},Column2.prototype.getOldLeft=function(){return this.oldLeft},Column2.prototype.getRight=function(){return this.left+this.actualWidth},Column2.prototype.setLeft=function(left,source){this.oldLeft=this.left,this.left!==left&&(this.left=left,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",source)))},Column2.prototype.isFilterActive=function(){return this.filterActive},Column2.prototype.setFilterActive=function(active,source,additionalEventAttributes){this.filterActive!==active&&(this.filterActive=active,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",source)));var filterChangedEvent=this.createColumnEvent("filterChanged",source);additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.eventService.dispatchEvent(filterChangedEvent)},Column2.prototype.isHovered=function(){return this.columnHoverService.isHovered(this)},Column2.prototype.setPinned=function(pinned){pinned===!0||pinned==="left"?this.pinned="left":pinned==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")},Column2.prototype.setFirstRightPinned=function(firstRightPinned,source){this.firstRightPinned!==firstRightPinned&&(this.firstRightPinned=firstRightPinned,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",source)))},Column2.prototype.setLastLeftPinned=function(lastLeftPinned,source){this.lastLeftPinned!==lastLeftPinned&&(this.lastLeftPinned=lastLeftPinned,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",source)))},Column2.prototype.isFirstRightPinned=function(){return this.firstRightPinned},Column2.prototype.isLastLeftPinned=function(){return this.lastLeftPinned},Column2.prototype.isPinned=function(){return this.pinned==="left"||this.pinned==="right"},Column2.prototype.isPinnedLeft=function(){return this.pinned==="left"},Column2.prototype.isPinnedRight=function(){return this.pinned==="right"},Column2.prototype.getPinned=function(){return this.pinned},Column2.prototype.setVisible=function(visible,source){var newValue=visible===!0;this.visible!==newValue&&(this.visible=newValue,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",source))),this.dispatchStateUpdatedEvent("hide")},Column2.prototype.isVisible=function(){return this.visible},Column2.prototype.isSpanHeaderHeight=function(){var colDef=this.getColDef();return!colDef.suppressSpanHeaderHeight&&!colDef.autoHeaderHeight},Column2.prototype.getColumnGroupPaddingInfo=function(){var parent=this.getParent();if(!parent||!parent.isPadding())return{numberOfParents:0,isSpanningTotal:!1};for(var numberOfParents=parent.getPaddingLevel()+1,isSpanningTotal=!0;parent;){if(!parent.isPadding()){isSpanningTotal=!1;break}parent=parent.getParent()}return{numberOfParents,isSpanningTotal}},Column2.prototype.getColDef=function(){return this.colDef},Column2.prototype.getColumnGroupShow=function(){return this.colDef.columnGroupShow},Column2.prototype.getColId=function(){return this.colId},Column2.prototype.getId=function(){return this.colId},Column2.prototype.getUniqueId=function(){return this.colId},Column2.prototype.getDefinition=function(){return this.colDef},Column2.prototype.getActualWidth=function(){return this.actualWidth},Column2.prototype.getAutoHeaderHeight=function(){return this.autoHeaderHeight},Column2.prototype.setAutoHeaderHeight=function(height){var changed=height!==this.autoHeaderHeight;return this.autoHeaderHeight=height,changed},Column2.prototype.createBaseColDefParams=function(rowNode){var params=this.gridOptionsService.addGridCommonParams({node:rowNode,data:rowNode.data,colDef:this.colDef,column:this});return params},Column2.prototype.getColSpan=function(rowNode){if(missing(this.colDef.colSpan))return 1;var params=this.createBaseColDefParams(rowNode),colSpan=this.colDef.colSpan(params);return Math.max(colSpan,1)},Column2.prototype.getRowSpan=function(rowNode){if(missing(this.colDef.rowSpan))return 1;var params=this.createBaseColDefParams(rowNode),rowSpan=this.colDef.rowSpan(params);return Math.max(rowSpan,1)},Column2.prototype.setActualWidth=function(actualWidth,source,silent){silent===void 0&&(silent=!1),this.minWidth!=null&&(actualWidth=Math.max(actualWidth,this.minWidth)),this.maxWidth!=null&&(actualWidth=Math.min(actualWidth,this.maxWidth)),this.actualWidth!==actualWidth&&(this.actualWidth=actualWidth,this.flex&&source!=="flex"&&source!=="gridInitializing"&&(this.flex=null),silent||this.fireColumnWidthChangedEvent(source)),this.dispatchStateUpdatedEvent("width")},Column2.prototype.fireColumnWidthChangedEvent=function(source){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",source))},Column2.prototype.isGreaterThanMax=function(width){return this.maxWidth!=null?width>this.maxWidth:!1},Column2.prototype.getMinWidth=function(){return this.minWidth},Column2.prototype.getMaxWidth=function(){return this.maxWidth},Column2.prototype.getFlex=function(){return this.flex||0},Column2.prototype.setFlex=function(flex){this.flex!==flex&&(this.flex=flex),this.dispatchStateUpdatedEvent("flex")},Column2.prototype.setMinimum=function(source){exists(this.minWidth)&&this.setActualWidth(this.minWidth,source)},Column2.prototype.setRowGroupActive=function(rowGroup,source){this.rowGroupActive!==rowGroup&&(this.rowGroupActive=rowGroup,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",source))),this.dispatchStateUpdatedEvent("rowGroup")},Column2.prototype.isRowGroupActive=function(){return this.rowGroupActive},Column2.prototype.setPivotActive=function(pivot,source){this.pivotActive!==pivot&&(this.pivotActive=pivot,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",source))),this.dispatchStateUpdatedEvent("pivot")},Column2.prototype.isPivotActive=function(){return this.pivotActive},Column2.prototype.isAnyFunctionActive=function(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()},Column2.prototype.isAnyFunctionAllowed=function(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()},Column2.prototype.setValueActive=function(value,source){this.aggregationActive!==value&&(this.aggregationActive=value,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",source)))},Column2.prototype.isValueActive=function(){return this.aggregationActive},Column2.prototype.isAllowPivot=function(){return this.colDef.enablePivot===!0},Column2.prototype.isAllowValue=function(){return this.colDef.enableValue===!0},Column2.prototype.isAllowRowGroup=function(){return this.colDef.enableRowGroup===!0},Column2.prototype.getMenuTabs=function(defaultValues){warnOnce("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");var menuTabs=this.getColDef().menuTabs;return menuTabs==null&&(menuTabs=defaultValues),menuTabs},Column2.prototype.dispatchStateUpdatedEvent=function(key){this.eventService.dispatchEvent({type:Column2.EVENT_STATE_UPDATED,key})},Column2.EVENT_MOVING_CHANGED="movingChanged",Column2.EVENT_LEFT_CHANGED="leftChanged",Column2.EVENT_WIDTH_CHANGED="widthChanged",Column2.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",Column2.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",Column2.EVENT_VISIBLE_CHANGED="visibleChanged",Column2.EVENT_FILTER_CHANGED="filterChanged",Column2.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",Column2.EVENT_SORT_CHANGED="sortChanged",Column2.EVENT_COL_DEF_CHANGED="colDefChanged",Column2.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",Column2.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",Column2.EVENT_PIVOT_CHANGED="columnPivotChanged",Column2.EVENT_VALUE_CHANGED="columnValueChanged",Column2.EVENT_STATE_UPDATED="columnStateUpdated",__decorate$2N([Autowired("gridOptionsService")],Column2.prototype,"gridOptionsService",void 0),__decorate$2N([Autowired("columnUtils")],Column2.prototype,"columnUtils",void 0),__decorate$2N([Autowired("columnHoverService")],Column2.prototype,"columnHoverService",void 0),__decorate$2N([Autowired("frameworkOverrides")],Column2.prototype,"frameworkOverrides",void 0),__decorate$2N([PostConstruct],Column2.prototype,"initialise",null),Column2}(),__decorate$2M=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2M"),ProvidedColumnGroup=function(){function ProvidedColumnGroup2(colGroupDef,groupId,padding,level){this.localEventService=new EventService,this.expandable=!1,this.instanceId=getNextColInstanceId(),this.expandableListenerRemoveCallback=null,this.colGroupDef=colGroupDef,this.groupId=groupId,this.expanded=!!colGroupDef&&!!colGroupDef.openByDefault,this.padding=padding,this.level=level}return __name(ProvidedColumnGroup2,"ProvidedColumnGroup"),ProvidedColumnGroup2.prototype.destroy=function(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)},ProvidedColumnGroup2.prototype.reset=function(colGroupDef,level){this.colGroupDef=colGroupDef,this.level=level,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0},ProvidedColumnGroup2.prototype.getInstanceId=function(){return this.instanceId},ProvidedColumnGroup2.prototype.setOriginalParent=function(originalParent){this.originalParent=originalParent},ProvidedColumnGroup2.prototype.getOriginalParent=function(){return this.originalParent},ProvidedColumnGroup2.prototype.getLevel=function(){return this.level},ProvidedColumnGroup2.prototype.isVisible=function(){return this.children?this.children.some(function(child){return child.isVisible()}):!1},ProvidedColumnGroup2.prototype.isPadding=function(){return this.padding},ProvidedColumnGroup2.prototype.setExpanded=function(expanded){this.expanded=expanded===void 0?!1:expanded;var event={type:ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED};this.localEventService.dispatchEvent(event)},ProvidedColumnGroup2.prototype.isExpandable=function(){return this.expandable},ProvidedColumnGroup2.prototype.isExpanded=function(){return this.expanded},ProvidedColumnGroup2.prototype.getGroupId=function(){return this.groupId},ProvidedColumnGroup2.prototype.getId=function(){return this.getGroupId()},ProvidedColumnGroup2.prototype.setChildren=function(children){this.children=children},ProvidedColumnGroup2.prototype.getChildren=function(){return this.children},ProvidedColumnGroup2.prototype.getColGroupDef=function(){return this.colGroupDef},ProvidedColumnGroup2.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ProvidedColumnGroup2.prototype.addLeafColumns=function(leafColumns){this.children&&this.children.forEach(function(child){child instanceof Column?leafColumns.push(child):child instanceof ProvidedColumnGroup2&&child.addLeafColumns(leafColumns)})},ProvidedColumnGroup2.prototype.getColumnGroupShow=function(){var colGroupDef=this.colGroupDef;if(colGroupDef)return colGroupDef.columnGroupShow},ProvidedColumnGroup2.prototype.setupExpandable=function(){var _this=this;this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();var listener=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(function(col){return col.addEventListener("visibleChanged",listener)}),this.expandableListenerRemoveCallback=function(){_this.getLeafColumns().forEach(function(col){return col.removeEventListener("visibleChanged",listener)}),_this.expandableListenerRemoveCallback=null}},ProvidedColumnGroup2.prototype.setExpandable=function(){if(!this.isPadding()){for(var atLeastOneShowingWhenOpen=!1,atLeastOneShowingWhenClosed=!1,atLeastOneChangeable=!1,children=this.findChildrenRemovingPadding(),i=0,j=children.length;i<j;i++){var abstractColumn=children[i];if(abstractColumn.isVisible()){var headerGroupShow=abstractColumn.getColumnGroupShow();headerGroupShow==="open"?(atLeastOneShowingWhenOpen=!0,atLeastOneChangeable=!0):headerGroupShow==="closed"?(atLeastOneShowingWhenClosed=!0,atLeastOneChangeable=!0):(atLeastOneShowingWhenOpen=!0,atLeastOneShowingWhenClosed=!0)}}var expandable=atLeastOneShowingWhenOpen&&atLeastOneShowingWhenClosed&&atLeastOneChangeable;if(this.expandable!==expandable){this.expandable=expandable;var event_1={type:ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED};this.localEventService.dispatchEvent(event_1)}}},ProvidedColumnGroup2.prototype.findChildrenRemovingPadding=function(){var res=[],process=__name(function(items){items.forEach(function(item){var skipBecausePadding=item instanceof ProvidedColumnGroup2&&item.isPadding();skipBecausePadding?process(item.children):res.push(item)})},"process");return process(this.children),res},ProvidedColumnGroup2.prototype.onColumnVisibilityChanged=function(){this.setExpandable()},ProvidedColumnGroup2.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ProvidedColumnGroup2.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ProvidedColumnGroup2.EVENT_EXPANDED_CHANGED="expandedChanged",ProvidedColumnGroup2.EVENT_EXPANDABLE_CHANGED="expandableChanged",__decorate$2M([PreDestroy],ProvidedColumnGroup2.prototype,"destroy",null),ProvidedColumnGroup2}(),DefaultColumnTypes={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function existsAndNotEmpty(value){return value!=null&&value.length>0}__name(existsAndNotEmpty,"existsAndNotEmpty");function last(arr){if(!(!arr||!arr.length))return arr[arr.length-1]}__name(last,"last");function areEqual(a,b,comparator){return a==null&&b==null?!0:a!=null&&b!=null&&a.length===b.length&&a.every(function(value,index){return comparator?comparator(value,b[index]):b[index]===value})}__name(areEqual,"areEqual");function shallowCompare(arr1,arr2){return areEqual(arr1,arr2)}__name(shallowCompare,"shallowCompare");function sortNumerically(array){return array.sort(function(a,b){return a-b})}__name(sortNumerically,"sortNumerically");function removeRepeatsFromArray(array,object){if(array)for(var index=array.length-2;index>=0;index--){var thisOneMatches=array[index]===object,nextOneMatches=array[index+1]===object;thisOneMatches&&nextOneMatches&&array.splice(index+1,1)}}__name(removeRepeatsFromArray,"removeRepeatsFromArray");function removeFromUnorderedArray(array,object){var index=array.indexOf(object);index>=0&&(array[index]=array[array.length-1],array.pop())}__name(removeFromUnorderedArray,"removeFromUnorderedArray");function removeFromArray(array,object){var index=array.indexOf(object);index>=0&&array.splice(index,1)}__name(removeFromArray,"removeFromArray");function removeAllFromUnorderedArray(array,toRemove){for(var i=0;i<toRemove.length;i++)removeFromUnorderedArray(array,toRemove[i])}__name(removeAllFromUnorderedArray,"removeAllFromUnorderedArray");function removeAllFromArray(array,toRemove){for(var i=0;i<toRemove.length;i++)removeFromArray(array,toRemove[i])}__name(removeAllFromArray,"removeAllFromArray");function insertIntoArray(array,object,toIndex){array.splice(toIndex,0,object)}__name(insertIntoArray,"insertIntoArray");function insertArrayIntoArray(dest,src,toIndex){if(!(dest==null||src==null))for(var i=src.length-1;i>=0;i--){var item=src[i];insertIntoArray(dest,item,toIndex)}}__name(insertArrayIntoArray,"insertArrayIntoArray");function moveInArray(array,objectsToMove,toIndex){removeAllFromArray(array,objectsToMove),objectsToMove.slice().reverse().forEach(function(obj){return insertIntoArray(array,obj,toIndex)})}__name(moveInArray,"moveInArray");function includes(array,value){return array.indexOf(value)>-1}__name(includes,"includes");function flatten(arrayOfArrays){return[].concat.apply([],arrayOfArrays)}__name(flatten,"flatten");function pushAll(target,source){source==null||target==null||source.forEach(function(value){return target.push(value)})}__name(pushAll,"pushAll");function toStrings(array){return array.map(toStringOrNull)}__name(toStrings,"toStrings");function forEachReverse(list,action){if(list!=null)for(var i=list.length-1;i>=0;i--)action(list[i],i)}__name(forEachReverse,"forEachReverse");var ArrayUtils=Object.freeze({__proto__:null,existsAndNotEmpty,last,areEqual,shallowCompare,sortNumerically,removeRepeatsFromArray,removeFromUnorderedArray,removeFromArray,removeAllFromUnorderedArray,removeAllFromArray,insertIntoArray,insertArrayIntoArray,moveInArray,includes,flatten,pushAll,toStrings,forEachReverse}),AG_GRID_STOP_PROPAGATION="__ag_Grid_Stop_Propagation",PASSIVE_EVENTS$1=["touchstart","touchend","touchmove","touchcancel","scroll"],supports={};function stopPropagationForAgGrid(event){event[AG_GRID_STOP_PROPAGATION]=!0}__name(stopPropagationForAgGrid,"stopPropagationForAgGrid");function isStopPropagationForAgGrid(event){return event[AG_GRID_STOP_PROPAGATION]===!0}__name(isStopPropagationForAgGrid,"isStopPropagationForAgGrid");var isEventSupported=function(){var tags={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},eventChecker=__name(function(eventName){if(typeof supports[eventName]=="boolean")return supports[eventName];var el=document.createElement(tags[eventName]||"div");return eventName="on"+eventName,supports[eventName]=eventName in el},"eventChecker");return eventChecker}();function getCtrlForEventTarget(gridOptionsService,eventTarget,type){for(var sourceElement=eventTarget;sourceElement;){var renderedComp=gridOptionsService.getDomData(sourceElement,type);if(renderedComp)return renderedComp;sourceElement=sourceElement.parentElement}return null}__name(getCtrlForEventTarget,"getCtrlForEventTarget");function isElementInEventPath(element,event){return!event||!element?!1:getEventPath(event).indexOf(element)>=0}__name(isElementInEventPath,"isElementInEventPath");function createEventPath(event){for(var res=[],pointer=event.target;pointer;)res.push(pointer),pointer=pointer.parentElement;return res}__name(createEventPath,"createEventPath");function getEventPath(event){var eventNoType=event;return eventNoType.path?eventNoType.path:eventNoType.composedPath?eventNoType.composedPath():createEventPath(eventNoType)}__name(getEventPath,"getEventPath");function addSafePassiveEventListener(frameworkOverrides,eElement,event,listener){var isPassive=includes(PASSIVE_EVENTS$1,event),options=isPassive?{passive:!0}:void 0;frameworkOverrides&&frameworkOverrides.addEventListener&&frameworkOverrides.addEventListener(eElement,event,listener,options)}__name(addSafePassiveEventListener,"addSafePassiveEventListener");var EventUtils=Object.freeze({__proto__:null,stopPropagationForAgGrid,isStopPropagationForAgGrid,isEventSupported,getCtrlForEventTarget,isElementInEventPath,createEventPath,getEventPath,addSafePassiveEventListener}),__decorate$2L=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2L"),BeanStub=function(){function BeanStub2(){var _this=this;this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=function(){return!_this.destroyed}}return __name(BeanStub2,"BeanStub"),BeanStub2.prototype.getFrameworkOverrides=function(){return this.frameworkOverrides},BeanStub2.prototype.getContext=function(){return this.context},BeanStub2.prototype.destroy=function(){this.destroyFunctions.forEach(function(func){return func()}),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:BeanStub2.EVENT_DESTROYED})},BeanStub2.prototype.addEventListener=function(eventType,listener){this.localEventService||(this.localEventService=new EventService),this.localEventService.addEventListener(eventType,listener)},BeanStub2.prototype.removeEventListener=function(eventType,listener){this.localEventService&&this.localEventService.removeEventListener(eventType,listener)},BeanStub2.prototype.dispatchEvent=function(event){this.localEventService&&this.localEventService.dispatchEvent(event)},BeanStub2.prototype.addManagedListener=function(object,event,listener){var _this=this;if(!this.destroyed){object instanceof HTMLElement?addSafePassiveEventListener(this.getFrameworkOverrides(),object,event,listener):object.addEventListener(event,listener);var destroyFunc=__name(function(){return object.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter(function(fn){return fn!==destroyFunc}),null},"destroyFunc");return this.destroyFunctions.push(destroyFunc),destroyFunc}},BeanStub2.prototype.setupGridOptionListener=function(event,listener){var _this=this;this.gridOptionsService.addEventListener(event,listener);var destroyFunc=__name(function(){return _this.gridOptionsService.removeEventListener(event,listener),_this.destroyFunctions=_this.destroyFunctions.filter(function(fn){return fn!==destroyFunc}),null},"destroyFunc");return this.destroyFunctions.push(destroyFunc),destroyFunc},BeanStub2.prototype.addManagedPropertyListener=function(event,listener){return this.destroyed?function(){return null}:this.setupGridOptionListener(event,listener)},BeanStub2.prototype.addManagedPropertyListeners=function(events,listener){var _this=this;if(!this.destroyed){var eventsKey=events.join("-")+this.propertyListenerId++,wrappedListener=__name(function(event){if(event.changeSet){if(event.changeSet&&event.changeSet.id===_this.lastChangeSetIdLookup[eventsKey])return;_this.lastChangeSetIdLookup[eventsKey]=event.changeSet.id}var propertiesChangeEvent={type:"gridPropertyChanged",changeSet:event.changeSet,source:event.source};listener(propertiesChangeEvent)},"wrappedListener");events.forEach(function(event){return _this.setupGridOptionListener(event,wrappedListener)})}},BeanStub2.prototype.addDestroyFunc=function(func){this.isAlive()?this.destroyFunctions.push(func):func()},BeanStub2.prototype.createManagedBean=function(bean,context){var res=this.createBean(bean,context);return this.addDestroyFunc(this.destroyBean.bind(this,bean,context)),res},BeanStub2.prototype.createBean=function(bean,context,afterPreCreateCallback){return(context||this.getContext()).createBean(bean,afterPreCreateCallback)},BeanStub2.prototype.destroyBean=function(bean,context){return(context||this.getContext()).destroyBean(bean)},BeanStub2.prototype.destroyBeans=function(beans,context){var _this=this;return beans&&beans.forEach(function(bean){return _this.destroyBean(bean,context)}),[]},BeanStub2.EVENT_DESTROYED="destroyed",__decorate$2L([Autowired("frameworkOverrides")],BeanStub2.prototype,"frameworkOverrides",void 0),__decorate$2L([Autowired("context")],BeanStub2.prototype,"context",void 0),__decorate$2L([Autowired("eventService")],BeanStub2.prototype,"eventService",void 0),__decorate$2L([Autowired("gridOptionsService")],BeanStub2.prototype,"gridOptionsService",void 0),__decorate$2L([Autowired("localeService")],BeanStub2.prototype,"localeService",void 0),__decorate$2L([Autowired("environment")],BeanStub2.prototype,"environment",void 0),__decorate$2L([PreDestroy],BeanStub2.prototype,"destroy",null),BeanStub2}(),__extends$3g=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2K=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2K"),__param$7=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$7"),ColumnFactory=function(_super){__extends$3g(ColumnFactory2,_super);function ColumnFactory2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ColumnFactory2,"ColumnFactory"),ColumnFactory2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ColumnFactory")},ColumnFactory2.prototype.createColumnTree=function(defs,primaryColumns,existingTree,source){var columnKeyCreator=new ColumnKeyCreator,_a=this.extractExistingTreeData(existingTree),existingCols=_a.existingCols,existingGroups=_a.existingGroups,existingColKeys=_a.existingColKeys;columnKeyCreator.addExistingKeys(existingColKeys);var unbalancedTree=this.recursivelyCreateColumns(defs,0,primaryColumns,existingCols,columnKeyCreator,existingGroups,source),treeDept=this.findMaxDept(unbalancedTree,0);this.logger.log("Number of levels for grouped columns is "+treeDept);var columnTree=this.balanceColumnTree(unbalancedTree,0,treeDept,columnKeyCreator),deptFirstCallback=__name(function(child,parent){child instanceof ProvidedColumnGroup&&child.setupExpandable(),child.setOriginalParent(parent)},"deptFirstCallback");return this.columnUtils.depthFirstOriginalTreeSearch(null,columnTree,deptFirstCallback),{columnTree,treeDept}},ColumnFactory2.prototype.extractExistingTreeData=function(existingTree){var existingCols=[],existingGroups=[],existingColKeys=[];return existingTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,existingTree,function(item){if(item instanceof ProvidedColumnGroup){var group=item;existingGroups.push(group)}else{var col=item;existingColKeys.push(col.getId()),existingCols.push(col)}}),{existingCols,existingGroups,existingColKeys}},ColumnFactory2.prototype.createForAutoGroups=function(autoGroupCols,gridBalancedTree){var _this=this;return autoGroupCols.map(function(col){return _this.createAutoGroupTreeItem(gridBalancedTree,col)})},ColumnFactory2.prototype.createAutoGroupTreeItem=function(balancedColumnTree,column){for(var dept=this.findDepth(balancedColumnTree),nextChild=column,i=dept-1;i>=0;i--){var autoGroup=new ProvidedColumnGroup(null,"FAKE_PATH_".concat(column.getId(),"}_").concat(i),!0,i);this.createBean(autoGroup),autoGroup.setChildren([nextChild]),nextChild.setOriginalParent(autoGroup),nextChild=autoGroup}return dept===0&&column.setOriginalParent(null),nextChild},ColumnFactory2.prototype.findDepth=function(balancedColumnTree){for(var dept=0,pointer=balancedColumnTree;pointer&&pointer[0]&&pointer[0]instanceof ProvidedColumnGroup;)dept++,pointer=pointer[0].getChildren();return dept},ColumnFactory2.prototype.balanceColumnTree=function(unbalancedTree,currentDept,columnDept,columnKeyCreator){for(var result=[],i=0;i<unbalancedTree.length;i++){var child=unbalancedTree[i];if(child instanceof ProvidedColumnGroup){var originalGroup=child,newChildren=this.balanceColumnTree(originalGroup.getChildren(),currentDept+1,columnDept,columnKeyCreator);originalGroup.setChildren(newChildren),result.push(originalGroup)}else{for(var firstPaddedGroup=void 0,currentPaddedGroup=void 0,j=columnDept-1;j>=currentDept;j--){var newColId=columnKeyCreator.getUniqueKey(null,null),colGroupDefMerged=this.createMergedColGroupDef(null),paddedGroup=new ProvidedColumnGroup(colGroupDefMerged,newColId,!0,currentDept);this.createBean(paddedGroup),currentPaddedGroup&&currentPaddedGroup.setChildren([paddedGroup]),currentPaddedGroup=paddedGroup,firstPaddedGroup||(firstPaddedGroup=currentPaddedGroup)}if(firstPaddedGroup&&currentPaddedGroup){result.push(firstPaddedGroup);var hasGroups=unbalancedTree.some(function(leaf){return leaf instanceof ProvidedColumnGroup});if(hasGroups){currentPaddedGroup.setChildren([child]);continue}else{currentPaddedGroup.setChildren(unbalancedTree);break}}result.push(child)}}return result},ColumnFactory2.prototype.findMaxDept=function(treeChildren,dept){for(var maxDeptThisLevel=dept,i=0;i<treeChildren.length;i++){var abstractColumn=treeChildren[i];if(abstractColumn instanceof ProvidedColumnGroup){var originalGroup=abstractColumn,newDept=this.findMaxDept(originalGroup.getChildren(),dept+1);maxDeptThisLevel<newDept&&(maxDeptThisLevel=newDept)}}return maxDeptThisLevel},ColumnFactory2.prototype.recursivelyCreateColumns=function(defs,level,primaryColumns,existingColsCopy,columnKeyCreator,existingGroups,source){if(!defs)return[];for(var result=new Array(defs.length),i=0;i<result.length;i++){var def=defs[i];this.isColumnGroup(def)?result[i]=this.createColumnGroup(primaryColumns,def,level,existingColsCopy,columnKeyCreator,existingGroups,source):result[i]=this.createColumn(primaryColumns,def,existingColsCopy,columnKeyCreator,source)}return result},ColumnFactory2.prototype.createColumnGroup=function(primaryColumns,colGroupDef,level,existingColumns,columnKeyCreator,existingGroups,source){var colGroupDefMerged=this.createMergedColGroupDef(colGroupDef),groupId=columnKeyCreator.getUniqueKey(colGroupDefMerged.groupId||null,null),providedGroup=new ProvidedColumnGroup(colGroupDefMerged,groupId,!1,level);this.createBean(providedGroup);var existingGroupAndIndex=this.findExistingGroup(colGroupDef,existingGroups);existingGroupAndIndex&&existingGroups.splice(existingGroupAndIndex.idx,1);var existingGroup=existingGroupAndIndex==null?void 0:existingGroupAndIndex.group;existingGroup&&providedGroup.setExpanded(existingGroup.isExpanded());var children=this.recursivelyCreateColumns(colGroupDefMerged.children,level+1,primaryColumns,existingColumns,columnKeyCreator,existingGroups,source);return providedGroup.setChildren(children),providedGroup},ColumnFactory2.prototype.createMergedColGroupDef=function(colGroupDef){var colGroupDefMerged={};return Object.assign(colGroupDefMerged,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(colGroupDefMerged,colGroupDef),colGroupDefMerged},ColumnFactory2.prototype.createColumn=function(primaryColumns,colDef,existingColsCopy,columnKeyCreator,source){var existingColAndIndex=this.findExistingColumn(colDef,existingColsCopy);existingColAndIndex&&(existingColsCopy==null||existingColsCopy.splice(existingColAndIndex.idx,1));var column=existingColAndIndex==null?void 0:existingColAndIndex.column;if(column){var colDefMerged=this.addColumnDefaultAndTypes(colDef,column.getColId());column.setColDef(colDefMerged,colDef,source),this.applyColumnState(column,colDefMerged,source)}else{var colId=columnKeyCreator.getUniqueKey(colDef.colId,colDef.field),colDefMerged=this.addColumnDefaultAndTypes(colDef,colId);column=new Column(colDefMerged,colDef,colId,primaryColumns),this.context.createBean(column)}return this.dataTypeService.addColumnListeners(column),column},ColumnFactory2.prototype.applyColumnState=function(column,colDef,source){var flex=attrToNumber(colDef.flex);flex!==void 0&&column.setFlex(flex);var noFlexThisCol=column.getFlex()<=0;if(noFlexThisCol){var width=attrToNumber(colDef.width);if(width!=null)column.setActualWidth(width,source);else{var widthBeforeUpdate=column.getActualWidth();column.setActualWidth(widthBeforeUpdate,source)}}colDef.sort!==void 0&&(colDef.sort=="asc"||colDef.sort=="desc"?column.setSort(colDef.sort,source):column.setSort(void 0,source));var sortIndex=attrToNumber(colDef.sortIndex);sortIndex!==void 0&&column.setSortIndex(sortIndex);var hide=attrToBoolean(colDef.hide);hide!==void 0&&column.setVisible(!hide,source),colDef.pinned!==void 0&&column.setPinned(colDef.pinned)},ColumnFactory2.prototype.findExistingColumn=function(newColDef,existingColsCopy){if(existingColsCopy)for(var i=0;i<existingColsCopy.length;i++){var def=existingColsCopy[i].getUserProvidedColDef();if(def){var newHasId=newColDef.colId!=null;if(newHasId){if(existingColsCopy[i].getId()===newColDef.colId)return{idx:i,column:existingColsCopy[i]};continue}var newHasField=newColDef.field!=null;if(newHasField){if(def.field===newColDef.field)return{idx:i,column:existingColsCopy[i]};continue}if(def===newColDef)return{idx:i,column:existingColsCopy[i]}}}},ColumnFactory2.prototype.findExistingGroup=function(newGroupDef,existingGroups){var newHasId=newGroupDef.groupId!=null;if(newHasId)for(var i=0;i<existingGroups.length;i++){var existingGroup=existingGroups[i],existingDef=existingGroup.getColGroupDef();if(existingDef&&existingGroup.getId()===newGroupDef.groupId)return{idx:i,group:existingGroup}}},ColumnFactory2.prototype.addColumnDefaultAndTypes=function(colDef,colId){var res={},defaultColDef=this.gridOptionsService.get("defaultColDef");mergeDeep(res,defaultColDef,!1,!0);var columnType=this.dataTypeService.updateColDefAndGetColumnType(res,colDef,colId);columnType&&this.assignColumnTypes(columnType,res),mergeDeep(res,colDef,!1,!0);var autoGroupColDef=this.gridOptionsService.get("autoGroupColumnDef"),isSortingCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup();return colDef.rowGroup&&autoGroupColDef&&isSortingCoupled&&mergeDeep(res,{sort:autoGroupColDef.sort,initialSort:autoGroupColDef.initialSort},!1,!0),this.dataTypeService.validateColDef(res),res},ColumnFactory2.prototype.assignColumnTypes=function(typeKeys,colDefMerged){if(typeKeys.length){var allColumnTypes=Object.assign({},DefaultColumnTypes),userTypes=this.gridOptionsService.get("columnTypes")||{};iterateObject(userTypes,function(key,value){if(key in allColumnTypes)console.warn("AG Grid: the column type '".concat(key,"' is a default column type and cannot be overridden."));else{var colType=value;colType.type&&warnOnce("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),allColumnTypes[key]=value}}),typeKeys.forEach(function(t){var typeColDef=allColumnTypes[t.trim()];typeColDef?mergeDeep(colDefMerged,typeColDef,!1,!0):console.warn("AG Grid: colDef.type '"+t+"' does not correspond to defined gridOptions.columnTypes")})}},ColumnFactory2.prototype.isColumnGroup=function(abstractColDef){return abstractColDef.children!==void 0},__decorate$2K([Autowired("columnUtils")],ColumnFactory2.prototype,"columnUtils",void 0),__decorate$2K([Autowired("dataTypeService")],ColumnFactory2.prototype,"dataTypeService",void 0),__decorate$2K([__param$7(0,Qualifier("loggerFactory"))],ColumnFactory2.prototype,"setBeans",null),ColumnFactory2=__decorate$2K([Bean("columnFactory")],ColumnFactory2),ColumnFactory2}(BeanStub),__decorate$2J=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2J"),ColumnGroup=function(){function ColumnGroup2(providedColumnGroup,groupId,partId,pinned){this.displayedChildren=[],this.localEventService=new EventService,this.groupId=groupId,this.partId=partId,this.providedColumnGroup=providedColumnGroup,this.pinned=pinned}return __name(ColumnGroup2,"ColumnGroup"),ColumnGroup2.createUniqueId=function(groupId,instanceId){return groupId+"_"+instanceId},ColumnGroup2.prototype.reset=function(){this.parent=null,this.children=null,this.displayedChildren=null},ColumnGroup2.prototype.getParent=function(){return this.parent},ColumnGroup2.prototype.setParent=function(parent){this.parent=parent},ColumnGroup2.prototype.getUniqueId=function(){return ColumnGroup2.createUniqueId(this.groupId,this.partId)},ColumnGroup2.prototype.isEmptyGroup=function(){return this.displayedChildren.length===0},ColumnGroup2.prototype.isMoving=function(){var allLeafColumns=this.getProvidedColumnGroup().getLeafColumns();return!allLeafColumns||allLeafColumns.length===0?!1:allLeafColumns.every(function(col){return col.isMoving()})},ColumnGroup2.prototype.checkLeft=function(){if(this.displayedChildren.forEach(function(child){child instanceof ColumnGroup2&&child.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){var lastChild=last(this.displayedChildren),lastChildLeft=lastChild.getLeft();this.setLeft(lastChildLeft)}else{var firstChildLeft=this.displayedChildren[0].getLeft();this.setLeft(firstChildLeft)}else this.setLeft(null)},ColumnGroup2.prototype.getLeft=function(){return this.left},ColumnGroup2.prototype.getOldLeft=function(){return this.oldLeft},ColumnGroup2.prototype.setLeft=function(left){this.oldLeft=this.left,this.left!==left&&(this.left=left,this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_LEFT_CHANGED)))},ColumnGroup2.prototype.getPinned=function(){return this.pinned},ColumnGroup2.prototype.createAgEvent=function(type){return{type}},ColumnGroup2.prototype.addEventListener=function(eventType,listener){this.localEventService.addEventListener(eventType,listener)},ColumnGroup2.prototype.removeEventListener=function(eventType,listener){this.localEventService.removeEventListener(eventType,listener)},ColumnGroup2.prototype.getGroupId=function(){return this.groupId},ColumnGroup2.prototype.getPartId=function(){return this.partId},ColumnGroup2.prototype.isChildInThisGroupDeepSearch=function(wantedChild){var result=!1;return this.children.forEach(function(foundChild){wantedChild===foundChild&&(result=!0),foundChild instanceof ColumnGroup2&&foundChild.isChildInThisGroupDeepSearch(wantedChild)&&(result=!0)}),result},ColumnGroup2.prototype.getActualWidth=function(){var groupActualWidth=0;return this.displayedChildren&&this.displayedChildren.forEach(function(child){groupActualWidth+=child.getActualWidth()}),groupActualWidth},ColumnGroup2.prototype.isResizable=function(){if(!this.displayedChildren)return!1;var result=!1;return this.displayedChildren.forEach(function(child){child.isResizable()&&(result=!0)}),result},ColumnGroup2.prototype.getMinWidth=function(){var result=0;return this.displayedChildren.forEach(function(groupChild){result+=groupChild.getMinWidth()||0}),result},ColumnGroup2.prototype.addChild=function(child){this.children||(this.children=[]),this.children.push(child)},ColumnGroup2.prototype.getDisplayedChildren=function(){return this.displayedChildren},ColumnGroup2.prototype.getLeafColumns=function(){var result=[];return this.addLeafColumns(result),result},ColumnGroup2.prototype.getDisplayedLeafColumns=function(){var result=[];return this.addDisplayedLeafColumns(result),result},ColumnGroup2.prototype.getDefinition=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup2.prototype.getColGroupDef=function(){return this.providedColumnGroup.getColGroupDef()},ColumnGroup2.prototype.isPadding=function(){return this.providedColumnGroup.isPadding()},ColumnGroup2.prototype.isExpandable=function(){return this.providedColumnGroup.isExpandable()},ColumnGroup2.prototype.isExpanded=function(){return this.providedColumnGroup.isExpanded()},ColumnGroup2.prototype.setExpanded=function(expanded){this.providedColumnGroup.setExpanded(expanded)},ColumnGroup2.prototype.addDisplayedLeafColumns=function(leafColumns){this.displayedChildren.forEach(function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup2&&child.addDisplayedLeafColumns(leafColumns)})},ColumnGroup2.prototype.addLeafColumns=function(leafColumns){this.children.forEach(function(child){child instanceof Column?leafColumns.push(child):child instanceof ColumnGroup2&&child.addLeafColumns(leafColumns)})},ColumnGroup2.prototype.getChildren=function(){return this.children},ColumnGroup2.prototype.getColumnGroupShow=function(){return this.providedColumnGroup.getColumnGroupShow()},ColumnGroup2.prototype.getProvidedColumnGroup=function(){return this.providedColumnGroup},ColumnGroup2.prototype.getPaddingLevel=function(){var parent=this.getParent();return!this.isPadding()||!parent||!parent.isPadding()?0:1+parent.getPaddingLevel()},ColumnGroup2.prototype.calculateDisplayedColumns=function(){var _this=this;this.displayedChildren=[];for(var parentWithExpansion=this;parentWithExpansion!=null&&parentWithExpansion.isPadding();)parentWithExpansion=parentWithExpansion.getParent();var isExpandable=parentWithExpansion?parentWithExpansion.providedColumnGroup.isExpandable():!1;if(!isExpandable){this.displayedChildren=this.children,this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED));return}this.children.forEach(function(child){var emptyGroup=child instanceof ColumnGroup2&&(!child.displayedChildren||!child.displayedChildren.length);if(!emptyGroup){var headerGroupShow=child.getColumnGroupShow();switch(headerGroupShow){case"open":parentWithExpansion.providedColumnGroup.isExpanded()&&_this.displayedChildren.push(child);break;case"closed":parentWithExpansion.providedColumnGroup.isExpanded()||_this.displayedChildren.push(child);break;default:_this.displayedChildren.push(child);break}}}),this.localEventService.dispatchEvent(this.createAgEvent(ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED))},ColumnGroup2.EVENT_LEFT_CHANGED="leftChanged",ColumnGroup2.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",__decorate$2J([Autowired("gridOptionsService")],ColumnGroup2.prototype,"gridOptionsService",void 0),ColumnGroup2}(),Events=function(){function Events2(){}return __name(Events2,"Events"),Events2.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",Events2.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",Events2.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",Events2.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",Events2.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",Events2.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",Events2.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",Events2.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",Events2.EVENT_COLUMN_MOVED="columnMoved",Events2.EVENT_COLUMN_VISIBLE="columnVisible",Events2.EVENT_COLUMN_PINNED="columnPinned",Events2.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",Events2.EVENT_COLUMN_RESIZED="columnResized",Events2.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",Events2.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns",Events2.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide",Events2.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation",Events2.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",Events2.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver",Events2.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave",Events2.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked",Events2.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu",Events2.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",Events2.EVENT_ROW_GROUP_OPENED="rowGroupOpened",Events2.EVENT_ROW_DATA_UPDATED="rowDataUpdated",Events2.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",Events2.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",Events2.EVENT_CHART_CREATED="chartCreated",Events2.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",Events2.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",Events2.EVENT_CHART_DESTROYED="chartDestroyed",Events2.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",Events2.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",Events2.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",Events2.EVENT_MODEL_UPDATED="modelUpdated",Events2.EVENT_CUT_START="cutStart",Events2.EVENT_CUT_END="cutEnd",Events2.EVENT_PASTE_START="pasteStart",Events2.EVENT_PASTE_END="pasteEnd",Events2.EVENT_FILL_START="fillStart",Events2.EVENT_FILL_END="fillEnd",Events2.EVENT_RANGE_DELETE_START="rangeDeleteStart",Events2.EVENT_RANGE_DELETE_END="rangeDeleteEnd",Events2.EVENT_UNDO_STARTED="undoStarted",Events2.EVENT_UNDO_ENDED="undoEnded",Events2.EVENT_REDO_STARTED="redoStarted",Events2.EVENT_REDO_ENDED="redoEnded",Events2.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",Events2.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",Events2.EVENT_CELL_CLICKED="cellClicked",Events2.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",Events2.EVENT_CELL_MOUSE_DOWN="cellMouseDown",Events2.EVENT_CELL_CONTEXT_MENU="cellContextMenu",Events2.EVENT_CELL_VALUE_CHANGED="cellValueChanged",Events2.EVENT_CELL_EDIT_REQUEST="cellEditRequest",Events2.EVENT_ROW_VALUE_CHANGED="rowValueChanged",Events2.EVENT_CELL_FOCUSED="cellFocused",Events2.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",Events2.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",Events2.EVENT_ROW_SELECTED="rowSelected",Events2.EVENT_SELECTION_CHANGED="selectionChanged",Events2.EVENT_TOOLTIP_SHOW="tooltipShow",Events2.EVENT_TOOLTIP_HIDE="tooltipHide",Events2.EVENT_CELL_KEY_DOWN="cellKeyDown",Events2.EVENT_CELL_MOUSE_OVER="cellMouseOver",Events2.EVENT_CELL_MOUSE_OUT="cellMouseOut",Events2.EVENT_FILTER_CHANGED="filterChanged",Events2.EVENT_FILTER_MODIFIED="filterModified",Events2.EVENT_FILTER_OPENED="filterOpened",Events2.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",Events2.EVENT_SORT_CHANGED="sortChanged",Events2.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",Events2.EVENT_ROW_CLICKED="rowClicked",Events2.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",Events2.EVENT_GRID_READY="gridReady",Events2.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",Events2.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",Events2.EVENT_VIEWPORT_CHANGED="viewportChanged",Events2.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",Events2.EVENT_FIRST_DATA_RENDERED="firstDataRendered",Events2.EVENT_DRAG_STARTED="dragStarted",Events2.EVENT_DRAG_STOPPED="dragStopped",Events2.EVENT_CHECKBOX_CHANGED="checkboxChanged",Events2.EVENT_ROW_EDITING_STARTED="rowEditingStarted",Events2.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",Events2.EVENT_CELL_EDITING_STARTED="cellEditingStarted",Events2.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",Events2.EVENT_BODY_SCROLL="bodyScroll",Events2.EVENT_BODY_SCROLL_END="bodyScrollEnd",Events2.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",Events2.EVENT_PAGINATION_CHANGED="paginationChanged",Events2.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",Events2.EVENT_STORE_REFRESHED="storeRefreshed",Events2.EVENT_STATE_UPDATED="stateUpdated",Events2.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged",Events2.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",Events2.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged",Events2.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",Events2.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",Events2.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",Events2.EVENT_FLASH_CELLS="flashCells",Events2.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",Events2.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",Events2.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",Events2.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",Events2.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",Events2.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",Events2.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",Events2.EVENT_ROW_DRAG_ENTER="rowDragEnter",Events2.EVENT_ROW_DRAG_MOVE="rowDragMove",Events2.EVENT_ROW_DRAG_LEAVE="rowDragLeave",Events2.EVENT_ROW_DRAG_END="rowDragEnd",Events2.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",Events2.EVENT_POPUP_TO_FRONT="popupToFront",Events2.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",Events2.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",Events2.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",Events2.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",Events2.EVENT_STORE_UPDATED="storeUpdated",Events2.EVENT_FILTER_DESTROYED="filterDestroyed",Events2.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",Events2.EVENT_ROW_COUNT_READY="rowCountReady",Events2.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",Events2.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",Events2.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",Events2.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",Events2.EVENT_SIDE_BAR_UPDATED="sideBarUpdated",Events2}(),GroupInstanceIdCreator=function(){function GroupInstanceIdCreator2(){this.existingIds={}}return __name(GroupInstanceIdCreator2,"GroupInstanceIdCreator"),GroupInstanceIdCreator2.prototype.getInstanceIdForKey=function(key){var lastResult=this.existingIds[key],result;return typeof lastResult!="number"?result=0:result=lastResult+1,this.existingIds[key]=result,result},GroupInstanceIdCreator2}(),__extends$3f=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2I=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2I"),GROUP_AUTO_COLUMN_ID="ag-Grid-AutoColumn",AutoGroupColService=function(_super){__extends$3f(AutoGroupColService2,_super);function AutoGroupColService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(AutoGroupColService2,"AutoGroupColService"),AutoGroupColService2.prototype.createAutoGroupColumns=function(rowGroupColumns){var _this=this,groupAutoColumns=[],doingTreeData=this.gridOptionsService.get("treeData"),doingMultiAutoColumn=this.gridOptionsService.isGroupMultiAutoColumn();return doingTreeData&&doingMultiAutoColumn&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),doingMultiAutoColumn=!1),doingMultiAutoColumn?rowGroupColumns.forEach(function(rowGroupCol,index){groupAutoColumns.push(_this.createOneAutoGroupColumn(rowGroupCol,index))}):groupAutoColumns.push(this.createOneAutoGroupColumn()),groupAutoColumns},AutoGroupColService2.prototype.updateAutoGroupColumns=function(autoGroupColumns,source){var _this=this;autoGroupColumns.forEach(function(column,index){return _this.updateOneAutoGroupColumn(column,index,source)})},AutoGroupColService2.prototype.createOneAutoGroupColumn=function(rowGroupCol,index){var colId;rowGroupCol?colId="".concat(GROUP_AUTO_COLUMN_ID,"-").concat(rowGroupCol.getId()):colId=GROUP_AUTO_COLUMN_ID;var colDef=this.createAutoGroupColDef(colId,rowGroupCol,index);colDef.colId=colId;var newCol=new Column(colDef,null,colId,!0);return this.context.createBean(newCol),newCol},AutoGroupColService2.prototype.updateOneAutoGroupColumn=function(colToUpdate,index,source){var oldColDef=colToUpdate.getColDef(),underlyingColId=typeof oldColDef.showRowGroup=="string"?oldColDef.showRowGroup:void 0,underlyingColumn=underlyingColId!=null?this.columnModel.getPrimaryColumn(underlyingColId):void 0,colDef=this.createAutoGroupColDef(colToUpdate.getId(),underlyingColumn??void 0,index);colToUpdate.setColDef(colDef,null,source),this.columnFactory.applyColumnState(colToUpdate,colDef,source)},AutoGroupColService2.prototype.createAutoGroupColDef=function(colId,underlyingColumn,index){var res=this.createBaseColDef(underlyingColumn),autoGroupColumnDef=this.gridOptionsService.get("autoGroupColumnDef");if(mergeDeep(res,autoGroupColumnDef),res=this.columnFactory.addColumnDefaultAndTypes(res,colId),!this.gridOptionsService.get("treeData")){var noFieldOrValueGetter=missing(res.field)&&missing(res.valueGetter)&&missing(res.filterValueGetter)&&res.filter!=="agGroupColumnFilter";noFieldOrValueGetter&&(res.filter=!1)}index&&index>0&&(res.headerCheckboxSelection=!1);var isSortingCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup(),hasOwnData=res.valueGetter||res.field!=null;return isSortingCoupled&&!hasOwnData&&(res.sortIndex=void 0,res.initialSort=void 0),res},AutoGroupColService2.prototype.createBaseColDef=function(rowGroupCol){var userDef=this.gridOptionsService.get("autoGroupColumnDef"),localeTextFunc=this.localeService.getLocaleTextFunc(),res={headerName:localeTextFunc("group","Group")},userHasProvidedGroupCellRenderer=userDef&&(userDef.cellRenderer||userDef.cellRendererSelector);if(userHasProvidedGroupCellRenderer||(res.cellRenderer="agGroupCellRenderer"),rowGroupCol){var colDef=rowGroupCol.getColDef();Object.assign(res,{headerName:this.columnModel.getDisplayNameForColumn(rowGroupCol,"header"),headerValueGetter:colDef.headerValueGetter}),colDef.cellRenderer&&Object.assign(res,{cellRendererParams:{innerRenderer:colDef.cellRenderer,innerRendererParams:colDef.cellRendererParams}}),res.showRowGroup=rowGroupCol.getColId()}else res.showRowGroup=!0;return res},__decorate$2I([Autowired("columnModel")],AutoGroupColService2.prototype,"columnModel",void 0),__decorate$2I([Autowired("columnFactory")],AutoGroupColService2.prototype,"columnFactory",void 0),AutoGroupColService2=__decorate$2I([Bean("autoGroupColService")],AutoGroupColService2),AutoGroupColService2}(BeanStub),reUnescapedHtml=/[&<>"']/g,HTML_ESCAPES={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function utf8_encode$1(s){var stringFromCharCode=String.fromCharCode;function ucs2decode(string){var output=[];if(!string)return[];for(var len=string.length,counter=0,value,extra;counter<len;)value=string.charCodeAt(counter++),value>=55296&&value<=56319&&counter<len?(extra=string.charCodeAt(counter++),(extra&64512)==56320?output.push(((value&1023)<<10)+(extra&1023)+65536):(output.push(value),counter--)):output.push(value);return output}__name(ucs2decode,"ucs2decode");function checkScalarValue(point){if(point>=55296&&point<=57343)throw Error("Lone surrogate U+"+point.toString(16).toUpperCase()+" is not a scalar value")}__name(checkScalarValue,"checkScalarValue");function createByte(point,shift){return stringFromCharCode(point>>shift&63|128)}__name(createByte,"createByte");function encodeCodePoint(point){if(point>=0&&point<=31&&point!==10){var convertedCode=point.toString(16).toUpperCase(),paddedCode=convertedCode.padStart(4,"0");return"_x".concat(paddedCode,"_")}if(!(point&4294967168))return stringFromCharCode(point);var symbol="";return point&4294965248?point&4294901760?point&4292870144||(symbol=stringFromCharCode(point>>18&7|240),symbol+=createByte(point,12),symbol+=createByte(point,6)):(checkScalarValue(point),symbol=stringFromCharCode(point>>12&15|224),symbol+=createByte(point,6)):symbol=stringFromCharCode(point>>6&31|192),symbol+=stringFromCharCode(point&63|128),symbol}__name(encodeCodePoint,"encodeCodePoint");for(var codePoints=ucs2decode(s),length=codePoints.length,index=-1,codePoint,byteString="";++index<length;)codePoint=codePoints[index],byteString+=encodeCodePoint(codePoint);return byteString}__name(utf8_encode$1,"utf8_encode$1");function capitalise(str){return str[0].toUpperCase()+str.substring(1).toLowerCase()}__name(capitalise,"capitalise");function escapeString(toEscape,skipEscapingHtmlChars){if(toEscape==null)return null;var stringResult=toEscape.toString().toString();return skipEscapingHtmlChars?stringResult:stringResult.replace(reUnescapedHtml,function(chr){return HTML_ESCAPES[chr]})}__name(escapeString,"escapeString");function camelCaseToHumanText(camelCase){if(!camelCase||camelCase==null)return null;var rex=/([a-z])([A-Z])/g,rexCaps=/([A-Z]+)([A-Z])([a-z])/g,words=camelCase.replace(rex,"$1 $2").replace(rexCaps,"$1 $2$3").replace(/\./g," ").split(" ");return words.map(function(word){return word.substring(0,1).toUpperCase()+(word.length>1?word.substring(1,word.length):"")}).join(" ")}__name(camelCaseToHumanText,"camelCaseToHumanText");function camelCaseToHyphenated(camelCase){return camelCase.replace(/[A-Z]/g,function(s){return"-".concat(s.toLocaleLowerCase())})}__name(camelCaseToHyphenated,"camelCaseToHyphenated");var StringUtils=Object.freeze({__proto__:null,utf8_encode:utf8_encode$1,capitalise,escapeString,camelCaseToHumanText,camelCaseToHyphenated});function convertToMap(arr){var map=new Map;return arr.forEach(function(pair){return map.set(pair[0],pair[1])}),map}__name(convertToMap,"convertToMap");function mapById(arr,callback){var map=new Map;return arr.forEach(function(item){return map.set(callback(item),item)}),map}__name(mapById,"mapById");function keys(map){var arr=[];return map.forEach(function(_2,key){return arr.push(key)}),arr}__name(keys,"keys");var MapUtils=Object.freeze({__proto__:null,convertToMap,mapById,keys}),__extends$3e=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2H=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2H"),__param$6=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$6"),__rest=__name(function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&e.indexOf(p)<0&&(t[p]=s[p]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)e.indexOf(p[i])<0&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t},"__rest"),__read$A=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$A"),__spreadArray$s=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$s"),__values$a=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$a"),ColumnModel=function(_super){__extends$3e(ColumnModel2,_super);function ColumnModel2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.primaryHeaderRowCount=0,_this.secondaryHeaderRowCount=0,_this.gridHeaderRowCount=0,_this.displayedColumnsLeft=[],_this.displayedColumnsRight=[],_this.displayedColumnsCenter=[],_this.displayedColumns=[],_this.displayedColumnsAndGroupsMap={},_this.viewportColumns=[],_this.viewportColumnsHash="",_this.headerViewportColumns=[],_this.viewportColumnsCenter=[],_this.headerViewportColumnsCenter=[],_this.viewportRowLeft={},_this.viewportRowRight={},_this.viewportRowCenter={},_this.autoHeightActiveAtLeastOnce=!1,_this.rowGroupColumns=[],_this.valueColumns=[],_this.pivotColumns=[],_this.ready=!1,_this.changeEventsDispatching=!1,_this.autoGroupsNeedBuilding=!1,_this.forceRecreateAutoGroups=!1,_this.pivotMode=!1,_this.bodyWidth=0,_this.leftWidth=0,_this.rightWidth=0,_this.bodyWidthDirty=!0,_this.shouldQueueResizeOperations=!1,_this.resizeOperationQueue=[],_this}return __name(ColumnModel2,"ColumnModel"),ColumnModel2.prototype.init=function(){var _this=this;this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");var pivotMode=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(pivotMode)&&(this.pivotMode=pivotMode),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],function(event){return _this.buildAutoGroupColumns(convertSourceType(event.source))}),this.addManagedPropertyListener("autoGroupColumnDef",function(event){return _this.onAutoGroupColumnDefChanged(convertSourceType(event.source))}),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],function(event){return _this.onSharedColDefChanged(convertSourceType(event.source))}),this.addManagedPropertyListener("pivotMode",function(event){return _this.setPivotMode(_this.gridOptionsService.get("pivotMode"),convertSourceType(event.source))}),this.addManagedListener(this.eventService,Events.EVENT_FIRST_DATA_RENDERED,function(){return _this.onFirstDataRendered()})},ColumnModel2.prototype.buildAutoGroupColumns=function(source){this.columnDefs&&(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(source))},ColumnModel2.prototype.onAutoGroupColumnDefChanged=function(source){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,source)},ColumnModel2.prototype.onSharedColDefChanged=function(source){this.gridColumns&&(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,source),this.createColumnsFromColumnDefs(!0,source))},ColumnModel2.prototype.setColumnDefs=function(columnDefs,source){var colsPreviouslyExisted=!!this.columnDefs;this.columnDefs=columnDefs,this.createColumnsFromColumnDefs(colsPreviouslyExisted,source)},ColumnModel2.prototype.recreateColumnDefs=function(source){this.onSharedColDefChanged(source)},ColumnModel2.prototype.destroyOldColumns=function(oldTree,newTree){var oldObjectsById={};if(oldTree){this.columnUtils.depthFirstOriginalTreeSearch(null,oldTree,function(child){oldObjectsById[child.getInstanceId()]=child}),newTree&&this.columnUtils.depthFirstOriginalTreeSearch(null,newTree,function(child){oldObjectsById[child.getInstanceId()]=null});var colsToDestroy=Object.values(oldObjectsById).filter(function(item){return item!=null});this.destroyBeans(colsToDestroy)}},ColumnModel2.prototype.destroyColumns=function(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)},ColumnModel2.prototype.createColumnsFromColumnDefs=function(colsPreviouslyExisted,source){var _this=this,dispatchEventsFunc=colsPreviouslyExisted?this.compareColumnStatesAndDispatchEvents(source):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;var oldPrimaryColumns=this.primaryColumns,oldPrimaryTree=this.primaryColumnTree,balancedTreeResult=this.columnFactory.createColumnTree(this.columnDefs,!0,oldPrimaryTree,source);this.destroyOldColumns(this.primaryColumnTree,balancedTreeResult.columnTree),this.primaryColumnTree=balancedTreeResult.columnTree,this.primaryHeaderRowCount=balancedTreeResult.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(function(col){return _this.primaryColumnsMap[col.getId()]=col}),this.extractRowGroupColumns(source,oldPrimaryColumns),this.extractPivotColumns(source,oldPrimaryColumns),this.extractValueColumns(source,oldPrimaryColumns),this.ready=!0;var gridColsNotProcessed=this.gridColsArePrimary===void 0,processGridCols=this.gridColsArePrimary||gridColsNotProcessed||this.autoGroupsNeedBuilding;processGridCols&&(this.updateGridColumns(),colsPreviouslyExisted&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(source),this.checkViewportColumns()),this.dispatchEverythingChanged(source),this.changeEventsDispatching=!0,dispatchEventsFunc&&dispatchEventsFunc(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(source)},ColumnModel2.prototype.shouldRowModelIgnoreRefresh=function(){return this.changeEventsDispatching},ColumnModel2.prototype.dispatchNewColumnsLoaded=function(source){var newColumnsLoadedEvent={type:Events.EVENT_NEW_COLUMNS_LOADED,source};this.eventService.dispatchEvent(newColumnsLoadedEvent),source==="gridInitializing"&&this.onColumnsReady()},ColumnModel2.prototype.dispatchEverythingChanged=function(source){var eventEverythingChanged={type:Events.EVENT_COLUMN_EVERYTHING_CHANGED,source};this.eventService.dispatchEvent(eventEverythingChanged)},ColumnModel2.prototype.orderGridColumnsLikePrimary=function(){var _this=this,primaryColumns=this.primaryColumns;if(primaryColumns){var primaryColsOrdered=primaryColumns.filter(function(col){return _this.gridColumns.indexOf(col)>=0}),otherCols=this.gridColumns.filter(function(col){return primaryColsOrdered.indexOf(col)<0});this.gridColumns=__spreadArray$s(__spreadArray$s([],__read$A(otherCols),!1),__read$A(primaryColsOrdered),!1),this.gridColumns=this.placeLockedColumns(this.gridColumns)}},ColumnModel2.prototype.getAllDisplayedAutoHeightCols=function(){return this.displayedAutoHeightCols},ColumnModel2.prototype.setViewport=function(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)},ColumnModel2.prototype.getDisplayedColumnsStartingAt=function(column){for(var currentColumn=column,columns=[];currentColumn!=null;)columns.push(currentColumn),currentColumn=this.getDisplayedColAfter(currentColumn);return columns},ColumnModel2.prototype.checkViewportColumns=function(afterScroll){if(afterScroll===void 0&&(afterScroll=!1),this.displayedColumnsCenter!=null){var viewportColumnsChanged=this.extractViewport();if(viewportColumnsChanged){var event={type:Events.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll};this.eventService.dispatchEvent(event)}}},ColumnModel2.prototype.setViewportPosition=function(scrollWidth,scrollPosition,afterScroll){afterScroll===void 0&&(afterScroll=!1),(scrollWidth!==this.scrollWidth||scrollPosition!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=scrollWidth,this.scrollPosition=scrollPosition,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(afterScroll))},ColumnModel2.prototype.isPivotMode=function(){return this.pivotMode},ColumnModel2.prototype.isPivotSettingAllowed=function(pivot){return pivot&&this.gridOptionsService.get("treeData")?(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1):!0},ColumnModel2.prototype.setPivotMode=function(pivotMode,source){if(!(pivotMode===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode))&&(this.pivotMode=pivotMode,!!this.gridColumns)){this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:Events.EVENT_COLUMN_PIVOT_MODE_CHANGED};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.getSecondaryPivotColumn=function(pivotKeys,valueColKey){if(missing(this.secondaryColumns))return null;var valueColumnToFind=this.getPrimaryColumn(valueColKey),foundColumn=null;return this.secondaryColumns.forEach(function(column){var thisPivotKeys=column.getColDef().pivotKeys,pivotValueColumn=column.getColDef().pivotValueColumn,pivotKeyMatches=areEqual(thisPivotKeys,pivotKeys),pivotValueMatches=pivotValueColumn===valueColumnToFind;pivotKeyMatches&&pivotValueMatches&&(foundColumn=column)}),foundColumn},ColumnModel2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("columnModel")},ColumnModel2.prototype.setFirstRightAndLastLeftPinned=function(source){var lastLeft,firstRight;this.gridOptionsService.get("enableRtl")?(lastLeft=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,firstRight=this.displayedColumnsRight?last(this.displayedColumnsRight):null):(lastLeft=this.displayedColumnsLeft?last(this.displayedColumnsLeft):null,firstRight=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(function(column){column.setLastLeftPinned(column===lastLeft,source),column.setFirstRightPinned(column===firstRight,source)})},ColumnModel2.prototype.autoSizeColumns=function(params){var _this=this;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return _this.autoSizeColumns(params)});return}var columns=params.columns,skipHeader=params.skipHeader,skipHeaderGroups=params.skipHeaderGroups,stopAtGroup=params.stopAtGroup,_a=params.source,source=_a===void 0?"api":_a;this.animationFrameService.flushAllFrames();for(var columnsAutosized=[],changesThisTimeAround=-1,shouldSkipHeader=skipHeader??this.gridOptionsService.get("skipHeaderOnAutoSize"),shouldSkipHeaderGroups=skipHeaderGroups??shouldSkipHeader;changesThisTimeAround!==0;)changesThisTimeAround=0,this.actionOnGridColumns(columns,function(column){if(columnsAutosized.indexOf(column)>=0)return!1;var preferredWidth=_this.autoWidthCalculator.getPreferredWidthForColumn(column,shouldSkipHeader);if(preferredWidth>0){var newWidth=_this.normaliseColumnWidth(column,preferredWidth);column.setActualWidth(newWidth,source),columnsAutosized.push(column),changesThisTimeAround++}return!0},source);shouldSkipHeaderGroups||this.autoSizeColumnGroupsByColumns(columns,source,stopAtGroup),this.dispatchColumnResizedEvent(columnsAutosized,!0,"autosizeColumns")},ColumnModel2.prototype.dispatchColumnResizedEvent=function(columns,finished,source,flexColumns){if(flexColumns===void 0&&(flexColumns=null),columns&&columns.length){var event_1={type:Events.EVENT_COLUMN_RESIZED,columns,column:columns.length===1?columns[0]:null,flexColumns,finished,source};this.eventService.dispatchEvent(event_1)}},ColumnModel2.prototype.dispatchColumnChangedEvent=function(type,columns,source){var event={type,columns,column:columns&&columns.length==1?columns[0]:null,source};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.dispatchColumnMovedEvent=function(params){var movedColumns=params.movedColumns,source=params.source,toIndex=params.toIndex,finished=params.finished,event={type:Events.EVENT_COLUMN_MOVED,columns:movedColumns,column:movedColumns&&movedColumns.length===1?movedColumns[0]:null,toIndex,finished,source};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.dispatchColumnPinnedEvent=function(changedColumns,source){if(changedColumns.length){var column=changedColumns.length===1?changedColumns[0]:null,pinned=this.getCommonValue(changedColumns,function(col){return col.getPinned()}),event={type:Events.EVENT_COLUMN_PINNED,pinned:pinned??null,columns:changedColumns,column,source};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.dispatchColumnVisibleEvent=function(changedColumns,source){if(changedColumns.length){var column=changedColumns.length===1?changedColumns[0]:null,visible=this.getCommonValue(changedColumns,function(col){return col.isVisible()}),event={type:Events.EVENT_COLUMN_VISIBLE,visible,columns:changedColumns,column,source};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.autoSizeColumn=function(key,source,skipHeader){key&&this.autoSizeColumns({columns:[key],skipHeader,skipHeaderGroups:!0,source})},ColumnModel2.prototype.autoSizeColumnGroupsByColumns=function(keys2,source,stopAtGroup){var e_1,_a,e_2,_b,columnGroups=new Set,columns=this.getGridColumns(keys2);columns.forEach(function(col){for(var parent=col.getParent();parent&&parent!=stopAtGroup;)parent.isPadding()||columnGroups.add(parent),parent=parent.getParent()});var headerGroupCtrl,resizedColumns=[];try{for(var columnGroups_1=__values$a(columnGroups),columnGroups_1_1=columnGroups_1.next();!columnGroups_1_1.done;columnGroups_1_1=columnGroups_1.next()){var columnGroup=columnGroups_1_1.value;try{for(var _c=(e_2=void 0,__values$a(this.ctrlsService.getHeaderRowContainerCtrls())),_d=_c.next();!_d.done;_d=_c.next()){var headerContainerCtrl=_d.value;if(headerGroupCtrl=headerContainerCtrl.getHeaderCtrlForColumn(columnGroup),headerGroupCtrl)break}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_d&&!_d.done&&(_b=_c.return)&&_b.call(_c)}finally{if(e_2)throw e_2.error}}headerGroupCtrl&&headerGroupCtrl.resizeLeafColumnsToFit(source)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{columnGroups_1_1&&!columnGroups_1_1.done&&(_a=columnGroups_1.return)&&_a.call(columnGroups_1)}finally{if(e_1)throw e_1.error}}return resizedColumns},ColumnModel2.prototype.autoSizeAllColumns=function(source,skipHeader){var _this=this;if(this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return _this.autoSizeAllColumns(source,skipHeader)});return}var allDisplayedColumns=this.getAllDisplayedColumns();this.autoSizeColumns({columns:allDisplayedColumns,skipHeader,source})},ColumnModel2.prototype.getColumnsFromTree=function(rootColumns){var result=[],recursiveFindColumns=__name(function(childColumns){for(var i=0;i<childColumns.length;i++){var child=childColumns[i];child instanceof Column?result.push(child):child instanceof ProvidedColumnGroup&&recursiveFindColumns(child.getChildren())}},"recursiveFindColumns");return recursiveFindColumns(rootColumns),result},ColumnModel2.prototype.getAllDisplayedTrees=function(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null},ColumnModel2.prototype.getPrimaryColumnTree=function(){return this.primaryColumnTree},ColumnModel2.prototype.getHeaderRowCount=function(){return this.gridHeaderRowCount},ColumnModel2.prototype.getDisplayedTreeLeft=function(){return this.displayedTreeLeft},ColumnModel2.prototype.getDisplayedTreeRight=function(){return this.displayedTreeRight},ColumnModel2.prototype.getDisplayedTreeCentre=function(){return this.displayedTreeCentre},ColumnModel2.prototype.isColumnDisplayed=function(column){return this.getAllDisplayedColumns().indexOf(column)>=0},ColumnModel2.prototype.getAllDisplayedColumns=function(){return this.displayedColumns},ColumnModel2.prototype.getViewportColumns=function(){return this.viewportColumns},ColumnModel2.prototype.getDisplayedLeftColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsLeft):this.displayedColumnsLeft},ColumnModel2.prototype.getDisplayedRightColumnsForRow=function(rowNode){return this.colSpanActive?this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsRight):this.displayedColumnsRight},ColumnModel2.prototype.isColSpanActive=function(){return this.colSpanActive},ColumnModel2.prototype.getDisplayedColumnsForRow=function(rowNode,displayedColumns,filterCallback,emptySpaceBeforeColumn){for(var result=[],lastConsideredCol=null,_loop_1=__name(function(i2){var col=displayedColumns[i2],maxAllowedColSpan=displayedColumns.length-i2,colSpan=Math.min(col.getColSpan(rowNode),maxAllowedColSpan),columnsToCheckFilter=[col];if(colSpan>1){for(var colsToRemove=colSpan-1,j=1;j<=colsToRemove;j++)columnsToCheckFilter.push(displayedColumns[i2+j]);i2+=colsToRemove}var filterPasses;if(filterCallback?(filterPasses=!1,columnsToCheckFilter.forEach(function(colForFilter){filterCallback(colForFilter)&&(filterPasses=!0)})):filterPasses=!0,filterPasses){if(result.length===0&&lastConsideredCol){var gapBeforeColumn=emptySpaceBeforeColumn?emptySpaceBeforeColumn(col):!1;gapBeforeColumn&&result.push(lastConsideredCol)}result.push(col)}lastConsideredCol=col,out_i_1=i2},"_loop_1"),out_i_1,i=0;i<displayedColumns.length;i++)_loop_1(i),i=out_i_1;return result},ColumnModel2.prototype.getViewportCenterColumnsForRow=function(rowNode){var _this=this;if(!this.colSpanActive)return this.viewportColumnsCenter;var emptySpaceBeforeColumn=__name(function(col){var left=col.getLeft();return exists(left)&&left>_this.viewportLeft},"emptySpaceBeforeColumn"),filterCallback=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(rowNode,this.displayedColumnsCenter,filterCallback,emptySpaceBeforeColumn)},ColumnModel2.prototype.isColumnAtEdge=function(col,edge){var allColumns=this.getAllDisplayedColumns();if(!allColumns.length)return!1;var isFirst=edge==="first",columnToCompare;if(col instanceof ColumnGroup){var leafColumns=col.getDisplayedLeafColumns();if(!leafColumns.length)return!1;columnToCompare=isFirst?leafColumns[0]:last(leafColumns)}else columnToCompare=col;return(isFirst?allColumns[0]:last(allColumns))===columnToCompare},ColumnModel2.prototype.getAriaColumnIndex=function(col){var targetColumn;return col instanceof ColumnGroup?targetColumn=col.getLeafColumns()[0]:targetColumn=col,this.ariaOrderColumns.indexOf(targetColumn)+1},ColumnModel2.prototype.isColumnInHeaderViewport=function(col){return col.isAutoHeaderHeight()?!0:this.isColumnInRowViewport(col)},ColumnModel2.prototype.isColumnInRowViewport=function(col){if(col.isAutoHeight())return!0;var columnLeft=col.getLeft()||0,columnRight=columnLeft+col.getActualWidth(),leftBounds=this.viewportLeft-200,rightBounds=this.viewportRight+200,columnToMuchLeft=columnLeft<leftBounds&&columnRight<leftBounds,columnToMuchRight=columnLeft>rightBounds&&columnRight>rightBounds;return!columnToMuchLeft&&!columnToMuchRight},ColumnModel2.prototype.getDisplayedColumnsLeftWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsLeft)},ColumnModel2.prototype.getDisplayedColumnsRightWidth=function(){return this.getWidthOfColsInList(this.displayedColumnsRight)},ColumnModel2.prototype.updatePrimaryColumnList=function(keys2,masterList,actionIsAdd,columnCallback,eventType,source){var _this=this;if(!(!keys2||missingOrEmpty(keys2))){var atLeastOne=!1;if(keys2.forEach(function(key){if(key){var columnToAdd=_this.getPrimaryColumn(key);if(columnToAdd){if(actionIsAdd){if(masterList.indexOf(columnToAdd)>=0)return;masterList.push(columnToAdd)}else{if(masterList.indexOf(columnToAdd)<0)return;removeFromArray(masterList,columnToAdd)}columnCallback(columnToAdd),atLeastOne=!0}}}),!!atLeastOne){this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source);var event={type:eventType,columns:masterList,column:masterList.length===1?masterList[0]:null,source};this.eventService.dispatchEvent(event)}}},ColumnModel2.prototype.setRowGroupColumns=function(colKeys,source){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(colKeys,this.rowGroupColumns,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),source)},ColumnModel2.prototype.setRowGroupActive=function(active,column,source){active!==column.isRowGroupActive()&&(column.setRowGroupActive(active,source),active&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([column],!1,source),!active&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([column],!0,source))},ColumnModel2.prototype.addRowGroupColumns=function(keys2,source){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys2,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel2.prototype.removeRowGroupColumns=function(keys2,source){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(keys2,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),Events.EVENT_COLUMN_ROW_GROUP_CHANGED,source)},ColumnModel2.prototype.addPivotColumns=function(keys2,source){this.updatePrimaryColumnList(keys2,this.pivotColumns,!0,function(column){return column.setPivotActive(!0,source)},Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel2.prototype.setPivotColumns=function(colKeys,source){this.setPrimaryColumnList(colKeys,this.pivotColumns,Events.EVENT_COLUMN_PIVOT_CHANGED,!0,function(added,column){column.setPivotActive(added,source)},source)},ColumnModel2.prototype.removePivotColumns=function(keys2,source){this.updatePrimaryColumnList(keys2,this.pivotColumns,!1,function(column){return column.setPivotActive(!1,source)},Events.EVENT_COLUMN_PIVOT_CHANGED,source)},ColumnModel2.prototype.setPrimaryColumnList=function(colKeys,masterList,eventName,detectOrderChange,columnCallback,source){var _this=this;if(this.gridColumns){var changes=new Map;masterList.forEach(function(col,idx){return changes.set(col,idx)}),masterList.length=0,exists(colKeys)&&colKeys.forEach(function(key){var column=_this.getPrimaryColumn(key);column&&masterList.push(column)}),masterList.forEach(function(col,idx){var oldIndex=changes.get(col);if(oldIndex===void 0){changes.set(col,0);return}detectOrderChange&&oldIndex!==idx||changes.delete(col)}),(this.primaryColumns||[]).forEach(function(column){var added=masterList.indexOf(column)>=0;columnCallback(added,column)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(source),this.dispatchColumnChangedEvent(eventName,__spreadArray$s([],__read$A(changes.keys()),!1),source)}},ColumnModel2.prototype.setValueColumns=function(colKeys,source){this.setPrimaryColumnList(colKeys,this.valueColumns,Events.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),source)},ColumnModel2.prototype.setValueActive=function(active,column,source){if(active!==column.isValueActive()&&(column.setValueActive(active,source),active&&!column.getAggFunc())){var initialAggFunc=this.aggFuncService.getDefaultAggFunc(column);column.setAggFunc(initialAggFunc)}},ColumnModel2.prototype.addValueColumns=function(keys2,source){this.updatePrimaryColumnList(keys2,this.valueColumns,!0,this.setValueActive.bind(this,!0),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel2.prototype.removeValueColumns=function(keys2,source){this.updatePrimaryColumnList(keys2,this.valueColumns,!1,this.setValueActive.bind(this,!1),Events.EVENT_COLUMN_VALUE_CHANGED,source)},ColumnModel2.prototype.normaliseColumnWidth=function(column,newWidth){var minWidth=column.getMinWidth();exists(minWidth)&&newWidth<minWidth&&(newWidth=minWidth);var maxWidth=column.getMaxWidth();return exists(maxWidth)&&column.isGreaterThanMax(newWidth)&&(newWidth=maxWidth),newWidth},ColumnModel2.prototype.getPrimaryOrGridColumn=function(key){var column=this.getPrimaryColumn(key);return column||this.getGridColumn(key)},ColumnModel2.prototype.setColumnWidths=function(columnWidths,shiftKey,finished,source){var _this=this,sets=[];columnWidths.forEach(function(columnWidth){var col=_this.getPrimaryOrGridColumn(columnWidth.key);if(col){sets.push({width:columnWidth.newWidth,ratios:[1],columns:[col]});var defaultIsShift=_this.gridOptionsService.get("colResizeDefault")==="shift";if(defaultIsShift&&(shiftKey=!shiftKey),shiftKey){var otherCol=_this.getDisplayedColAfter(col);if(!otherCol)return;var widthDiff=col.getActualWidth()-columnWidth.newWidth,otherColWidth=otherCol.getActualWidth()+widthDiff;sets.push({width:otherColWidth,ratios:[1],columns:[otherCol]})}}}),sets.length!==0&&this.resizeColumnSets({resizeSets:sets,finished,source})},ColumnModel2.prototype.checkMinAndMaxWidthsForSet=function(columnResizeSet){var columns=columnResizeSet.columns,width=columnResizeSet.width,minWidthAccumulated=0,maxWidthAccumulated=0,maxWidthActive=!0;columns.forEach(function(col){var minWidth=col.getMinWidth();minWidthAccumulated+=minWidth||0;var maxWidth=col.getMaxWidth();exists(maxWidth)&&maxWidth>0?maxWidthAccumulated+=maxWidth:maxWidthActive=!1});var minWidthPasses=width>=minWidthAccumulated,maxWidthPasses=!maxWidthActive||width<=maxWidthAccumulated;return minWidthPasses&&maxWidthPasses},ColumnModel2.prototype.resizeColumnSets=function(params){var _this=this,resizeSets=params.resizeSets,finished=params.finished,source=params.source,passMinMaxCheck=!resizeSets||resizeSets.every(function(columnResizeSet){return _this.checkMinAndMaxWidthsForSet(columnResizeSet)});if(!passMinMaxCheck){if(finished){var columns=resizeSets&&resizeSets.length>0?resizeSets[0].columns:null;this.dispatchColumnResizedEvent(columns,finished,source)}return}var changedCols=[],allResizedCols=[];resizeSets.forEach(function(set){var width=set.width,columns2=set.columns,ratios=set.ratios,newWidths={},finishedCols={};columns2.forEach(function(col){return allResizedCols.push(col)});for(var finishedColsGrew=!0,loopCount=0,_loop_2=__name(function(){if(loopCount++,loopCount>1e3)return console.error("AG Grid: infinite loop in resizeColumnSets"),"break";finishedColsGrew=!1;var subsetCols=[],subsetRatioTotal=0,pixelsToDistribute=width;columns2.forEach(function(col,index){var thisColFinished=finishedCols[col.getId()];if(thisColFinished)pixelsToDistribute-=newWidths[col.getId()];else{subsetCols.push(col);var ratioThisCol=ratios[index];subsetRatioTotal+=ratioThisCol}});var ratioScale=1/subsetRatioTotal;subsetCols.forEach(function(col,index){var lastCol=index===subsetCols.length-1,colNewWidth;lastCol?colNewWidth=pixelsToDistribute:(colNewWidth=Math.round(ratios[index]*width*ratioScale),pixelsToDistribute-=colNewWidth);var minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();exists(minWidth)&&colNewWidth<minWidth?(colNewWidth=minWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0):exists(maxWidth)&&maxWidth>0&&colNewWidth>maxWidth&&(colNewWidth=maxWidth,finishedCols[col.getId()]=!0,finishedColsGrew=!0),newWidths[col.getId()]=colNewWidth})},"_loop_2");finishedColsGrew;){var state_1=_loop_2();if(state_1==="break")break}columns2.forEach(function(col){var newWidth=newWidths[col.getId()],actualWidth=col.getActualWidth();actualWidth!==newWidth&&(col.setActualWidth(newWidth,source),changedCols.push(col))})});var atLeastOneColChanged=changedCols.length>0,flexedCols=[];atLeastOneColChanged&&(flexedCols=this.refreshFlexedColumns({resizingCols:allResizedCols,skipSetLeft:!0}),this.setLeftValues(source),this.updateBodyWidths(),this.checkViewportColumns());var colsForEvent=allResizedCols.concat(flexedCols);(atLeastOneColChanged||finished)&&this.dispatchColumnResizedEvent(colsForEvent,finished,source,flexedCols)},ColumnModel2.prototype.setColumnAggFunc=function(key,aggFunc,source){if(key){var column=this.getPrimaryColumn(key);column&&(column.setAggFunc(aggFunc),this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,[column],source))}},ColumnModel2.prototype.moveRowGroupColumn=function(fromIndex,toIndex,source){if(!this.isRowGroupEmpty()){var column=this.rowGroupColumns[fromIndex],impactedColumns=this.rowGroupColumns.slice(fromIndex,toIndex);this.rowGroupColumns.splice(fromIndex,1),this.rowGroupColumns.splice(toIndex,0,column);var event={type:Events.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:impactedColumns,column:impactedColumns.length===1?impactedColumns[0]:null,source};this.eventService.dispatchEvent(event)}},ColumnModel2.prototype.moveColumns=function(columnsToMoveKeys,toIndex,source,finished){if(finished===void 0&&(finished=!0),!!this.gridColumns){if(this.columnAnimationService.start(),toIndex>this.gridColumns.length-columnsToMoveKeys.length){console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+toIndex),console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");return}var movedColumns=this.getGridColumns(columnsToMoveKeys),failedRules=!this.doesMovePassRules(movedColumns,toIndex);failedRules||(moveInArray(this.gridColumns,movedColumns,toIndex),this.updateDisplayedColumns(source),this.dispatchColumnMovedEvent({movedColumns,source,toIndex,finished}),this.columnAnimationService.finish())}},ColumnModel2.prototype.doesMovePassRules=function(columnsToMove,toIndex){var proposedColumnOrder=this.getProposedColumnOrder(columnsToMove,toIndex);return this.doesOrderPassRules(proposedColumnOrder)},ColumnModel2.prototype.doesOrderPassRules=function(gridOrder){return!(!this.doesMovePassMarryChildren(gridOrder)||!this.doesMovePassLockedPositions(gridOrder))},ColumnModel2.prototype.getProposedColumnOrder=function(columnsToMove,toIndex){var proposedColumnOrder=this.gridColumns.slice();return moveInArray(proposedColumnOrder,columnsToMove,toIndex),proposedColumnOrder},ColumnModel2.prototype.sortColumnsLikeGridColumns=function(cols){var _this=this;if(!(!cols||cols.length<=1)){var notAllColsInGridColumns=cols.filter(function(c){return _this.gridColumns.indexOf(c)<0}).length>0;notAllColsInGridColumns||cols.sort(function(a,b){var indexA=_this.gridColumns.indexOf(a),indexB=_this.gridColumns.indexOf(b);return indexA-indexB})}},ColumnModel2.prototype.doesMovePassLockedPositions=function(proposedColumnOrder){var lastPlacement=0,rulePassed=!0,lockPositionToPlacement=__name(function(position){return position?position===!0||position==="left"?0:2:1},"lockPositionToPlacement");return proposedColumnOrder.forEach(function(col){var placement=lockPositionToPlacement(col.getColDef().lockPosition);placement<lastPlacement&&(rulePassed=!1),lastPlacement=placement}),rulePassed},ColumnModel2.prototype.doesMovePassMarryChildren=function(allColumnsCopy){var rulePassed=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(child){if(child instanceof ProvidedColumnGroup){var columnGroup=child,colGroupDef=columnGroup.getColGroupDef(),marryChildren=colGroupDef&&colGroupDef.marryChildren;if(marryChildren){var newIndexes=[];columnGroup.getLeafColumns().forEach(function(col){var newColIndex=allColumnsCopy.indexOf(col);newIndexes.push(newColIndex)});var maxIndex=Math.max.apply(Math,newIndexes),minIndex=Math.min.apply(Math,newIndexes),spread=maxIndex-minIndex,maxSpread=columnGroup.getLeafColumns().length-1;spread>maxSpread&&(rulePassed=!1)}}}),rulePassed},ColumnModel2.prototype.moveColumnByIndex=function(fromIndex,toIndex,source){if(this.gridColumns){var column=this.gridColumns[fromIndex];this.moveColumns([column],toIndex,source)}},ColumnModel2.prototype.getColumnDefs=function(){var _this=this;if(this.primaryColumns){var cols=this.primaryColumns.slice();return this.gridColsArePrimary?cols.sort(function(a,b){return _this.gridColumns.indexOf(a)-_this.gridColumns.indexOf(b)}):this.lastPrimaryOrder&&cols.sort(function(a,b){return _this.lastPrimaryOrder.indexOf(a)-_this.lastPrimaryOrder.indexOf(b)}),this.columnDefFactory.buildColumnDefs(cols,this.rowGroupColumns,this.pivotColumns)}},ColumnModel2.prototype.getBodyContainerWidth=function(){return this.bodyWidth},ColumnModel2.prototype.getContainerWidth=function(pinned){switch(pinned){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}},ColumnModel2.prototype.updateBodyWidths=function(){var newBodyWidth=this.getWidthOfColsInList(this.displayedColumnsCenter),newLeftWidth=this.getWidthOfColsInList(this.displayedColumnsLeft),newRightWidth=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==newBodyWidth;var atLeastOneChanged=this.bodyWidth!==newBodyWidth||this.leftWidth!==newLeftWidth||this.rightWidth!==newRightWidth;if(atLeastOneChanged){this.bodyWidth=newBodyWidth,this.leftWidth=newLeftWidth,this.rightWidth=newRightWidth;var evt={type:Events.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED};this.eventService.dispatchEvent(evt);var event_2={type:Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED};this.eventService.dispatchEvent(event_2)}},ColumnModel2.prototype.getValueColumns=function(){return this.valueColumns?this.valueColumns:[]},ColumnModel2.prototype.getPivotColumns=function(){return this.pivotColumns?this.pivotColumns:[]},ColumnModel2.prototype.isPivotActive=function(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode},ColumnModel2.prototype.getRowGroupColumns=function(){return this.rowGroupColumns?this.rowGroupColumns:[]},ColumnModel2.prototype.getDisplayedCenterColumns=function(){return this.displayedColumnsCenter},ColumnModel2.prototype.getDisplayedLeftColumns=function(){return this.displayedColumnsLeft},ColumnModel2.prototype.getDisplayedRightColumns=function(){return this.displayedColumnsRight},ColumnModel2.prototype.getDisplayedColumns=function(type){switch(type){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}},ColumnModel2.prototype.getAllPrimaryColumns=function(){return this.primaryColumns?this.primaryColumns:null},ColumnModel2.prototype.getSecondaryColumns=function(){return this.secondaryColumns?this.secondaryColumns:null},ColumnModel2.prototype.getAllColumnsForQuickFilter=function(){return this.columnsForQuickFilter},ColumnModel2.prototype.getAllGridColumns=function(){var _a;return(_a=this.gridColumns)!==null&&_a!==void 0?_a:[]},ColumnModel2.prototype.isEmpty=function(){return missingOrEmpty(this.gridColumns)},ColumnModel2.prototype.isRowGroupEmpty=function(){return missingOrEmpty(this.rowGroupColumns)},ColumnModel2.prototype.setColumnsVisible=function(keys2,visible,source){visible===void 0&&(visible=!1),this.applyColumnState({state:keys2.map(function(key){return{colId:typeof key=="string"?key:key.getColId(),hide:!visible}})},source)},ColumnModel2.prototype.setColumnsPinned=function(keys2,pinned,source){if(this.gridColumns){if(this.gridOptionsService.isDomLayout("print")){console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();var actualPinned;pinned===!0||pinned==="left"?actualPinned="left":pinned==="right"?actualPinned="right":actualPinned=null,this.actionOnGridColumns(keys2,function(col){return col.getPinned()!==actualPinned?(col.setPinned(actualPinned),!0):!1},source,function(){var event={type:Events.EVENT_COLUMN_PINNED,pinned:actualPinned,column:null,columns:null,source};return event}),this.columnAnimationService.finish()}},ColumnModel2.prototype.actionOnGridColumns=function(keys2,action,source,createEvent){var _this=this;if(!missingOrEmpty(keys2)){var updatedColumns=[];if(keys2.forEach(function(key){if(key){var column=_this.getGridColumn(key);if(column){var resultOfAction=action(column);resultOfAction!==!1&&updatedColumns.push(column)}}}),!!updatedColumns.length&&(this.updateDisplayedColumns(source),exists(createEvent)&&createEvent)){var event_3=createEvent();event_3.columns=updatedColumns,event_3.column=updatedColumns.length===1?updatedColumns[0]:null,this.eventService.dispatchEvent(event_3)}}},ColumnModel2.prototype.getDisplayedColBefore=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex>0?allDisplayedColumns[oldIndex-1]:null},ColumnModel2.prototype.getDisplayedColAfter=function(col){var allDisplayedColumns=this.getAllDisplayedColumns(),oldIndex=allDisplayedColumns.indexOf(col);return oldIndex<allDisplayedColumns.length-1?allDisplayedColumns[oldIndex+1]:null},ColumnModel2.prototype.getDisplayedGroupAfter=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"After")},ColumnModel2.prototype.getDisplayedGroupBefore=function(columnGroup){return this.getDisplayedGroupAtDirection(columnGroup,"Before")},ColumnModel2.prototype.getDisplayedGroupAtDirection=function(columnGroup,direction){for(var requiredLevel=columnGroup.getProvidedColumnGroup().getLevel()+columnGroup.getPaddingLevel(),colGroupLeafColumns=columnGroup.getDisplayedLeafColumns(),col=direction==="After"?last(colGroupLeafColumns):colGroupLeafColumns[0],getDisplayColMethod="getDisplayedCol".concat(direction);;){var column=this[getDisplayColMethod](col);if(!column)return null;var groupPointer=this.getColumnGroupAtLevel(column,requiredLevel);if(groupPointer!==columnGroup)return groupPointer}},ColumnModel2.prototype.getColumnGroupAtLevel=function(column,level){for(var groupPointer=column.getParent(),originalGroupLevel,groupPointerLevel;;){var groupPointerProvidedColumnGroup=groupPointer.getProvidedColumnGroup();if(originalGroupLevel=groupPointerProvidedColumnGroup.getLevel(),groupPointerLevel=groupPointer.getPaddingLevel(),originalGroupLevel+groupPointerLevel<=level)break;groupPointer=groupPointer.getParent()}return groupPointer},ColumnModel2.prototype.isPinningLeft=function(){return this.displayedColumnsLeft.length>0},ColumnModel2.prototype.isPinningRight=function(){return this.displayedColumnsRight.length>0},ColumnModel2.prototype.getPrimaryAndSecondaryAndAutoColumns=function(){var _a;return(_a=[]).concat.apply(_a,[this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[]])},ColumnModel2.prototype.createStateItemFromColumn=function(column){var rowGroupIndex=column.isRowGroupActive()?this.rowGroupColumns.indexOf(column):null,pivotIndex=column.isPivotActive()?this.pivotColumns.indexOf(column):null,aggFunc=column.isValueActive()?column.getAggFunc():null,sort=column.getSort()!=null?column.getSort():null,sortIndex=column.getSortIndex()!=null?column.getSortIndex():null,flex=column.getFlex()!=null&&column.getFlex()>0?column.getFlex():null,res={colId:column.getColId(),width:column.getActualWidth(),hide:!column.isVisible(),pinned:column.getPinned(),sort,sortIndex,aggFunc,rowGroup:column.isRowGroupActive(),rowGroupIndex,pivot:column.isPivotActive(),pivotIndex,flex};return res},ColumnModel2.prototype.getColumnState=function(){if(missing(this.primaryColumns)||!this.isAlive())return[];var colsForState=this.getPrimaryAndSecondaryAndAutoColumns(),res=colsForState.map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(res),res},ColumnModel2.prototype.orderColumnStateList=function(columnStateList){var colIdToGridIndexMap=convertToMap(this.gridColumns.map(function(col,index){return[col.getColId(),index]}));columnStateList.sort(function(itemA,itemB){var posA=colIdToGridIndexMap.has(itemA.colId)?colIdToGridIndexMap.get(itemA.colId):-1,posB=colIdToGridIndexMap.has(itemB.colId)?colIdToGridIndexMap.get(itemB.colId):-1;return posA-posB})},ColumnModel2.prototype.resetColumnState=function(source){var _this=this;if(!missingOrEmpty(this.primaryColumns)){var primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),columnStates=[],letRowGroupIndex=1e3,letPivotIndex=1e3,colsToProcess=[];this.groupAutoColumns&&(colsToProcess=colsToProcess.concat(this.groupAutoColumns)),primaryColumns&&(colsToProcess=colsToProcess.concat(primaryColumns)),colsToProcess.forEach(function(column){var stateItem=_this.getColumnStateFromColDef(column);missing(stateItem.rowGroupIndex)&&stateItem.rowGroup&&(stateItem.rowGroupIndex=letRowGroupIndex++),missing(stateItem.pivotIndex)&&stateItem.pivot&&(stateItem.pivotIndex=letPivotIndex++),columnStates.push(stateItem)}),this.applyColumnState({state:columnStates,applyOrder:!0},source)}},ColumnModel2.prototype.getColumnStateFromColDef=function(column){var getValueOrNull=__name(function(a,b){return a??b??null},"getValueOrNull"),colDef=column.getColDef(),sort=getValueOrNull(colDef.sort,colDef.initialSort),sortIndex=getValueOrNull(colDef.sortIndex,colDef.initialSortIndex),hide=getValueOrNull(colDef.hide,colDef.initialHide),pinned=getValueOrNull(colDef.pinned,colDef.initialPinned),width=getValueOrNull(colDef.width,colDef.initialWidth),flex=getValueOrNull(colDef.flex,colDef.initialFlex),rowGroupIndex=getValueOrNull(colDef.rowGroupIndex,colDef.initialRowGroupIndex),rowGroup=getValueOrNull(colDef.rowGroup,colDef.initialRowGroup);rowGroupIndex==null&&(rowGroup==null||rowGroup==!1)&&(rowGroupIndex=null,rowGroup=null);var pivotIndex=getValueOrNull(colDef.pivotIndex,colDef.initialPivotIndex),pivot=getValueOrNull(colDef.pivot,colDef.initialPivot);pivotIndex==null&&(pivot==null||pivot==!1)&&(pivotIndex=null,pivot=null);var aggFunc=getValueOrNull(colDef.aggFunc,colDef.initialAggFunc);return{colId:column.getColId(),sort,sortIndex,hide,pinned,width,flex,rowGroup,rowGroupIndex,pivot,pivotIndex,aggFunc}},ColumnModel2.prototype.applyColumnState=function(params,source){var _this=this;if(missingOrEmpty(this.primaryColumns))return!1;if(params&&params.state&&!params.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;var applyStates=__name(function(states,existingColumns,getById){var dispatchEventsFunc=_this.compareColumnStatesAndDispatchEvents(source);_this.autoGroupsNeedBuilding=!0;var columnsWithNoState=existingColumns.slice(),rowGroupIndexes={},pivotIndexes={},autoGroupColumnStates=[],unmatchedAndAutoStates2=[],unmatchedCount2=0,previousRowGroupCols=_this.rowGroupColumns.slice(),previousPivotCols=_this.pivotColumns.slice();states.forEach(function(state){var colId=state.colId||"",isAutoGroupColumn=colId.startsWith(GROUP_AUTO_COLUMN_ID);if(isAutoGroupColumn){autoGroupColumnStates.push(state),unmatchedAndAutoStates2.push(state);return}var column=getById(colId);column?(_this.syncColumnWithStateItem(column,state,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source),removeFromArray(columnsWithNoState,column)):(unmatchedAndAutoStates2.push(state),unmatchedCount2+=1)});var applyDefaultsFunc=__name(function(col){return _this.syncColumnWithStateItem(col,null,params.defaultState,rowGroupIndexes,pivotIndexes,!1,source)},"applyDefaultsFunc");columnsWithNoState.forEach(applyDefaultsFunc);var comparator=__name(function(indexes,oldList,colA,colB){var indexA=indexes[colA.getId()],indexB=indexes[colB.getId()],aHasIndex=indexA!=null,bHasIndex=indexB!=null;if(aHasIndex&&bHasIndex)return indexA-indexB;if(aHasIndex)return-1;if(bHasIndex)return 1;var oldIndexA=oldList.indexOf(colA),oldIndexB=oldList.indexOf(colB),aHasOldIndex=oldIndexA>=0,bHasOldIndex=oldIndexB>=0;return aHasOldIndex&&bHasOldIndex?oldIndexA-oldIndexB:aHasOldIndex?-1:1},"comparator");_this.rowGroupColumns.sort(comparator.bind(_this,rowGroupIndexes,previousRowGroupCols)),_this.pivotColumns.sort(comparator.bind(_this,pivotIndexes,previousPivotCols)),_this.updateGridColumns();var autoGroupColsCopy=_this.groupAutoColumns?_this.groupAutoColumns.slice():[];return autoGroupColumnStates.forEach(function(stateItem){var autoCol=_this.getAutoColumn(stateItem.colId);removeFromArray(autoGroupColsCopy,autoCol),_this.syncColumnWithStateItem(autoCol,stateItem,params.defaultState,null,null,!0,source)}),autoGroupColsCopy.forEach(applyDefaultsFunc),_this.applyOrderAfterApplyState(params),_this.updateDisplayedColumns(source),_this.dispatchEverythingChanged(source),dispatchEventsFunc(),{unmatchedAndAutoStates:unmatchedAndAutoStates2,unmatchedCount:unmatchedCount2}},"applyStates");this.columnAnimationService.start();var _a=applyStates(params.state||[],this.primaryColumns||[],function(id){return _this.getPrimaryColumn(id)}),unmatchedAndAutoStates=_a.unmatchedAndAutoStates,unmatchedCount=_a.unmatchedCount;return(unmatchedAndAutoStates.length>0||exists(params.defaultState))&&(unmatchedCount=applyStates(unmatchedAndAutoStates,this.secondaryColumns||[],function(id){return _this.getSecondaryColumn(id)}).unmatchedCount),this.columnAnimationService.finish(),unmatchedCount===0},ColumnModel2.prototype.applyOrderAfterApplyState=function(params){var _this=this;if(!(!params.applyOrder||!params.state)){var newOrder=[],processedColIds={};params.state.forEach(function(item){if(!(!item.colId||processedColIds[item.colId])){var col=_this.gridColumnsMap[item.colId];col&&(newOrder.push(col),processedColIds[item.colId]=!0)}});var autoGroupInsertIndex=0;if(this.gridColumns.forEach(function(col){var colId=col.getColId(),alreadyProcessed=processedColIds[colId]!=null;if(!alreadyProcessed){var isAutoGroupCol=colId.startsWith(GROUP_AUTO_COLUMN_ID);isAutoGroupCol?insertIntoArray(newOrder,col,autoGroupInsertIndex++):newOrder.push(col)}}),newOrder=this.placeLockedColumns(newOrder),!this.doesMovePassMarryChildren(newOrder)){console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.gridColumns=newOrder}},ColumnModel2.prototype.compareColumnStatesAndDispatchEvents=function(source){var _this=this,startState={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},columnStateBefore=this.getColumnState(),columnStateBeforeMap={};return columnStateBefore.forEach(function(col){columnStateBeforeMap[col.colId]=col}),function(){var colsForState=_this.getPrimaryAndSecondaryAndAutoColumns(),dispatchWhenListsDifferent=__name(function(eventType,colsBefore,colsAfter,idMapper){var beforeList=colsBefore.map(idMapper),afterList=colsAfter.map(idMapper),unchanged=areEqual(beforeList,afterList);if(!unchanged){var changes=new Set(colsBefore);colsAfter.forEach(function(id){changes.delete(id)||changes.add(id)});var changesArr=__spreadArray$s([],__read$A(changes),!1),event={type:eventType,columns:changesArr,column:changesArr.length===1?changesArr[0]:null,source};_this.eventService.dispatchEvent(event)}},"dispatchWhenListsDifferent"),getChangedColumns=__name(function(changedPredicate){var changedColumns2=[];return colsForState.forEach(function(column){var colStateBefore=columnStateBeforeMap[column.getColId()];colStateBefore&&changedPredicate(colStateBefore,column)&&changedColumns2.push(column)}),changedColumns2},"getChangedColumns"),columnIdMapper=__name(function(c){return c.getColId()},"columnIdMapper");dispatchWhenListsDifferent(Events.EVENT_COLUMN_ROW_GROUP_CHANGED,startState.rowGroupColumns,_this.rowGroupColumns,columnIdMapper),dispatchWhenListsDifferent(Events.EVENT_COLUMN_PIVOT_CHANGED,startState.pivotColumns,_this.pivotColumns,columnIdMapper);var valueChangePredicate=__name(function(cs,c){var oldActive=cs.aggFunc!=null,activeChanged=oldActive!=c.isValueActive(),aggFuncChanged=oldActive&&cs.aggFunc!=c.getAggFunc();return activeChanged||aggFuncChanged},"valueChangePredicate"),changedValues=getChangedColumns(valueChangePredicate);changedValues.length>0&&_this.dispatchColumnChangedEvent(Events.EVENT_COLUMN_VALUE_CHANGED,changedValues,source);var resizeChangePredicate=__name(function(cs,c){return cs.width!=c.getActualWidth()},"resizeChangePredicate");_this.dispatchColumnResizedEvent(getChangedColumns(resizeChangePredicate),!0,source);var pinnedChangePredicate=__name(function(cs,c){return cs.pinned!=c.getPinned()},"pinnedChangePredicate");_this.dispatchColumnPinnedEvent(getChangedColumns(pinnedChangePredicate),source);var visibilityChangePredicate=__name(function(cs,c){return cs.hide==c.isVisible()},"visibilityChangePredicate");_this.dispatchColumnVisibleEvent(getChangedColumns(visibilityChangePredicate),source);var sortChangePredicate=__name(function(cs,c){return cs.sort!=c.getSort()||cs.sortIndex!=c.getSortIndex()},"sortChangePredicate"),changedColumns=getChangedColumns(sortChangePredicate);changedColumns.length>0&&_this.sortController.dispatchSortChangedEvents(source,changedColumns),_this.normaliseColumnMovedEventForColumnState(columnStateBefore,source)}},ColumnModel2.prototype.getCommonValue=function(cols,valueGetter){if(!(!cols||cols.length==0)){for(var firstValue=valueGetter(cols[0]),i=1;i<cols.length;i++)if(firstValue!==valueGetter(cols[i]))return;return firstValue}},ColumnModel2.prototype.normaliseColumnMovedEventForColumnState=function(colStateBefore,source){var _this=this,colStateAfter=this.getColumnState(),colStateAfterMapped={};colStateAfter.forEach(function(s){return colStateAfterMapped[s.colId]=s});var colsIntersectIds={};colStateBefore.forEach(function(s){colStateAfterMapped[s.colId]&&(colsIntersectIds[s.colId]=!0)});var beforeFiltered=colStateBefore.filter(function(c){return colsIntersectIds[c.colId]}),afterFiltered=colStateAfter.filter(function(c){return colsIntersectIds[c.colId]}),movedColumns=[];afterFiltered.forEach(function(csAfter,index){var csBefore=beforeFiltered&&beforeFiltered[index];if(csBefore&&csBefore.colId!==csAfter.colId){var gridCol=_this.getGridColumn(csBefore.colId);gridCol&&movedColumns.push(gridCol)}}),movedColumns.length&&this.dispatchColumnMovedEvent({movedColumns,source,finished:!0})},ColumnModel2.prototype.syncColumnWithStateItem=function(column,stateItem,defaultState,rowGroupIndexes,pivotIndexes,autoCol,source){if(column){var getValue=__name(function(key1,key2){var obj={value1:void 0,value2:void 0},calculated=!1;return stateItem&&(stateItem[key1]!==void 0&&(obj.value1=stateItem[key1],calculated=!0),exists(key2)&&stateItem[key2]!==void 0&&(obj.value2=stateItem[key2],calculated=!0)),!calculated&&defaultState&&(defaultState[key1]!==void 0&&(obj.value1=defaultState[key1]),exists(key2)&&defaultState[key2]!==void 0&&(obj.value2=defaultState[key2])),obj},"getValue"),hide=getValue("hide").value1;hide!==void 0&&column.setVisible(!hide,source);var pinned=getValue("pinned").value1;pinned!==void 0&&column.setPinned(pinned);var minColWidth=this.columnUtils.calculateColMinWidth(column.getColDef()),flex=getValue("flex").value1;if(flex!==void 0&&column.setFlex(flex),flex==null){var width=getValue("width").value1;width!=null&&minColWidth!=null&&width>=minColWidth&&column.setActualWidth(width,source)}var sort=getValue("sort").value1;sort!==void 0&&(sort==="desc"||sort==="asc"?column.setSort(sort,source):column.setSort(void 0,source));var sortIndex=getValue("sortIndex").value1;if(sortIndex!==void 0&&column.setSortIndex(sortIndex),!(autoCol||!column.isPrimary())){var aggFunc=getValue("aggFunc").value1;aggFunc!==void 0&&(typeof aggFunc=="string"?(column.setAggFunc(aggFunc),column.isValueActive()||(column.setValueActive(!0,source),this.valueColumns.push(column))):(exists(aggFunc)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),column.isValueActive()&&(column.setValueActive(!1,source),removeFromArray(this.valueColumns,column))));var _a=getValue("rowGroup","rowGroupIndex"),rowGroup=_a.value1,rowGroupIndex=_a.value2;(rowGroup!==void 0||rowGroupIndex!==void 0)&&(typeof rowGroupIndex=="number"||rowGroup?(column.isRowGroupActive()||(column.setRowGroupActive(!0,source),this.rowGroupColumns.push(column)),rowGroupIndexes&&typeof rowGroupIndex=="number"&&(rowGroupIndexes[column.getId()]=rowGroupIndex)):column.isRowGroupActive()&&(column.setRowGroupActive(!1,source),removeFromArray(this.rowGroupColumns,column)));var _b=getValue("pivot","pivotIndex"),pivot=_b.value1,pivotIndex=_b.value2;(pivot!==void 0||pivotIndex!==void 0)&&(typeof pivotIndex=="number"||pivot?(column.isPivotActive()||(column.setPivotActive(!0,source),this.pivotColumns.push(column)),pivotIndexes&&typeof pivotIndex=="number"&&(pivotIndexes[column.getId()]=pivotIndex)):column.isPivotActive()&&(column.setPivotActive(!1,source),removeFromArray(this.pivotColumns,column)))}}},ColumnModel2.prototype.getGridColumns=function(keys2){return this.getColumns(keys2,this.getGridColumn.bind(this))},ColumnModel2.prototype.getColumns=function(keys2,columnLookupCallback){var foundColumns=[];return keys2&&keys2.forEach(function(key){var column=columnLookupCallback(key);column&&foundColumns.push(column)}),foundColumns},ColumnModel2.prototype.getColumnWithValidation=function(key){if(key==null)return null;var column=this.getGridColumn(key);return column||console.warn("AG Grid: could not find column "+key),column},ColumnModel2.prototype.getPrimaryColumn=function(key){return this.primaryColumns?this.getColumn(key,this.primaryColumns,this.primaryColumnsMap):null},ColumnModel2.prototype.getGridColumn=function(key){return this.getColumn(key,this.gridColumns,this.gridColumnsMap)},ColumnModel2.prototype.lookupGridColumn=function(key){return this.gridColumnsMap[key]},ColumnModel2.prototype.getSecondaryColumn=function(key){return this.secondaryColumns?this.getColumn(key,this.secondaryColumns,this.secondaryColumnsMap):null},ColumnModel2.prototype.getColumn=function(key,columnList,columnMap){if(!key||!columnMap)return null;if(typeof key=="string"&&columnMap[key])return columnMap[key];for(var i=0;i<columnList.length;i++)if(this.columnsMatch(columnList[i],key))return columnList[i];return this.getAutoColumn(key)},ColumnModel2.prototype.getSourceColumnsForGroupColumn=function(groupCol){var sourceColumnId=groupCol.getColDef().showRowGroup;if(!sourceColumnId)return null;if(sourceColumnId===!0)return this.rowGroupColumns.slice(0);var column=this.getPrimaryColumn(sourceColumnId);return column?[column]:null},ColumnModel2.prototype.getAutoColumn=function(key){var _this=this;return!this.groupAutoColumns||!exists(this.groupAutoColumns)||missing(this.groupAutoColumns)?null:this.groupAutoColumns.find(function(groupCol){return _this.columnsMatch(groupCol,key)})||null},ColumnModel2.prototype.columnsMatch=function(column,key){var columnMatches=column===key,colDefMatches=column.getColDef()===key,idMatches=column.getColId()==key;return columnMatches||colDefMatches||idMatches},ColumnModel2.prototype.getDisplayNameForColumn=function(column,location,includeAggFunc){if(includeAggFunc===void 0&&(includeAggFunc=!1),!column)return null;var headerName=this.getHeaderName(column.getColDef(),column,null,null,location);return includeAggFunc?this.wrapHeaderNameWithAggFunc(column,headerName):headerName},ColumnModel2.prototype.getDisplayNameForProvidedColumnGroup=function(columnGroup,providedColumnGroup,location){var colGroupDef=providedColumnGroup?providedColumnGroup.getColGroupDef():null;return colGroupDef?this.getHeaderName(colGroupDef,null,columnGroup,providedColumnGroup,location):null},ColumnModel2.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.getDisplayNameForProvidedColumnGroup(columnGroup,columnGroup.getProvidedColumnGroup(),location)},ColumnModel2.prototype.getHeaderName=function(colDef,column,columnGroup,providedColumnGroup,location){var headerValueGetter=colDef.headerValueGetter;if(headerValueGetter){var params=this.gridOptionsService.addGridCommonParams({colDef,column,columnGroup,providedColumnGroup,location});return typeof headerValueGetter=="function"?headerValueGetter(params):typeof headerValueGetter=="string"?this.expressionService.evaluate(headerValueGetter,params):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}else{if(colDef.headerName!=null)return colDef.headerName;if(colDef.field)return camelCaseToHumanText(colDef.field)}return""},ColumnModel2.prototype.wrapHeaderNameWithAggFunc=function(column,headerName){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return headerName;var pivotValueColumn=column.getColDef().pivotValueColumn,pivotActiveOnThisColumn=exists(pivotValueColumn),aggFunc=null,aggFuncFound;if(pivotActiveOnThisColumn){var isCollapsedHeaderEnabled=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&this.valueColumns.length===1,isTotalColumn=column.getColDef().pivotTotalColumnIds!==void 0;if(isCollapsedHeaderEnabled&&!isTotalColumn)return headerName;aggFunc=pivotValueColumn?pivotValueColumn.getAggFunc():null,aggFuncFound=!0}else{var measureActive=column.isValueActive(),aggregationPresent=this.pivotMode||!this.isRowGroupEmpty();measureActive&&aggregationPresent?(aggFunc=column.getAggFunc(),aggFuncFound=!0):aggFuncFound=!1}if(aggFuncFound){var aggFuncString=typeof aggFunc=="string"?aggFunc:"func",localeTextFunc=this.localeService.getLocaleTextFunc(),aggFuncStringTranslated=localeTextFunc(aggFuncString,aggFuncString);return"".concat(aggFuncStringTranslated,"(").concat(headerName,")")}return headerName},ColumnModel2.prototype.getColumnGroup=function(colId,partId){if(!colId)return null;if(colId instanceof ColumnGroup)return colId;var allColumnGroups=this.getAllDisplayedTrees(),checkPartId=typeof partId=="number",result=null;return this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,function(child){if(child instanceof ColumnGroup){var columnGroup=child,matched=void 0;checkPartId?matched=colId===columnGroup.getGroupId()&&partId===columnGroup.getPartId():matched=colId===columnGroup.getGroupId(),matched&&(result=columnGroup)}}),result},ColumnModel2.prototype.isReady=function(){return this.ready},ColumnModel2.prototype.extractValueColumns=function(source,oldPrimaryColumns){this.valueColumns=this.extractColumns(oldPrimaryColumns,this.valueColumns,function(col,flag){return col.setValueActive(flag,source)},function(){},function(){},function(colDef){var aggFunc=colDef.aggFunc;if(aggFunc===null||aggFunc==="")return null;if(aggFunc!==void 0)return!!aggFunc},function(colDef){return colDef.initialAggFunc!=null&&colDef.initialAggFunc!=""}),this.valueColumns.forEach(function(col){var colDef=col.getColDef();colDef.aggFunc!=null&&colDef.aggFunc!=""?col.setAggFunc(colDef.aggFunc):col.getAggFunc()||col.setAggFunc(colDef.initialAggFunc)})},ColumnModel2.prototype.extractRowGroupColumns=function(source,oldPrimaryColumns){this.rowGroupColumns=this.extractColumns(oldPrimaryColumns,this.rowGroupColumns,function(col,flag){return col.setRowGroupActive(flag,source)},function(colDef){return colDef.rowGroupIndex},function(colDef){return colDef.initialRowGroupIndex},function(colDef){return colDef.rowGroup},function(colDef){return colDef.initialRowGroup})},ColumnModel2.prototype.extractColumns=function(oldPrimaryColumns,previousCols,setFlagFunc,getIndexFunc,getInitialIndexFunc,getValueFunc,getInitialValueFunc){oldPrimaryColumns===void 0&&(oldPrimaryColumns=[]),previousCols===void 0&&(previousCols=[]);var colsWithIndex=[],colsWithValue=[];(this.primaryColumns||[]).forEach(function(col){var colIsNew=oldPrimaryColumns.indexOf(col)<0,colDef=col.getColDef(),value=attrToBoolean(getValueFunc(colDef)),initialValue=attrToBoolean(getInitialValueFunc(colDef)),index=attrToNumber(getIndexFunc(colDef)),initialIndex=attrToNumber(getInitialIndexFunc(colDef)),include,valuePresent=value!==void 0,indexPresent=index!==void 0,initialValuePresent=initialValue!==void 0,initialIndexPresent=initialIndex!==void 0;if(valuePresent?include=value:indexPresent?index===null?include=!1:include=index>=0:colIsNew?initialValuePresent?include=initialValue:initialIndexPresent?include=initialIndex!=null&&initialIndex>=0:include=!1:include=previousCols.indexOf(col)>=0,include){var useIndex=colIsNew?index!=null||initialIndex!=null:index!=null;useIndex?colsWithIndex.push(col):colsWithValue.push(col)}});var getIndexForCol=__name(function(col){var index=getIndexFunc(col.getColDef()),defaultIndex=getInitialIndexFunc(col.getColDef());return index??defaultIndex},"getIndexForCol");colsWithIndex.sort(function(colA,colB){var indexA=getIndexForCol(colA),indexB=getIndexForCol(colB);return indexA===indexB?0:indexA<indexB?-1:1});var res=[].concat(colsWithIndex);return previousCols.forEach(function(col){colsWithValue.indexOf(col)>=0&&res.push(col)}),colsWithValue.forEach(function(col){res.indexOf(col)<0&&res.push(col)}),previousCols.forEach(function(col){res.indexOf(col)<0&&setFlagFunc(col,!1)}),res.forEach(function(col){previousCols.indexOf(col)<0&&setFlagFunc(col,!0)}),res},ColumnModel2.prototype.extractPivotColumns=function(source,oldPrimaryColumns){this.pivotColumns=this.extractColumns(oldPrimaryColumns,this.pivotColumns,function(col,flag){return col.setPivotActive(flag,source)},function(colDef){return colDef.pivotIndex},function(colDef){return colDef.initialPivotIndex},function(colDef){return colDef.pivot},function(colDef){return colDef.initialPivot})},ColumnModel2.prototype.resetColumnGroupState=function(source){if(this.primaryColumnTree){var stateItems=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,function(child){if(child instanceof ProvidedColumnGroup){var colGroupDef=child.getColGroupDef(),groupState={groupId:child.getGroupId(),open:colGroupDef?colGroupDef.openByDefault:void 0};stateItems.push(groupState)}}),this.setColumnGroupState(stateItems,source)}},ColumnModel2.prototype.getColumnGroupState=function(){var columnGroupState=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(node){node instanceof ProvidedColumnGroup&&columnGroupState.push({groupId:node.getGroupId(),open:node.isExpanded()})}),columnGroupState},ColumnModel2.prototype.setColumnGroupState=function(stateItems,source){var _this=this;if(this.gridBalancedTree){this.columnAnimationService.start();var impactedGroups=[];if(stateItems.forEach(function(stateItem){var groupKey=stateItem.groupId,newValue=stateItem.open,providedColumnGroup=_this.getProvidedColumnGroup(groupKey);providedColumnGroup&&providedColumnGroup.isExpanded()!==newValue&&(_this.logger.log("columnGroupOpened("+providedColumnGroup.getGroupId()+","+newValue+")"),providedColumnGroup.setExpanded(newValue),impactedGroups.push(providedColumnGroup))}),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source),impactedGroups.length){var event_4={type:Events.EVENT_COLUMN_GROUP_OPENED,columnGroup:ProvidedColumnGroup.length===1?impactedGroups[0]:void 0,columnGroups:impactedGroups};this.eventService.dispatchEvent(event_4)}this.columnAnimationService.finish()}},ColumnModel2.prototype.setColumnGroupOpened=function(key,newValue,source){var keyAsString;key instanceof ProvidedColumnGroup?keyAsString=key.getId():keyAsString=key||"",this.setColumnGroupState([{groupId:keyAsString,open:newValue}],source)},ColumnModel2.prototype.getProvidedColumnGroup=function(key){typeof key!="string"&&console.error("AG Grid: group key must be a string");var res=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,function(node){node instanceof ProvidedColumnGroup&&node.getId()===key&&(res=node)}),res},ColumnModel2.prototype.calculateColumnsForDisplay=function(){var _this=this,columnsForDisplay;return this.pivotMode&&missing(this.secondaryColumns)?columnsForDisplay=this.gridColumns.filter(function(column){var isAutoGroupCol=_this.groupAutoColumns&&includes(_this.groupAutoColumns,column),isValueCol=_this.valueColumns&&includes(_this.valueColumns,column);return isAutoGroupCol||isValueCol}):columnsForDisplay=this.gridColumns.filter(function(column){var isAutoGroupCol=_this.groupAutoColumns&&includes(_this.groupAutoColumns,column);return isAutoGroupCol||column.isVisible()}),columnsForDisplay},ColumnModel2.prototype.checkColSpanActiveInCols=function(columns){var result=!1;return columns.forEach(function(col){exists(col.getColDef().colSpan)&&(result=!0)}),result},ColumnModel2.prototype.calculateColumnsForGroupDisplay=function(){var _this=this;this.groupDisplayColumns=[],this.groupDisplayColumnsMap={};var checkFunc=__name(function(col){var colDef=col.getColDef(),underlyingColumn=colDef.showRowGroup;colDef&&exists(underlyingColumn)&&(_this.groupDisplayColumns.push(col),typeof underlyingColumn=="string"?_this.groupDisplayColumnsMap[underlyingColumn]=col:underlyingColumn===!0&&_this.getRowGroupColumns().forEach(function(rowGroupCol){_this.groupDisplayColumnsMap[rowGroupCol.getId()]=col}))},"checkFunc");this.gridColumns.forEach(checkFunc)},ColumnModel2.prototype.getGroupDisplayColumns=function(){return this.groupDisplayColumns},ColumnModel2.prototype.getGroupDisplayColumnForGroup=function(rowGroupColumnId){return this.groupDisplayColumnsMap[rowGroupColumnId]},ColumnModel2.prototype.updateDisplayedColumns=function(source){var columnsForDisplay=this.calculateColumnsForDisplay();this.buildDisplayedTrees(columnsForDisplay),this.updateGroupsAndDisplayedColumns(source),this.setFirstRightAndLastLeftPinned(source)},ColumnModel2.prototype.isSecondaryColumnsPresent=function(){return exists(this.secondaryColumns)},ColumnModel2.prototype.setSecondaryColumns=function(colDefs,source){var _this=this;if(this.gridColumns){var newColsPresent=colDefs&&colDefs.length>0;if(!(!newColsPresent&&missing(this.secondaryColumns))){if(newColsPresent){this.processSecondaryColumnDefinitions(colDefs);var balancedTreeResult=this.columnFactory.createColumnTree(colDefs,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,source);this.destroyOldColumns(this.secondaryBalancedTree,balancedTreeResult.columnTree),this.secondaryBalancedTree=balancedTreeResult.columnTree,this.secondaryHeaderRowCount=balancedTreeResult.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(function(col){return _this.secondaryColumnsMap[col.getId()]=col}),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(source)}}},ColumnModel2.prototype.processSecondaryColumnDefinitions=function(colDefs){var columnCallback=this.gridOptionsService.get("processPivotResultColDef"),groupCallback=this.gridOptionsService.get("processPivotResultColGroupDef");if(!(!columnCallback&&!groupCallback)){var searchForColDefs=__name(function(colDefs2){colDefs2.forEach(function(abstractColDef){var isGroup=exists(abstractColDef.children);if(isGroup){var colGroupDef=abstractColDef;groupCallback&&groupCallback(colGroupDef),searchForColDefs(colGroupDef.children)}else{var colDef=abstractColDef;columnCallback&&columnCallback(colDef)}})},"searchForColDefs");colDefs&&searchForColDefs(colDefs)}},ColumnModel2.prototype.updateGridColumns=function(){var _this=this,prevGridCols=this.gridBalancedTree;this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns;var areAutoColsChanged=this.createGroupAutoColumnsIfNeeded();if(areAutoColsChanged){var groupAutoColsMap_1=convertToMap(this.groupAutoColumns.map(function(col){return[col,!0]}));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(function(col){return!groupAutoColsMap_1.has(col)}),this.lastPrimaryOrder=__spreadArray$s(__spreadArray$s([],__read$A(this.groupAutoColumns),!1),__read$A(this.lastPrimaryOrder),!1)),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(function(col){return!groupAutoColsMap_1.has(col)}),this.lastSecondaryOrder=__spreadArray$s(__spreadArray$s([],__read$A(this.groupAutoColumns),!1),__read$A(this.lastSecondaryOrder),!1))}var sortOrderToRecover;if(this.secondaryColumns&&this.secondaryBalancedTree){var hasSameColumns=this.secondaryColumns.some(function(col){return _this.gridColumnsMap[col.getColId()]!==void 0});this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,hasSameColumns&&(sortOrderToRecover=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,sortOrderToRecover=this.lastPrimaryOrder);if(this.addAutoGroupToGridColumns(),this.orderGridColsLike(sortOrderToRecover),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(function(col){return _this.gridColumnsMap[col.getId()]=col}),this.setAutoHeightActive(),!areEqual(prevGridCols,this.gridBalancedTree)){var event_5={type:Events.EVENT_GRID_COLUMNS_CHANGED};this.eventService.dispatchEvent(event_5)}},ColumnModel2.prototype.setAutoHeightActive=function(){if(this.autoHeightActive=this.gridColumns.filter(function(col){return col.isAutoHeight()}).length>0,this.autoHeightActive){this.autoHeightActiveAtLeastOnce=!0;var supportedRowModel=this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide");supportedRowModel||warnOnce("autoHeight columns only work with Client Side Row Model and Server Side Row Model.")}},ColumnModel2.prototype.orderGridColsLike=function(colsOrder){if(!missing(colsOrder)){var lastOrderMapped=convertToMap(colsOrder.map(function(col,index){return[col,index]})),noColsFound=!0;if(this.gridColumns.forEach(function(col){lastOrderMapped.has(col)&&(noColsFound=!1)}),!noColsFound){var gridColsMap=convertToMap(this.gridColumns.map(function(col){return[col,!0]})),oldColsOrdered=colsOrder.filter(function(col){return gridColsMap.has(col)}),oldColsMap=convertToMap(oldColsOrdered.map(function(col){return[col,!0]})),newColsOrdered=this.gridColumns.filter(function(col){return!oldColsMap.has(col)}),newGridColumns=oldColsOrdered.slice();newColsOrdered.forEach(function(newCol){var parent=newCol.getOriginalParent();if(!parent){newGridColumns.push(newCol);return}for(var siblings=[];!siblings.length&&parent;){var leafCols=parent.getLeafColumns();leafCols.forEach(function(leafCol){var presentInNewGriColumns=newGridColumns.indexOf(leafCol)>=0,noYetInSiblings=siblings.indexOf(leafCol)<0;presentInNewGriColumns&&noYetInSiblings&&siblings.push(leafCol)}),parent=parent.getOriginalParent()}if(!siblings.length){newGridColumns.push(newCol);return}var indexes=siblings.map(function(col){return newGridColumns.indexOf(col)}),lastIndex=Math.max.apply(Math,__spreadArray$s([],__read$A(indexes),!1));insertIntoArray(newGridColumns,newCol,lastIndex+1)}),this.gridColumns=newGridColumns}}},ColumnModel2.prototype.isPrimaryColumnGroupsPresent=function(){return this.primaryHeaderRowCount>1},ColumnModel2.prototype.refreshQuickFilterColumns=function(){var _a,columnsForQuickFilter=(_a=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)!==null&&_a!==void 0?_a:[];this.groupAutoColumns&&(columnsForQuickFilter=columnsForQuickFilter.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?columnsForQuickFilter:columnsForQuickFilter.filter(function(col){return col.isVisible()||col.isRowGroupActive()})},ColumnModel2.prototype.placeLockedColumns=function(cols){var left=[],normal=[],right=[];return cols.forEach(function(col){var position=col.getColDef().lockPosition;position==="right"?right.push(col):position==="left"||position===!0?left.push(col):normal.push(col)}),__spreadArray$s(__spreadArray$s(__spreadArray$s([],__read$A(left),!1),__read$A(normal),!1),__read$A(right),!1)},ColumnModel2.prototype.addAutoGroupToGridColumns=function(){if(missing(this.groupAutoColumns)){this.destroyOldColumns(this.groupAutoColsBalancedTree),this.groupAutoColsBalancedTree=null;return}this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;var newAutoColsTree=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,newAutoColsTree),this.groupAutoColsBalancedTree=newAutoColsTree,this.gridBalancedTree=newAutoColsTree.concat(this.gridBalancedTree)},ColumnModel2.prototype.clearDisplayedAndViewportColumns=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""},ColumnModel2.prototype.updateGroupsAndDisplayedColumns=function(source){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(source),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths();var event={type:Events.EVENT_DISPLAYED_COLUMNS_CHANGED};this.eventService.dispatchEvent(event)},ColumnModel2.prototype.deriveDisplayedColumns=function(source){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(source),this.displayedAutoHeightCols=this.displayedColumns.filter(function(col){return col.isAutoHeight()})},ColumnModel2.prototype.isAutoRowHeightActive=function(){return this.autoHeightActive},ColumnModel2.prototype.wasAutoRowHeightEverActive=function(){return this.autoHeightActiveAtLeastOnce},ColumnModel2.prototype.joinColumnsAriaOrder=function(){var e_3,_a,allColumns=this.getAllGridColumns(),pinnedLeft=[],center=[],pinnedRight=[];try{for(var allColumns_1=__values$a(allColumns),allColumns_1_1=allColumns_1.next();!allColumns_1_1.done;allColumns_1_1=allColumns_1.next()){var col=allColumns_1_1.value,pinned=col.getPinned();pinned?pinned===!0||pinned==="left"?pinnedLeft.push(col):pinnedRight.push(col):center.push(col)}}catch(e_3_1){e_3={error:e_3_1}}finally{try{allColumns_1_1&&!allColumns_1_1.done&&(_a=allColumns_1.return)&&_a.call(allColumns_1)}finally{if(e_3)throw e_3.error}}this.ariaOrderColumns=pinnedLeft.concat(center).concat(pinnedRight)},ColumnModel2.prototype.joinDisplayedColumns=function(){this.gridOptionsService.get("enableRtl")?this.displayedColumns=this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumns=this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)},ColumnModel2.prototype.setLeftValues=function(source){this.setLeftValuesOfColumns(source),this.setLeftValuesOfGroups()},ColumnModel2.prototype.setLeftValuesOfColumns=function(source){var _this=this;if(this.primaryColumns){var allColumns=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),doingRtl=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(function(columns){if(doingRtl){var left_1=_this.getWidthOfColsInList(columns);columns.forEach(function(column){left_1-=column.getActualWidth(),column.setLeft(left_1,source)})}else{var left_2=0;columns.forEach(function(column){column.setLeft(left_2,source),left_2+=column.getActualWidth()})}removeAllFromUnorderedArray(allColumns,columns)}),allColumns.forEach(function(column){column.setLeft(null,source)})}},ColumnModel2.prototype.setLeftValuesOfGroups=function(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(function(columns){columns.forEach(function(column){if(column instanceof ColumnGroup){var columnGroup=column;columnGroup.checkLeft()}})})},ColumnModel2.prototype.derivedDisplayedColumnsFromDisplayedTree=function(tree,columns){columns.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(tree,function(child){child instanceof Column&&columns.push(child)})},ColumnModel2.prototype.isColumnVirtualisationSuppressed=function(){return this.suppressColumnVirtualisation||this.viewportRight===0},ColumnModel2.prototype.extractViewportColumns=function(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)},ColumnModel2.prototype.getVirtualHeaderGroupRow=function(type,dept){var result;switch(type){case"left":result=this.viewportRowLeft[dept];break;case"right":result=this.viewportRowRight[dept];break;default:result=this.viewportRowCenter[dept];break}return missing(result)&&(result=[]),result},ColumnModel2.prototype.calculateHeaderRows=function(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};var virtualColIds={};this.headerViewportColumns.forEach(function(col){return virtualColIds[col.getId()]=!0});var testGroup=__name(function(children,result,dept){for(var returnValue=!1,i=0;i<children.length;i++){var child=children[i],addThisItem=!1;if(child instanceof Column)addThisItem=virtualColIds[child.getId()]===!0;else{var columnGroup=child,displayedChildren=columnGroup.getDisplayedChildren();displayedChildren&&(addThisItem=testGroup(displayedChildren,result,dept+1))}addThisItem&&(returnValue=!0,result[dept]||(result[dept]=[]),result[dept].push(child))}return returnValue},"testGroup");testGroup(this.displayedTreeLeft,this.viewportRowLeft,0),testGroup(this.displayedTreeRight,this.viewportRowRight,0),testGroup(this.displayedTreeCentre,this.viewportRowCenter,0)},ColumnModel2.prototype.extractViewport=function(){var hashColumn=__name(function(c){return"".concat(c.getId(),"-").concat(c.getPinned()||"normal")},"hashColumn");this.extractViewportColumns();var newHash=this.viewportColumns.map(hashColumn).join("#"),changed=this.viewportColumnsHash!==newHash;return changed&&(this.viewportColumnsHash=newHash,this.calculateHeaderRows()),changed},ColumnModel2.prototype.refreshFlexedColumns=function(params){var _a;params===void 0&&(params={});var source=params.source?params.source:"flex";if(params.viewportWidth!=null&&(this.flexViewportWidth=params.viewportWidth),!this.flexViewportWidth)return[];var flexAfterDisplayIndex=-1;if(params.resizingCols){for(var allResizingCols=new Set(params.resizingCols),displayedCols=this.displayedColumnsCenter,i=displayedCols.length-1;i>=0;i--)if(allResizingCols.has(displayedCols[i])){flexAfterDisplayIndex=i;break}}for(var knownColumnsWidth=0,flexingColumns=[],minimumFlexedWidth=0,totalFlex=0,i=0;i<this.displayedColumnsCenter.length;i++){var isFlex=this.displayedColumnsCenter[i].getFlex()&&i>flexAfterDisplayIndex;isFlex?(flexingColumns.push(this.displayedColumnsCenter[i]),totalFlex+=this.displayedColumnsCenter[i].getFlex(),minimumFlexedWidth+=(_a=this.displayedColumnsCenter[i].getMinWidth())!==null&&_a!==void 0?_a:0):knownColumnsWidth+=this.displayedColumnsCenter[i].getActualWidth()}if(!flexingColumns.length)return[];var changedColumns=[];knownColumnsWidth+minimumFlexedWidth>this.flexViewportWidth&&(flexingColumns.forEach(function(col2){var _a2;return col2.setActualWidth((_a2=col2.getMinWidth())!==null&&_a2!==void 0?_a2:0,source)}),changedColumns=flexingColumns,flexingColumns=[]);var flexingColumnSizes=[],spaceForFlexingColumns;outer:for(;;){spaceForFlexingColumns=this.flexViewportWidth-knownColumnsWidth;for(var spacePerFlex=spaceForFlexingColumns/totalFlex,i=0;i<flexingColumns.length;i++){var col=flexingColumns[i],widthByFlexRule=spacePerFlex*col.getFlex(),constrainedWidth=0,minWidth=col.getMinWidth(),maxWidth=col.getMaxWidth();if(exists(minWidth)&&widthByFlexRule<minWidth?constrainedWidth=minWidth:exists(maxWidth)&&widthByFlexRule>maxWidth&&(constrainedWidth=maxWidth),constrainedWidth){col.setActualWidth(constrainedWidth,source),removeFromUnorderedArray(flexingColumns,col),totalFlex-=col.getFlex(),changedColumns.push(col),knownColumnsWidth+=col.getActualWidth();continue outer}flexingColumnSizes[i]=Math.round(widthByFlexRule)}break}var remainingSpace=spaceForFlexingColumns;return flexingColumns.forEach(function(col2,i2){col2.setActualWidth(Math.min(flexingColumnSizes[i2],remainingSpace),source),changedColumns.push(col2),remainingSpace-=flexingColumnSizes[i2]}),params.skipSetLeft||this.setLeftValues(source),params.updateBodyWidths&&this.updateBodyWidths(),params.fireResizedEvent&&this.dispatchColumnResizedEvent(changedColumns,!0,source,flexingColumns),flexingColumns},ColumnModel2.prototype.sizeColumnsToFit=function(gridWidth,source,silent,params){var _this=this,_a,_b,_c,_d,_e;if(source===void 0&&(source="sizeColumnsToFit"),this.shouldQueueResizeOperations){this.resizeOperationQueue.push(function(){return _this.sizeColumnsToFit(gridWidth,source,silent,params)});return}var limitsMap={};params&&((_a=params==null?void 0:params.columnLimits)===null||_a===void 0||_a.forEach(function(_a2){var key=_a2.key,dimensions=__rest(_a2,["key"]);limitsMap[typeof key=="string"?key:key.getColId()]=dimensions}));var allDisplayedColumns=this.getAllDisplayedColumns(),doColumnsAlreadyFit=gridWidth===this.getWidthOfColsInList(allDisplayedColumns);if(!(gridWidth<=0||!allDisplayedColumns.length||doColumnsAlreadyFit)){var colsToSpread=[],colsToNotSpread=[];allDisplayedColumns.forEach(function(column2){column2.getColDef().suppressSizeToFit===!0?colsToNotSpread.push(column2):colsToSpread.push(column2)});var colsToDispatchEventFor=colsToSpread.slice(0),finishedResizing=!1,moveToNotSpread=__name(function(column2){removeFromArray(colsToSpread,column2),colsToNotSpread.push(column2)},"moveToNotSpread");for(colsToSpread.forEach(function(column2){var _a2,_b2;column2.resetActualWidth(source);var widthOverride2=limitsMap==null?void 0:limitsMap[column2.getId()],minOverride2=(_a2=widthOverride2==null?void 0:widthOverride2.minWidth)!==null&&_a2!==void 0?_a2:params==null?void 0:params.defaultMinWidth,maxOverride2=(_b2=widthOverride2==null?void 0:widthOverride2.maxWidth)!==null&&_b2!==void 0?_b2:params==null?void 0:params.defaultMaxWidth,colWidth=column2.getActualWidth();typeof minOverride2=="number"&&colWidth<minOverride2?column2.setActualWidth(minOverride2,source,!0):typeof maxOverride2=="number"&&colWidth>maxOverride2&&column2.setActualWidth(maxOverride2,source,!0)});!finishedResizing;){finishedResizing=!0;var availablePixels=gridWidth-this.getWidthOfColsInList(colsToNotSpread);if(availablePixels<=0)colsToSpread.forEach(function(column2){var _a2,_b2,widthOverride2=(_b2=(_a2=limitsMap==null?void 0:limitsMap[column2.getId()])===null||_a2===void 0?void 0:_a2.minWidth)!==null&&_b2!==void 0?_b2:params==null?void 0:params.defaultMinWidth;if(typeof widthOverride2=="number"){column2.setActualWidth(widthOverride2,source,!0);return}column2.setMinimum(source)});else for(var scale=availablePixels/this.getWidthOfColsInList(colsToSpread),pixelsForLastCol=availablePixels,i=colsToSpread.length-1;i>=0;i--){var column=colsToSpread[i],widthOverride=limitsMap==null?void 0:limitsMap[column.getId()],minOverride=(_b=widthOverride==null?void 0:widthOverride.minWidth)!==null&&_b!==void 0?_b:params==null?void 0:params.defaultMinWidth,maxOverride=(_c=widthOverride==null?void 0:widthOverride.maxWidth)!==null&&_c!==void 0?_c:params==null?void 0:params.defaultMaxWidth,colMinWidth=(_d=column.getMinWidth())!==null&&_d!==void 0?_d:0,colMaxWidth=(_e=column.getMaxWidth())!==null&&_e!==void 0?_e:Number.MAX_VALUE,minWidth=typeof minOverride=="number"&&minOverride>colMinWidth?minOverride:column.getMinWidth(),maxWidth=typeof maxOverride=="number"&&maxOverride<colMaxWidth?maxOverride:column.getMaxWidth(),newWidth=Math.round(column.getActualWidth()*scale);exists(minWidth)&&newWidth<minWidth?(newWidth=minWidth,moveToNotSpread(column),finishedResizing=!1):exists(maxWidth)&&newWidth>maxWidth?(newWidth=maxWidth,moveToNotSpread(column),finishedResizing=!1):i===0&&(newWidth=pixelsForLastCol),column.setActualWidth(newWidth,source,!0),pixelsForLastCol-=newWidth}}colsToDispatchEventFor.forEach(function(col){col.fireColumnWidthChangedEvent(source)}),this.setLeftValues(source),this.updateBodyWidths(),!silent&&this.dispatchColumnResizedEvent(colsToDispatchEventFor,!0,source)}},ColumnModel2.prototype.buildDisplayedTrees=function(visibleColumns){var leftVisibleColumns=[],rightVisibleColumns=[],centerVisibleColumns=[];visibleColumns.forEach(function(column){switch(column.getPinned()){case"left":leftVisibleColumns.push(column);break;case"right":rightVisibleColumns.push(column);break;default:centerVisibleColumns.push(column);break}});var groupInstanceIdCreator=new GroupInstanceIdCreator;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(leftVisibleColumns,groupInstanceIdCreator,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(rightVisibleColumns,groupInstanceIdCreator,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(centerVisibleColumns,groupInstanceIdCreator,null,this.displayedTreeCentre),this.updateDisplayedMap()},ColumnModel2.prototype.updateDisplayedMap=function(){var _this=this;this.displayedColumnsAndGroupsMap={};var func=__name(function(child){_this.displayedColumnsAndGroupsMap[child.getUniqueId()]=child},"func");this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,func),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,func)},ColumnModel2.prototype.isDisplayed=function(item){var fromMap=this.displayedColumnsAndGroupsMap[item.getUniqueId()];return fromMap===item},ColumnModel2.prototype.updateOpenClosedVisibilityInColumnGroups=function(){var allColumnGroups=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(allColumnGroups,function(child){child instanceof ColumnGroup&&child.calculateDisplayedColumns()})},ColumnModel2.prototype.getGroupAutoColumns=function(){return this.groupAutoColumns},ColumnModel2.prototype.createGroupAutoColumnsIfNeeded=function(){var forceRecreateAutoGroups=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;var groupFullWidthRow=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),suppressAutoColumn=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn(),groupingActive=this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"),needAutoColumns=groupingActive&&!suppressAutoColumn&&!groupFullWidthRow;if(needAutoColumns){var newAutoGroupCols=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns),autoColsDifferent=!this.autoColsEqual(newAutoGroupCols,this.groupAutoColumns);if(autoColsDifferent||forceRecreateAutoGroups)return this.groupAutoColumns=newAutoGroupCols,!0}else this.groupAutoColumns=null;return!1},ColumnModel2.prototype.isGroupSuppressAutoColumn=function(){var groupDisplayType=this.gridOptionsService.get("groupDisplayType"),isCustomRowGroups=groupDisplayType==="custom";if(isCustomRowGroups)return!0;var treeDataDisplayType=this.gridOptionsService.get("treeDataDisplayType");return treeDataDisplayType==="custom"},ColumnModel2.prototype.autoColsEqual=function(colsA,colsB){return areEqual(colsA,colsB,function(a,b){return a.getColId()===b.getColId()})},ColumnModel2.prototype.getWidthOfColsInList=function(columnList){return columnList.reduce(function(width,col){return width+col.getActualWidth()},0)},ColumnModel2.prototype.getFirstDisplayedColumn=function(){var isRtl=this.gridOptionsService.get("enableRtl"),queryOrder=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];isRtl&&queryOrder.reverse();for(var i=0;i<queryOrder.length;i++){var container=this[queryOrder[i]]();if(container.length)return isRtl?last(container):container[0]}return null},ColumnModel2.prototype.setColumnHeaderHeight=function(col,height){var changed=col.setAutoHeaderHeight(height);if(changed){var event_6={type:Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:col,columns:[col],source:"autosizeColumnHeaderHeight"};this.eventService.dispatchEvent(event_6)}},ColumnModel2.prototype.getColumnGroupHeaderRowHeight=function(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()},ColumnModel2.prototype.getColumnHeaderRowHeight=function(){var defaultHeight=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),displayedHeights=this.getAllDisplayedColumns().filter(function(col){return col.isAutoHeaderHeight()}).map(function(col){return col.getAutoHeaderHeight()||0});return Math.max.apply(Math,__spreadArray$s([defaultHeight],__read$A(displayedHeights),!1))},ColumnModel2.prototype.getHeaderHeight=function(){var _a;return(_a=this.gridOptionsService.get("headerHeight"))!==null&&_a!==void 0?_a:this.environment.getFromTheme(25,"headerHeight")},ColumnModel2.prototype.getFloatingFiltersHeight=function(){var _a;return(_a=this.gridOptionsService.get("floatingFiltersHeight"))!==null&&_a!==void 0?_a:this.getHeaderHeight()},ColumnModel2.prototype.getGroupHeaderHeight=function(){var _a;return(_a=this.gridOptionsService.get("groupHeaderHeight"))!==null&&_a!==void 0?_a:this.getHeaderHeight()},ColumnModel2.prototype.getPivotHeaderHeight=function(){var _a;return(_a=this.gridOptionsService.get("pivotHeaderHeight"))!==null&&_a!==void 0?_a:this.getHeaderHeight()},ColumnModel2.prototype.getPivotGroupHeaderHeight=function(){var _a;return(_a=this.gridOptionsService.get("pivotGroupHeaderHeight"))!==null&&_a!==void 0?_a:this.getGroupHeaderHeight()},ColumnModel2.prototype.queueResizeOperations=function(){this.shouldQueueResizeOperations=!0},ColumnModel2.prototype.processResizeOperations=function(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(function(resizeOperation){return resizeOperation()}),this.resizeOperationQueue=[]},ColumnModel2.prototype.resetColumnDefIntoColumn=function(column,source){var userColDef=column.getUserProvidedColDef();if(!userColDef)return!1;var newColDef=this.columnFactory.addColumnDefaultAndTypes(userColDef,column.getColId());return column.setColDef(newColDef,userColDef,source),!0},ColumnModel2.prototype.isColumnGroupingLocked=function(column){var groupLockGroupColumns=this.gridOptionsService.get("groupLockGroupColumns");if(!column.isRowGroupActive()||groupLockGroupColumns===0)return!1;if(groupLockGroupColumns===-1)return!0;var colIndex=this.rowGroupColumns.findIndex(function(groupCol){return groupCol.getColId()===column.getColId()});return groupLockGroupColumns>colIndex},ColumnModel2.prototype.generateColumnStateForRowGroupAndPivotIndexes=function(updatedRowGroupColumnState,updatedPivotColumnState){var _this=this,existingColumnStateUpdates={},orderColumns=__name(function(updatedColumnState,colList,enableProp,initialEnableProp,indexProp,initialIndexProp){if(!colList.length||!_this.primaryColumns)return[];for(var updatedColIdArray=Object.keys(updatedColumnState),updatedColIds=new Set(updatedColIdArray),newColIds=new Set(updatedColIdArray),allColIds=new Set(colList.map(function(column){var colId2=column.getColId();return newColIds.delete(colId2),colId2}).concat(updatedColIdArray)),colIdsInOriginalOrder=[],originalOrderMap={},orderIndex=0,i=0;i<_this.primaryColumns.length;i++){var colId=_this.primaryColumns[i].getColId();allColIds.has(colId)&&(colIdsInOriginalOrder.push(colId),originalOrderMap[colId]=orderIndex++)}var index=1e3,hasAddedNewCols=!1,lastIndex=0,processPrecedingNewCols=__name(function(colId2){for(var originalOrderIndex=originalOrderMap[colId2],i2=lastIndex;i2<originalOrderIndex;i2++){var newColId=colIdsInOriginalOrder[i2];newColIds.has(newColId)&&(updatedColumnState[newColId][indexProp]=index++,newColIds.delete(newColId))}lastIndex=originalOrderIndex},"processPrecedingNewCols");colList.forEach(function(column){var colId2=column.getColId();if(updatedColIds.has(colId2))processPrecedingNewCols(colId2),updatedColumnState[colId2][indexProp]=index++;else{var colDef=column.getColDef(),missingIndex=colDef[indexProp]===null||colDef[indexProp]===void 0&&colDef[initialIndexProp]==null;if(missingIndex){if(!hasAddedNewCols){var propEnabled=colDef[enableProp]||colDef[enableProp]===void 0&&colDef[initialEnableProp];propEnabled?processPrecedingNewCols(colId2):(newColIds.forEach(function(newColId){updatedColumnState[newColId][indexProp]=index+originalOrderMap[newColId]}),index+=colIdsInOriginalOrder.length,hasAddedNewCols=!0)}existingColumnStateUpdates[colId2]||(existingColumnStateUpdates[colId2]={colId:colId2}),existingColumnStateUpdates[colId2][indexProp]=index++}}})},"orderColumns");return orderColumns(updatedRowGroupColumnState,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),orderColumns(updatedPivotColumnState,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(existingColumnStateUpdates)},ColumnModel2.prototype.onColumnsReady=function(){var _this=this,autoSizeStrategy=this.gridOptionsService.get("autoSizeStrategy");if(autoSizeStrategy){var type=autoSizeStrategy.type;setTimeout(function(){if(type==="fitGridWidth"){var propColumnLimits=autoSizeStrategy.columnLimits,defaultMinWidth=autoSizeStrategy.defaultMinWidth,defaultMaxWidth=autoSizeStrategy.defaultMaxWidth,columnLimits=propColumnLimits==null?void 0:propColumnLimits.map(function(_a){var key=_a.colId,minWidth=_a.minWidth,maxWidth=_a.maxWidth;return{key,minWidth,maxWidth}});_this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth,defaultMaxWidth,columnLimits})}else type==="fitProvidedWidth"&&_this.sizeColumnsToFit(autoSizeStrategy.width,"sizeColumnsToFit")})}},ColumnModel2.prototype.onFirstDataRendered=function(){var _this=this,autoSizeStrategy=this.gridOptionsService.get("autoSizeStrategy");if((autoSizeStrategy==null?void 0:autoSizeStrategy.type)==="fitCellContents"){var columns=autoSizeStrategy.colIds,skipHeader=autoSizeStrategy.skipHeader;setTimeout(function(){columns?_this.autoSizeColumns({columns,skipHeader,source:"autosizeColumns"}):_this.autoSizeAllColumns("autosizeColumns",skipHeader)})}},__decorate$2H([Autowired("expressionService")],ColumnModel2.prototype,"expressionService",void 0),__decorate$2H([Autowired("columnFactory")],ColumnModel2.prototype,"columnFactory",void 0),__decorate$2H([Autowired("displayedGroupCreator")],ColumnModel2.prototype,"displayedGroupCreator",void 0),__decorate$2H([Autowired("ctrlsService")],ColumnModel2.prototype,"ctrlsService",void 0),__decorate$2H([Autowired("autoWidthCalculator")],ColumnModel2.prototype,"autoWidthCalculator",void 0),__decorate$2H([Autowired("columnUtils")],ColumnModel2.prototype,"columnUtils",void 0),__decorate$2H([Autowired("columnAnimationService")],ColumnModel2.prototype,"columnAnimationService",void 0),__decorate$2H([Autowired("autoGroupColService")],ColumnModel2.prototype,"autoGroupColService",void 0),__decorate$2H([Optional("aggFuncService")],ColumnModel2.prototype,"aggFuncService",void 0),__decorate$2H([Optional("valueCache")],ColumnModel2.prototype,"valueCache",void 0),__decorate$2H([Optional("animationFrameService")],ColumnModel2.prototype,"animationFrameService",void 0),__decorate$2H([Autowired("sortController")],ColumnModel2.prototype,"sortController",void 0),__decorate$2H([Autowired("columnDefFactory")],ColumnModel2.prototype,"columnDefFactory",void 0),__decorate$2H([PostConstruct],ColumnModel2.prototype,"init",null),__decorate$2H([PreDestroy],ColumnModel2.prototype,"destroyColumns",null),__decorate$2H([__param$6(0,Qualifier("loggerFactory"))],ColumnModel2.prototype,"setBeans",null),ColumnModel2=__decorate$2H([Bean("columnModel")],ColumnModel2),ColumnModel2}(BeanStub);function convertSourceType(source){return source==="gridOptionsUpdated"?"gridOptionsChanged":source}__name(convertSourceType,"convertSourceType");var __extends$3d=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2G=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2G"),ColumnUtils=function(_super){__extends$3d(ColumnUtils2,_super);function ColumnUtils2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ColumnUtils2,"ColumnUtils"),ColumnUtils2.prototype.calculateColMinWidth=function(colDef){return colDef.minWidth!=null?colDef.minWidth:this.environment.getMinColWidth()},ColumnUtils2.prototype.calculateColMaxWidth=function(colDef){return colDef.maxWidth!=null?colDef.maxWidth:Number.MAX_SAFE_INTEGER},ColumnUtils2.prototype.calculateColInitialWidth=function(colDef){var minColWidth=this.calculateColMinWidth(colDef),maxColWidth=this.calculateColMaxWidth(colDef),width,colDefWidth=attrToNumber(colDef.width),colDefInitialWidth=attrToNumber(colDef.initialWidth);return colDefWidth!=null?width=colDefWidth:colDefInitialWidth!=null?width=colDefInitialWidth:width=200,Math.max(Math.min(width,maxColWidth),minColWidth)},ColumnUtils2.prototype.getOriginalPathForColumn=function(column,originalBalancedTree){var result=[],found=!1,recursePath=__name(function(balancedColumnTree,dept){for(var i=0;i<balancedColumnTree.length;i++){if(found)return;var node=balancedColumnTree[i];if(node instanceof ProvidedColumnGroup){var nextNode=node;recursePath(nextNode.getChildren(),dept+1),result[dept]=node}else node===column&&(found=!0)}},"recursePath");return recursePath(originalBalancedTree,0),found?result:null},ColumnUtils2.prototype.depthFirstOriginalTreeSearch=function(parent,tree,callback){var _this=this;tree&&tree.forEach(function(child){child instanceof ProvidedColumnGroup&&_this.depthFirstOriginalTreeSearch(child,child.getChildren(),callback),callback(child,parent)})},ColumnUtils2.prototype.depthFirstAllColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach(function(child){child instanceof ColumnGroup&&_this.depthFirstAllColumnTreeSearch(child.getChildren(),callback),callback(child)})},ColumnUtils2.prototype.depthFirstDisplayedColumnTreeSearch=function(tree,callback){var _this=this;tree&&tree.forEach(function(child){child instanceof ColumnGroup&&_this.depthFirstDisplayedColumnTreeSearch(child.getDisplayedChildren(),callback),callback(child)})},ColumnUtils2=__decorate$2G([Bean("columnUtils")],ColumnUtils2),ColumnUtils2}(BeanStub),__extends$3c=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2F=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2F"),DisplayedGroupCreator=function(_super){__extends$3c(DisplayedGroupCreator2,_super);function DisplayedGroupCreator2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(DisplayedGroupCreator2,"DisplayedGroupCreator"),DisplayedGroupCreator2.prototype.createDisplayedGroups=function(sortedVisibleColumns,groupInstanceIdCreator,pinned,oldDisplayedGroups){for(var _this=this,oldColumnsMapped=this.mapOldGroupsById(oldDisplayedGroups),topLevelResultCols=[],groupsOrColsAtCurrentLevel=sortedVisibleColumns,_loop_1=__name(function(){var currentlyIterating=groupsOrColsAtCurrentLevel;groupsOrColsAtCurrentLevel=[];for(var lastGroupedColIdx=0,createGroupToIndex=__name(function(to){var from=lastGroupedColIdx;lastGroupedColIdx=to;var previousNode2=currentlyIterating[from],previousNodeProvided2=previousNode2 instanceof ColumnGroup?previousNode2.getProvidedColumnGroup():previousNode2,previousNodeParent2=previousNodeProvided2.getOriginalParent();if(previousNodeParent2==null){for(var i2=from;i2<to;i2++)topLevelResultCols.push(currentlyIterating[i2]);return}for(var newGroup=_this.createColumnGroup(previousNodeParent2,groupInstanceIdCreator,oldColumnsMapped,pinned),i2=from;i2<to;i2++)newGroup.addChild(currentlyIterating[i2]);groupsOrColsAtCurrentLevel.push(newGroup)},"createGroupToIndex"),i=1;i<currentlyIterating.length;i++){var thisNode=currentlyIterating[i],thisNodeProvided=thisNode instanceof ColumnGroup?thisNode.getProvidedColumnGroup():thisNode,thisNodeParent=thisNodeProvided.getOriginalParent(),previousNode=currentlyIterating[lastGroupedColIdx],previousNodeProvided=previousNode instanceof ColumnGroup?previousNode.getProvidedColumnGroup():previousNode,previousNodeParent=previousNodeProvided.getOriginalParent();thisNodeParent!==previousNodeParent&&createGroupToIndex(i)}lastGroupedColIdx<currentlyIterating.length&&createGroupToIndex(currentlyIterating.length)},"_loop_1");groupsOrColsAtCurrentLevel.length;)_loop_1();return this.setupParentsIntoColumns(topLevelResultCols,null),topLevelResultCols},DisplayedGroupCreator2.prototype.createColumnGroup=function(providedGroup,groupInstanceIdCreator,oldColumnsMapped,pinned){var groupId=providedGroup.getGroupId(),instanceId=groupInstanceIdCreator.getInstanceIdForKey(groupId),uniqueId=ColumnGroup.createUniqueId(groupId,instanceId),columnGroup=oldColumnsMapped[uniqueId];return columnGroup&&columnGroup.getProvidedColumnGroup()!==providedGroup&&(columnGroup=null),exists(columnGroup)?columnGroup.reset():(columnGroup=new ColumnGroup(providedGroup,groupId,instanceId,pinned),this.context.createBean(columnGroup)),columnGroup},DisplayedGroupCreator2.prototype.mapOldGroupsById=function(displayedGroups){var result={},recursive=__name(function(columnsOrGroups){columnsOrGroups.forEach(function(columnOrGroup){if(columnOrGroup instanceof ColumnGroup){var columnGroup=columnOrGroup;result[columnOrGroup.getUniqueId()]=columnGroup,recursive(columnGroup.getChildren())}})},"recursive");return displayedGroups&&recursive(displayedGroups),result},DisplayedGroupCreator2.prototype.setupParentsIntoColumns=function(columnsOrGroups,parent){var _this=this;columnsOrGroups.forEach(function(columnsOrGroup){if(columnsOrGroup.setParent(parent),columnsOrGroup instanceof ColumnGroup){var columnGroup=columnsOrGroup;_this.setupParentsIntoColumns(columnGroup.getChildren(),columnGroup)}})},DisplayedGroupCreator2=__decorate$2F([Bean("displayedGroupCreator")],DisplayedGroupCreator2),DisplayedGroupCreator2}(BeanStub),__read$z=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$z"),__spreadArray$r=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$r"),INITIAL_GRID_OPTION_KEYS={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0},PropertyKeys=function(){function PropertyKeys2(){}return __name(PropertyKeys2,"PropertyKeys"),PropertyKeys2.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu"],PropertyKeys2.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],PropertyKeys2.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],PropertyKeys2.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex"],PropertyKeys2.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents"],PropertyKeys2.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],PropertyKeys2.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],PropertyKeys2.FUNCTION_PROPERTIES=__spreadArray$r(__spreadArray$r([],__read$z(PropertyKeys2.FUNCTIONAL_PROPERTIES),!1),__read$z(PropertyKeys2.CALLBACK_PROPERTIES),!1),PropertyKeys2.ALL_PROPERTIES=__spreadArray$r(__spreadArray$r(__spreadArray$r(__spreadArray$r(__spreadArray$r(__spreadArray$r([],__read$z(PropertyKeys2.ARRAY_PROPERTIES),!1),__read$z(PropertyKeys2.OBJECT_PROPERTIES),!1),__read$z(PropertyKeys2.STRING_PROPERTIES),!1),__read$z(PropertyKeys2.NUMBER_PROPERTIES),!1),__read$z(PropertyKeys2.FUNCTION_PROPERTIES),!1),__read$z(PropertyKeys2.BOOLEAN_PROPERTIES),!1),PropertyKeys2}(),__assign$q=__name(function(){return __assign$q=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$q.apply(this,arguments)},"__assign$q"),__read$y=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$y"),__spreadArray$q=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$q"),ComponentUtil=function(){function ComponentUtil2(){}__name(ComponentUtil2,"ComponentUtil"),ComponentUtil2.getCallbackForEvent=function(eventName){return!eventName||eventName.length<2?eventName:"on"+eventName[0].toUpperCase()+eventName.substring(1)},ComponentUtil2.getGridOptionKeys=function(){return this.ALL_PROPERTIES_AND_CALLBACKS},ComponentUtil2.combineAttributesAndGridOptions=function(gridOptions,component){typeof gridOptions!="object"&&(gridOptions={});var mergedOptions=__assign$q({},gridOptions),keys2=ComponentUtil2.getGridOptionKeys();return keys2.forEach(function(key){var value=component[key];typeof value<"u"&&value!==ComponentUtil2.VUE_OMITTED_PROPERTY&&(mergedOptions[key]=value)}),mergedOptions},ComponentUtil2.processOnChange=function(changes,api){if(changes){var gridChanges={},hasChanges=!1;if(Object.keys(changes).filter(function(key){return ComponentUtil2.ALL_PROPERTIES_AND_CALLBACKS_SET.has(key)}).forEach(function(key){gridChanges[key]=changes[key],hasChanges=!0}),!!hasChanges){api.__internalUpdateGridOptions(gridChanges);var event={type:Events.EVENT_COMPONENT_STATE_CHANGED};iterateObject(gridChanges,function(key,value){event[key]=value}),api.dispatchEvent(event)}}};var _a;return _a=ComponentUtil2,ComponentUtil2.EVENTS=values(Events),ComponentUtil2.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",ComponentUtil2.EXCLUDED_INTERNAL_EVENTS=[Events.EVENT_SCROLLBAR_WIDTH_CHANGED,Events.EVENT_CHECKBOX_CHANGED,Events.EVENT_HEIGHT_SCALE_CHANGED,Events.EVENT_BODY_HEIGHT_CHANGED,Events.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,Events.EVENT_SCROLL_VISIBILITY_CHANGED,Events.EVENT_COLUMN_HOVER_CHANGED,Events.EVENT_FLASH_CELLS,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,Events.EVENT_DISPLAYED_ROWS_CHANGED,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,Events.EVENT_POPUP_TO_FRONT,Events.EVENT_STORE_UPDATED,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_START,Events.EVENT_COLUMN_PANEL_ITEM_DRAG_END,Events.EVENT_FILL_START,Events.EVENT_FILL_END,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,Events.EVENT_FULL_WIDTH_ROW_FOCUSED,Events.EVENT_HEADER_HEIGHT_CHANGED,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,Events.EVENT_CELL_FOCUS_CLEARED,Events.EVENT_GRID_STYLES_CHANGED,Events.EVENT_FILTER_DESTROYED,Events.EVENT_ROW_DATA_UPDATE_STARTED,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,Events.EVENT_DATA_TYPES_INFERRED,Events.EVENT_FIELD_VALUE_CHANGED,Events.EVENT_FIELD_PICKER_VALUE_SELECTED,Events.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,Events.EVENT_SUPPRESS_MENU_HIDE_CHANGED,Events.EVENT_SUPPRESS_FIELD_DOT_NOTATION,Events.EVENT_ROW_COUNT_READY,Events.EVENT_SIDE_BAR_UPDATED],ComponentUtil2.PUBLIC_EVENTS=ComponentUtil2.EVENTS.filter(function(e){return!includes(ComponentUtil2.EXCLUDED_INTERNAL_EVENTS,e)}),ComponentUtil2.EVENT_CALLBACKS=ComponentUtil2.EVENTS.map(function(event){return ComponentUtil2.getCallbackForEvent(event)}),ComponentUtil2.STRING_PROPERTIES=PropertyKeys.STRING_PROPERTIES,ComponentUtil2.OBJECT_PROPERTIES=PropertyKeys.OBJECT_PROPERTIES,ComponentUtil2.ARRAY_PROPERTIES=PropertyKeys.ARRAY_PROPERTIES,ComponentUtil2.NUMBER_PROPERTIES=PropertyKeys.NUMBER_PROPERTIES,ComponentUtil2.BOOLEAN_PROPERTIES=PropertyKeys.BOOLEAN_PROPERTIES,ComponentUtil2.FUNCTION_PROPERTIES=PropertyKeys.FUNCTION_PROPERTIES,ComponentUtil2.ALL_PROPERTIES=PropertyKeys.ALL_PROPERTIES,ComponentUtil2.ALL_PROPERTIES_AND_CALLBACKS=__spreadArray$q(__spreadArray$q([],__read$y(_a.ALL_PROPERTIES),!1),__read$y(_a.EVENT_CALLBACKS),!1),ComponentUtil2.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(ComponentUtil2.ALL_PROPERTIES_AND_CALLBACKS),ComponentUtil2}(),__extends$3b=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2E=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2E"),AgStackComponentsRegistry=function(_super){__extends$3b(AgStackComponentsRegistry2,_super);function AgStackComponentsRegistry2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.componentsMappedByName={},_this}return __name(AgStackComponentsRegistry2,"AgStackComponentsRegistry"),AgStackComponentsRegistry2.prototype.setupComponents=function(components){var _this=this;components&&components.forEach(function(componentMeta){return _this.addComponent(componentMeta)})},AgStackComponentsRegistry2.prototype.addComponent=function(componentMeta){var classEscaped=componentMeta.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),classUpperCase=classEscaped.toUpperCase();this.componentsMappedByName[classUpperCase]=componentMeta.componentClass},AgStackComponentsRegistry2.prototype.getComponentClass=function(htmlTag){return this.componentsMappedByName[htmlTag]},AgStackComponentsRegistry2=__decorate$2E([Bean("agStackComponentsRegistry")],AgStackComponentsRegistry2),AgStackComponentsRegistry2}(BeanStub);function toggleAriaAttribute(element,attribute,value){value==null||typeof value=="string"&&value==""?removeAriaAttribute(element,attribute):setAriaAttribute(element,attribute,value)}__name(toggleAriaAttribute,"toggleAriaAttribute");function setAriaAttribute(element,attribute,value){element.setAttribute(ariaAttributeName(attribute),value.toString())}__name(setAriaAttribute,"setAriaAttribute");function removeAriaAttribute(element,attribute){element.removeAttribute(ariaAttributeName(attribute))}__name(removeAriaAttribute,"removeAriaAttribute");function ariaAttributeName(attribute){return"aria-".concat(attribute)}__name(ariaAttributeName,"ariaAttributeName");function setAriaRole(element,role){role?element.setAttribute("role",role):element.removeAttribute("role")}__name(setAriaRole,"setAriaRole");function getAriaSortState(sortDirection){var sort;return sortDirection==="asc"?sort="ascending":sortDirection==="desc"?sort="descending":sortDirection==="mixed"?sort="other":sort="none",sort}__name(getAriaSortState,"getAriaSortState");function getAriaLevel(element){return parseInt(element.getAttribute("aria-level"),10)}__name(getAriaLevel,"getAriaLevel");function getAriaPosInSet(element){return parseInt(element.getAttribute("aria-posinset"),10)}__name(getAriaPosInSet,"getAriaPosInSet");function getAriaLabel(element){return element.getAttribute("aria-label")}__name(getAriaLabel,"getAriaLabel");function setAriaLabel(element,label){toggleAriaAttribute(element,"label",label)}__name(setAriaLabel,"setAriaLabel");function setAriaLabelledBy(element,labelledBy){toggleAriaAttribute(element,"labelledby",labelledBy)}__name(setAriaLabelledBy,"setAriaLabelledBy");function setAriaDescribedBy(element,describedby){toggleAriaAttribute(element,"describedby",describedby)}__name(setAriaDescribedBy,"setAriaDescribedBy");function setAriaLive(element,live){toggleAriaAttribute(element,"live",live)}__name(setAriaLive,"setAriaLive");function setAriaAtomic(element,atomic){toggleAriaAttribute(element,"atomic",atomic)}__name(setAriaAtomic,"setAriaAtomic");function setAriaRelevant(element,relevant){toggleAriaAttribute(element,"relevant",relevant)}__name(setAriaRelevant,"setAriaRelevant");function setAriaLevel(element,level){toggleAriaAttribute(element,"level",level)}__name(setAriaLevel,"setAriaLevel");function setAriaDisabled(element,disabled){toggleAriaAttribute(element,"disabled",disabled)}__name(setAriaDisabled,"setAriaDisabled");function setAriaHidden(element,hidden){toggleAriaAttribute(element,"hidden",hidden)}__name(setAriaHidden,"setAriaHidden");function setAriaActiveDescendant(element,descendantId){toggleAriaAttribute(element,"activedescendant",descendantId)}__name(setAriaActiveDescendant,"setAriaActiveDescendant");function setAriaExpanded(element,expanded){setAriaAttribute(element,"expanded",expanded)}__name(setAriaExpanded,"setAriaExpanded");function removeAriaExpanded(element){removeAriaAttribute(element,"expanded")}__name(removeAriaExpanded,"removeAriaExpanded");function setAriaSetSize(element,setsize){setAriaAttribute(element,"setsize",setsize)}__name(setAriaSetSize,"setAriaSetSize");function setAriaPosInSet(element,position){setAriaAttribute(element,"posinset",position)}__name(setAriaPosInSet,"setAriaPosInSet");function setAriaMultiSelectable(element,multiSelectable){setAriaAttribute(element,"multiselectable",multiSelectable)}__name(setAriaMultiSelectable,"setAriaMultiSelectable");function setAriaRowCount(element,rowCount){setAriaAttribute(element,"rowcount",rowCount)}__name(setAriaRowCount,"setAriaRowCount");function setAriaRowIndex(element,rowIndex){setAriaAttribute(element,"rowindex",rowIndex)}__name(setAriaRowIndex,"setAriaRowIndex");function setAriaColCount(element,colCount){setAriaAttribute(element,"colcount",colCount)}__name(setAriaColCount,"setAriaColCount");function setAriaColIndex(element,colIndex){setAriaAttribute(element,"colindex",colIndex)}__name(setAriaColIndex,"setAriaColIndex");function setAriaColSpan(element,colSpan){setAriaAttribute(element,"colspan",colSpan)}__name(setAriaColSpan,"setAriaColSpan");function setAriaSort(element,sort){setAriaAttribute(element,"sort",sort)}__name(setAriaSort,"setAriaSort");function removeAriaSort(element){removeAriaAttribute(element,"sort")}__name(removeAriaSort,"removeAriaSort");function setAriaSelected(element,selected){toggleAriaAttribute(element,"selected",selected)}__name(setAriaSelected,"setAriaSelected");function setAriaChecked(element,checked){setAriaAttribute(element,"checked",checked===void 0?"mixed":checked)}__name(setAriaChecked,"setAriaChecked");function setAriaControls(controllerElement,controlledElement){toggleAriaAttribute(controllerElement,"controls",controlledElement.id),setAriaLabelledBy(controlledElement,controllerElement.id)}__name(setAriaControls,"setAriaControls");function getAriaCheckboxStateName(translate,state){return state===void 0?translate("ariaIndeterminate","indeterminate"):state===!0?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked")}__name(getAriaCheckboxStateName,"getAriaCheckboxStateName");var AriaUtils=Object.freeze({__proto__:null,setAriaRole,getAriaSortState,getAriaLevel,getAriaPosInSet,getAriaLabel,setAriaLabel,setAriaLabelledBy,setAriaDescribedBy,setAriaLive,setAriaAtomic,setAriaRelevant,setAriaLevel,setAriaDisabled,setAriaHidden,setAriaActiveDescendant,setAriaExpanded,removeAriaExpanded,setAriaSetSize,setAriaPosInSet,setAriaMultiSelectable,setAriaRowCount,setAriaRowIndex,setAriaColCount,setAriaColIndex,setAriaColSpan,setAriaSort,removeAriaSort,setAriaSelected,setAriaChecked,setAriaControls,getAriaCheckboxStateName}),isSafari,safariVersion,isChrome,isFirefox,isMacOs,isIOS,invisibleScrollbar,browserScrollbarWidth;function isBrowserSafari(){return isSafari===void 0&&(isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),isSafari}__name(isBrowserSafari,"isBrowserSafari");function getSafariVersion(){if(safariVersion===void 0)if(isBrowserSafari()){var versionMatch=navigator.userAgent.match(/version\/(\d+)/i);versionMatch&&(safariVersion=versionMatch[1]!=null?parseFloat(versionMatch[1]):0)}else safariVersion=0;return safariVersion}__name(getSafariVersion,"getSafariVersion");function isBrowserChrome(){if(isChrome===void 0){var win=window;isChrome=!!win.chrome&&(!!win.chrome.webstore||!!win.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return isChrome}__name(isBrowserChrome,"isBrowserChrome");function isBrowserFirefox(){return isFirefox===void 0&&(isFirefox=/(firefox)/i.test(navigator.userAgent)),isFirefox}__name(isBrowserFirefox,"isBrowserFirefox");function isMacOsUserAgent(){return isMacOs===void 0&&(isMacOs=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),isMacOs}__name(isMacOsUserAgent,"isMacOsUserAgent");function isIOSUserAgent(){return isIOS===void 0&&(isIOS=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),isIOS}__name(isIOSUserAgent,"isIOSUserAgent");function browserSupportsPreventScroll(){return!isBrowserSafari()||getSafariVersion()>=15}__name(browserSupportsPreventScroll,"browserSupportsPreventScroll");function getTabIndex(el){if(!el)return null;var numberTabIndex=el.tabIndex,tabIndex=el.getAttribute("tabIndex");return numberTabIndex===-1&&(tabIndex===null||tabIndex===""&&!isBrowserFirefox())?null:numberTabIndex.toString()}__name(getTabIndex,"getTabIndex");function getMaxDivHeight(){if(!document.body)return-1;var res=1e6,testUpTo=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,div=document.createElement("div");for(document.body.appendChild(div);;){var test=res*2;if(div.style.height=test+"px",test>testUpTo||div.clientHeight!==test)break;res=test}return document.body.removeChild(div),res}__name(getMaxDivHeight,"getMaxDivHeight");function getBodyWidth(){var _a,_b,_c;return(_b=(_a=document.body)===null||_a===void 0?void 0:_a.clientWidth)!==null&&_b!==void 0?_b:window.innerHeight||((_c=document.documentElement)===null||_c===void 0?void 0:_c.clientWidth)||-1}__name(getBodyWidth,"getBodyWidth");function getBodyHeight(){var _a,_b,_c;return(_b=(_a=document.body)===null||_a===void 0?void 0:_a.clientHeight)!==null&&_b!==void 0?_b:window.innerHeight||((_c=document.documentElement)===null||_c===void 0?void 0:_c.clientHeight)||-1}__name(getBodyHeight,"getBodyHeight");function getScrollbarWidth(){return browserScrollbarWidth==null&&initScrollbarWidthAndVisibility(),browserScrollbarWidth}__name(getScrollbarWidth,"getScrollbarWidth");function initScrollbarWidthAndVisibility(){var body=document.body,div=document.createElement("div");div.style.width=div.style.height="100px",div.style.opacity="0",div.style.overflow="scroll",div.style.msOverflowStyle="scrollbar",div.style.position="absolute",body.appendChild(div);var width=div.offsetWidth-div.clientWidth;width===0&&div.clientWidth===0&&(width=null),div.parentNode&&div.parentNode.removeChild(div),width!=null&&(browserScrollbarWidth=width,invisibleScrollbar=width===0)}__name(initScrollbarWidthAndVisibility,"initScrollbarWidthAndVisibility");function isInvisibleScrollbar(){return invisibleScrollbar==null&&initScrollbarWidthAndVisibility(),invisibleScrollbar}__name(isInvisibleScrollbar,"isInvisibleScrollbar");var BrowserUtils=Object.freeze({__proto__:null,isBrowserSafari,getSafariVersion,isBrowserChrome,isBrowserFirefox,isMacOsUserAgent,isIOSUserAgent,browserSupportsPreventScroll,getTabIndex,getMaxDivHeight,getBodyWidth,getBodyHeight,getScrollbarWidth,isInvisibleScrollbar});function padStartWidthZeros(value,totalStringSize){return value.toString().padStart(totalStringSize,"0")}__name(padStartWidthZeros,"padStartWidthZeros");function createArrayOfNumbers(first,last2){for(var result=[],i=first;i<=last2;i++)result.push(i);return result}__name(createArrayOfNumbers,"createArrayOfNumbers");function cleanNumber(value){return typeof value=="string"&&(value=parseInt(value,10)),typeof value=="number"?Math.floor(value):null}__name(cleanNumber,"cleanNumber");function decToHex(number,bytes){for(var hex="",i=0;i<bytes;i++)hex+=String.fromCharCode(number&255),number>>>=8;return hex}__name(decToHex,"decToHex");function formatNumberTwoDecimalPlacesAndCommas(value,thousandSeparator,decimalSeparator){return typeof value!="number"?"":formatNumberCommas(Math.round(value*100)/100,thousandSeparator,decimalSeparator)}__name(formatNumberTwoDecimalPlacesAndCommas,"formatNumberTwoDecimalPlacesAndCommas");function formatNumberCommas(value,thousandSeparator,decimalSeparator){return typeof value!="number"?"":value.toString().replace(".",decimalSeparator).replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1".concat(thousandSeparator))}__name(formatNumberCommas,"formatNumberCommas");function sum(values2){return values2==null?null:values2.reduce(function(total,value){return total+value},0)}__name(sum,"sum");var NumberUtils=Object.freeze({__proto__:null,padStartWidthZeros,createArrayOfNumbers,cleanNumber,decToHex,formatNumberTwoDecimalPlacesAndCommas,formatNumberCommas,sum}),__read$x=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$x");function serialiseDate(date,includeTime,separator){if(includeTime===void 0&&(includeTime=!0),separator===void 0&&(separator="-"),!date)return null;var serialised=[date.getFullYear(),date.getMonth()+1,date.getDate()].map(function(part){return padStartWidthZeros(part,2)}).join(separator);return includeTime&&(serialised+=" "+[date.getHours(),date.getMinutes(),date.getSeconds()].map(function(part){return padStartWidthZeros(part,2)}).join(":")),serialised}__name(serialiseDate,"serialiseDate");var calculateOrdinal=__name(function(value){if(value>3&&value<21)return"th";var remainder=value%10;switch(remainder){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"},"calculateOrdinal");function dateToFormattedString(date,format){format===void 0&&(format="YYYY-MM-DD");var fullYear=padStartWidthZeros(date.getFullYear(),4),months=["January","February","March","April","May","June","July","August","September","October","November","December"],days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],replace={YYYY:function(){return fullYear.slice(fullYear.length-4,fullYear.length)},YY:function(){return fullYear.slice(fullYear.length-2,fullYear.length)},Y:function(){return"".concat(date.getFullYear())},MMMM:function(){return months[date.getMonth()]},MMM:function(){return months[date.getMonth()].slice(0,3)},MM:function(){return padStartWidthZeros(date.getMonth()+1,2)},Mo:function(){return"".concat(date.getMonth()+1).concat(calculateOrdinal(date.getMonth()+1))},M:function(){return"".concat(date.getMonth()+1)},Do:function(){return"".concat(date.getDate()).concat(calculateOrdinal(date.getDate()))},DD:function(){return padStartWidthZeros(date.getDate(),2)},D:function(){return"".concat(date.getDate())},dddd:function(){return days[date.getDay()]},ddd:function(){return days[date.getDay()].slice(0,3)},dd:function(){return days[date.getDay()].slice(0,2)},do:function(){return"".concat(date.getDay()).concat(calculateOrdinal(date.getDay()))},d:function(){return"".concat(date.getDay())}},regexp=new RegExp(Object.keys(replace).join("|"),"g");return format.replace(regexp,function(match){return match in replace?replace[match]():match})}__name(dateToFormattedString,"dateToFormattedString");function parseDateTimeFromString(value){if(!value)return null;var _a=__read$x(value.split(" "),2),dateStr=_a[0],timeStr=_a[1];if(!dateStr)return null;var fields=dateStr.split("-").map(function(f){return parseInt(f,10)});if(fields.filter(function(f){return!isNaN(f)}).length!==3)return null;var _b=__read$x(fields,3),year=_b[0],month=_b[1],day=_b[2],date=new Date(year,month-1,day);if(date.getFullYear()!==year||date.getMonth()!==month-1||date.getDate()!==day)return null;if(!timeStr||timeStr==="00:00:00")return date;var _c=__read$x(timeStr.split(":").map(function(part){return parseInt(part,10)}),3),hours=_c[0],minutes=_c[1],seconds=_c[2];return hours>=0&&hours<24&&date.setHours(hours),minutes>=0&&minutes<60&&date.setMinutes(minutes),seconds>=0&&seconds<60&&date.setSeconds(seconds),date}__name(parseDateTimeFromString,"parseDateTimeFromString");var DateUtils=Object.freeze({__proto__:null,serialiseDate,dateToFormattedString,parseDateTimeFromString}),__values$9=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$9"),__read$w=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$w"),rtlNegativeScroll;function radioCssClass(element,elementClass,otherElementClass){for(var parent=element.parentElement,sibling=parent&&parent.firstChild;sibling;)elementClass&&sibling.classList.toggle(elementClass,sibling===element),otherElementClass&&sibling.classList.toggle(otherElementClass,sibling!==element),sibling=sibling.nextSibling}__name(radioCssClass,"radioCssClass");var FOCUSABLE_SELECTOR="[tabindex], input, select, button, textarea, [href]",FOCUSABLE_EXCLUDE="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function isFocusableFormField(element){var matches=Element.prototype.matches||Element.prototype.msMatchesSelector,inputSelector="input, select, button, textarea",isFocusable=matches.call(element,inputSelector),isNotFocusable=matches.call(element,FOCUSABLE_EXCLUDE),isElementVisible=isVisible(element),focusable=isFocusable&&!isNotFocusable&&isElementVisible;return focusable}__name(isFocusableFormField,"isFocusableFormField");function setDisplayed(element,displayed,options){options===void 0&&(options={});var skipAriaHidden=options.skipAriaHidden;element.classList.toggle("ag-hidden",!displayed),skipAriaHidden||setAriaHidden(element,!displayed)}__name(setDisplayed,"setDisplayed");function setVisible(element,visible,options){options===void 0&&(options={});var skipAriaHidden=options.skipAriaHidden;element.classList.toggle("ag-invisible",!visible),skipAriaHidden||setAriaHidden(element,!visible)}__name(setVisible,"setVisible");function setDisabled(element,disabled){var attributeName="disabled",addOrRemoveDisabledAttribute=disabled?function(e){return e.setAttribute(attributeName,"")}:function(e){return e.removeAttribute(attributeName)};addOrRemoveDisabledAttribute(element),nodeListForEach(element.querySelectorAll("input"),function(input){return addOrRemoveDisabledAttribute(input)})}__name(setDisabled,"setDisabled");function isElementChildOfClass(element,cls,maxNest){for(var counter=0;element;){if(element.classList.contains(cls))return!0;if(element=element.parentElement,typeof maxNest=="number"){if(++counter>maxNest)break}else if(element===maxNest)break}return!1}__name(isElementChildOfClass,"isElementChildOfClass");function getElementSize(el){var _a=window.getComputedStyle(el),height=_a.height,width=_a.width,borderTopWidth=_a.borderTopWidth,borderRightWidth=_a.borderRightWidth,borderBottomWidth=_a.borderBottomWidth,borderLeftWidth=_a.borderLeftWidth,paddingTop=_a.paddingTop,paddingRight=_a.paddingRight,paddingBottom=_a.paddingBottom,paddingLeft=_a.paddingLeft,marginTop=_a.marginTop,marginRight=_a.marginRight,marginBottom=_a.marginBottom,marginLeft=_a.marginLeft,boxSizing=_a.boxSizing;return{height:parseFloat(height||"0"),width:parseFloat(width||"0"),borderTopWidth:parseFloat(borderTopWidth||"0"),borderRightWidth:parseFloat(borderRightWidth||"0"),borderBottomWidth:parseFloat(borderBottomWidth||"0"),borderLeftWidth:parseFloat(borderLeftWidth||"0"),paddingTop:parseFloat(paddingTop||"0"),paddingRight:parseFloat(paddingRight||"0"),paddingBottom:parseFloat(paddingBottom||"0"),paddingLeft:parseFloat(paddingLeft||"0"),marginTop:parseFloat(marginTop||"0"),marginRight:parseFloat(marginRight||"0"),marginBottom:parseFloat(marginBottom||"0"),marginLeft:parseFloat(marginLeft||"0"),boxSizing}}__name(getElementSize,"getElementSize");function getInnerHeight(el){var size=getElementSize(el);return size.boxSizing==="border-box"?size.height-size.paddingTop-size.paddingBottom:size.height}__name(getInnerHeight,"getInnerHeight");function getInnerWidth(el){var size=getElementSize(el);return size.boxSizing==="border-box"?size.width-size.paddingLeft-size.paddingRight:size.width}__name(getInnerWidth,"getInnerWidth");function getAbsoluteHeight(el){var size=getElementSize(el),marginRight=size.marginBottom+size.marginTop;return Math.ceil(el.offsetHeight+marginRight)}__name(getAbsoluteHeight,"getAbsoluteHeight");function getAbsoluteWidth(el){var size=getElementSize(el),marginWidth=size.marginLeft+size.marginRight;return Math.ceil(el.offsetWidth+marginWidth)}__name(getAbsoluteWidth,"getAbsoluteWidth");function getElementRectWithOffset(el){var offsetElementRect=el.getBoundingClientRect(),_a=getElementSize(el),borderTopWidth=_a.borderTopWidth,borderLeftWidth=_a.borderLeftWidth,borderRightWidth=_a.borderRightWidth,borderBottomWidth=_a.borderBottomWidth;return{top:offsetElementRect.top+(borderTopWidth||0),left:offsetElementRect.left+(borderLeftWidth||0),right:offsetElementRect.right+(borderRightWidth||0),bottom:offsetElementRect.bottom+(borderBottomWidth||0)}}__name(getElementRectWithOffset,"getElementRectWithOffset");function isRtlNegativeScroll(){if(typeof rtlNegativeScroll=="boolean")return rtlNegativeScroll;var template=document.createElement("div");return template.style.direction="rtl",template.style.width="1px",template.style.height="1px",template.style.position="fixed",template.style.top="0px",template.style.overflow="hidden",template.dir="rtl",template.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(template),template.scrollLeft=1,rtlNegativeScroll=Math.floor(template.scrollLeft)===0,document.body.removeChild(template),rtlNegativeScroll}__name(isRtlNegativeScroll,"isRtlNegativeScroll");function getScrollLeft(element,rtl){var scrollLeft=element.scrollLeft;return rtl&&(scrollLeft=Math.abs(scrollLeft),isBrowserChrome()&&!isRtlNegativeScroll()&&(scrollLeft=element.scrollWidth-element.clientWidth-scrollLeft)),scrollLeft}__name(getScrollLeft,"getScrollLeft");function setScrollLeft(element,value,rtl){rtl&&(isRtlNegativeScroll()?value*=-1:(isBrowserSafari()||isBrowserChrome())&&(value=element.scrollWidth-element.clientWidth-value)),element.scrollLeft=value}__name(setScrollLeft,"setScrollLeft");function clearElement(el){for(;el&&el.firstChild;)el.removeChild(el.firstChild)}__name(clearElement,"clearElement");function removeFromParent(node){node&&node.parentNode&&node.parentNode.removeChild(node)}__name(removeFromParent,"removeFromParent");function isInDOM(element){return!!element.offsetParent}__name(isInDOM,"isInDOM");function isVisible(element){var el=element;if(el.checkVisibility)return el.checkVisibility({checkVisibilityCSS:!0});var isHidden=!isInDOM(element)||window.getComputedStyle(element).visibility!=="visible";return!isHidden}__name(isVisible,"isVisible");function loadTemplate(template){var tempDiv=document.createElement("div");return tempDiv.innerHTML=(template||"").trim(),tempDiv.firstChild}__name(loadTemplate,"loadTemplate");function ensureDomOrder(eContainer,eChild,eChildBefore){eChildBefore&&eChildBefore.nextSibling===eChild||(eChildBefore?eChildBefore.nextSibling?eContainer.insertBefore(eChild,eChildBefore.nextSibling):eContainer.appendChild(eChild):eContainer.firstChild&&eContainer.firstChild!==eChild&&eContainer.insertAdjacentElement("afterbegin",eChild))}__name(ensureDomOrder,"ensureDomOrder");function setDomChildOrder(eContainer,orderedChildren){for(var i=0;i<orderedChildren.length;i++){var correctCellAtIndex=orderedChildren[i],actualCellAtIndex=eContainer.children[i];actualCellAtIndex!==correctCellAtIndex&&eContainer.insertBefore(correctCellAtIndex,actualCellAtIndex)}}__name(setDomChildOrder,"setDomChildOrder");function insertWithDomOrder(eContainer,eToInsert,eChildBefore){eChildBefore?eChildBefore.insertAdjacentElement("afterend",eToInsert):eContainer.firstChild?eContainer.insertAdjacentElement("afterbegin",eToInsert):eContainer.appendChild(eToInsert)}__name(insertWithDomOrder,"insertWithDomOrder");function addStylesToElement(eElement,styles){var e_1,_a;if(styles)try{for(var _b=__values$9(Object.entries(styles)),_c=_b.next();!_c.done;_c=_b.next()){var _d=__read$w(_c.value,2),key=_d[0],value=_d[1];if(!(!key||!key.length||value==null)){var parsedKey=camelCaseToHyphenated(key),valueAsString=value.toString(),parsedValue=valueAsString.replace(/\s*!important/g,""),priority=parsedValue.length!=valueAsString.length?"important":void 0;eElement.style.setProperty(parsedKey,parsedValue,priority)}}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}__name(addStylesToElement,"addStylesToElement");function isHorizontalScrollShowing(element){return element.clientWidth<element.scrollWidth}__name(isHorizontalScrollShowing,"isHorizontalScrollShowing");function isVerticalScrollShowing(element){return element.clientHeight<element.scrollHeight}__name(isVerticalScrollShowing,"isVerticalScrollShowing");function setElementWidth(element,width){width==="flex"?(element.style.removeProperty("width"),element.style.removeProperty("minWidth"),element.style.removeProperty("maxWidth"),element.style.flex="1 1 auto"):setFixedWidth(element,width)}__name(setElementWidth,"setElementWidth");function setFixedWidth(element,width){width=formatSize(width),element.style.width=width.toString(),element.style.maxWidth=width.toString(),element.style.minWidth=width.toString()}__name(setFixedWidth,"setFixedWidth");function setElementHeight(element,height){height==="flex"?(element.style.removeProperty("height"),element.style.removeProperty("minHeight"),element.style.removeProperty("maxHeight"),element.style.flex="1 1 auto"):setFixedHeight(element,height)}__name(setElementHeight,"setElementHeight");function setFixedHeight(element,height){height=formatSize(height),element.style.height=height.toString(),element.style.maxHeight=height.toString(),element.style.minHeight=height.toString()}__name(setFixedHeight,"setFixedHeight");function formatSize(size){return typeof size=="number"?"".concat(size,"px"):size}__name(formatSize,"formatSize");function isNodeOrElement(o){return o instanceof Node||o instanceof HTMLElement}__name(isNodeOrElement,"isNodeOrElement");function copyNodeList(nodeList){if(nodeList==null)return[];var result=[];return nodeListForEach(nodeList,function(node){return result.push(node)}),result}__name(copyNodeList,"copyNodeList");function iterateNamedNodeMap(map,callback){if(map)for(var i=0;i<map.length;i++){var attr=map[i];callback(attr.name,attr.value)}}__name(iterateNamedNodeMap,"iterateNamedNodeMap");function addOrRemoveAttribute(element,name,value){value==null?element.removeAttribute(name):element.setAttribute(name,value.toString())}__name(addOrRemoveAttribute,"addOrRemoveAttribute");function nodeListForEach(nodeList,action){if(nodeList!=null)for(var i=0;i<nodeList.length;i++)action(nodeList[i])}__name(nodeListForEach,"nodeListForEach");function bindCellRendererToHtmlElement(cellRendererPromise,eTarget){cellRendererPromise.then(function(cellRenderer){var gui=cellRenderer.getGui();gui!=null&&(typeof gui=="object"?eTarget.appendChild(gui):eTarget.innerHTML=gui)})}__name(bindCellRendererToHtmlElement,"bindCellRendererToHtmlElement");var DomUtils=Object.freeze({__proto__:null,radioCssClass,FOCUSABLE_SELECTOR,FOCUSABLE_EXCLUDE,isFocusableFormField,setDisplayed,setVisible,setDisabled,isElementChildOfClass,getElementSize,getInnerHeight,getInnerWidth,getAbsoluteHeight,getAbsoluteWidth,getElementRectWithOffset,isRtlNegativeScroll,getScrollLeft,setScrollLeft,clearElement,removeFromParent,isInDOM,isVisible,loadTemplate,ensureDomOrder,setDomChildOrder,insertWithDomOrder,addStylesToElement,isHorizontalScrollShowing,isVerticalScrollShowing,setElementWidth,setFixedWidth,setElementHeight,setFixedHeight,formatSize,isNodeOrElement,copyNodeList,iterateNamedNodeMap,addOrRemoveAttribute,nodeListForEach,bindCellRendererToHtmlElement}),__values$8=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$8");function fuzzyCheckStrings(inputValues,validValues,allSuggestions){var fuzzyMatches={},invalidInputs=inputValues.filter(function(inputValue){return!validValues.some(function(validValue){return validValue===inputValue})});return invalidInputs.length>0&&invalidInputs.forEach(function(invalidInput){return fuzzyMatches[invalidInput]=fuzzySuggestions(invalidInput,allSuggestions).values}),fuzzyMatches}__name(fuzzyCheckStrings,"fuzzyCheckStrings");function fuzzySuggestions(inputValue,allSuggestions,hideIrrelevant,filterByPercentageOfBestMatch){var e_1,_a,thisSuggestions=allSuggestions.map(function(text,idx){return{value:text,relevance:stringWeightedDistances(inputValue.toLowerCase(),text.toLocaleLowerCase()),idx}});if(thisSuggestions.sort(function(a,b){return b.relevance-a.relevance}),hideIrrelevant&&(thisSuggestions=thisSuggestions.filter(function(suggestion2){return suggestion2.relevance!==0})),thisSuggestions.length>0&&filterByPercentageOfBestMatch&&filterByPercentageOfBestMatch>0){var bestMatch=thisSuggestions[0].relevance,limit_1=bestMatch*filterByPercentageOfBestMatch;thisSuggestions=thisSuggestions.filter(function(suggestion2){return limit_1-suggestion2.relevance<0})}var values2=[],indices=[];try{for(var thisSuggestions_1=__values$8(thisSuggestions),thisSuggestions_1_1=thisSuggestions_1.next();!thisSuggestions_1_1.done;thisSuggestions_1_1=thisSuggestions_1.next()){var suggestion=thisSuggestions_1_1.value;values2.push(suggestion.value),indices.push(suggestion.idx)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{thisSuggestions_1_1&&!thisSuggestions_1_1.done&&(_a=thisSuggestions_1.return)&&_a.call(thisSuggestions_1)}finally{if(e_1)throw e_1.error}}return{values:values2,indices}}__name(fuzzySuggestions,"fuzzySuggestions");function stringWeightedDistances(str1,str2){for(var a=str1.replace(/\s/g,""),b=str2.replace(/\s/g,""),weight=0,lastIndex=-1,i=0;i<a.length;i++){var idx=b.indexOf(a[i],lastIndex+1);idx!==-1&&(lastIndex=idx,weight+=100-lastIndex*100/1e4*100)}return weight}__name(stringWeightedDistances,"stringWeightedDistances");var FuzzyMatchUtils=Object.freeze({__proto__:null,fuzzyCheckStrings,fuzzySuggestions}),iconNameClassMap={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function createIcon(iconName,gridOptionsService,column){var iconContents=createIconNoSpan(iconName,gridOptionsService,column);if(iconContents){var className=iconContents.className;if(typeof className=="string"&&className.indexOf("ag-icon")>-1||typeof className=="object"&&className["ag-icon"])return iconContents}var eResult=document.createElement("span");return eResult.appendChild(iconContents),eResult}__name(createIcon,"createIcon");function createIconNoSpan(iconName,gridOptionsService,column,forceCreate){var userProvidedIcon=null,icons=column&&column.getColDef().icons;if(icons&&(userProvidedIcon=icons[iconName]),gridOptionsService&&!userProvidedIcon){var optionsIcons=gridOptionsService.get("icons");optionsIcons&&(userProvidedIcon=optionsIcons[iconName])}if(userProvidedIcon){var rendererResult=void 0;if(typeof userProvidedIcon=="function")rendererResult=userProvidedIcon();else if(typeof userProvidedIcon=="string")rendererResult=userProvidedIcon;else throw new Error("icon from grid options needs to be a string or a function");if(typeof rendererResult=="string")return loadTemplate(rendererResult);if(isNodeOrElement(rendererResult))return rendererResult;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}else{var span=document.createElement("span"),cssClass=iconNameClassMap[iconName];return cssClass||(forceCreate?cssClass=iconName:(console.warn("AG Grid: Did not find icon ".concat(iconName)),cssClass="")),span.setAttribute("class","ag-icon ag-icon-".concat(cssClass)),span.setAttribute("unselectable","on"),setAriaRole(span,"presentation"),span}}__name(createIconNoSpan,"createIconNoSpan");var IconUtils=Object.freeze({__proto__:null,iconNameClassMap,createIcon,createIconNoSpan}),KeyCode=function(){function KeyCode2(){}return __name(KeyCode2,"KeyCode"),KeyCode2.BACKSPACE="Backspace",KeyCode2.TAB="Tab",KeyCode2.ENTER="Enter",KeyCode2.ESCAPE="Escape",KeyCode2.SPACE=" ",KeyCode2.LEFT="ArrowLeft",KeyCode2.UP="ArrowUp",KeyCode2.RIGHT="ArrowRight",KeyCode2.DOWN="ArrowDown",KeyCode2.DELETE="Delete",KeyCode2.F2="F2",KeyCode2.PAGE_UP="PageUp",KeyCode2.PAGE_DOWN="PageDown",KeyCode2.PAGE_HOME="Home",KeyCode2.PAGE_END="End",KeyCode2.A="KeyA",KeyCode2.C="KeyC",KeyCode2.D="KeyD",KeyCode2.V="KeyV",KeyCode2.X="KeyX",KeyCode2.Y="KeyY",KeyCode2.Z="KeyZ",KeyCode2}(),A_KEYCODE=65,C_KEYCODE=67,V_KEYCODE=86,D_KEYCODE=68,Z_KEYCODE=90,Y_KEYCODE=89;function isEventFromPrintableCharacter(event){if(event.altKey||event.ctrlKey||event.metaKey)return!1;var printableCharacter=event.key.length===1;return printableCharacter}__name(isEventFromPrintableCharacter,"isEventFromPrintableCharacter");function isUserSuppressingKeyboardEvent(gridOptionsService,keyboardEvent,rowNode,column,editing){var colDefFunc=column?column.getColDef().suppressKeyboardEvent:void 0;if(!colDefFunc)return!1;var params=gridOptionsService.addGridCommonParams({event:keyboardEvent,editing,column,node:rowNode,data:rowNode.data,colDef:column.getColDef()});if(colDefFunc){var colDefFuncResult=colDefFunc(params);if(colDefFuncResult)return!0}return!1}__name(isUserSuppressingKeyboardEvent,"isUserSuppressingKeyboardEvent");function isUserSuppressingHeaderKeyboardEvent(gridOptionsService,keyboardEvent,headerRowIndex,column){var colDef=column.getDefinition(),colDefFunc=colDef&&colDef.suppressHeaderKeyboardEvent;if(!exists(colDefFunc))return!1;var params=gridOptionsService.addGridCommonParams({colDef,column,headerRowIndex,event:keyboardEvent});return!!colDefFunc(params)}__name(isUserSuppressingHeaderKeyboardEvent,"isUserSuppressingHeaderKeyboardEvent");function normaliseQwertyAzerty(keyboardEvent){var keyCode=keyboardEvent.keyCode,code;switch(keyCode){case A_KEYCODE:code=KeyCode.A;break;case C_KEYCODE:code=KeyCode.C;break;case V_KEYCODE:code=KeyCode.V;break;case D_KEYCODE:code=KeyCode.D;break;case Z_KEYCODE:code=KeyCode.Z;break;case Y_KEYCODE:code=KeyCode.Y;break;default:code=keyboardEvent.code}return code}__name(normaliseQwertyAzerty,"normaliseQwertyAzerty");function isDeleteKey(key,alwaysReturnFalseOnBackspace){return alwaysReturnFalseOnBackspace===void 0&&(alwaysReturnFalseOnBackspace=!1),key===KeyCode.DELETE?!0:!alwaysReturnFalseOnBackspace&&key===KeyCode.BACKSPACE?isMacOsUserAgent():!1}__name(isDeleteKey,"isDeleteKey");var KeyboardUtils=Object.freeze({__proto__:null,isEventFromPrintableCharacter,isUserSuppressingKeyboardEvent,isUserSuppressingHeaderKeyboardEvent,normaliseQwertyAzerty,isDeleteKey});function areEventsNear(e1,e2,pixelCount){if(pixelCount===0)return!1;var diffX=Math.abs(e1.clientX-e2.clientX),diffY=Math.abs(e1.clientY-e2.clientY);return Math.max(diffX,diffY)<=pixelCount}__name(areEventsNear,"areEventsNear");var MouseUtils=Object.freeze({__proto__:null,areEventsNear});function sortRowNodesByOrder(rowNodes,rowNodeOrder){if(!rowNodes)return!1;for(var comparator=__name(function(nodeA,nodeB){var positionA=rowNodeOrder[nodeA.id],positionB=rowNodeOrder[nodeB.id],aHasIndex=positionA!==void 0,bHasIndex=positionB!==void 0,bothNodesAreUserNodes=aHasIndex&&bHasIndex,bothNodesAreFillerNodes=!aHasIndex&&!bHasIndex;return bothNodesAreUserNodes?positionA-positionB:bothNodesAreFillerNodes?nodeA.__objectId-nodeB.__objectId:aHasIndex?1:-1},"comparator"),rowNodeA,rowNodeB,atLeastOneOutOfOrder=!1,i=0;i<rowNodes.length-1;i++)if(rowNodeA=rowNodes[i],rowNodeB=rowNodes[i+1],comparator(rowNodeA,rowNodeB)>0){atLeastOneOutOfOrder=!0;break}return atLeastOneOutOfOrder?(rowNodes.sort(comparator),!0):!1}__name(sortRowNodesByOrder,"sortRowNodesByOrder");var RowNodeUtils=Object.freeze({__proto__:null,sortRowNodesByOrder});function convertToSet(list){var set=new Set;return list.forEach(function(x){return set.add(x)}),set}__name(convertToSet,"convertToSet");var SetUtils=Object.freeze({__proto__:null,convertToSet}),__assign$p=__name(function(){return __assign$p=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$p.apply(this,arguments)},"__assign$p"),utils=__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p(__assign$p({},AriaUtils),ArrayUtils),BrowserUtils),DateUtils),DomUtils),EventUtils),FunctionUtils),FuzzyMatchUtils),GenericUtils),IconUtils),KeyboardUtils),MapUtils),MouseUtils),NumberUtils),ObjectUtils),RowNodeUtils),SetUtils),StringUtils),_=utils,NumberSequence=function(){function NumberSequence2(initValue,step){initValue===void 0&&(initValue=0),step===void 0&&(step=1),this.nextValue=initValue,this.step=step}return __name(NumberSequence2,"NumberSequence"),NumberSequence2.prototype.next=function(){var valToReturn=this.nextValue;return this.nextValue+=this.step,valToReturn},NumberSequence2.prototype.peek=function(){return this.nextValue},NumberSequence2.prototype.skip=function(count){this.nextValue+=count},NumberSequence2}(),AgPromiseStatus;(function(AgPromiseStatus2){AgPromiseStatus2[AgPromiseStatus2.IN_PROGRESS=0]="IN_PROGRESS",AgPromiseStatus2[AgPromiseStatus2.RESOLVED=1]="RESOLVED"})(AgPromiseStatus||(AgPromiseStatus={}));var AgPromise=function(){function AgPromise2(callback){var _this=this;this.status=AgPromiseStatus.IN_PROGRESS,this.resolution=null,this.waiters=[],callback(function(value){return _this.onDone(value)},function(params){return _this.onReject(params)})}return __name(AgPromise2,"AgPromise"),AgPromise2.all=function(promises){return new AgPromise2(function(resolve){var remainingToResolve=promises.length,combinedValues=new Array(remainingToResolve);promises.forEach(function(promise,index){promise.then(function(value){combinedValues[index]=value,remainingToResolve--,remainingToResolve===0&&resolve(combinedValues)})})})},AgPromise2.resolve=function(value){return value===void 0&&(value=null),new AgPromise2(function(resolve){return resolve(value)})},AgPromise2.prototype.then=function(func){var _this=this;return new AgPromise2(function(resolve){_this.status===AgPromiseStatus.RESOLVED?resolve(func(_this.resolution)):_this.waiters.push(function(value){return resolve(func(value))})})},AgPromise2.prototype.resolveNow=function(ifNotResolvedValue,ifResolved){return this.status===AgPromiseStatus.RESOLVED?ifResolved(this.resolution):ifNotResolvedValue},AgPromise2.prototype.onDone=function(value){this.status=AgPromiseStatus.RESOLVED,this.resolution=value,this.waiters.forEach(function(waiter){return waiter(value)})},AgPromise2.prototype.onReject=function(params){console.warn("TBI")},AgPromise2}(),Timer=function(){function Timer2(){this.timestamp=new Date().getTime()}return __name(Timer2,"Timer"),Timer2.prototype.print=function(msg){var duration=new Date().getTime()-this.timestamp;console.info("".concat(msg," = ").concat(duration)),this.timestamp=new Date().getTime()},Timer2}(),__extends$3a=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$o=__name(function(){return __assign$o=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$o.apply(this,arguments)},"__assign$o"),__decorate$2D=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2D"),TooltipStates;(function(TooltipStates2){TooltipStates2[TooltipStates2.NOTHING=0]="NOTHING",TooltipStates2[TooltipStates2.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",TooltipStates2[TooltipStates2.SHOWING=2]="SHOWING"})(TooltipStates||(TooltipStates={}));var TooltipTrigger;(function(TooltipTrigger2){TooltipTrigger2[TooltipTrigger2.HOVER=0]="HOVER",TooltipTrigger2[TooltipTrigger2.FOCUS=1]="FOCUS"})(TooltipTrigger||(TooltipTrigger={}));var CustomTooltipFeature=function(_super){__extends$3a(CustomTooltipFeature2,_super);function CustomTooltipFeature2(parentComp,tooltipShowDelayOverride,tooltipHideDelayOverride){var _this=_super.call(this)||this;return _this.parentComp=parentComp,_this.tooltipShowDelayOverride=tooltipShowDelayOverride,_this.tooltipHideDelayOverride=tooltipHideDelayOverride,_this.SHOW_QUICK_TOOLTIP_DIFF=1e3,_this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,_this.INTERACTIVE_HIDE_DELAY=100,_this.interactionEnabled=!1,_this.isInteractingWithTooltip=!1,_this.state=TooltipStates.NOTHING,_this.tooltipInstanceCount=0,_this.tooltipMouseTrack=!1,_this}return __name(CustomTooltipFeature2,"CustomTooltipFeature"),CustomTooltipFeature2.prototype.postConstruct=function(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");var el=this.parentComp.getGui();this.tooltipTrigger===TooltipTrigger.HOVER&&(this.addManagedListener(el,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(el,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===TooltipTrigger.FOCUS&&(this.addManagedListener(el,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(el,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(el,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(el,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(el,"keydown",this.onKeyDown.bind(this)))},CustomTooltipFeature2.prototype.getGridOptionsTooltipDelay=function(delayOption){var delay=this.gridOptionsService.get(delayOption);return delay<0&&warnOnce("".concat(delayOption," should not be lower than 0")),Math.max(200,delay)},CustomTooltipFeature2.prototype.getTooltipDelay=function(type){var _a,_b;return type==="show"?(_a=this.tooltipShowDelayOverride)!==null&&_a!==void 0?_a:this.getGridOptionsTooltipDelay("tooltipShowDelay"):(_b=this.tooltipHideDelayOverride)!==null&&_b!==void 0?_b:this.getGridOptionsTooltipDelay("tooltipHideDelay")},CustomTooltipFeature2.prototype.destroy=function(){this.setToDoNothing(),_super.prototype.destroy.call(this)},CustomTooltipFeature2.prototype.getTooltipTrigger=function(){var trigger=this.gridOptionsService.get("tooltipTrigger");return!trigger||trigger==="hover"?TooltipTrigger.HOVER:TooltipTrigger.FOCUS},CustomTooltipFeature2.prototype.onMouseEnter=function(e){var _this=this;this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!isIOSUserAgent()&&(CustomTooltipFeature2.isLocked?this.showTooltipTimeoutId=window.setTimeout(function(){_this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))},CustomTooltipFeature2.prototype.onMouseMove=function(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===TooltipStates.SHOWING&&this.tooltipComp&&this.positionTooltip()},CustomTooltipFeature2.prototype.onMouseDown=function(){this.setToDoNothing()},CustomTooltipFeature2.prototype.onMouseLeave=function(){this.interactionEnabled?this.lockService():this.setToDoNothing()},CustomTooltipFeature2.prototype.onFocusIn=function(){this.prepareToShowTooltip()},CustomTooltipFeature2.prototype.onFocusOut=function(e){var _a,relatedTarget=e.relatedTarget,parentCompGui=this.parentComp.getGui(),tooltipGui=(_a=this.tooltipComp)===null||_a===void 0?void 0:_a.getGui();this.isInteractingWithTooltip||parentCompGui.contains(relatedTarget)||this.interactionEnabled&&(tooltipGui!=null&&tooltipGui.contains(relatedTarget))||this.setToDoNothing()},CustomTooltipFeature2.prototype.onKeyDown=function(){this.setToDoNothing()},CustomTooltipFeature2.prototype.prepareToShowTooltip=function(mouseEvent){if(this.state!=TooltipStates.NOTHING||CustomTooltipFeature2.isLocked)return!1;var delay=0;return mouseEvent&&(delay=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=mouseEvent||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),delay),this.state=TooltipStates.WAITING_TO_SHOW,!0},CustomTooltipFeature2.prototype.isLastTooltipHiddenRecently=function(){var now=new Date().getTime(),then=CustomTooltipFeature2.lastTooltipHideTime;return now-then<this.SHOW_QUICK_TOOLTIP_DIFF},CustomTooltipFeature2.prototype.setToDoNothing=function(){this.state===TooltipStates.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=TooltipStates.NOTHING,this.lastMouseEvent=null},CustomTooltipFeature2.prototype.showTooltip=function(){var params=__assign$o({},this.parentComp.getTooltipParams());if(!exists(params.value)){this.setToDoNothing();return}this.state=TooltipStates.SHOWING,this.tooltipInstanceCount++;var callback=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount),userDetails=this.userComponentFactory.getTooltipCompDetails(params);userDetails.newAgStackInstance().then(callback)},CustomTooltipFeature2.prototype.hideTooltip=function(forceHide){if(!(!forceHide&&this.isInteractingWithTooltip)){this.tooltipComp&&(this.destroyTooltipComp(),CustomTooltipFeature2.lastTooltipHideTime=new Date().getTime());var event={type:Events.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(event),this.state=TooltipStates.NOTHING}},CustomTooltipFeature2.prototype.newTooltipComponentCallback=function(tooltipInstanceCopy,tooltipComp){var compNoLongerNeeded=this.state!==TooltipStates.SHOWING||this.tooltipInstanceCount!==tooltipInstanceCopy;if(compNoLongerNeeded){this.getContext().destroyBean(tooltipComp);return}var eGui=tooltipComp.getGui();this.tooltipComp=tooltipComp,eGui.classList.contains("ag-tooltip")||eGui.classList.add("ag-tooltip-custom"),this.tooltipTrigger===TooltipTrigger.HOVER&&eGui.classList.add("ag-tooltip-animate"),this.interactionEnabled&&eGui.classList.add("ag-tooltip-interactive");var translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({eChild:eGui,ariaLabel:translate("ariaLabelTooltip","Tooltip")});addPopupRes&&(this.tooltipPopupDestroyFunc=addPopupRes.hideFunc),this.positionTooltip(),this.tooltipTrigger===TooltipTrigger.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===TooltipTrigger.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(eGui,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(eGui,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(eGui,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(eGui,"focusout",this.onTooltipFocusOut.bind(this))||null));var event={type:Events.EVENT_TOOLTIP_SHOW,tooltipGui:eGui,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(event),this.startHideTimeout()},CustomTooltipFeature2.prototype.onTooltipMouseEnter=function(){this.isInteractingWithTooltip=!0,this.unlockService()},CustomTooltipFeature2.prototype.onTooltipMouseLeave=function(){this.isInteractingWithTooltip=!1,this.lockService()},CustomTooltipFeature2.prototype.onTooltipFocusIn=function(){this.isInteractingWithTooltip=!0},CustomTooltipFeature2.prototype.onTooltipFocusOut=function(e){var _a,parentGui=this.parentComp.getGui(),tooltipGui=(_a=this.tooltipComp)===null||_a===void 0?void 0:_a.getGui(),relatedTarget=e.relatedTarget;tooltipGui!=null&&tooltipGui.contains(relatedTarget)||(this.isInteractingWithTooltip=!1,parentGui.contains(relatedTarget)?this.startHideTimeout():this.hideTooltip())},CustomTooltipFeature2.prototype.positionTooltip=function(){var params={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(__assign$o(__assign$o({},params),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(__assign$o(__assign$o({},params),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))},CustomTooltipFeature2.prototype.destroyTooltipComp=function(){var _this=this;this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");var tooltipPopupDestroyFunc=this.tooltipPopupDestroyFunc,tooltipComp=this.tooltipComp,delay=this.tooltipTrigger===TooltipTrigger.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0;window.setTimeout(function(){tooltipPopupDestroyFunc(),_this.getContext().destroyBean(tooltipComp)},delay),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0},CustomTooltipFeature2.prototype.clearTooltipListeners=function(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(function(listener){listener&&listener()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null},CustomTooltipFeature2.prototype.lockService=function(){var _this=this;CustomTooltipFeature2.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(function(){_this.unlockService(),_this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)},CustomTooltipFeature2.prototype.unlockService=function(){CustomTooltipFeature2.isLocked=!1,this.clearInteractiveTimeout()},CustomTooltipFeature2.prototype.startHideTimeout=function(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))},CustomTooltipFeature2.prototype.clearShowTimeout=function(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)},CustomTooltipFeature2.prototype.clearHideTimeout=function(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)},CustomTooltipFeature2.prototype.clearInteractiveTimeout=function(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)},CustomTooltipFeature2.prototype.clearTimeouts=function(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()},CustomTooltipFeature2.isLocked=!1,__decorate$2D([Autowired("popupService")],CustomTooltipFeature2.prototype,"popupService",void 0),__decorate$2D([Autowired("userComponentFactory")],CustomTooltipFeature2.prototype,"userComponentFactory",void 0),__decorate$2D([PostConstruct],CustomTooltipFeature2.prototype,"postConstruct",null),CustomTooltipFeature2}(BeanStub),CssClassManager=function(){function CssClassManager2(getGui){this.cssClassStates={},this.getGui=getGui}return __name(CssClassManager2,"CssClassManager"),CssClassManager2.prototype.addCssClass=function(className){var _this=this,list=(className||"").split(" ");if(list.length>1){list.forEach(function(cls){return _this.addCssClass(cls)});return}var updateNeeded=this.cssClassStates[className]!==!0;if(updateNeeded&&className.length){var eGui=this.getGui();eGui&&eGui.classList.add(className),this.cssClassStates[className]=!0}},CssClassManager2.prototype.removeCssClass=function(className){var _this=this,list=(className||"").split(" ");if(list.length>1){list.forEach(function(cls){return _this.removeCssClass(cls)});return}var updateNeeded=this.cssClassStates[className]!==!1;if(updateNeeded&&className.length){var eGui=this.getGui();eGui&&eGui.classList.remove(className),this.cssClassStates[className]=!1}},CssClassManager2.prototype.containsCssClass=function(className){var eGui=this.getGui();return eGui?eGui.classList.contains(className):!1},CssClassManager2.prototype.addOrRemoveCssClass=function(className,addOrRemove){var _this=this;if(className){if(className.indexOf(" ")>=0){var list=(className||"").split(" ");if(list.length>1){list.forEach(function(cls){return _this.addOrRemoveCssClass(cls,addOrRemove)});return}}var updateNeeded=this.cssClassStates[className]!==addOrRemove;if(updateNeeded&&className.length){var eGui=this.getGui();eGui&&eGui.classList.toggle(className,addOrRemove),this.cssClassStates[className]=addOrRemove}}},CssClassManager2}(),__extends$39=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2C=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2C"),compIdSequence=new NumberSequence,Component=function(_super){__extends$39(Component2,_super);function Component2(template){var _this=_super.call(this)||this;return _this.displayed=!0,_this.visible=!0,_this.compId=compIdSequence.next(),_this.cssClassManager=new CssClassManager(function(){return _this.eGui}),template&&_this.setTemplate(template),_this}return __name(Component2,"Component"),Component2.prototype.preConstructOnComponent=function(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")},Component2.prototype.getCompId=function(){return this.compId},Component2.prototype.getTooltipParams=function(){return{value:this.tooltipText,location:"UNKNOWN"}},Component2.prototype.setTooltip=function(newTooltipText,showDelayOverride,hideDelayOverride){var _this=this,removeTooltip=__name(function(){_this.usingBrowserTooltips?_this.getGui().removeAttribute("title"):_this.tooltipFeature=_this.destroyBean(_this.tooltipFeature)},"removeTooltip"),addTooltip=__name(function(){_this.usingBrowserTooltips?_this.getGui().setAttribute("title",_this.tooltipText):_this.tooltipFeature=_this.createBean(new CustomTooltipFeature(_this,showDelayOverride,hideDelayOverride))},"addTooltip");this.tooltipText!=newTooltipText&&(this.tooltipText&&removeTooltip(),newTooltipText!=null&&(this.tooltipText=newTooltipText,this.tooltipText&&addTooltip()))},Component2.prototype.createChildComponentsFromTags=function(parentNode,paramsMap){var _this=this,childNodeList=copyNodeList(parentNode.childNodes);childNodeList.forEach(function(childNode){if(childNode instanceof HTMLElement){var childComp=_this.createComponentFromElement(childNode,function(childComp2){var childGui=childComp2.getGui();childGui&&_this.copyAttributesFromNode(childNode,childComp2.getGui())},paramsMap);if(childComp){if(childComp.addItems&&childNode.children.length){_this.createChildComponentsFromTags(childNode,paramsMap);var items=Array.prototype.slice.call(childNode.children);childComp.addItems(items)}_this.swapComponentForNode(childComp,parentNode,childNode)}else childNode.childNodes&&_this.createChildComponentsFromTags(childNode,paramsMap)}})},Component2.prototype.createComponentFromElement=function(element,afterPreCreateCallback,paramsMap){var key=element.nodeName,componentParams=paramsMap?paramsMap[element.getAttribute("ref")]:void 0,ComponentClass=this.agStackComponentsRegistry.getComponentClass(key);if(ComponentClass){Component2.elementGettingCreated=element;var newComponent=new ComponentClass(componentParams);return newComponent.setParentComponent(this),this.createBean(newComponent,null,afterPreCreateCallback),newComponent}return null},Component2.prototype.copyAttributesFromNode=function(source,dest){iterateNamedNodeMap(source.attributes,function(name,value){return dest.setAttribute(name,value)})},Component2.prototype.swapComponentForNode=function(newComponent,parentNode,childNode){var eComponent=newComponent.getGui();parentNode.replaceChild(eComponent,childNode),parentNode.insertBefore(document.createComment(childNode.nodeName),eComponent),this.addDestroyFunc(this.destroyBean.bind(this,newComponent)),this.swapInComponentForQuerySelectors(newComponent,childNode)},Component2.prototype.swapInComponentForQuerySelectors=function(newComponent,childNode){var thisNoType=this;this.iterateOverQuerySelectors(function(querySelector){thisNoType[querySelector.attributeName]===childNode&&(thisNoType[querySelector.attributeName]=newComponent)})},Component2.prototype.iterateOverQuerySelectors=function(action){for(var thisPrototype=Object.getPrototypeOf(this);thisPrototype!=null;){var metaData=thisPrototype.__agComponentMetaData,currentProtoName=getFunctionName(thisPrototype.constructor);metaData&&metaData[currentProtoName]&&metaData[currentProtoName].querySelectors&&metaData[currentProtoName].querySelectors.forEach(function(querySelector){return action(querySelector)}),thisPrototype=Object.getPrototypeOf(thisPrototype)}},Component2.prototype.activateTabIndex=function(elements){var tabIndex=this.gridOptionsService.get("tabIndex");elements||(elements=[]),elements.length||elements.push(this.getGui()),elements.forEach(function(el){return el.setAttribute("tabindex",tabIndex.toString())})},Component2.prototype.setTemplate=function(template,paramsMap){var eGui=loadTemplate(template);this.setTemplateFromElement(eGui,paramsMap)},Component2.prototype.setTemplateFromElement=function(element,paramsMap){this.eGui=element,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),paramsMap)},Component2.prototype.createChildComponentsPreConstruct=function(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())},Component2.prototype.wireQuerySelectors=function(){var _this=this;if(this.eGui){var thisNoType=this;this.iterateOverQuerySelectors(function(querySelector){var setResult=__name(function(result){return thisNoType[querySelector.attributeName]=result},"setResult"),topLevelRefMatch=querySelector.refSelector&&_this.getAttribute("ref")===querySelector.refSelector;if(topLevelRefMatch)setResult(_this.eGui);else{var resultOfQuery=_this.eGui.querySelector(querySelector.querySelector);resultOfQuery&&setResult(resultOfQuery.__agComponent||resultOfQuery)}})}},Component2.prototype.getGui=function(){return this.eGui},Component2.prototype.getFocusableElement=function(){return this.eGui},Component2.prototype.getAriaElement=function(){return this.getFocusableElement()},Component2.prototype.setParentComponent=function(component){this.parentComponent=component},Component2.prototype.getParentComponent=function(){return this.parentComponent},Component2.prototype.setGui=function(eGui){this.eGui=eGui},Component2.prototype.queryForHtmlElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component2.prototype.queryForHtmlInputElement=function(cssSelector){return this.eGui.querySelector(cssSelector)},Component2.prototype.appendChild=function(newChild,container){if(newChild!=null)if(container||(container=this.eGui),isNodeOrElement(newChild))container.appendChild(newChild);else{var childComponent=newChild;container.appendChild(childComponent.getGui())}},Component2.prototype.isDisplayed=function(){return this.displayed},Component2.prototype.setVisible=function(visible,options){if(options===void 0&&(options={}),visible!==this.visible){this.visible=visible;var skipAriaHidden=options.skipAriaHidden;setVisible(this.eGui,visible,{skipAriaHidden})}},Component2.prototype.setDisplayed=function(displayed,options){if(options===void 0&&(options={}),displayed!==this.displayed){this.displayed=displayed;var skipAriaHidden=options.skipAriaHidden;setDisplayed(this.eGui,displayed,{skipAriaHidden});var event_1={type:Component2.EVENT_DISPLAYED_CHANGED,visible:this.displayed};this.dispatchEvent(event_1)}},Component2.prototype.destroy=function(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);var eGui=this.eGui;eGui&&eGui.__agComponent&&(eGui.__agComponent=void 0),_super.prototype.destroy.call(this)},Component2.prototype.addGuiEventListener=function(event,listener,options){var _this=this;this.eGui.addEventListener(event,listener,options),this.addDestroyFunc(function(){return _this.eGui.removeEventListener(event,listener)})},Component2.prototype.addCssClass=function(className){this.cssClassManager.addCssClass(className)},Component2.prototype.removeCssClass=function(className){this.cssClassManager.removeCssClass(className)},Component2.prototype.containsCssClass=function(className){return this.cssClassManager.containsCssClass(className)},Component2.prototype.addOrRemoveCssClass=function(className,addOrRemove){this.cssClassManager.addOrRemoveCssClass(className,addOrRemove)},Component2.prototype.getAttribute=function(key){var eGui=this.eGui;return eGui?eGui.getAttribute(key):null},Component2.prototype.getRefElement=function(refName){return this.queryForHtmlElement('[ref="'.concat(refName,'"]'))},Component2.EVENT_DISPLAYED_CHANGED="displayedChanged",__decorate$2C([Autowired("agStackComponentsRegistry")],Component2.prototype,"agStackComponentsRegistry",void 0),__decorate$2C([PreConstruct],Component2.prototype,"preConstructOnComponent",null),__decorate$2C([PreConstruct],Component2.prototype,"createChildComponentsPreConstruct",null),Component2}(BeanStub);function QuerySelector(selector){return querySelectorFunc.bind(this,selector,void 0)}__name(QuerySelector,"QuerySelector");function RefSelector(ref){return querySelectorFunc.bind(this,"[ref=".concat(ref,"]"),ref)}__name(RefSelector,"RefSelector");function querySelectorFunc(selector,refSelector,classPrototype,methodOrAttributeName,index){if(selector===null){console.error("AG Grid: QuerySelector selector should not be null");return}if(typeof index=="number"){console.error("AG Grid: QuerySelector should be on an attribute");return}addToObjectProps(classPrototype,"querySelectors",{attributeName:methodOrAttributeName,querySelector:selector,refSelector})}__name(querySelectorFunc,"querySelectorFunc");function addToObjectProps(target,key,value){var props=getOrCreateProps(target,getFunctionName(target.constructor));props[key]||(props[key]=[]),props[key].push(value)}__name(addToObjectProps,"addToObjectProps");function getOrCreateProps(target,instanceName){return target.__agComponentMetaData||(target.__agComponentMetaData={}),target.__agComponentMetaData[instanceName]||(target.__agComponentMetaData[instanceName]={}),target.__agComponentMetaData[instanceName]}__name(getOrCreateProps,"getOrCreateProps");var __extends$38=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2B=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2B"),ReadOnlyFloatingFilter=function(_super){__extends$38(ReadOnlyFloatingFilter2,_super);function ReadOnlyFloatingFilter2(){return _super.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>
            </div>`)||this}return __name(ReadOnlyFloatingFilter2,"ReadOnlyFloatingFilter"),ReadOnlyFloatingFilter2.prototype.destroy=function(){_super.prototype.destroy.call(this)},ReadOnlyFloatingFilter2.prototype.init=function(params){this.params=params;var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel("".concat(displayName," ").concat(translate("ariaFilterInput","Filter Input")))},ReadOnlyFloatingFilter2.prototype.onParentModelChanged=function(parentModel){var _this=this;if(parentModel==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(function(filterInstance){if(filterInstance.getModelAsString){var modelAsString=filterInstance.getModelAsString(parentModel);_this.eFloatingFilterText.setValue(modelAsString)}})},ReadOnlyFloatingFilter2.prototype.onParamsUpdated=function(params){this.refresh(params)},ReadOnlyFloatingFilter2.prototype.refresh=function(params){this.init(params)},__decorate$2B([RefSelector("eFloatingFilterText")],ReadOnlyFloatingFilter2.prototype,"eFloatingFilterText",void 0),__decorate$2B([Autowired("columnModel")],ReadOnlyFloatingFilter2.prototype,"columnModel",void 0),ReadOnlyFloatingFilter2}(Component),DateCompWrapper=function(){function DateCompWrapper2(context,userComponentFactory,dateComponentParams,eParent){var _this=this;this.alive=!0,this.context=context,this.eParent=eParent;var compDetails=userComponentFactory.getDateCompDetails(dateComponentParams),promise=compDetails.newAgStackInstance();promise.then(function(dateComp){if(!_this.alive){context.destroyBean(dateComp);return}_this.dateComp=dateComp,dateComp&&(eParent.appendChild(dateComp.getGui()),dateComp.afterGuiAttached&&dateComp.afterGuiAttached(),_this.tempValue&&dateComp.setDate(_this.tempValue),_this.disabled!=null&&_this.setDateCompDisabled(_this.disabled))})}return __name(DateCompWrapper2,"DateCompWrapper"),DateCompWrapper2.prototype.destroy=function(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)},DateCompWrapper2.prototype.getDate=function(){return this.dateComp?this.dateComp.getDate():this.tempValue},DateCompWrapper2.prototype.setDate=function(value){this.dateComp?this.dateComp.setDate(value):this.tempValue=value},DateCompWrapper2.prototype.setDisabled=function(disabled){this.dateComp?this.setDateCompDisabled(disabled):this.disabled=disabled},DateCompWrapper2.prototype.setDisplayed=function(displayed){setDisplayed(this.eParent,displayed)},DateCompWrapper2.prototype.setInputPlaceholder=function(placeholder){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(placeholder)},DateCompWrapper2.prototype.setInputAriaLabel=function(label){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(label)},DateCompWrapper2.prototype.afterGuiAttached=function(params){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(params)},DateCompWrapper2.prototype.updateParams=function(params){var _a,_b,hasRefreshed=!1;if(!((_a=this.dateComp)===null||_a===void 0)&&_a.refresh&&typeof this.dateComp.refresh=="function"){var result=this.dateComp.refresh(params);result!==null&&(hasRefreshed=!0)}if(!hasRefreshed&&(!((_b=this.dateComp)===null||_b===void 0)&&_b.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"){var result=this.dateComp.onParamsUpdated(params);result!==null&&warnOnce("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}},DateCompWrapper2.prototype.setDateCompDisabled=function(disabled){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(disabled)},DateCompWrapper2}(),OptionsFactory=function(){function OptionsFactory2(){this.customFilterOptions={}}return __name(OptionsFactory2,"OptionsFactory"),OptionsFactory2.prototype.init=function(params,defaultOptions){this.filterOptions=params.filterOptions||defaultOptions,this.mapCustomOptions(),this.selectDefaultItem(params)},OptionsFactory2.prototype.getFilterOptions=function(){return this.filterOptions},OptionsFactory2.prototype.mapCustomOptions=function(){var _this=this;this.filterOptions&&this.filterOptions.forEach(function(filterOption){if(typeof filterOption!="string"){var requiredProperties=[["displayKey"],["displayName"],["predicate","test"]],propertyCheck=__name(function(keys2){return keys2.some(function(key){return filterOption[key]!=null})?!0:(console.warn("AG Grid: ignoring FilterOptionDef as it doesn't contain one of '".concat(keys2,"'")),!1)},"propertyCheck");if(!requiredProperties.every(propertyCheck)){_this.filterOptions=_this.filterOptions.filter(function(v){return v===filterOption})||[];return}_this.customFilterOptions[filterOption.displayKey]=filterOption}})},OptionsFactory2.prototype.selectDefaultItem=function(params){if(params.defaultOption)this.defaultOption=params.defaultOption;else if(this.filterOptions.length>=1){var firstFilterOption=this.filterOptions[0];typeof firstFilterOption=="string"?this.defaultOption=firstFilterOption:firstFilterOption.displayKey?this.defaultOption=firstFilterOption.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")},OptionsFactory2.prototype.getDefaultOption=function(){return this.defaultOption},OptionsFactory2.prototype.getCustomOption=function(name){return this.customFilterOptions[name]},OptionsFactory2}(),FILTER_LOCALE_TEXT={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"},__extends$37=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$n=__name(function(){return __assign$n=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$n.apply(this,arguments)},"__assign$n"),__decorate$2A=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2A"),ManagedFocusFeature=function(_super){__extends$37(ManagedFocusFeature2,_super);function ManagedFocusFeature2(eFocusableElement,callbacks){callbacks===void 0&&(callbacks={});var _this=_super.call(this)||this;return _this.eFocusableElement=eFocusableElement,_this.callbacks=callbacks,_this.callbacks=__assign$n({shouldStopEventPropagation:function(){return!1},onTabKeyDown:function(e){if(!e.defaultPrevented){var nextRoot=_this.focusService.findNextFocusableElement(_this.eFocusableElement,!1,e.shiftKey);nextRoot&&(nextRoot.focus(),e.preventDefault())}}},callbacks),_this}return __name(ManagedFocusFeature2,"ManagedFocusFeature"),ManagedFocusFeature2.prototype.postConstruct=function(){this.eFocusableElement.classList.add(ManagedFocusFeature2.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)},ManagedFocusFeature2.prototype.addKeyDownListeners=function(eGui){var _this=this;this.addManagedListener(eGui,"keydown",function(e){if(!(e.defaultPrevented||isStopPropagationForAgGrid(e))){if(_this.callbacks.shouldStopEventPropagation(e)){stopPropagationForAgGrid(e);return}e.key===KeyCode.TAB?_this.callbacks.onTabKeyDown(e):_this.callbacks.handleKeyDown&&_this.callbacks.handleKeyDown(e)}})},ManagedFocusFeature2.FOCUS_MANAGED_CLASS="ag-focus-managed",__decorate$2A([Autowired("focusService")],ManagedFocusFeature2.prototype,"focusService",void 0),__decorate$2A([PostConstruct],ManagedFocusFeature2.prototype,"postConstruct",null),ManagedFocusFeature2}(BeanStub),__extends$36=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2z=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2z"),RESIZE_CONTAINER_STYLE="ag-resizer-wrapper",RESIZE_TEMPLATE='<div class="'.concat(RESIZE_CONTAINER_STYLE,`">
        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>
        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>
        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>
        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>
        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>
        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>
        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>
        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>
    </div>`),PositionableFeature=function(_super){__extends$36(PositionableFeature2,_super);function PositionableFeature2(element,config){var _this=_super.call(this)||this;return _this.element=element,_this.dragStartPosition={x:0,y:0},_this.position={x:0,y:0},_this.lastSize={width:-1,height:-1},_this.positioned=!1,_this.resizersAdded=!1,_this.resizeListeners=[],_this.boundaryEl=null,_this.isResizing=!1,_this.isMoving=!1,_this.resizable={},_this.movable=!1,_this.currentResizer=null,_this.config=Object.assign({},{popup:!1},config),_this}return __name(PositionableFeature2,"PositionableFeature"),PositionableFeature2.prototype.center=function(){var _a=this.offsetParent,clientHeight=_a.clientHeight,clientWidth=_a.clientWidth,x=clientWidth/2-this.getWidth()/2,y=clientHeight/2-this.getHeight()/2;this.offsetElement(x,y)},PositionableFeature2.prototype.initialisePosition=function(){if(!this.positioned){var _a=this.config,centered=_a.centered,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,minWidth=_a.minWidth,width=_a.width,minHeight=_a.minHeight,height=_a.height,x=_a.x,y=_a.y;this.offsetParent||this.setOffsetParent();var computedMinHeight=0,computedMinWidth=0,isElementVisible=isVisible(this.element);if(isElementVisible){var boundaryEl=this.findBoundaryElement(),offsetParentComputedStyles=window.getComputedStyle(boundaryEl);if(offsetParentComputedStyles.minWidth!=null){var paddingWidth=boundaryEl.offsetWidth-this.element.offsetWidth;computedMinWidth=parseInt(offsetParentComputedStyles.minWidth,10)-paddingWidth}if(offsetParentComputedStyles.minHeight!=null){var paddingHeight=boundaryEl.offsetHeight-this.element.offsetHeight;computedMinHeight=parseInt(offsetParentComputedStyles.minHeight,10)-paddingHeight}}if(this.minHeight=minHeight||computedMinHeight,this.minWidth=minWidth||computedMinWidth,width&&this.setWidth(width),height&&this.setHeight(height),(!width||!height)&&this.refreshSize(),centered)this.center();else if(x||y)this.offsetElement(x,y);else if(isElementVisible&&forcePopupParentAsOffsetParent){var boundaryEl=this.boundaryEl,initialisedDuringPositioning=!0;if(boundaryEl||(boundaryEl=this.findBoundaryElement(),initialisedDuringPositioning=!1),boundaryEl){var top_1=parseFloat(boundaryEl.style.top),left=parseFloat(boundaryEl.style.left);initialisedDuringPositioning?this.offsetElement(isNaN(left)?0:left,isNaN(top_1)?0:top_1):this.setPosition(left,top_1)}}this.positioned=!!this.offsetParent}},PositionableFeature2.prototype.isPositioned=function(){return this.positioned},PositionableFeature2.prototype.getPosition=function(){return this.position},PositionableFeature2.prototype.setMovable=function(movable,moveElement){if(!(!this.config.popup||movable===this.movable)){this.movable=movable;var params=this.moveElementDragListener||{eElement:moveElement,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};movable?(this.dragService.addDragSource(params),this.moveElementDragListener=params):(this.dragService.removeDragSource(params),this.moveElementDragListener=void 0)}},PositionableFeature2.prototype.setResizable=function(resizable){var _this=this;if(this.clearResizeListeners(),resizable?this.addResizers():this.removeResizers(),typeof resizable=="boolean"){if(resizable===!1)return;resizable={topLeft:resizable,top:resizable,topRight:resizable,right:resizable,bottomRight:resizable,bottom:resizable,bottomLeft:resizable,left:resizable}}Object.keys(resizable).forEach(function(side){var resizableStructure=resizable,isSideResizable=!!resizableStructure[side],resizerEl=_this.getResizerElement(side),params={dragStartPixels:0,eElement:resizerEl,onDragStart:function(e){return _this.onResizeStart(e,side)},onDragging:_this.onResize.bind(_this),onDragStop:function(e){return _this.onResizeEnd(e,side)}};(isSideResizable||!_this.isAlive()&&!isSideResizable)&&(isSideResizable?(_this.dragService.addDragSource(params),_this.resizeListeners.push(params),resizerEl.style.pointerEvents="all"):resizerEl.style.pointerEvents="none",_this.resizable[side]=isSideResizable)})},PositionableFeature2.prototype.removeSizeFromEl=function(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")},PositionableFeature2.prototype.restoreLastSize=function(){this.element.style.flex="0 0 auto";var _a=this.lastSize,height=_a.height,width=_a.width;width!==-1&&(this.element.style.width="".concat(width,"px")),height!==-1&&(this.element.style.height="".concat(height,"px"))},PositionableFeature2.prototype.getHeight=function(){return this.element.offsetHeight},PositionableFeature2.prototype.setHeight=function(height){var popup=this.config.popup,eGui=this.element,isPercent=!1;if(typeof height=="string"&&height.indexOf("%")!==-1)setFixedHeight(eGui,height),height=getAbsoluteHeight(eGui),isPercent=!0;else if(height=Math.max(this.minHeight,height),this.positioned){var availableHeight=this.getAvailableHeight();availableHeight&&height>availableHeight&&(height=availableHeight)}this.getHeight()!==height&&(isPercent?(eGui.style.maxHeight="unset",eGui.style.minHeight="unset"):popup?setFixedHeight(eGui,height):(eGui.style.height="".concat(height,"px"),eGui.style.flex="0 0 auto",this.lastSize.height=typeof height=="number"?height:parseFloat(height)))},PositionableFeature2.prototype.getAvailableHeight=function(){var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent;this.positioned||this.initialisePosition();var clientHeight=this.offsetParent.clientHeight;if(!clientHeight)return null;var elRect=this.element.getBoundingClientRect(),offsetParentRect=this.offsetParent.getBoundingClientRect(),yPosition=popup?this.position.y:elRect.top,parentTop=popup?0:offsetParentRect.top,additionalHeight=0;if(forcePopupParentAsOffsetParent){var parentEl=this.element.parentElement;if(parentEl){var bottom=parentEl.getBoundingClientRect().bottom;additionalHeight=bottom-elRect.bottom}}var availableHeight=clientHeight+parentTop-yPosition-additionalHeight;return availableHeight},PositionableFeature2.prototype.getWidth=function(){return this.element.offsetWidth},PositionableFeature2.prototype.setWidth=function(width){var eGui=this.element,popup=this.config.popup,isPercent=!1;if(typeof width=="string"&&width.indexOf("%")!==-1)setFixedWidth(eGui,width),width=getAbsoluteWidth(eGui),isPercent=!0;else if(this.positioned){width=Math.max(this.minWidth,width);var clientWidth=this.offsetParent.clientWidth,xPosition=popup?this.position.x:this.element.getBoundingClientRect().left;clientWidth&&width+xPosition>clientWidth&&(width=clientWidth-xPosition)}this.getWidth()!==width&&(isPercent?(eGui.style.maxWidth="unset",eGui.style.minWidth="unset"):this.config.popup?setFixedWidth(eGui,width):(eGui.style.width="".concat(width,"px"),eGui.style.flex=" unset",this.lastSize.width=typeof width=="number"?width:parseFloat(width)))},PositionableFeature2.prototype.offsetElement=function(x,y){x===void 0&&(x=0),y===void 0&&(y=0);var forcePopupParentAsOffsetParent=this.config.forcePopupParentAsOffsetParent,ePopup=forcePopupParentAsOffsetParent?this.boundaryEl:this.element;ePopup&&(this.popupService.positionPopup({ePopup,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:function(){return{x,y}}}),this.setPosition(parseFloat(ePopup.style.left),parseFloat(ePopup.style.top)))},PositionableFeature2.prototype.constrainSizeToAvailableHeight=function(constrain){var _this=this;if(this.config.forcePopupParentAsOffsetParent){var applyMaxHeightToElement=__name(function(){var availableHeight=_this.getAvailableHeight();_this.element.style.setProperty("max-height","".concat(availableHeight,"px"))},"applyMaxHeightToElement");constrain?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),applyMaxHeightToElement):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}},PositionableFeature2.prototype.setPosition=function(x,y){this.position.x=x,this.position.y=y},PositionableFeature2.prototype.updateDragStartPosition=function(x,y){this.dragStartPosition={x,y}},PositionableFeature2.prototype.calculateMouseMovement=function(params){var e=params.e,isLeft=params.isLeft,isTop=params.isTop,anywhereWithin=params.anywhereWithin,topBuffer=params.topBuffer,xDiff=e.clientX-this.dragStartPosition.x,yDiff=e.clientY-this.dragStartPosition.y,movementX=this.shouldSkipX(e,!!isLeft,!!anywhereWithin,xDiff)?0:xDiff,movementY=this.shouldSkipY(e,!!isTop,topBuffer,yDiff)?0:yDiff;return{movementX,movementY}},PositionableFeature2.prototype.shouldSkipX=function(e,isLeft,anywhereWithin,diff){var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),xPosition=this.config.popup?this.position.x:elRect.left,skipX=xPosition<=0&&parentRect.left>=e.clientX||parentRect.right<=e.clientX&&parentRect.right<=boundaryElRect.right;return skipX?!0:(isLeft?skipX=diff<0&&e.clientX>xPosition+parentRect.left||diff>0&&e.clientX<xPosition+parentRect.left:anywhereWithin?skipX=diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<xPosition+parentRect.left:skipX=diff<0&&e.clientX>boundaryElRect.right||diff>0&&e.clientX<boundaryElRect.right,skipX)},PositionableFeature2.prototype.shouldSkipY=function(e,isTop,topBuffer,diff){topBuffer===void 0&&(topBuffer=0);var elRect=this.element.getBoundingClientRect(),parentRect=this.offsetParent.getBoundingClientRect(),boundaryElRect=this.boundaryEl.getBoundingClientRect(),yPosition=this.config.popup?this.position.y:elRect.top,skipY=yPosition<=0&&parentRect.top>=e.clientY||parentRect.bottom<=e.clientY&&parentRect.bottom<=boundaryElRect.bottom;return skipY?!0:(isTop?skipY=diff<0&&e.clientY>yPosition+parentRect.top+topBuffer||diff>0&&e.clientY<yPosition+parentRect.top:skipY=diff<0&&e.clientY>boundaryElRect.bottom||diff>0&&e.clientY<boundaryElRect.bottom,skipY)},PositionableFeature2.prototype.createResizeMap=function(){var eGui=this.element;this.resizerMap={topLeft:{element:eGui.querySelector("[ref=eTopLeftResizer]")},top:{element:eGui.querySelector("[ref=eTopResizer]")},topRight:{element:eGui.querySelector("[ref=eTopRightResizer]")},right:{element:eGui.querySelector("[ref=eRightResizer]")},bottomRight:{element:eGui.querySelector("[ref=eBottomRightResizer]")},bottom:{element:eGui.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:eGui.querySelector("[ref=eBottomLeftResizer]")},left:{element:eGui.querySelector("[ref=eLeftResizer]")}}},PositionableFeature2.prototype.addResizers=function(){if(!this.resizersAdded){var eGui=this.element;if(eGui){var parser=new DOMParser,resizers=parser.parseFromString(RESIZE_TEMPLATE,"text/html").body;eGui.appendChild(resizers.firstChild),this.createResizeMap(),this.resizersAdded=!0}}},PositionableFeature2.prototype.removeResizers=function(){this.resizerMap=void 0;var resizerEl=this.element.querySelector(".".concat(RESIZE_CONTAINER_STYLE));resizerEl&&this.element.removeChild(resizerEl),this.resizersAdded=!1},PositionableFeature2.prototype.getResizerElement=function(side){return this.resizerMap[side].element},PositionableFeature2.prototype.onResizeStart=function(e,side){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!side.match(/top/i),isRight:!!side.match(/right/i),isBottom:!!side.match(/bottom/i),isLeft:!!side.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[side].element.classList.add("ag-active");var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent;!popup&&!forcePopupParentAsOffsetParent&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature2.prototype.getSiblings=function(){var element=this.element,parent=element.parentElement;return parent?Array.prototype.slice.call(parent.children).filter(function(el){return!el.classList.contains("ag-hidden")}):null},PositionableFeature2.prototype.getMinSizeOfSiblings=function(){for(var siblings=this.getSiblings()||[],height=0,width=0,i=0;i<siblings.length;i++){var currentEl=siblings[i],isFlex=!!currentEl.style.flex&&currentEl.style.flex!=="0 0 auto";if(currentEl!==this.element){var nextHeight=this.minHeight||0,nextWidth=this.minWidth||0;if(isFlex){var computedStyle=window.getComputedStyle(currentEl);computedStyle.minHeight&&(nextHeight=parseInt(computedStyle.minHeight,10)),computedStyle.minWidth&&(nextWidth=parseInt(computedStyle.minWidth,10))}else nextHeight=currentEl.offsetHeight,nextWidth=currentEl.offsetWidth;height+=nextHeight,width+=nextWidth}}return{height,width}},PositionableFeature2.prototype.applySizeToSiblings=function(vertical){var containerToFlex=null,siblings=this.getSiblings();if(siblings){for(var i=0;i<siblings.length;i++){var el=siblings[i];el!==containerToFlex&&(vertical?el.style.height="".concat(el.offsetHeight,"px"):el.style.width="".concat(el.offsetWidth,"px"),el.style.flex="0 0 auto",el===this.element&&(containerToFlex=siblings[i+1]))}containerToFlex&&(containerToFlex.style.removeProperty("height"),containerToFlex.style.removeProperty("min-height"),containerToFlex.style.removeProperty("max-height"),containerToFlex.style.flex="1 1 auto")}},PositionableFeature2.prototype.isResizable=function(){return Object.values(this.resizable).some(function(value){return value})},PositionableFeature2.prototype.onResize=function(e){if(!(!this.isResizing||!this.currentResizer)){var _a=this.config,popup=_a.popup,forcePopupParentAsOffsetParent=_a.forcePopupParentAsOffsetParent,_b=this.currentResizer,isTop=_b.isTop,isRight=_b.isRight,isBottom=_b.isBottom,isLeft=_b.isLeft,isHorizontal=isRight||isLeft,isVertical=isBottom||isTop,_c=this.calculateMouseMovement({e,isLeft,isTop}),movementX=_c.movementX,movementY=_c.movementY,xPosition=this.position.x,yPosition=this.position.y,offsetLeft=0,offsetTop=0;if(isHorizontal&&movementX){var direction=isLeft?-1:1,oldWidth=this.getWidth(),newWidth=oldWidth+movementX*direction,skipWidth=!1;isLeft&&(offsetLeft=oldWidth-newWidth,(xPosition+offsetLeft<=0||newWidth<=this.minWidth)&&(skipWidth=!0,offsetLeft=0)),skipWidth||this.setWidth(newWidth)}if(isVertical&&movementY){var direction=isTop?-1:1,oldHeight=this.getHeight(),newHeight=oldHeight+movementY*direction,skipHeight=!1;isTop?(offsetTop=oldHeight-newHeight,(yPosition+offsetTop<=0||newHeight<=this.minHeight)&&(skipHeight=!0,offsetTop=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&oldHeight<newHeight&&this.getMinSizeOfSiblings().height+newHeight>this.element.parentElement.offsetHeight&&(skipHeight=!0),skipHeight||this.setHeight(newHeight)}this.updateDragStartPosition(e.clientX,e.clientY),((popup||forcePopupParentAsOffsetParent)&&offsetLeft||offsetTop)&&this.offsetElement(xPosition+offsetLeft,yPosition+offsetTop)}},PositionableFeature2.prototype.onResizeEnd=function(e,side){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null;var params={type:"resize"};this.element.classList.remove("ag-resizing"),this.resizerMap[side].element.classList.remove("ag-active"),this.dispatchEvent(params)},PositionableFeature2.prototype.refreshSize=function(){var eGui=this.element;this.config.popup&&(this.config.width||this.setWidth(eGui.offsetWidth),this.config.height||this.setHeight(eGui.offsetHeight))},PositionableFeature2.prototype.onMoveStart=function(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)},PositionableFeature2.prototype.onMove=function(e){if(this.isMoving){var _a=this.position,x=_a.x,y=_a.y,topBuffer;this.config.calculateTopBuffer&&(topBuffer=this.config.calculateTopBuffer());var _b=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer}),movementX=_b.movementX,movementY=_b.movementY;this.offsetElement(x+movementX,y+movementY),this.updateDragStartPosition(e.clientX,e.clientY)}},PositionableFeature2.prototype.onMoveEnd=function(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")},PositionableFeature2.prototype.setOffsetParent=function(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent},PositionableFeature2.prototype.findBoundaryElement=function(){for(var el=this.element;el;){if(window.getComputedStyle(el).position!=="static")return el;el=el.parentElement}return this.element},PositionableFeature2.prototype.clearResizeListeners=function(){for(;this.resizeListeners.length;){var params=this.resizeListeners.pop();this.dragService.removeDragSource(params)}},PositionableFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()},__decorate$2z([Autowired("popupService")],PositionableFeature2.prototype,"popupService",void 0),__decorate$2z([Autowired("resizeObserverService")],PositionableFeature2.prototype,"resizeObserverService",void 0),__decorate$2z([Autowired("dragService")],PositionableFeature2.prototype,"dragService",void 0),PositionableFeature2}(BeanStub),__extends$35=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2y=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2y"),ProvidedFilter=function(_super){__extends$35(ProvidedFilter2,_super);function ProvidedFilter2(filterNameKey){var _this=_super.call(this)||this;return _this.filterNameKey=filterNameKey,_this.applyActive=!1,_this.hidePopup=null,_this.debouncePending=!1,_this.appliedModel=null,_this.buttonListeners=[],_this}return __name(ProvidedFilter2,"ProvidedFilter"),ProvidedFilter2.prototype.postConstruct=function(){this.resetTemplate(),this.createManagedBean(new ManagedFocusFeature(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new PositionableFeature(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)},ProvidedFilter2.prototype.handleKeyDown=function(e){},ProvidedFilter2.prototype.getFilterTitle=function(){return this.translate(this.filterNameKey)},ProvidedFilter2.prototype.isFilterActive=function(){return!!this.appliedModel},ProvidedFilter2.prototype.resetTemplate=function(paramsMap){var eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit);var templateString=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-`.concat(this.getCssIdentifier(),`-body-wrapper" ref="eFilterBody">
                    `).concat(this.createBodyTemplate(),`
                </div>
            </form>`);this.setTemplate(templateString,paramsMap),eGui=this.getGui(),eGui&&eGui.addEventListener("submit",this.onFormSubmit)},ProvidedFilter2.prototype.isReadOnly=function(){return!!this.providedFilterParams.readOnly},ProvidedFilter2.prototype.init=function(params){var _this=this;this.setParams(params),this.resetUiToDefaults(!0).then(function(){_this.updateUiVisibility(),_this.setupOnBtApplyDebounce()})},ProvidedFilter2.prototype.setParams=function(params){this.providedFilterParams=params,this.applyActive=ProvidedFilter2.isUseApplyButton(params),this.resetButtonsPanel()},ProvidedFilter2.prototype.updateParams=function(params){var _this=this;this.providedFilterParams=params,this.applyActive=ProvidedFilter2.isUseApplyButton(params),this.resetUiToActiveModel(this.getModel(),function(){_this.updateUiVisibility(),_this.setupOnBtApplyDebounce()})},ProvidedFilter2.prototype.resetButtonsPanel=function(){var _this=this,buttons=this.providedFilterParams.buttons,hasButtons=buttons&&buttons.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(clearElement(this.eButtonsPanel),this.buttonListeners.forEach(function(destroyFunc){return destroyFunc==null?void 0:destroyFunc()}),this.buttonListeners=[]):hasButtons&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!hasButtons){this.eButtonsPanel&&removeFromParent(this.eButtonsPanel);return}var fragment=document.createDocumentFragment(),addButton=__name(function(type){var text,clickListener;switch(type){case"apply":text=_this.translate("applyFilter"),clickListener=__name(function(e){return _this.onBtApply(!1,!1,e)},"clickListener");break;case"clear":text=_this.translate("clearFilter"),clickListener=__name(function(){return _this.onBtClear()},"clickListener");break;case"reset":text=_this.translate("resetFilter"),clickListener=__name(function(){return _this.onBtReset()},"clickListener");break;case"cancel":text=_this.translate("cancelFilter"),clickListener=__name(function(e){_this.onBtCancel(e)},"clickListener");break;default:console.warn("AG Grid: Unknown button type specified");return}var buttonType=type==="apply"?"submit":"button",button=loadTemplate(`<button
                    type="`.concat(buttonType,`"
                    ref="`).concat(type,`FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >`).concat(text,`
                </button>`));_this.buttonListeners.push(_this.addManagedListener(button,"click",clickListener)),fragment.append(button)},"addButton");convertToSet(buttons).forEach(function(type){return addButton(type)}),this.eButtonsPanel.append(fragment),this.getGui().appendChild(this.eButtonsPanel)},ProvidedFilter2.prototype.getDefaultDebounceMs=function(){return 0},ProvidedFilter2.prototype.setupOnBtApplyDebounce=function(){var _this=this,debounceMs=ProvidedFilter2.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),debounceFunc=debounce(this.checkApplyDebounce.bind(this),debounceMs);this.onBtApplyDebounce=function(){_this.debouncePending=!0,debounceFunc()}},ProvidedFilter2.prototype.checkApplyDebounce=function(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())},ProvidedFilter2.prototype.getModel=function(){return this.appliedModel?this.appliedModel:null},ProvidedFilter2.prototype.setModel=function(model){var _this=this,promise=model!=null?this.setModelIntoUi(model):this.resetUiToDefaults();return promise.then(function(){_this.updateUiVisibility(),_this.applyModel("api")})},ProvidedFilter2.prototype.onBtCancel=function(e){var _this=this;this.resetUiToActiveModel(this.getModel(),function(){_this.handleCancelEnd(e)})},ProvidedFilter2.prototype.handleCancelEnd=function(e){this.providedFilterParams.closeOnApply&&this.close(e)},ProvidedFilter2.prototype.resetUiToActiveModel=function(currentModel,afterUiUpdatedFunc){var _this=this,afterAppliedFunc=__name(function(){_this.onUiChanged(!1,"prevent"),afterUiUpdatedFunc==null||afterUiUpdatedFunc()},"afterAppliedFunc");currentModel!=null?this.setModelIntoUi(currentModel).then(afterAppliedFunc):this.resetUiToDefaults().then(afterAppliedFunc)},ProvidedFilter2.prototype.onBtClear=function(){var _this=this;this.resetUiToDefaults().then(function(){return _this.onUiChanged()})},ProvidedFilter2.prototype.onBtReset=function(){this.onBtClear(),this.onBtApply()},ProvidedFilter2.prototype.applyModel=function(source){var newModel=this.getModelFromUi();if(!this.isModelValid(newModel))return!1;var previousModel=this.appliedModel;return this.appliedModel=newModel,!this.areModelsEqual(previousModel,newModel)},ProvidedFilter2.prototype.isModelValid=function(model){return!0},ProvidedFilter2.prototype.onFormSubmit=function(e){e.preventDefault()},ProvidedFilter2.prototype.onBtApply=function(afterFloatingFilter,afterDataChange,e){if(afterFloatingFilter===void 0&&(afterFloatingFilter=!1),afterDataChange===void 0&&(afterDataChange=!1),e&&e.preventDefault(),this.applyModel(afterDataChange?"rowDataUpdated":"ui")){var source="columnFilter";this.providedFilterParams.filterChangedCallback({afterFloatingFilter,afterDataChange,source})}var closeOnApply=this.providedFilterParams.closeOnApply;closeOnApply&&this.applyActive&&!afterFloatingFilter&&!afterDataChange&&this.close(e)},ProvidedFilter2.prototype.onNewRowsLoaded=function(){},ProvidedFilter2.prototype.close=function(e){if(this.hidePopup){var keyboardEvent=e,key=keyboardEvent&&keyboardEvent.key,params;(key==="Enter"||key==="Space")&&(params={keyboardEvent}),this.hidePopup(params),this.hidePopup=null}},ProvidedFilter2.prototype.onUiChanged=function(fromFloatingFilter,apply){if(fromFloatingFilter===void 0&&(fromFloatingFilter=!1),this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){var isValid=this.isModelValid(this.getModelFromUi()),applyFilterButton=this.getRefElement("applyFilterButton");applyFilterButton&&setDisabled(applyFilterButton,!isValid)}fromFloatingFilter&&!apply||apply==="immediately"?this.onBtApply(fromFloatingFilter):(!this.applyActive&&!apply||apply==="debounce")&&this.onBtApplyDebounce()},ProvidedFilter2.prototype.afterGuiAttached=function(params){params&&(this.hidePopup=params.hidePopup),this.refreshFilterResizer(params==null?void 0:params.container)},ProvidedFilter2.prototype.refreshFilterResizer=function(containerType){if(!(!this.positionableFeature||containerType==="toolPanel")){var isResizable=containerType==="floatingFilter"||containerType==="columnFilter",_a=this,positionableFeature=_a.positionableFeature,gridOptionsService=_a.gridOptionsService;isResizable?(positionableFeature.restoreLastSize(),positionableFeature.setResizable(gridOptionsService.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}},ProvidedFilter2.prototype.afterGuiDetached=function(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)},ProvidedFilter2.getDebounceMs=function(params,debounceDefault){return ProvidedFilter2.isUseApplyButton(params)?(params.debounceMs!=null&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):params.debounceMs!=null?params.debounceMs:debounceDefault},ProvidedFilter2.isUseApplyButton=function(params){return!!params.buttons&&params.buttons.indexOf("apply")>=0},ProvidedFilter2.prototype.refresh=function(newParams){return this.providedFilterParams=newParams,!0},ProvidedFilter2.prototype.destroy=function(){var eGui=this.getGui();eGui&&eGui.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,_super.prototype.destroy.call(this)},ProvidedFilter2.prototype.translate=function(key){var translate=this.localeService.getLocaleTextFunc();return translate(key,FILTER_LOCALE_TEXT[key])},ProvidedFilter2.prototype.getCellValue=function(rowNode){return this.providedFilterParams.getValue(rowNode)},ProvidedFilter2.prototype.getPositionableElement=function(){return this.eFilterBody},__decorate$2y([Autowired("rowModel")],ProvidedFilter2.prototype,"rowModel",void 0),__decorate$2y([RefSelector("eFilterBody")],ProvidedFilter2.prototype,"eFilterBody",void 0),__decorate$2y([PostConstruct],ProvidedFilter2.prototype,"postConstruct",null),ProvidedFilter2}(Component),__extends$34=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2x=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2x"),AgAbstractLabel=function(_super){__extends$34(AgAbstractLabel2,_super);function AgAbstractLabel2(config,template){var _this=_super.call(this,template)||this;return _this.labelSeparator="",_this.labelAlignment="left",_this.disabled=!1,_this.label="",_this.config=config||{},_this}return __name(AgAbstractLabel2,"AgAbstractLabel"),AgAbstractLabel2.prototype.postConstruct=function(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");var _a=this.config,labelSeparator=_a.labelSeparator,label=_a.label,labelWidth=_a.labelWidth,labelAlignment=_a.labelAlignment;labelSeparator!=null&&this.setLabelSeparator(labelSeparator),label!=null&&this.setLabel(label),labelWidth!=null&&this.setLabelWidth(labelWidth),this.setLabelAlignment(labelAlignment||this.labelAlignment),this.refreshLabel()},AgAbstractLabel2.prototype.refreshLabel=function(){clearElement(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(setDisplayed(this.eLabel,!1),setAriaRole(this.eLabel,"presentation")):(setDisplayed(this.eLabel,!0),setAriaRole(this.eLabel,null))},AgAbstractLabel2.prototype.setLabelSeparator=function(labelSeparator){return this.labelSeparator===labelSeparator?this:(this.labelSeparator=labelSeparator,this.label!=null&&this.refreshLabel(),this)},AgAbstractLabel2.prototype.getLabelId=function(){return this.eLabel.id=this.eLabel.id||"ag-".concat(this.getCompId(),"-label"),this.eLabel.id},AgAbstractLabel2.prototype.getLabel=function(){return this.label},AgAbstractLabel2.prototype.setLabel=function(label){return this.label===label?this:(this.label=label,this.refreshLabel(),this)},AgAbstractLabel2.prototype.setLabelAlignment=function(alignment){var eGui=this.getGui(),eGuiClassList=eGui.classList;return eGuiClassList.toggle("ag-label-align-left",alignment==="left"),eGuiClassList.toggle("ag-label-align-right",alignment==="right"),eGuiClassList.toggle("ag-label-align-top",alignment==="top"),this},AgAbstractLabel2.prototype.setLabelEllipsis=function(hasEllipsis){return this.eLabel.classList.toggle("ag-label-ellipsis",hasEllipsis),this},AgAbstractLabel2.prototype.setLabelWidth=function(width){return this.label==null?this:(setElementWidth(this.eLabel,width),this)},AgAbstractLabel2.prototype.setDisabled=function(disabled){disabled=!!disabled;var element=this.getGui();return setDisabled(element,disabled),element.classList.toggle("ag-disabled",disabled),this.disabled=disabled,this},AgAbstractLabel2.prototype.isDisabled=function(){return!!this.disabled},__decorate$2x([PostConstruct],AgAbstractLabel2.prototype,"postConstruct",null),AgAbstractLabel2}(Component),__extends$33=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAbstractField=function(_super){__extends$33(AgAbstractField2,_super);function AgAbstractField2(config,template,className){var _this=_super.call(this,config,template)||this;return _this.className=className,_this}return __name(AgAbstractField2,"AgAbstractField"),AgAbstractField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()},AgAbstractField2.prototype.refreshAriaLabelledBy=function(){var ariaEl=this.getAriaElement(),labelId=this.getLabelId();getAriaLabel(ariaEl)!==null?setAriaLabelledBy(ariaEl,""):setAriaLabelledBy(ariaEl,labelId??"")},AgAbstractField2.prototype.setAriaLabel=function(label){return setAriaLabel(this.getAriaElement(),label),this.refreshAriaLabelledBy(),this},AgAbstractField2.prototype.onValueChange=function(callbackFn){var _this=this;return this.addManagedListener(this,Events.EVENT_FIELD_VALUE_CHANGED,function(){return callbackFn(_this.getValue())}),this},AgAbstractField2.prototype.getWidth=function(){return this.getGui().clientWidth},AgAbstractField2.prototype.setWidth=function(width){return setFixedWidth(this.getGui(),width),this},AgAbstractField2.prototype.getPreviousValue=function(){return this.previousValue},AgAbstractField2.prototype.getValue=function(){return this.value},AgAbstractField2.prototype.setValue=function(value,silent){return this.value===value?this:(this.previousValue=this.value,this.value=value,silent||this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED}),this)},AgAbstractField2}(AgAbstractLabel),__extends$32=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2w=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2w"),TEMPLATE$1=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,AgPickerField=function(_super){__extends$32(AgPickerField2,_super);function AgPickerField2(config){var _this=_super.call(this,config,(config==null?void 0:config.template)||TEMPLATE$1,config==null?void 0:config.className)||this;if(_this.isPickerDisplayed=!1,_this.skipClick=!1,_this.pickerGap=4,_this.hideCurrentPicker=null,_this.ariaRole=config==null?void 0:config.ariaRole,_this.onPickerFocusIn=_this.onPickerFocusIn.bind(_this),_this.onPickerFocusOut=_this.onPickerFocusOut.bind(_this),!config)return _this;var pickerGap=config.pickerGap,maxPickerHeight=config.maxPickerHeight,variableWidth=config.variableWidth,minPickerWidth=config.minPickerWidth,maxPickerWidth=config.maxPickerWidth;return pickerGap!=null&&(_this.pickerGap=pickerGap),_this.variableWidth=!!variableWidth,maxPickerHeight!=null&&_this.setPickerMaxHeight(maxPickerHeight),minPickerWidth!=null&&_this.setPickerMinWidth(minPickerWidth),maxPickerWidth!=null&&_this.setPickerMaxWidth(maxPickerWidth),_this}return __name(AgPickerField2,"AgPickerField"),AgPickerField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.setupAria();var displayId="ag-".concat(this.getCompId(),"-display");this.eDisplayField.setAttribute("id",displayId);var ariaEl=this.getAriaElement();this.addManagedListener(ariaEl,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));var pickerIcon=this.config.pickerIcon;if(pickerIcon){var icon=createIconNoSpan(pickerIcon,this.gridOptionsService);icon&&this.eIcon.appendChild(icon)}},AgPickerField2.prototype.setupAria=function(){var ariaEl=this.getAriaElement();ariaEl.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),setAriaExpanded(ariaEl,!1),this.ariaRole&&setAriaRole(ariaEl,this.ariaRole)},AgPickerField2.prototype.onLabelOrWrapperMouseDown=function(e){if(e){var focusableEl=this.getFocusableElement();if(focusableEl!==this.eWrapper&&(e==null?void 0:e.target)===focusableEl)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())},AgPickerField2.prototype.onKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}},AgPickerField2.prototype.showPicker=function(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());var pickerGui=this.pickerComponent.getGui();pickerGui.addEventListener("focusin",this.onPickerFocusIn),pickerGui.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)},AgPickerField2.prototype.renderAndPositionPicker=function(){var _this=this,eDocument=this.gridOptionsService.getDocument(),ePicker=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,function(){_this.hidePicker()}));var translate=this.localeService.getLocaleTextFunc(),_a=this.config,pickerAriaLabelKey=_a.pickerAriaLabelKey,pickerAriaLabelValue=_a.pickerAriaLabelValue,_b=_a.modalPicker,modalPicker=_b===void 0?!0:_b,popupParams={modal:modalPicker,eChild:ePicker,closeOnEsc:!0,closedCallback:function(){var shouldRestoreFocus=eDocument.activeElement===eDocument.body;_this.beforeHidePicker(),shouldRestoreFocus&&_this.isAlive()&&_this.getFocusableElement().focus()},ariaLabel:translate(pickerAriaLabelKey,pickerAriaLabelValue)},addPopupRes=this.popupService.addPopup(popupParams),_c=this,maxPickerHeight=_c.maxPickerHeight,minPickerWidth=_c.minPickerWidth,maxPickerWidth=_c.maxPickerWidth,variableWidth=_c.variableWidth;variableWidth?(minPickerWidth&&(ePicker.style.minWidth=minPickerWidth),ePicker.style.width=formatSize(getAbsoluteWidth(this.eWrapper)),maxPickerWidth&&(ePicker.style.maxWidth=maxPickerWidth)):setElementWidth(ePicker,maxPickerWidth??getAbsoluteWidth(this.eWrapper));var maxHeight=maxPickerHeight??"".concat(getInnerHeight(this.popupService.getPopupParent()),"px");return ePicker.style.setProperty("max-height",maxHeight),ePicker.style.position="absolute",this.alignPickerToComponent(),addPopupRes.hideFunc},AgPickerField2.prototype.alignPickerToComponent=function(){if(this.pickerComponent){var pickerType=this.config.pickerType,pickerGap=this.pickerGap,alignSide=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:pickerType,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide,keepWithinBounds:!0,nudgeY:pickerGap})}},AgPickerField2.prototype.beforeHidePicker=function(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);var pickerGui=this.pickerComponent.getGui();pickerGui.removeEventListener("focusin",this.onPickerFocusIn),pickerGui.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null},AgPickerField2.prototype.toggleExpandedStyles=function(expanded){if(this.isAlive()){var ariaEl=this.getAriaElement();setAriaExpanded(ariaEl,expanded),this.eWrapper.classList.toggle("ag-picker-expanded",expanded),this.eWrapper.classList.toggle("ag-picker-collapsed",!expanded)}},AgPickerField2.prototype.onPickerFocusIn=function(){this.togglePickerHasFocus(!0)},AgPickerField2.prototype.onPickerFocusOut=function(e){var _a;!((_a=this.pickerComponent)===null||_a===void 0)&&_a.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)},AgPickerField2.prototype.togglePickerHasFocus=function(focused){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",focused)},AgPickerField2.prototype.hidePicker=function(){this.hideCurrentPicker&&this.hideCurrentPicker()},AgPickerField2.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgPickerField2.prototype.getFocusableElement=function(){return this.eWrapper},AgPickerField2.prototype.setPickerGap=function(gap){return this.pickerGap=gap,this},AgPickerField2.prototype.setPickerMinWidth=function(width){return typeof width=="number"&&(width="".concat(width,"px")),this.minPickerWidth=width??void 0,this},AgPickerField2.prototype.setPickerMaxWidth=function(width){return typeof width=="number"&&(width="".concat(width,"px")),this.maxPickerWidth=width??void 0,this},AgPickerField2.prototype.setPickerMaxHeight=function(height){return typeof height=="number"&&(height="".concat(height,"px")),this.maxPickerHeight=height??void 0,this},AgPickerField2.prototype.destroy=function(){this.hidePicker(),_super.prototype.destroy.call(this)},__decorate$2w([Autowired("popupService")],AgPickerField2.prototype,"popupService",void 0),__decorate$2w([RefSelector("eLabel")],AgPickerField2.prototype,"eLabel",void 0),__decorate$2w([RefSelector("eWrapper")],AgPickerField2.prototype,"eWrapper",void 0),__decorate$2w([RefSelector("eDisplayField")],AgPickerField2.prototype,"eDisplayField",void 0),__decorate$2w([RefSelector("eIcon")],AgPickerField2.prototype,"eIcon",void 0),AgPickerField2}(AgAbstractField),__extends$31=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2v=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2v"),AgList=function(_super){__extends$31(AgList2,_super);function AgList2(cssIdentifier){cssIdentifier===void 0&&(cssIdentifier="default");var _this=_super.call(this,'<div class="ag-list ag-'.concat(cssIdentifier,'-list" role="listbox"></div>'))||this;return _this.cssIdentifier=cssIdentifier,_this.options=[],_this.itemEls=[],_this}return __name(AgList2,"AgList"),AgList2.prototype.init=function(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))},AgList2.prototype.handleKeyDown=function(e){var key=e.key;switch(key){case KeyCode.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{var pos=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(pos)}break;case KeyCode.DOWN:case KeyCode.UP:var isDown=key===KeyCode.DOWN,itemToHighlight=void 0;if(e.preventDefault(),!this.highlightedEl)itemToHighlight=this.itemEls[isDown?0:this.itemEls.length-1];else{var currentIdx=this.itemEls.indexOf(this.highlightedEl),nextPos=currentIdx+(isDown?1:-1);nextPos=Math.min(Math.max(nextPos,0),this.itemEls.length-1),itemToHighlight=this.itemEls[nextPos]}this.highlightItem(itemToHighlight);break}},AgList2.prototype.addOptions=function(listOptions){var _this=this;return listOptions.forEach(function(listOption){return _this.addOption(listOption)}),this},AgList2.prototype.addOption=function(listOption){var value=listOption.value,text=listOption.text,sanitisedText=escapeString(text||value);return this.options.push({value,text:sanitisedText}),this.renderOption(value,sanitisedText),this.updateIndices(),this},AgList2.prototype.updateIndices=function(){var options=this.getGui().querySelectorAll(".ag-list-item");options.forEach(function(option,idx){setAriaPosInSet(option,idx+1),setAriaSetSize(option,options.length)})},AgList2.prototype.renderOption=function(value,text){var _this=this,itemEl=document.createElement("div");setAriaRole(itemEl,"option"),itemEl.classList.add("ag-list-item","ag-".concat(this.cssIdentifier,"-list-item")),itemEl.innerHTML="<span>".concat(text,"</span>"),itemEl.tabIndex=-1,this.itemEls.push(itemEl),this.addManagedListener(itemEl,"mouseover",function(){return _this.highlightItem(itemEl)}),this.addManagedListener(itemEl,"mouseleave",function(){return _this.clearHighlighted()}),this.addManagedListener(itemEl,"click",function(){return _this.setValue(value)}),this.getGui().appendChild(itemEl)},AgList2.prototype.setValue=function(value,silent){if(this.value===value)return this.fireItemSelected(),this;if(value==null)return this.reset(),this;var idx=this.options.findIndex(function(option2){return option2.value===value});if(idx!==-1){var option=this.options[idx];this.value=option.value,this.displayValue=option.text!=null?option.text:option.value,this.highlightItem(this.itemEls[idx]),silent||this.fireChangeEvent()}return this},AgList2.prototype.setValueByIndex=function(idx){return this.setValue(this.options[idx].value)},AgList2.prototype.getValue=function(){return this.value},AgList2.prototype.getDisplayValue=function(){return this.displayValue},AgList2.prototype.refreshHighlighted=function(){var _this=this;this.clearHighlighted();var idx=this.options.findIndex(function(option){return option.value===_this.value});idx!==-1&&this.highlightItem(this.itemEls[idx])},AgList2.prototype.reset=function(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()},AgList2.prototype.highlightItem=function(el){isVisible(el)&&(this.clearHighlighted(),this.highlightedEl=el,this.highlightedEl.classList.add(AgList2.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!0),this.highlightedEl.focus())},AgList2.prototype.clearHighlighted=function(){!this.highlightedEl||!isVisible(this.highlightedEl)||(this.highlightedEl.classList.remove(AgList2.ACTIVE_CLASS),setAriaSelected(this.highlightedEl,!1),this.highlightedEl=null)},AgList2.prototype.fireChangeEvent=function(){this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()},AgList2.prototype.fireItemSelected=function(){this.dispatchEvent({type:AgList2.EVENT_ITEM_SELECTED})},AgList2.EVENT_ITEM_SELECTED="selectedItem",AgList2.ACTIVE_CLASS="ag-active-item",__decorate$2v([PostConstruct],AgList2.prototype,"init",null),AgList2}(Component),__extends$30=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$m=__name(function(){return __assign$m=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$m.apply(this,arguments)},"__assign$m"),AgSelect=function(_super){__extends$30(AgSelect2,_super);function AgSelect2(config){return _super.call(this,__assign$m({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},config))||this}return __name(AgSelect2,"AgSelect"),AgSelect2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex")},AgSelect2.prototype.createListComponent=function(){var _this=this;this.listComponent=this.createBean(new AgList("select")),this.listComponent.setParentComponent(this);var eListAriaEl=this.listComponent.getAriaElement(),listId="ag-select-list-".concat(this.listComponent.getCompId());eListAriaEl.setAttribute("id",listId),setAriaControls(this.getAriaElement(),eListAriaEl),this.listComponent.addGuiEventListener("keydown",function(e){e.key===KeyCode.TAB&&(e.preventDefault(),e.stopImmediatePropagation(),_this.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:e.key,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,AgList.EVENT_ITEM_SELECTED,function(){_this.hidePicker(),_this.dispatchEvent({type:AgSelect2.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,Events.EVENT_FIELD_VALUE_CHANGED,function(){_this.listComponent&&(_this.setValue(_this.listComponent.getValue(),!1,!0),_this.hidePicker())})},AgSelect2.prototype.createPickerComponent=function(){return this.listComponent},AgSelect2.prototype.showPicker=function(){this.listComponent&&(_super.prototype.showPicker.call(this),this.listComponent.refreshHighlighted())},AgSelect2.prototype.addOptions=function(options){var _this=this;return options.forEach(function(option){return _this.addOption(option)}),this},AgSelect2.prototype.addOption=function(option){return this.listComponent.addOption(option),this},AgSelect2.prototype.setValue=function(value,silent,fromPicker){if(this.value===value||!this.listComponent)return this;fromPicker||this.listComponent.setValue(value,!0);var newValue=this.listComponent.getValue();return newValue===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),_super.prototype.setValue.call(this,value,silent))},AgSelect2.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),_super.prototype.destroy.call(this)},AgSelect2.EVENT_ITEM_SELECTED="selectedItem",AgSelect2}(AgPickerField),__extends$2$=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2u=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2u"),AgAbstractInputField=function(_super){__extends$2$(AgAbstractInputField2,_super);function AgAbstractInputField2(config,className,inputType,displayFieldTag){inputType===void 0&&(inputType="text"),displayFieldTag===void 0&&(displayFieldTag="input");var _this=_super.call(this,config,`
            <div role="presentation">
                <div ref="eLabel" class="ag-input-field-label"></div>
                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <`.concat(displayFieldTag,' ref="eInput" class="ag-input-field-input"></').concat(displayFieldTag,`>
                </div>
            </div>`),className)||this;return _this.inputType=inputType,_this.displayFieldTag=displayFieldTag,_this}return __name(AgAbstractInputField2,"AgAbstractInputField"),AgAbstractInputField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.setInputType(),this.eLabel.classList.add("".concat(this.className,"-label")),this.eWrapper.classList.add("".concat(this.className,"-input-wrapper")),this.eInput.classList.add("".concat(this.className,"-input")),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||"ag-".concat(this.getCompId(),"-input");var _a=this.config,width=_a.width,value=_a.value;width!=null&&this.setWidth(width),value!=null&&this.setValue(value),this.addInputListeners(),this.activateTabIndex([this.eInput])},AgAbstractInputField2.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",function(e){return _this.setValue(e.target.value)})},AgAbstractInputField2.prototype.setInputType=function(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)},AgAbstractInputField2.prototype.getInputElement=function(){return this.eInput},AgAbstractInputField2.prototype.setInputWidth=function(width){return setElementWidth(this.eWrapper,width),this},AgAbstractInputField2.prototype.setInputName=function(name){return this.getInputElement().setAttribute("name",name),this},AgAbstractInputField2.prototype.getFocusableElement=function(){return this.eInput},AgAbstractInputField2.prototype.setMaxLength=function(length){var eInput=this.eInput;return eInput.maxLength=length,this},AgAbstractInputField2.prototype.setInputPlaceholder=function(placeholder){return addOrRemoveAttribute(this.eInput,"placeholder",placeholder),this},AgAbstractInputField2.prototype.setInputAriaLabel=function(label){return setAriaLabel(this.eInput,label),this.refreshAriaLabelledBy(),this},AgAbstractInputField2.prototype.setDisabled=function(disabled){return setDisabled(this.eInput,disabled),_super.prototype.setDisabled.call(this,disabled)},AgAbstractInputField2.prototype.setAutoComplete=function(value){if(value===!0)addOrRemoveAttribute(this.eInput,"autocomplete",null);else{var autoCompleteValue=typeof value=="string"?value:"off";addOrRemoveAttribute(this.eInput,"autocomplete",autoCompleteValue)}return this},__decorate$2u([RefSelector("eLabel")],AgAbstractInputField2.prototype,"eLabel",void 0),__decorate$2u([RefSelector("eWrapper")],AgAbstractInputField2.prototype,"eWrapper",void 0),__decorate$2u([RefSelector("eInput")],AgAbstractInputField2.prototype,"eInput",void 0),AgAbstractInputField2}(AgAbstractField),__extends$2_=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgCheckbox=function(_super){__extends$2_(AgCheckbox2,_super);function AgCheckbox2(config,className,inputType){className===void 0&&(className="ag-checkbox"),inputType===void 0&&(inputType="checkbox");var _this=_super.call(this,config,className,inputType)||this;return _this.labelAlignment="right",_this.selected=!1,_this.readOnly=!1,_this.passive=!1,_this}return __name(AgCheckbox2,"AgCheckbox"),AgCheckbox2.prototype.addInputListeners=function(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))},AgCheckbox2.prototype.getNextValue=function(){return this.selected===void 0?!0:!this.selected},AgCheckbox2.prototype.setPassive=function(passive){this.passive=passive},AgCheckbox2.prototype.isReadOnly=function(){return this.readOnly},AgCheckbox2.prototype.setReadOnly=function(readOnly){this.eWrapper.classList.toggle("ag-disabled",readOnly),this.eInput.disabled=readOnly,this.readOnly=readOnly},AgCheckbox2.prototype.setDisabled=function(disabled){return this.eWrapper.classList.toggle("ag-disabled",disabled),_super.prototype.setDisabled.call(this,disabled)},AgCheckbox2.prototype.toggle=function(){if(!this.eInput.disabled){var previousValue=this.isSelected(),nextValue=this.getNextValue();this.passive?this.dispatchChange(nextValue,previousValue):this.setValue(nextValue)}},AgCheckbox2.prototype.getValue=function(){return this.isSelected()},AgCheckbox2.prototype.setValue=function(value,silent){return this.refreshSelectedClass(value),this.setSelected(value,silent),this},AgCheckbox2.prototype.setName=function(name){var input=this.getInputElement();return input.name=name,this},AgCheckbox2.prototype.isSelected=function(){return this.selected},AgCheckbox2.prototype.setSelected=function(selected,silent){this.isSelected()!==selected&&(this.previousValue=this.isSelected(),selected=this.selected=typeof selected=="boolean"?selected:void 0,this.eInput.checked=selected,this.eInput.indeterminate=selected===void 0,silent||this.dispatchChange(this.selected,this.previousValue))},AgCheckbox2.prototype.dispatchChange=function(selected,previousValue,event){this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED,selected,previousValue,event});var input=this.getInputElement(),checkboxChangedEvent={type:Events.EVENT_CHECKBOX_CHANGED,id:input.id,name:input.name,selected,previousValue};this.eventService.dispatchEvent(checkboxChangedEvent)},AgCheckbox2.prototype.onCheckboxClick=function(e){if(!(this.passive||this.eInput.disabled)){var previousValue=this.isSelected(),selected=this.selected=e.target.checked;this.refreshSelectedClass(selected),this.dispatchChange(selected,previousValue,e)}},AgCheckbox2.prototype.refreshSelectedClass=function(value){this.eWrapper.classList.toggle("ag-checked",value===!0),this.eWrapper.classList.toggle("ag-indeterminate",value==null)},AgCheckbox2}(AgAbstractInputField),__extends$2Z=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgRadioButton=function(_super){__extends$2Z(AgRadioButton2,_super);function AgRadioButton2(config){return _super.call(this,config,"ag-radio-button","radio")||this}return __name(AgRadioButton2,"AgRadioButton"),AgRadioButton2.prototype.isSelected=function(){return this.eInput.checked},AgRadioButton2.prototype.toggle=function(){this.eInput.disabled||this.isSelected()||this.setValue(!0)},AgRadioButton2.prototype.addInputListeners=function(){_super.prototype.addInputListeners.call(this),this.addManagedListener(this.eventService,Events.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))},AgRadioButton2.prototype.onChange=function(event){event.selected&&event.name&&this.eInput.name&&this.eInput.name===event.name&&event.id&&this.eInput.id!==event.id&&this.setValue(!1,!0)},AgRadioButton2}(AgCheckbox),__extends$2Y=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$v=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$v"),__spreadArray$p=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$p"),SimpleFilterModelFormatter=function(){function SimpleFilterModelFormatter2(localeService,optionsFactory,valueFormatter){this.localeService=localeService,this.optionsFactory=optionsFactory,this.valueFormatter=valueFormatter}return __name(SimpleFilterModelFormatter2,"SimpleFilterModelFormatter"),SimpleFilterModelFormatter2.prototype.getModelAsString=function(model){var _this=this;if(!model)return null;var isCombined=model.operator!=null,translate=this.localeService.getLocaleTextFunc();if(isCombined){var combinedModel=model,conditions=combinedModel.conditions;if(!conditions){var condition1=combinedModel.condition1,condition2=combinedModel.condition2;conditions=[condition1,condition2]}var customOptions=conditions.map(function(condition3){return _this.getModelAsString(condition3)}),joinOperatorTranslateKey=combinedModel.operator==="AND"?"andCondition":"orCondition";return customOptions.join(" ".concat(translate(joinOperatorTranslateKey,FILTER_LOCALE_TEXT[joinOperatorTranslateKey])," "))}else{if(model.type===SimpleFilter.BLANK||model.type===SimpleFilter.NOT_BLANK)return translate(model.type,model.type);var condition=model,customOption=this.optionsFactory.getCustomOption(condition.type),_a=customOption||{},displayKey=_a.displayKey,displayName=_a.displayName,numberOfInputs=_a.numberOfInputs;return displayKey&&displayName&&numberOfInputs===0?(translate(displayKey,displayName),displayName):this.conditionToString(condition,customOption)}},SimpleFilterModelFormatter2.prototype.updateParams=function(params){this.optionsFactory=params.optionsFactory},SimpleFilterModelFormatter2.prototype.formatValue=function(value){var _a;return this.valueFormatter?(_a=this.valueFormatter(value??null))!==null&&_a!==void 0?_a:"":String(value)},SimpleFilterModelFormatter2}(),SimpleFilter=function(_super){__extends$2Y(SimpleFilter2,_super);function SimpleFilter2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.eTypes=[],_this.eJoinOperatorPanels=[],_this.eJoinOperatorsAnd=[],_this.eJoinOperatorsOr=[],_this.eConditionBodies=[],_this.listener=function(){return _this.onUiChanged()},_this.lastUiCompletePosition=null,_this.joinOperatorId=0,_this}return __name(SimpleFilter2,"SimpleFilter"),SimpleFilter2.prototype.getNumberOfInputs=function(type){var customOpts=this.optionsFactory.getCustomOption(type);if(customOpts){var numberOfInputs=customOpts.numberOfInputs;return numberOfInputs??1}var zeroInputTypes=[SimpleFilter2.EMPTY,SimpleFilter2.NOT_BLANK,SimpleFilter2.BLANK];return type&&zeroInputTypes.indexOf(type)>=0?0:type===SimpleFilter2.IN_RANGE?2:1},SimpleFilter2.prototype.onFloatingFilterChanged=function(type,value){this.setTypeFromFloatingFilter(type),this.setValueFromFloatingFilter(value),this.onUiChanged(!0)},SimpleFilter2.prototype.setTypeFromFloatingFilter=function(type){var _this=this;this.eTypes.forEach(function(eType,position){position===0?eType.setValue(type,!0):eType.setValue(_this.optionsFactory.getDefaultOption(),!0)})},SimpleFilter2.prototype.getModelFromUi=function(){var conditions=this.getUiCompleteConditions();return conditions.length===0?null:this.maxNumConditions>1&&conditions.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:conditions[0],condition2:conditions[1],conditions}:conditions[0]},SimpleFilter2.prototype.getConditionTypes=function(){return this.eTypes.map(function(eType){return eType.getValue()})},SimpleFilter2.prototype.getConditionType=function(position){return this.eTypes[position].getValue()},SimpleFilter2.prototype.getJoinOperator=function(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"},SimpleFilter2.prototype.areModelsEqual=function(a,b){var _this=this;if(!a&&!b)return!0;if(!a&&b||a&&!b)return!1;var aIsSimple=!a.operator,bIsSimple=!b.operator,oneSimpleOneCombined=!aIsSimple&&bIsSimple||aIsSimple&&!bIsSimple;if(oneSimpleOneCombined)return!1;var res;if(aIsSimple){var aSimple=a,bSimple=b;res=this.areSimpleModelsEqual(aSimple,bSimple)}else{var aCombined=a,bCombined=b;res=aCombined.operator===bCombined.operator&&areEqual(aCombined.conditions,bCombined.conditions,function(aModel,bModel){return _this.areSimpleModelsEqual(aModel,bModel)})}return res},SimpleFilter2.prototype.shouldRefresh=function(newParams){var _a,_b,_c,model=this.getModel(),conditions=model?(_a=model.conditions)!==null&&_a!==void 0?_a:[model]:null,newOptionsList=(_c=(_b=newParams.filterOptions)===null||_b===void 0?void 0:_b.map(function(option){return typeof option=="string"?option:option.displayKey}))!==null&&_c!==void 0?_c:this.getDefaultFilterOptions(),allConditionsExistInNewOptionsList=!conditions||conditions.every(function(condition){return newOptionsList.find(function(option){return option===condition.type})!==void 0});return!(!allConditionsExistInNewOptionsList||typeof newParams.maxNumConditions=="number"&&conditions&&conditions.length>newParams.maxNumConditions)},SimpleFilter2.prototype.refresh=function(newParams){if(!this.shouldRefresh(newParams))return!1;var parentRefreshed=_super.prototype.refresh.call(this,newParams);return parentRefreshed?(this.setParams(newParams),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0):!1},SimpleFilter2.prototype.setModelIntoUi=function(model){var _this=this,isCombined=model.operator;if(isCombined){var combinedModel=model;combinedModel.conditions||(combinedModel.conditions=[combinedModel.condition1,combinedModel.condition2]);var numConditions=this.validateAndUpdateConditions(combinedModel.conditions),numPrevConditions=this.getNumConditions();if(numConditions<numPrevConditions)this.removeConditionsAndOperators(numConditions);else if(numConditions>numPrevConditions)for(var i=numPrevConditions;i<numConditions;i++)this.createJoinOperatorPanel(),this.createOption();var orChecked_1=combinedModel.operator==="OR";this.eJoinOperatorsAnd.forEach(function(eJoinOperatorAnd){return eJoinOperatorAnd.setValue(!orChecked_1,!0)}),this.eJoinOperatorsOr.forEach(function(eJoinOperatorOr){return eJoinOperatorOr.setValue(orChecked_1,!0)}),combinedModel.conditions.forEach(function(condition,position){_this.eTypes[position].setValue(condition.type,!0),_this.setConditionIntoUi(condition,position)})}else{var simpleModel=model;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(simpleModel.type,!0),this.setConditionIntoUi(simpleModel,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),AgPromise.resolve()},SimpleFilter2.prototype.validateAndUpdateConditions=function(conditions){var numConditions=conditions.length;return numConditions>this.maxNumConditions&&(conditions.splice(this.maxNumConditions),warnOnce('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),numConditions=this.maxNumConditions),numConditions},SimpleFilter2.prototype.doesFilterPass=function(params){var _this=this,_a,model=this.getModel();if(model==null)return!0;var operator=model.operator,models=[];if(operator){var combinedModel=model;models.push.apply(models,__spreadArray$p([],__read$v((_a=combinedModel.conditions)!==null&&_a!==void 0?_a:[]),!1))}else models.push(model);var combineFunction=operator&&operator==="OR"?"some":"every";return models[combineFunction](function(m){return _this.individualConditionPasses(params,m)})},SimpleFilter2.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.setNumConditions(params),this.defaultJoinOperator=this.getDefaultJoinOperator(params.defaultJoinOperator),this.filterPlaceholder=params.filterPlaceholder,this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")},SimpleFilter2.prototype.setNumConditions=function(params){var _a,_b;params.suppressAndOrCondition!=null&&warnOnce('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),params.alwaysShowBothConditions!=null&&warnOnce('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=(_a=params.maxNumConditions)!==null&&_a!==void 0?_a:params.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(warnOnce('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=(_b=params.numAlwaysVisibleConditions)!==null&&_b!==void 0?_b:params.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(warnOnce('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(warnOnce('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)},SimpleFilter2.prototype.createOption=function(){var _this=this,eType=this.createManagedBean(new AgSelect);this.eTypes.push(eType),eType.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(eType.getGui());var eConditionBody=this.createValueElement();this.eConditionBodies.push(eConditionBody),this.eFilterBody.appendChild(eConditionBody),this.putOptionsIntoDropdown(eType),this.resetType(eType);var position=this.getNumConditions()-1;this.forEachPositionInput(position,function(element){return _this.resetInput(element)}),this.addChangedListeners(eType,position)},SimpleFilter2.prototype.createJoinOperatorPanel=function(){var eJoinOperatorPanel=document.createElement("div");this.eJoinOperatorPanels.push(eJoinOperatorPanel),eJoinOperatorPanel.classList.add("ag-filter-condition");var eJoinOperatorAnd=this.createJoinOperator(this.eJoinOperatorsAnd,eJoinOperatorPanel,"and"),eJoinOperatorOr=this.createJoinOperator(this.eJoinOperatorsOr,eJoinOperatorPanel,"or");this.eFilterBody.appendChild(eJoinOperatorPanel);var index=this.eJoinOperatorPanels.length-1,uniqueGroupId=this.joinOperatorId++;this.resetJoinOperatorAnd(eJoinOperatorAnd,index,uniqueGroupId),this.resetJoinOperatorOr(eJoinOperatorOr,index,uniqueGroupId),this.isReadOnly()||(eJoinOperatorAnd.onValueChange(this.listener),eJoinOperatorOr.onValueChange(this.listener))},SimpleFilter2.prototype.createJoinOperator=function(eJoinOperators,eJoinOperatorPanel,andOr){var eJoinOperator=this.createManagedBean(new AgRadioButton);return eJoinOperators.push(eJoinOperator),eJoinOperator.addCssClass("ag-filter-condition-operator"),eJoinOperator.addCssClass("ag-filter-condition-operator-".concat(andOr)),eJoinOperatorPanel.appendChild(eJoinOperator.getGui()),eJoinOperator},SimpleFilter2.prototype.getDefaultJoinOperator=function(defaultJoinOperator){return defaultJoinOperator==="AND"||defaultJoinOperator==="OR"?defaultJoinOperator:"AND"},SimpleFilter2.prototype.createFilterListOptions=function(){var _this=this,filterOptions=this.optionsFactory.getFilterOptions();this.filterListOptions=filterOptions.map(function(option){return typeof option=="string"?_this.createBoilerplateListOption(option):_this.createCustomListOption(option)})},SimpleFilter2.prototype.putOptionsIntoDropdown=function(eType){this.filterListOptions.forEach(function(listOption){eType.addOption(listOption)}),eType.setDisabled(this.filterListOptions.length<=1)},SimpleFilter2.prototype.createBoilerplateListOption=function(option){return{value:option,text:this.translate(option)}},SimpleFilter2.prototype.createCustomListOption=function(option){var displayKey=option.displayKey,customOption=this.optionsFactory.getCustomOption(option.displayKey);return{value:displayKey,text:customOption?this.localeService.getLocaleTextFunc()(customOption.displayKey,customOption.displayName):this.translate(displayKey)}},SimpleFilter2.prototype.isAllowTwoConditions=function(){return this.maxNumConditions>=2},SimpleFilter2.prototype.createBodyTemplate=function(){return""},SimpleFilter2.prototype.getCssIdentifier=function(){return"simple-filter"},SimpleFilter2.prototype.updateUiVisibility=function(){var joinOperator=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,joinOperator)},SimpleFilter2.prototype.updateNumConditions=function(){for(var _a,lastUiCompletePosition=-1,areAllConditionsUiComplete=!0,position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)?lastUiCompletePosition=position:areAllConditionsUiComplete=!1;if(this.shouldAddNewConditionAtEnd(areAllConditionsUiComplete))this.createJoinOperatorPanel(),this.createOption();else{var activePosition=(_a=this.lastUiCompletePosition)!==null&&_a!==void 0?_a:this.getNumConditions()-2;if(lastUiCompletePosition<activePosition){this.removeConditionsAndOperators(activePosition+1);var removeStartPosition=lastUiCompletePosition+1,numConditionsToRemove=activePosition-removeStartPosition;numConditionsToRemove>0&&this.removeConditionsAndOperators(removeStartPosition,numConditionsToRemove),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=lastUiCompletePosition},SimpleFilter2.prototype.updateConditionStatusesAndValues=function(lastUiCompletePosition,joinOperator){var _this=this;this.eTypes.forEach(function(eType,position){var disabled=_this.isConditionDisabled(position,lastUiCompletePosition);eType.setDisabled(disabled||_this.filterListOptions.length<=1),position===1&&(setDisabled(_this.eJoinOperatorPanels[0],disabled),_this.eJoinOperatorsAnd[0].setDisabled(disabled),_this.eJoinOperatorsOr[0].setDisabled(disabled))}),this.eConditionBodies.forEach(function(element,index){setDisplayed(element,_this.isConditionBodyVisible(index))});var orChecked=(joinOperator??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(function(eJoinOperatorAnd,index){eJoinOperatorAnd.setValue(!orChecked,!0)}),this.eJoinOperatorsOr.forEach(function(eJoinOperatorOr,index){eJoinOperatorOr.setValue(orChecked,!0)}),this.forEachInput(function(element,index,position,numberOfInputs){_this.setElementDisplayed(element,index<numberOfInputs),_this.setElementDisabled(element,_this.isConditionDisabled(position,lastUiCompletePosition))}),this.resetPlaceholder()},SimpleFilter2.prototype.shouldAddNewConditionAtEnd=function(areAllConditionsUiComplete){return areAllConditionsUiComplete&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()},SimpleFilter2.prototype.removeConditionsAndOperators=function(startPosition,deleteCount){if(!(startPosition>=this.getNumConditions())){this.removeComponents(this.eTypes,startPosition,deleteCount),this.removeElements(this.eConditionBodies,startPosition,deleteCount),this.removeValueElements(startPosition,deleteCount);var joinOperatorIndex=Math.max(startPosition-1,0);this.removeElements(this.eJoinOperatorPanels,joinOperatorIndex,deleteCount),this.removeComponents(this.eJoinOperatorsAnd,joinOperatorIndex,deleteCount),this.removeComponents(this.eJoinOperatorsOr,joinOperatorIndex,deleteCount)}},SimpleFilter2.prototype.removeElements=function(elements,startPosition,deleteCount){var removedElements=this.removeItems(elements,startPosition,deleteCount);removedElements.forEach(function(element){return removeFromParent(element)})},SimpleFilter2.prototype.removeComponents=function(components,startPosition,deleteCount){var _this=this,removedComponents=this.removeItems(components,startPosition,deleteCount);removedComponents.forEach(function(comp){removeFromParent(comp.getGui()),_this.destroyBean(comp)})},SimpleFilter2.prototype.removeItems=function(items,startPosition,deleteCount){return deleteCount==null?items.splice(startPosition):items.splice(startPosition,deleteCount)},SimpleFilter2.prototype.afterGuiAttached=function(params){if(_super.prototype.afterGuiAttached.call(this,params),this.resetPlaceholder(),!(params!=null&&params.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{var firstInput=this.getInputs(0)[0];if(!firstInput)return;firstInput instanceof AgAbstractInputField&&firstInput.getInputElement().focus()}},SimpleFilter2.prototype.afterGuiDetached=function(){_super.prototype.afterGuiDetached.call(this);var appliedModel=this.getModel();this.resetUiToActiveModel(appliedModel);for(var lastUiCompletePosition=-1,updatedLastUiCompletePosition=-1,conditionsRemoved=!1,joinOperator=this.getJoinOperator(),position=this.getNumConditions()-1;position>=0;position--)if(this.isConditionUiComplete(position))lastUiCompletePosition===-1&&(lastUiCompletePosition=position,updatedLastUiCompletePosition=position);else{var shouldRemovePositionAtEnd=position>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(position-1),positionBeforeLastUiCompletePosition=position<lastUiCompletePosition;(shouldRemovePositionAtEnd||positionBeforeLastUiCompletePosition)&&(this.removeConditionsAndOperators(position,1),conditionsRemoved=!0,positionBeforeLastUiCompletePosition&&updatedLastUiCompletePosition--)}var shouldUpdateConditionStatusesAndValues=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),shouldUpdateConditionStatusesAndValues=!0),this.shouldAddNewConditionAtEnd(updatedLastUiCompletePosition===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),shouldUpdateConditionStatusesAndValues=!0),shouldUpdateConditionStatusesAndValues&&this.updateConditionStatusesAndValues(updatedLastUiCompletePosition,joinOperator),conditionsRemoved&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=updatedLastUiCompletePosition},SimpleFilter2.prototype.getPlaceholderText=function(defaultPlaceholder,position){var placeholder=this.translate(defaultPlaceholder);if(isFunction(this.filterPlaceholder)){var filterPlaceholderFn=this.filterPlaceholder,filterOptionKey=this.eTypes[position].getValue(),filterOption=this.translate(filterOptionKey);placeholder=filterPlaceholderFn({filterOptionKey,filterOption,placeholder})}else typeof this.filterPlaceholder=="string"&&(placeholder=this.filterPlaceholder);return placeholder},SimpleFilter2.prototype.resetPlaceholder=function(){var _this=this,globalTranslate=this.localeService.getLocaleTextFunc();this.forEachInput(function(element,index,position,numberOfInputs){if(element instanceof AgAbstractInputField){var placeholder=index===0&&numberOfInputs>1?"inRangeStart":index===0?"filterOoo":"inRangeEnd",ariaLabel=index===0&&numberOfInputs>1?globalTranslate("ariaFilterFromValue","Filter from value"):index===0?globalTranslate("ariaFilterValue","Filter Value"):globalTranslate("ariaFilterToValue","Filter to Value");element.setInputPlaceholder(_this.getPlaceholderText(placeholder,position)),element.setInputAriaLabel(ariaLabel)}})},SimpleFilter2.prototype.setElementValue=function(element,value,fromFloatingFilter){element instanceof AgAbstractInputField&&element.setValue(value!=null?String(value):null,!0)},SimpleFilter2.prototype.setElementDisplayed=function(element,displayed){element instanceof Component&&setDisplayed(element.getGui(),displayed)},SimpleFilter2.prototype.setElementDisabled=function(element,disabled){element instanceof Component&&setDisabled(element.getGui(),disabled)},SimpleFilter2.prototype.attachElementOnChange=function(element,listener){element instanceof AgAbstractInputField&&element.onValueChange(listener)},SimpleFilter2.prototype.forEachInput=function(cb){var _this=this;this.getConditionTypes().forEach(function(type,position){_this.forEachPositionTypeInput(position,type,cb)})},SimpleFilter2.prototype.forEachPositionInput=function(position,cb){var type=this.getConditionType(position);this.forEachPositionTypeInput(position,type,cb)},SimpleFilter2.prototype.forEachPositionTypeInput=function(position,type,cb){for(var numberOfInputs=this.getNumberOfInputs(type),inputs=this.getInputs(position),index=0;index<inputs.length;index++){var input=inputs[index];input!=null&&cb(input,index,position,numberOfInputs)}},SimpleFilter2.prototype.isConditionDisabled=function(position,lastUiCompletePosition){return this.isReadOnly()?!0:position===0?!1:position>lastUiCompletePosition+1},SimpleFilter2.prototype.isConditionBodyVisible=function(position){var type=this.getConditionType(position),numberOfInputs=this.getNumberOfInputs(type);return numberOfInputs>0},SimpleFilter2.prototype.isConditionUiComplete=function(position){if(position>=this.getNumConditions())return!1;var type=this.getConditionType(position);return!(type===SimpleFilter2.EMPTY||this.getValues(position).some(function(v){return v==null}))},SimpleFilter2.prototype.getNumConditions=function(){return this.eTypes.length},SimpleFilter2.prototype.getUiCompleteConditions=function(){for(var conditions=[],position=0;position<this.getNumConditions();position++)this.isConditionUiComplete(position)&&conditions.push(this.createCondition(position));return conditions},SimpleFilter2.prototype.createMissingConditionsAndOperators=function(){if(!this.isReadOnly())for(var i=this.getNumConditions();i<this.numAlwaysVisibleConditions;i++)this.createJoinOperatorPanel(),this.createOption()},SimpleFilter2.prototype.resetUiToDefaults=function(silent){var _this=this;return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(function(eType){return _this.resetType(eType)}),this.eJoinOperatorsAnd.forEach(function(eJoinOperatorAnd,index){return _this.resetJoinOperatorAnd(eJoinOperatorAnd,index,_this.joinOperatorId+index)}),this.eJoinOperatorsOr.forEach(function(eJoinOperatorOr,index){return _this.resetJoinOperatorOr(eJoinOperatorOr,index,_this.joinOperatorId+index)}),this.joinOperatorId++,this.forEachInput(function(element){return _this.resetInput(element)}),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,silent||this.onUiChanged(),AgPromise.resolve()},SimpleFilter2.prototype.resetType=function(eType){var translate=this.localeService.getLocaleTextFunc(),filteringLabel=translate("ariaFilteringOperator","Filtering operator");eType.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(filteringLabel).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)},SimpleFilter2.prototype.resetJoinOperatorAnd=function(eJoinOperatorAnd,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorAnd,index,this.isDefaultOperator("AND"),this.translate("andCondition"),uniqueGroupId)},SimpleFilter2.prototype.resetJoinOperatorOr=function(eJoinOperatorOr,index,uniqueGroupId){this.resetJoinOperator(eJoinOperatorOr,index,this.isDefaultOperator("OR"),this.translate("orCondition"),uniqueGroupId)},SimpleFilter2.prototype.resetJoinOperator=function(eJoinOperator,index,value,label,uniqueGroupId){this.updateJoinOperatorDisabled(eJoinOperator.setValue(value,!0).setName("ag-simple-filter-and-or-".concat(this.getCompId(),"-").concat(uniqueGroupId)).setLabel(label),index)},SimpleFilter2.prototype.updateJoinOperatorsDisabled=function(){var _this=this;this.eJoinOperatorsAnd.forEach(function(eJoinOperator,index){return _this.updateJoinOperatorDisabled(eJoinOperator,index)}),this.eJoinOperatorsOr.forEach(function(eJoinOperator,index){return _this.updateJoinOperatorDisabled(eJoinOperator,index)})},SimpleFilter2.prototype.updateJoinOperatorDisabled=function(eJoinOperator,index){eJoinOperator.setDisabled(this.isReadOnly()||index>0)},SimpleFilter2.prototype.resetInput=function(element){this.setElementValue(element,null),this.setElementDisabled(element,this.isReadOnly())},SimpleFilter2.prototype.setConditionIntoUi=function(model,position){var _this=this,values2=this.mapValuesFromModel(model);this.forEachInput(function(element,index,elPosition,_2){elPosition===position&&_this.setElementValue(element,values2[index]!=null?values2[index]:null)})},SimpleFilter2.prototype.setValueFromFloatingFilter=function(value){var _this=this;this.forEachInput(function(element,index,position,_2){_this.setElementValue(element,index===0&&position===0?value:null,!0)})},SimpleFilter2.prototype.isDefaultOperator=function(operator){return operator===this.defaultJoinOperator},SimpleFilter2.prototype.addChangedListeners=function(eType,position){var _this=this;this.isReadOnly()||(eType.onValueChange(this.listener),this.forEachPositionInput(position,function(element){_this.attachElementOnChange(element,_this.listener)}))},SimpleFilter2.prototype.individualConditionPasses=function(params,filterModel){var cellValue=this.getCellValue(params.node),values2=this.mapValuesFromModel(filterModel),customFilterOption=this.optionsFactory.getCustomOption(filterModel.type),customFilterResult=this.evaluateCustomFilter(customFilterOption,values2,cellValue);return customFilterResult??(cellValue==null?this.evaluateNullValue(filterModel.type):this.evaluateNonNullValue(values2,cellValue,filterModel,params))},SimpleFilter2.prototype.evaluateCustomFilter=function(customFilterOption,values2,cellValue){if(customFilterOption!=null){var predicate=customFilterOption.predicate;if(predicate!=null&&!values2.some(function(v){return v==null}))return predicate(values2,cellValue)}},SimpleFilter2.prototype.isBlank=function(cellValue){return cellValue==null||typeof cellValue=="string"&&cellValue.trim().length===0},SimpleFilter2.prototype.hasInvalidInputs=function(){return!1},SimpleFilter2.EMPTY="empty",SimpleFilter2.BLANK="blank",SimpleFilter2.NOT_BLANK="notBlank",SimpleFilter2.EQUALS="equals",SimpleFilter2.NOT_EQUAL="notEqual",SimpleFilter2.LESS_THAN="lessThan",SimpleFilter2.LESS_THAN_OR_EQUAL="lessThanOrEqual",SimpleFilter2.GREATER_THAN="greaterThan",SimpleFilter2.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",SimpleFilter2.IN_RANGE="inRange",SimpleFilter2.CONTAINS="contains",SimpleFilter2.NOT_CONTAINS="notContains",SimpleFilter2.STARTS_WITH="startsWith",SimpleFilter2.ENDS_WITH="endsWith",SimpleFilter2}(ProvidedFilter),__extends$2X=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),ScalarFilter=function(_super){__extends$2X(ScalarFilter2,_super);function ScalarFilter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ScalarFilter2,"ScalarFilter"),ScalarFilter2.prototype.setParams=function(params){_super.prototype.setParams.call(this,params),this.scalarFilterParams=params},ScalarFilter2.prototype.evaluateNullValue=function(filterType){switch(filterType){case ScalarFilter2.EQUALS:case ScalarFilter2.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case ScalarFilter2.GREATER_THAN:case ScalarFilter2.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case ScalarFilter2.LESS_THAN:case ScalarFilter2.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case ScalarFilter2.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case ScalarFilter2.BLANK:return!0;case ScalarFilter2.NOT_BLANK:return!1}return!1},ScalarFilter2.prototype.evaluateNonNullValue=function(values2,cellValue,filterModel){var comparator=this.comparator(),compareResult=values2[0]!=null?comparator(values2[0],cellValue):0;switch(filterModel.type){case ScalarFilter2.EQUALS:return compareResult===0;case ScalarFilter2.NOT_EQUAL:return compareResult!==0;case ScalarFilter2.GREATER_THAN:return compareResult>0;case ScalarFilter2.GREATER_THAN_OR_EQUAL:return compareResult>=0;case ScalarFilter2.LESS_THAN:return compareResult<0;case ScalarFilter2.LESS_THAN_OR_EQUAL:return compareResult<=0;case ScalarFilter2.IN_RANGE:{var compareToResult=comparator(values2[1],cellValue);return this.scalarFilterParams.inRangeInclusive?compareResult>=0&&compareToResult<=0:compareResult>0&&compareToResult<0}case ScalarFilter2.BLANK:return this.isBlank(cellValue);case ScalarFilter2.NOT_BLANK:return!this.isBlank(cellValue);default:return console.warn('AG Grid: Unexpected type of filter "'+filterModel.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}},ScalarFilter2}(SimpleFilter),__extends$2W=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$l=__name(function(){return __assign$l=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$l.apply(this,arguments)},"__assign$l"),__decorate$2t=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2t"),DEFAULT_MIN_YEAR=1e3,DEFAULT_MAX_YEAR=1/0,DateFilterModelFormatter=function(_super){__extends$2W(DateFilterModelFormatter2,_super);function DateFilterModelFormatter2(dateFilterParams,localeService,optionsFactory){var _this=_super.call(this,localeService,optionsFactory)||this;return _this.dateFilterParams=dateFilterParams,_this}return __name(DateFilterModelFormatter2,"DateFilterModelFormatter"),DateFilterModelFormatter2.prototype.conditionToString=function(condition,options){var type=condition.type,numberOfInputs=(options||{}).numberOfInputs,isRange=type==SimpleFilter.IN_RANGE||numberOfInputs===2,dateFrom=parseDateTimeFromString(condition.dateFrom),dateTo=parseDateTimeFromString(condition.dateTo),format=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(isRange){var formattedFrom=dateFrom!==null?dateToFormattedString(dateFrom,format):"null",formattedTo=dateTo!==null?dateToFormattedString(dateTo,format):"null";return"".concat(formattedFrom,"-").concat(formattedTo)}return dateFrom!=null?dateToFormattedString(dateFrom,format):"".concat(type)},DateFilterModelFormatter2.prototype.updateParams=function(params){_super.prototype.updateParams.call(this,params),this.dateFilterParams=params.dateFilterParams},DateFilterModelFormatter2}(SimpleFilterModelFormatter),DateFilter=function(_super){__extends$2W(DateFilter2,_super);function DateFilter2(){var _this=_super.call(this,"dateFilter")||this;return _this.eConditionPanelsFrom=[],_this.eConditionPanelsTo=[],_this.dateConditionFromComps=[],_this.dateConditionToComps=[],_this.minValidYear=DEFAULT_MIN_YEAR,_this.maxValidYear=DEFAULT_MAX_YEAR,_this.minValidDate=null,_this.maxValidDate=null,_this}return __name(DateFilter2,"DateFilter"),DateFilter2.prototype.afterGuiAttached=function(params){_super.prototype.afterGuiAttached.call(this,params),this.dateConditionFromComps[0].afterGuiAttached(params)},DateFilter2.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},dateFrom=_a.dateFrom,dateTo=_a.dateTo,type=_a.type;return[dateFrom&&parseDateTimeFromString(dateFrom)||null,dateTo&&parseDateTimeFromString(dateTo)||null].slice(0,this.getNumberOfInputs(type))},DateFilter2.prototype.comparator=function(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)},DateFilter2.prototype.defaultComparator=function(filterDate,cellValue){var cellAsDate=cellValue;return cellValue==null||cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0},DateFilter2.prototype.setParams=function(params){this.dateFilterParams=params,_super.prototype.setParams.call(this,params);var yearParser=__name(function(param,fallback){if(params[param]!=null)if(isNaN(params[param]))console.warn("AG Grid: DateFilter ".concat(param," is not a number"));else return params[param]==null?fallback:Number(params[param]);return fallback},"yearParser");this.minValidYear=yearParser("minValidYear",DEFAULT_MIN_YEAR),this.maxValidYear=yearParser("maxValidYear",DEFAULT_MAX_YEAR),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),params.minValidDate?this.minValidDate=params.minValidDate instanceof Date?params.minValidDate:parseDateTimeFromString(params.minValidDate):this.minValidDate=null,params.maxValidDate?this.maxValidDate=params.maxValidDate instanceof Date?params.maxValidDate:parseDateTimeFromString(params.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new DateFilterModelFormatter(this.dateFilterParams,this.localeService,this.optionsFactory)},DateFilter2.prototype.createDateCompWrapper=function(element){var _this=this,dateCompWrapper=new DateCompWrapper(this.getContext(),this.userComponentFactory,{onDateChanged:function(){return _this.onUiChanged()},filterParams:this.dateFilterParams},element);return this.addDestroyFunc(function(){return dateCompWrapper.destroy()}),dateCompWrapper},DateFilter2.prototype.setElementValue=function(element,value){element.setDate(value)},DateFilter2.prototype.setElementDisplayed=function(element,displayed){element.setDisplayed(displayed)},DateFilter2.prototype.setElementDisabled=function(element,disabled){element.setDisabled(disabled)},DateFilter2.prototype.getDefaultFilterOptions=function(){return DateFilter2.DEFAULT_FILTER_OPTIONS},DateFilter2.prototype.createValueElement=function(){var eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),this.createFromToElement(eCondition,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(eCondition,this.eConditionPanelsTo,this.dateConditionToComps,"to"),eCondition},DateFilter2.prototype.createFromToElement=function(eCondition,eConditionPanels,dateConditionComps,fromTo){var eConditionPanel=document.createElement("div");eConditionPanel.classList.add("ag-filter-".concat(fromTo)),eConditionPanel.classList.add("ag-filter-date-".concat(fromTo)),eConditionPanels.push(eConditionPanel),eCondition.appendChild(eConditionPanel),dateConditionComps.push(this.createDateCompWrapper(eConditionPanel))},DateFilter2.prototype.removeValueElements=function(startPosition,deleteCount){this.removeDateComps(this.dateConditionFromComps,startPosition,deleteCount),this.removeDateComps(this.dateConditionToComps,startPosition,deleteCount),this.removeItems(this.eConditionPanelsFrom,startPosition,deleteCount),this.removeItems(this.eConditionPanelsTo,startPosition,deleteCount)},DateFilter2.prototype.removeDateComps=function(components,startPosition,deleteCount){var removedComponents=this.removeItems(components,startPosition,deleteCount);removedComponents.forEach(function(comp){return comp.destroy()})},DateFilter2.prototype.isValidDateValue=function(value){if(value===null)return!1;if(this.minValidDate){if(value<this.minValidDate)return!1}else if(value.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(value>this.maxValidDate)return!1}else if(value.getUTCFullYear()>this.maxValidYear)return!1;return!0},DateFilter2.prototype.isConditionUiComplete=function(position){var _this=this;if(!_super.prototype.isConditionUiComplete.call(this,position))return!1;var valid=!0;return this.forEachInput(function(element,index,elPosition,numberOfInputs){elPosition!==position||!valid||index>=numberOfInputs||(valid=valid&&_this.isValidDateValue(element.getDate()))}),valid},DateFilter2.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.dateFrom===bSimple.dateFrom&&aSimple.dateTo===bSimple.dateTo&&aSimple.type===bSimple.type},DateFilter2.prototype.getFilterType=function(){return"date"},DateFilter2.prototype.createCondition=function(position){var type=this.getConditionType(position),model={},values2=this.getValues(position);return values2.length>0&&(model.dateFrom=serialiseDate(values2[0])),values2.length>1&&(model.dateTo=serialiseDate(values2[1])),__assign$l({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type},model)},DateFilter2.prototype.resetPlaceholder=function(){var globalTranslate=this.localeService.getLocaleTextFunc(),placeholder=this.translate("dateFormatOoo"),ariaLabel=globalTranslate("ariaFilterValue","Filter Value");this.forEachInput(function(element){element.setInputPlaceholder(placeholder),element.setInputAriaLabel(ariaLabel)})},DateFilter2.prototype.getInputs=function(position){return position>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[position],this.dateConditionToComps[position]]},DateFilter2.prototype.getValues=function(position){var result=[];return this.forEachPositionInput(position,function(element,index,_elPosition,numberOfInputs){index<numberOfInputs&&result.push(element.getDate())}),result},DateFilter2.prototype.translate=function(key){return key===ScalarFilter.LESS_THAN?_super.prototype.translate.call(this,"before"):key===ScalarFilter.GREATER_THAN?_super.prototype.translate.call(this,"after"):_super.prototype.translate.call(this,key)},DateFilter2.prototype.getModelAsString=function(model){var _a;return(_a=this.filterModelFormatter.getModelAsString(model))!==null&&_a!==void 0?_a:""},DateFilter2.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.NOT_EQUAL,ScalarFilter.LESS_THAN,ScalarFilter.GREATER_THAN,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],__decorate$2t([Autowired("userComponentFactory")],DateFilter2.prototype,"userComponentFactory",void 0),DateFilter2}(ScalarFilter),__extends$2V=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),SimpleFloatingFilter=function(_super){__extends$2V(SimpleFloatingFilter2,_super);function SimpleFloatingFilter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(SimpleFloatingFilter2,"SimpleFloatingFilter"),SimpleFloatingFilter2.prototype.getDefaultDebounceMs=function(){return 0},SimpleFloatingFilter2.prototype.destroy=function(){_super.prototype.destroy.call(this)},SimpleFloatingFilter2.prototype.isEventFromFloatingFilter=function(event){return event&&event.afterFloatingFilter},SimpleFloatingFilter2.prototype.isEventFromDataChange=function(event){return event==null?void 0:event.afterDataChange},SimpleFloatingFilter2.prototype.getLastType=function(){return this.lastType},SimpleFloatingFilter2.prototype.isReadOnly=function(){return this.readOnly},SimpleFloatingFilter2.prototype.setLastTypeFromModel=function(model){if(!model){this.lastType=this.optionsFactory.getDefaultOption();return}var isCombined=model.operator,condition;if(isCombined){var combinedModel=model;condition=combinedModel.conditions[0]}else condition=model;this.lastType=condition.type},SimpleFloatingFilter2.prototype.canWeEditAfterModelFromParentFilter=function(model){if(!model)return this.isTypeEditable(this.lastType);var isCombined=model.operator;if(isCombined)return!1;var simpleModel=model;return this.isTypeEditable(simpleModel.type)},SimpleFloatingFilter2.prototype.init=function(params){this.setSimpleParams(params,!1)},SimpleFloatingFilter2.prototype.setSimpleParams=function(params,update){update===void 0&&(update=!0),this.optionsFactory=new OptionsFactory,this.optionsFactory.init(params.filterParams,this.getDefaultFilterOptions()),update||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!params.filterParams.readOnly;var editable=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(editable)},SimpleFloatingFilter2.prototype.onParamsUpdated=function(params){this.refresh(params)},SimpleFloatingFilter2.prototype.refresh=function(params){this.setSimpleParams(params)},SimpleFloatingFilter2.prototype.doesFilterHaveSingleInput=function(filterType){var customFilterOption=this.optionsFactory.getCustomOption(filterType),numberOfInputs=(customFilterOption||{}).numberOfInputs;return numberOfInputs==null||numberOfInputs==1},SimpleFloatingFilter2.prototype.isTypeEditable=function(type){var uneditableTypes=[SimpleFilter.IN_RANGE,SimpleFilter.EMPTY,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK];return!!type&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(type)&&uneditableTypes.indexOf(type)<0},SimpleFloatingFilter2}(Component),__extends$2U=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2s=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2s"),DateFloatingFilter=function(_super){__extends$2U(DateFloatingFilter2,_super);function DateFloatingFilter2(){return _super.call(this,`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>
                <div ref="eDateWrapper" style="display: flex;"></div>
            </div>`)||this}return __name(DateFloatingFilter2,"DateFloatingFilter"),DateFloatingFilter2.prototype.getDefaultFilterOptions=function(){return DateFilter.DEFAULT_FILTER_OPTIONS},DateFloatingFilter2.prototype.init=function(params){_super.prototype.init.call(this,params),this.params=params,this.filterParams=params.filterParams,this.createDateComponent(),this.filterModelFormatter=new DateFilterModelFormatter(this.filterParams,this.localeService,this.optionsFactory);var translate=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(translate("ariaDateFilterInput","Date Filter Input"))},DateFloatingFilter2.prototype.onParamsUpdated=function(params){this.refresh(params)},DateFloatingFilter2.prototype.refresh=function(params){_super.prototype.refresh.call(this,params),this.params=params,this.filterParams=params.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(params.currentParentModel())},DateFloatingFilter2.prototype.updateCompOnModelChange=function(model){var allowEditing=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(model);if(this.setEditable(allowEditing),allowEditing){if(model){var dateModel=model;this.dateComp.setDate(parseDateTimeFromString(dateModel.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(model)),this.dateComp.setDate(null)},DateFloatingFilter2.prototype.setEditable=function(editable){setDisplayed(this.eDateWrapper,editable),setDisplayed(this.eReadOnlyText.getGui(),!editable)},DateFloatingFilter2.prototype.onParentModelChanged=function(model,event){this.isEventFromFloatingFilter(event)||this.isEventFromDataChange(event)||(_super.prototype.setLastTypeFromModel.call(this,model),this.updateCompOnModelChange(model))},DateFloatingFilter2.prototype.onDateChanged=function(){var _this=this,filterValueDate=this.dateComp.getDate(),filterValueText=serialiseDate(filterValueDate);this.params.parentFilterInstance(function(filterInstance){if(filterInstance){var date=parseDateTimeFromString(filterValueText);filterInstance.onFloatingFilterChanged(_this.getLastType()||null,date)}})},DateFloatingFilter2.prototype.getDateComponentParams=function(){var debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:debounce(this.onDateChanged.bind(this),debounceMs),filterParams:this.params.column.getColDef().filterParams}},DateFloatingFilter2.prototype.createDateComponent=function(){var _this=this;this.dateComp=new DateCompWrapper(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(function(){return _this.dateComp.destroy()})},DateFloatingFilter2.prototype.updateDateComponent=function(){var params=this.gridOptionsService.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(params)},DateFloatingFilter2.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},__decorate$2s([Autowired("userComponentFactory")],DateFloatingFilter2.prototype,"userComponentFactory",void 0),__decorate$2s([RefSelector("eReadOnlyText")],DateFloatingFilter2.prototype,"eReadOnlyText",void 0),__decorate$2s([RefSelector("eDateWrapper")],DateFloatingFilter2.prototype,"eDateWrapper",void 0),DateFloatingFilter2}(SimpleFloatingFilter),__extends$2T=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2r=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2r"),__read$u=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$u"),DefaultDateComponent=function(_super){__extends$2T(DefaultDateComponent2,_super);function DefaultDateComponent2(){return _super.call(this,`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>
            </div>`)||this}return __name(DefaultDateComponent2,"DefaultDateComponent"),DefaultDateComponent2.prototype.destroy=function(){_super.prototype.destroy.call(this)},DefaultDateComponent2.prototype.init=function(params){var _this=this;this.params=params,this.setParams(params);var eDocument=this.gridOptionsService.getDocument(),inputElement=this.eDateInput.getInputElement();this.addManagedListener(inputElement,"mousedown",function(){_this.eDateInput.isDisabled()||_this.usingSafariDatePicker||inputElement.focus()}),this.addManagedListener(inputElement,"input",function(e){e.target===eDocument.activeElement&&(_this.eDateInput.isDisabled()||_this.params.onDateChanged())})},DefaultDateComponent2.prototype.setParams=function(params){var inputElement=this.eDateInput.getInputElement(),shouldUseBrowserDatePicker=this.shouldUseBrowserDatePicker(params);this.usingSafariDatePicker=shouldUseBrowserDatePicker&&isBrowserSafari(),inputElement.type=shouldUseBrowserDatePicker?"date":"text";var _a=params.filterParams||{},minValidYear=_a.minValidYear,maxValidYear=_a.maxValidYear,minValidDate=_a.minValidDate,maxValidDate=_a.maxValidDate;if(minValidDate&&minValidYear&&warnOnce("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),maxValidDate&&maxValidYear&&warnOnce("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),minValidDate&&maxValidDate){var _b=__read$u([minValidDate,maxValidDate].map(function(v){return v instanceof Date?v:parseDateTimeFromString(v)}),2),parsedMinValidDate=_b[0],parsedMaxValidDate=_b[1];parsedMinValidDate&&parsedMaxValidDate&&parsedMinValidDate.getTime()>parsedMaxValidDate.getTime()&&warnOnce("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}minValidDate?minValidDate instanceof Date?inputElement.min=dateToFormattedString(minValidDate):inputElement.min=minValidDate:minValidYear&&(inputElement.min="".concat(minValidYear,"-01-01")),maxValidDate?maxValidDate instanceof Date?inputElement.max=dateToFormattedString(maxValidDate):inputElement.max=maxValidDate:maxValidYear&&(inputElement.max="".concat(maxValidYear,"-12-31"))},DefaultDateComponent2.prototype.onParamsUpdated=function(params){this.refresh(params)},DefaultDateComponent2.prototype.refresh=function(params){this.params=params,this.setParams(params)},DefaultDateComponent2.prototype.getDate=function(){return parseDateTimeFromString(this.eDateInput.getValue())},DefaultDateComponent2.prototype.setDate=function(date){this.eDateInput.setValue(serialiseDate(date,!1))},DefaultDateComponent2.prototype.setInputPlaceholder=function(placeholder){this.eDateInput.setInputPlaceholder(placeholder)},DefaultDateComponent2.prototype.setDisabled=function(disabled){this.eDateInput.setDisabled(disabled)},DefaultDateComponent2.prototype.afterGuiAttached=function(params){(!params||!params.suppressFocus)&&this.eDateInput.getInputElement().focus()},DefaultDateComponent2.prototype.shouldUseBrowserDatePicker=function(params){return params.filterParams&&params.filterParams.browserDatePicker!=null?params.filterParams.browserDatePicker:isBrowserChrome()||isBrowserFirefox()||isBrowserSafari()&&getSafariVersion()>=14.1},__decorate$2r([RefSelector("eDateInput")],DefaultDateComponent2.prototype,"eDateInput",void 0),DefaultDateComponent2}(Component),__extends$2S=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextField=function(_super){__extends$2S(AgInputTextField2,_super);function AgInputTextField2(config,className,inputType){return className===void 0&&(className="ag-text-field"),inputType===void 0&&(inputType="text"),_super.call(this,config,className,inputType)||this}return __name(AgInputTextField2,"AgInputTextField"),AgInputTextField2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.config.allowedCharPattern&&this.preventDisallowedCharacters()},AgInputTextField2.prototype.setValue=function(value,silent){return this.eInput.value!==value&&(this.eInput.value=exists(value)?value:""),_super.prototype.setValue.call(this,value,silent)},AgInputTextField2.prototype.setStartValue=function(value){this.setValue(value,!0)},AgInputTextField2.prototype.preventDisallowedCharacters=function(){var pattern=new RegExp("[".concat(this.config.allowedCharPattern,"]")),preventCharacters=__name(function(event){isEventFromPrintableCharacter(event)&&event.key&&!pattern.test(event.key)&&event.preventDefault()},"preventCharacters");this.addManagedListener(this.eInput,"keydown",preventCharacters),this.addManagedListener(this.eInput,"paste",function(e){var _a,text=(_a=e.clipboardData)===null||_a===void 0?void 0:_a.getData("text");text&&text.split("").some(function(c){return!pattern.test(c)})&&e.preventDefault()})},AgInputTextField2}(AgAbstractInputField),__extends$2R=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputNumberField=function(_super){__extends$2R(AgInputNumberField2,_super);function AgInputNumberField2(config){return _super.call(this,config,"ag-number-field","number")||this}return __name(AgInputNumberField2,"AgInputNumberField"),AgInputNumberField2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"blur",function(){var floatedValue=parseFloat(_this.eInput.value),value=isNaN(floatedValue)?"":_this.normalizeValue(floatedValue.toString());_this.value!==value&&_this.setValue(value)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"},AgInputNumberField2.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},AgInputNumberField2.prototype.normalizeValue=function(value){if(value==="")return"";this.precision!=null&&(value=this.adjustPrecision(value));var val=parseFloat(value);return this.min!=null&&val<this.min?value=this.min.toString():this.max!=null&&val>this.max&&(value=this.max.toString()),value},AgInputNumberField2.prototype.adjustPrecision=function(value,isScientificNotation){if(this.precision==null)return value;if(isScientificNotation){var floatString=parseFloat(value).toFixed(this.precision);return parseFloat(floatString).toString()}var parts=String(value).split(".");if(parts.length>1){if(parts[1].length<=this.precision)return value;if(this.precision>0)return"".concat(parts[0],".").concat(parts[1].slice(0,this.precision))}return parts[0]},AgInputNumberField2.prototype.setMin=function(min){return this.min===min?this:(this.min=min,addOrRemoveAttribute(this.eInput,"min",min),this)},AgInputNumberField2.prototype.setMax=function(max){return this.max===max?this:(this.max=max,addOrRemoveAttribute(this.eInput,"max",max),this)},AgInputNumberField2.prototype.setPrecision=function(precision){return this.precision=precision,this},AgInputNumberField2.prototype.setStep=function(step){return this.step===step?this:(this.step=step,addOrRemoveAttribute(this.eInput,"step",step),this)},AgInputNumberField2.prototype.setValue=function(value,silent){var _this=this;return this.setValueOrInputValue(function(v){return _super.prototype.setValue.call(_this,v,silent)},function(){return _this},value)},AgInputNumberField2.prototype.setStartValue=function(value){var _this=this;return this.setValueOrInputValue(function(v){return _super.prototype.setValue.call(_this,v,!0)},function(v){_this.eInput.value=v},value)},AgInputNumberField2.prototype.setValueOrInputValue=function(setValueFunc,setInputValueOnlyFunc,value){if(exists(value)){var setInputValueOnly=this.isScientificNotation(value);if(setInputValueOnly&&this.eInput.validity.valid)return setValueFunc(value);if(!setInputValueOnly){value=this.adjustPrecision(value);var normalizedValue=this.normalizeValue(value);setInputValueOnly=value!=normalizedValue}if(setInputValueOnly)return setInputValueOnlyFunc(value)}return setValueFunc(value)},AgInputNumberField2.prototype.getValue=function(){if(this.eInput.validity.valid){var inputValue=this.eInput.value;return this.isScientificNotation(inputValue)?this.adjustPrecision(inputValue,!0):_super.prototype.getValue.call(this)}},AgInputNumberField2.prototype.isScientificNotation=function(value){return typeof value=="string"&&value.includes("e")},AgInputNumberField2}(AgInputTextField),__extends$2Q=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),NumberFilterModelFormatter=function(_super){__extends$2Q(NumberFilterModelFormatter2,_super);function NumberFilterModelFormatter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(NumberFilterModelFormatter2,"NumberFilterModelFormatter"),NumberFilterModelFormatter2.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs,isRange=condition.type==SimpleFilter.IN_RANGE||numberOfInputs===2;return isRange?"".concat(this.formatValue(condition.filter),"-").concat(this.formatValue(condition.filterTo)):condition.filter!=null?this.formatValue(condition.filter):"".concat(condition.type)},NumberFilterModelFormatter2}(SimpleFilterModelFormatter);function getAllowedCharPattern(filterParams){var allowedCharPattern=(filterParams??{}).allowedCharPattern;return allowedCharPattern??null}__name(getAllowedCharPattern,"getAllowedCharPattern");var NumberFilter=function(_super){__extends$2Q(NumberFilter2,_super);function NumberFilter2(){var _this=_super.call(this,"numberFilter")||this;return _this.eValuesFrom=[],_this.eValuesTo=[],_this}return __name(NumberFilter2,"NumberFilter"),NumberFilter2.prototype.refresh=function(params){return this.numberFilterParams.allowedCharPattern!==params.allowedCharPattern?!1:_super.prototype.refresh.call(this,params)},NumberFilter2.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[this.processValue(filter),this.processValue(filterTo)].slice(0,this.getNumberOfInputs(type))},NumberFilter2.prototype.getDefaultDebounceMs=function(){return 500},NumberFilter2.prototype.comparator=function(){return function(left,right){return left===right?0:left<right?1:-1}},NumberFilter2.prototype.setParams=function(params){this.numberFilterParams=params,_super.prototype.setParams.call(this,params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)},NumberFilter2.prototype.getDefaultFilterOptions=function(){return NumberFilter2.DEFAULT_FILTER_OPTIONS},NumberFilter2.prototype.setElementValue=function(element,value,fromFloatingFilter){var valueToSet=!fromFloatingFilter&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(value??null):value;_super.prototype.setElementValue.call(this,element,valueToSet)},NumberFilter2.prototype.createValueElement=function(){var allowedCharPattern=getAllowedCharPattern(this.numberFilterParams),eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),setAriaRole(eCondition,"presentation"),this.createFromToElement(eCondition,this.eValuesFrom,"from",allowedCharPattern),this.createFromToElement(eCondition,this.eValuesTo,"to",allowedCharPattern),eCondition},NumberFilter2.prototype.createFromToElement=function(eCondition,eValues,fromTo,allowedCharPattern){var eValue=this.createManagedBean(allowedCharPattern?new AgInputTextField({allowedCharPattern}):new AgInputNumberField);eValue.addCssClass("ag-filter-".concat(fromTo)),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())},NumberFilter2.prototype.removeValueElements=function(startPosition,deleteCount){this.removeComponents(this.eValuesFrom,startPosition,deleteCount),this.removeComponents(this.eValuesTo,startPosition,deleteCount)},NumberFilter2.prototype.getValues=function(position){var _this=this,result=[];return this.forEachPositionInput(position,function(element,index,_elPosition,numberOfInputs){index<numberOfInputs&&result.push(_this.processValue(_this.stringToFloat(element.getValue())))}),result},NumberFilter2.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},NumberFilter2.prototype.getFilterType=function(){return"number"},NumberFilter2.prototype.processValue=function(value){return value==null||isNaN(value)?null:value},NumberFilter2.prototype.stringToFloat=function(value){if(typeof value=="number")return value;var filterText=makeNull(value);return filterText!=null&&filterText.trim()===""&&(filterText=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(filterText):filterText==null||filterText.trim()==="-"?null:parseFloat(filterText)},NumberFilter2.prototype.createCondition=function(position){var type=this.getConditionType(position),model={filterType:this.getFilterType(),type},values2=this.getValues(position);return values2.length>0&&(model.filter=values2[0]),values2.length>1&&(model.filterTo=values2[1]),model},NumberFilter2.prototype.getInputs=function(position){return position>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[position],this.eValuesTo[position]]},NumberFilter2.prototype.getModelAsString=function(model){var _a;return(_a=this.filterModelFormatter.getModelAsString(model))!==null&&_a!==void 0?_a:""},NumberFilter2.prototype.hasInvalidInputs=function(){var invalidInputs=!1;return this.forEachInput(function(element){if(!element.getInputElement().validity.valid){invalidInputs=!0;return}}),invalidInputs},NumberFilter2.DEFAULT_FILTER_OPTIONS=[ScalarFilter.EQUALS,ScalarFilter.NOT_EQUAL,ScalarFilter.GREATER_THAN,ScalarFilter.GREATER_THAN_OR_EQUAL,ScalarFilter.LESS_THAN,ScalarFilter.LESS_THAN_OR_EQUAL,ScalarFilter.IN_RANGE,ScalarFilter.BLANK,ScalarFilter.NOT_BLANK],NumberFilter2}(ScalarFilter),__extends$2P=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$k=__name(function(){return __assign$k=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$k.apply(this,arguments)},"__assign$k"),TextFilterModelFormatter=function(_super){__extends$2P(TextFilterModelFormatter2,_super);function TextFilterModelFormatter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(TextFilterModelFormatter2,"TextFilterModelFormatter"),TextFilterModelFormatter2.prototype.conditionToString=function(condition,options){var numberOfInputs=(options||{}).numberOfInputs,isRange=condition.type==SimpleFilter.IN_RANGE||numberOfInputs===2;return isRange?"".concat(condition.filter,"-").concat(condition.filterTo):condition.filter!=null?"".concat(condition.filter):"".concat(condition.type)},TextFilterModelFormatter2}(SimpleFilterModelFormatter),TextFilter=function(_super){__extends$2P(TextFilter2,_super);function TextFilter2(){var _this=_super.call(this,"textFilter")||this;return _this.eValuesFrom=[],_this.eValuesTo=[],_this}return __name(TextFilter2,"TextFilter"),TextFilter2.trimInput=function(value){var trimmedInput=value&&value.trim();return trimmedInput===""?value:trimmedInput},TextFilter2.prototype.getDefaultDebounceMs=function(){return 500},TextFilter2.prototype.setParams=function(params){this.textFilterParams=params,_super.prototype.setParams.call(this,params),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?TextFilter2.DEFAULT_FORMATTER:TextFilter2.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)},TextFilter2.prototype.getTextMatcher=function(){var legacyComparator=this.textFilterParams.textCustomComparator;return legacyComparator?(_.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;return legacyComparator(filterOption,value,filterText)}):this.textFilterParams.textMatcher||TextFilter2.DEFAULT_MATCHER},TextFilter2.prototype.createCondition=function(position){var type=this.getConditionType(position),model={filterType:this.getFilterType(),type},values2=this.getValuesWithSideEffects(position,!0);return values2.length>0&&(model.filter=values2[0]),values2.length>1&&(model.filterTo=values2[1]),model},TextFilter2.prototype.getFilterType=function(){return"text"},TextFilter2.prototype.areSimpleModelsEqual=function(aSimple,bSimple){return aSimple.filter===bSimple.filter&&aSimple.filterTo===bSimple.filterTo&&aSimple.type===bSimple.type},TextFilter2.prototype.getInputs=function(position){return position>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[position],this.eValuesTo[position]]},TextFilter2.prototype.getValues=function(position){return this.getValuesWithSideEffects(position,!1)},TextFilter2.prototype.getValuesWithSideEffects=function(position,applySideEffects){var _this=this,result=[];return this.forEachPositionInput(position,function(element,index,_elPosition,numberOfInputs){var _a;if(index<numberOfInputs){var value=makeNull(element.getValue());applySideEffects&&_this.textFilterParams.trimInput&&(value=(_a=TextFilter2.trimInput(value))!==null&&_a!==void 0?_a:null,element.setValue(value,!0)),result.push(value)}}),result},TextFilter2.prototype.getDefaultFilterOptions=function(){return TextFilter2.DEFAULT_FILTER_OPTIONS},TextFilter2.prototype.createValueElement=function(){var eCondition=document.createElement("div");return eCondition.classList.add("ag-filter-body"),setAriaRole(eCondition,"presentation"),this.createFromToElement(eCondition,this.eValuesFrom,"from"),this.createFromToElement(eCondition,this.eValuesTo,"to"),eCondition},TextFilter2.prototype.createFromToElement=function(eCondition,eValues,fromTo){var eValue=this.createManagedBean(new AgInputTextField);eValue.addCssClass("ag-filter-".concat(fromTo)),eValue.addCssClass("ag-filter-filter"),eValues.push(eValue),eCondition.appendChild(eValue.getGui())},TextFilter2.prototype.removeValueElements=function(startPosition,deleteCount){this.removeComponents(this.eValuesFrom,startPosition,deleteCount),this.removeComponents(this.eValuesTo,startPosition,deleteCount)},TextFilter2.prototype.mapValuesFromModel=function(filterModel){var _a=filterModel||{},filter=_a.filter,filterTo=_a.filterTo,type=_a.type;return[filter||null,filterTo||null].slice(0,this.getNumberOfInputs(type))},TextFilter2.prototype.evaluateNullValue=function(filterType){var filterTypesAllowNulls=[SimpleFilter.NOT_EQUAL,SimpleFilter.NOT_CONTAINS,SimpleFilter.BLANK];return filterType?filterTypesAllowNulls.indexOf(filterType)>=0:!1},TextFilter2.prototype.evaluateNonNullValue=function(values2,cellValue,filterModel,params){var _this=this,formattedValues=values2.map(function(v){return _this.formatter(v)})||[],cellValueFormatted=this.formatter(cellValue),_a=this.textFilterParams,api=_a.api,colDef=_a.colDef,column=_a.column,columnApi=_a.columnApi,context=_a.context,textFormatter=_a.textFormatter;if(filterModel.type===SimpleFilter.BLANK)return this.isBlank(cellValue);if(filterModel.type===SimpleFilter.NOT_BLANK)return!this.isBlank(cellValue);var matcherParams={api,colDef,column,columnApi,context,node:params.node,data:params.data,filterOption:filterModel.type,value:cellValueFormatted,textFormatter};return formattedValues.some(function(v){return _this.matcher(__assign$k(__assign$k({},matcherParams),{filterText:v}))})},TextFilter2.prototype.getModelAsString=function(model){var _a;return(_a=this.filterModelFormatter.getModelAsString(model))!==null&&_a!==void 0?_a:""},TextFilter2.DEFAULT_FILTER_OPTIONS=[SimpleFilter.CONTAINS,SimpleFilter.NOT_CONTAINS,SimpleFilter.EQUALS,SimpleFilter.NOT_EQUAL,SimpleFilter.STARTS_WITH,SimpleFilter.ENDS_WITH,SimpleFilter.BLANK,SimpleFilter.NOT_BLANK],TextFilter2.DEFAULT_FORMATTER=function(from){return from},TextFilter2.DEFAULT_LOWERCASE_FORMATTER=function(from){return from==null?null:from.toString().toLowerCase()},TextFilter2.DEFAULT_MATCHER=function(_a){var filterOption=_a.filterOption,value=_a.value,filterText=_a.filterText;if(filterText==null)return!1;switch(filterOption){case TextFilter2.CONTAINS:return value.indexOf(filterText)>=0;case TextFilter2.NOT_CONTAINS:return value.indexOf(filterText)<0;case TextFilter2.EQUALS:return value===filterText;case TextFilter2.NOT_EQUAL:return value!=filterText;case TextFilter2.STARTS_WITH:return value.indexOf(filterText)===0;case TextFilter2.ENDS_WITH:var index=value.lastIndexOf(filterText);return index>=0&&index===value.length-filterText.length;default:return!1}},TextFilter2}(SimpleFilter),__extends$2O=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2q=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2q"),FloatingFilterTextInputService=function(_super){__extends$2O(FloatingFilterTextInputService2,_super);function FloatingFilterTextInputService2(params){var _this=_super.call(this)||this;return _this.params=params,_this.valueChangedListener=function(){},_this}return __name(FloatingFilterTextInputService2,"FloatingFilterTextInputService"),FloatingFilterTextInputService2.prototype.setupGui=function(parentElement){var _this=this,_a;this.eFloatingFilterTextInput=this.createManagedBean(new AgInputTextField((_a=this.params)===null||_a===void 0?void 0:_a.config));var eInput=this.eFloatingFilterTextInput.getGui();parentElement.appendChild(eInput),this.addManagedListener(eInput,"input",function(e){return _this.valueChangedListener(e)}),this.addManagedListener(eInput,"keydown",function(e){return _this.valueChangedListener(e)})},FloatingFilterTextInputService2.prototype.setEditable=function(editable){this.eFloatingFilterTextInput.setDisabled(!editable)},FloatingFilterTextInputService2.prototype.setAutoComplete=function(autoComplete){this.eFloatingFilterTextInput.setAutoComplete(autoComplete)},FloatingFilterTextInputService2.prototype.getValue=function(){return this.eFloatingFilterTextInput.getValue()},FloatingFilterTextInputService2.prototype.setValue=function(value,silent){this.eFloatingFilterTextInput.setValue(value,silent)},FloatingFilterTextInputService2.prototype.setValueChangedListener=function(listener){this.valueChangedListener=listener},FloatingFilterTextInputService2.prototype.setParams=function(params){this.setAriaLabel(params.ariaLabel),params.autoComplete!==void 0&&this.setAutoComplete(params.autoComplete)},FloatingFilterTextInputService2.prototype.setAriaLabel=function(ariaLabel){this.eFloatingFilterTextInput.setInputAriaLabel(ariaLabel)},FloatingFilterTextInputService2}(BeanStub),TextInputFloatingFilter=function(_super){__extends$2O(TextInputFloatingFilter2,_super);function TextInputFloatingFilter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(TextInputFloatingFilter2,"TextInputFloatingFilter"),TextInputFloatingFilter2.prototype.postConstruct=function(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>
        `)},TextInputFloatingFilter2.prototype.getDefaultDebounceMs=function(){return 500},TextInputFloatingFilter2.prototype.onParentModelChanged=function(model,event){this.isEventFromFloatingFilter(event)||this.isEventFromDataChange(event)||(this.setLastTypeFromModel(model),this.setEditable(this.canWeEditAfterModelFromParentFilter(model)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(model)))},TextInputFloatingFilter2.prototype.init=function(params){this.setupFloatingFilterInputService(params),_super.prototype.init.call(this,params),this.setTextInputParams(params)},TextInputFloatingFilter2.prototype.setupFloatingFilterInputService=function(params){this.floatingFilterInputService=this.createFloatingFilterInputService(params),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)},TextInputFloatingFilter2.prototype.setTextInputParams=function(params){var _a;this.params=params;var autoComplete=(_a=params.browserAutoComplete)!==null&&_a!==void 0?_a:!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(params),autoComplete}),this.applyActive=ProvidedFilter.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){var debounceMs=ProvidedFilter.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),toDebounce=debounce(this.syncUpWithParentFilter.bind(this),debounceMs);this.floatingFilterInputService.setValueChangedListener(toDebounce)}},TextInputFloatingFilter2.prototype.onParamsUpdated=function(params){this.refresh(params)},TextInputFloatingFilter2.prototype.refresh=function(params){_super.prototype.refresh.call(this,params),this.setTextInputParams(params)},TextInputFloatingFilter2.prototype.recreateFloatingFilterInputService=function(params){var value=this.floatingFilterInputService.getValue();clearElement(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(params),this.floatingFilterInputService.setValue(value,!0)},TextInputFloatingFilter2.prototype.getAriaLabel=function(params){var displayName=this.columnModel.getDisplayNameForColumn(params.column,"header",!0),translate=this.localeService.getLocaleTextFunc();return"".concat(displayName," ").concat(translate("ariaFilterInput","Filter Input"))},TextInputFloatingFilter2.prototype.syncUpWithParentFilter=function(e){var _this=this,isEnterKey=e.key===KeyCode.ENTER;if(!(this.applyActive&&!isEnterKey)){var value=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(value=TextFilter.trimInput(value),this.floatingFilterInputService.setValue(value,!0)),this.params.parentFilterInstance(function(filterInstance){filterInstance&&filterInstance.onFloatingFilterChanged(_this.getLastType()||null,value||null)})}},TextInputFloatingFilter2.prototype.setEditable=function(editable){this.floatingFilterInputService.setEditable(editable)},__decorate$2q([Autowired("columnModel")],TextInputFloatingFilter2.prototype,"columnModel",void 0),__decorate$2q([RefSelector("eFloatingFilterInputContainer")],TextInputFloatingFilter2.prototype,"eFloatingFilterInputContainer",void 0),__decorate$2q([PostConstruct],TextInputFloatingFilter2.prototype,"postConstruct",null),TextInputFloatingFilter2}(SimpleFloatingFilter),__extends$2N=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),FloatingFilterNumberInputService=function(_super){__extends$2N(FloatingFilterNumberInputService2,_super);function FloatingFilterNumberInputService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.valueChangedListener=function(){},_this.numberInputActive=!0,_this}return __name(FloatingFilterNumberInputService2,"FloatingFilterNumberInputService"),FloatingFilterNumberInputService2.prototype.setupGui=function(parentElement){var _this=this;this.eFloatingFilterNumberInput=this.createManagedBean(new AgInputNumberField),this.eFloatingFilterTextInput=this.createManagedBean(new AgInputTextField),this.eFloatingFilterTextInput.setDisabled(!0);var eNumberInput=this.eFloatingFilterNumberInput.getGui(),eTextInput=this.eFloatingFilterTextInput.getGui();parentElement.appendChild(eNumberInput),parentElement.appendChild(eTextInput),this.setupListeners(eNumberInput,function(e){return _this.valueChangedListener(e)}),this.setupListeners(eTextInput,function(e){return _this.valueChangedListener(e)})},FloatingFilterNumberInputService2.prototype.setEditable=function(editable){this.numberInputActive=editable,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)},FloatingFilterNumberInputService2.prototype.setAutoComplete=function(autoComplete){this.eFloatingFilterNumberInput.setAutoComplete(autoComplete),this.eFloatingFilterTextInput.setAutoComplete(autoComplete)},FloatingFilterNumberInputService2.prototype.getValue=function(){return this.getActiveInputElement().getValue()},FloatingFilterNumberInputService2.prototype.setValue=function(value,silent){this.getActiveInputElement().setValue(value,silent)},FloatingFilterNumberInputService2.prototype.getActiveInputElement=function(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput},FloatingFilterNumberInputService2.prototype.setValueChangedListener=function(listener){this.valueChangedListener=listener},FloatingFilterNumberInputService2.prototype.setupListeners=function(element,listener){this.addManagedListener(element,"input",listener),this.addManagedListener(element,"keydown",listener)},FloatingFilterNumberInputService2.prototype.setParams=function(params){this.setAriaLabel(params.ariaLabel),params.autoComplete!==void 0&&this.setAutoComplete(params.autoComplete)},FloatingFilterNumberInputService2.prototype.setAriaLabel=function(ariaLabel){this.eFloatingFilterNumberInput.setInputAriaLabel(ariaLabel),this.eFloatingFilterTextInput.setInputAriaLabel(ariaLabel)},FloatingFilterNumberInputService2}(BeanStub),NumberFloatingFilter=function(_super){__extends$2N(NumberFloatingFilter2,_super);function NumberFloatingFilter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(NumberFloatingFilter2,"NumberFloatingFilter"),NumberFloatingFilter2.prototype.init=function(params){var _a;_super.prototype.init.call(this,params),this.filterModelFormatter=new NumberFilterModelFormatter(this.localeService,this.optionsFactory,(_a=params.filterParams)===null||_a===void 0?void 0:_a.numberFormatter)},NumberFloatingFilter2.prototype.onParamsUpdated=function(params){this.refresh(params)},NumberFloatingFilter2.prototype.refresh=function(params){var allowedCharPattern=getAllowedCharPattern(params.filterParams);allowedCharPattern!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(params),_super.prototype.refresh.call(this,params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},NumberFloatingFilter2.prototype.getDefaultFilterOptions=function(){return NumberFilter.DEFAULT_FILTER_OPTIONS},NumberFloatingFilter2.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},NumberFloatingFilter2.prototype.createFloatingFilterInputService=function(params){return this.allowedCharPattern=getAllowedCharPattern(params.filterParams),this.allowedCharPattern?this.createManagedBean(new FloatingFilterTextInputService({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new FloatingFilterNumberInputService)},NumberFloatingFilter2}(TextInputFloatingFilter),__extends$2M=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextFloatingFilter=function(_super){__extends$2M(TextFloatingFilter2,_super);function TextFloatingFilter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(TextFloatingFilter2,"TextFloatingFilter"),TextFloatingFilter2.prototype.init=function(params){_super.prototype.init.call(this,params),this.filterModelFormatter=new TextFilterModelFormatter(this.localeService,this.optionsFactory)},TextFloatingFilter2.prototype.onParamsUpdated=function(params){this.refresh(params)},TextFloatingFilter2.prototype.refresh=function(params){_super.prototype.refresh.call(this,params),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})},TextFloatingFilter2.prototype.getDefaultFilterOptions=function(){return TextFilter.DEFAULT_FILTER_OPTIONS},TextFloatingFilter2.prototype.getFilterModelFormatter=function(){return this.filterModelFormatter},TextFloatingFilter2.prototype.createFloatingFilterInputService=function(){return this.createManagedBean(new FloatingFilterTextInputService)},TextFloatingFilter2}(TextInputFloatingFilter),TouchListener=function(){function TouchListener2(eElement,preventMouseClick){preventMouseClick===void 0&&(preventMouseClick=!1);var _this=this;this.destroyFuncs=[],this.touching=!1,this.eventService=new EventService,this.eElement=eElement,this.preventMouseClick=preventMouseClick;var startListener=this.onTouchStart.bind(this),moveListener=this.onTouchMove.bind(this),endListener=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",startListener,{passive:!0}),this.eElement.addEventListener("touchmove",moveListener,{passive:!0}),this.eElement.addEventListener("touchend",endListener,{passive:!1}),this.destroyFuncs.push(function(){_this.eElement.removeEventListener("touchstart",startListener,{passive:!0}),_this.eElement.removeEventListener("touchmove",moveListener,{passive:!0}),_this.eElement.removeEventListener("touchend",endListener,{passive:!1})})}return __name(TouchListener2,"TouchListener"),TouchListener2.prototype.getActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++){var matches=touchList[i].identifier===this.touchStart.identifier;if(matches)return touchList[i]}return null},TouchListener2.prototype.addEventListener=function(eventType,listener){this.eventService.addEventListener(eventType,listener)},TouchListener2.prototype.removeEventListener=function(eventType,listener){this.eventService.removeEventListener(eventType,listener)},TouchListener2.prototype.onTouchStart=function(touchEvent){var _this=this;if(!this.touching){this.touchStart=touchEvent.touches[0],this.touching=!0,this.moved=!1;var touchStartCopy=this.touchStart;window.setTimeout(function(){var touchesMatch=_this.touchStart===touchStartCopy;if(_this.touching&&touchesMatch&&!_this.moved){_this.moved=!0;var event_1={type:TouchListener2.EVENT_LONG_TAP,touchStart:_this.touchStart,touchEvent};_this.eventService.dispatchEvent(event_1)}},500)}},TouchListener2.prototype.onTouchMove=function(touchEvent){if(this.touching){var touch=this.getActiveTouch(touchEvent.touches);if(touch){var eventIsFarAway=!areEventsNear(touch,this.touchStart,4);eventIsFarAway&&(this.moved=!0)}}},TouchListener2.prototype.onTouchEnd=function(touchEvent){if(this.touching){if(!this.moved){var event_2={type:TouchListener2.EVENT_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_2),this.checkForDoubleTap()}this.preventMouseClick&&touchEvent.cancelable&&touchEvent.preventDefault(),this.touching=!1}},TouchListener2.prototype.checkForDoubleTap=function(){var now=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0){var interval=now-this.lastTapTime;if(interval>TouchListener2.DOUBLE_TAP_MILLIS){var event_3={type:TouchListener2.EVENT_DOUBLE_TAP,touchStart:this.touchStart};this.eventService.dispatchEvent(event_3),this.lastTapTime=null}else this.lastTapTime=now}else this.lastTapTime=now},TouchListener2.prototype.destroy=function(){this.destroyFuncs.forEach(function(func){return func()})},TouchListener2.EVENT_TAP="tap",TouchListener2.EVENT_DOUBLE_TAP="doubleTap",TouchListener2.EVENT_LONG_TAP="longTap",TouchListener2.DOUBLE_TAP_MILLIS=500,TouchListener2}(),__extends$2L=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2p=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2p"),SortIndicatorComp=function(_super){__extends$2L(SortIndicatorComp2,_super);function SortIndicatorComp2(skipTemplate){var _this=_super.call(this)||this;return skipTemplate||_this.setTemplate(SortIndicatorComp2.TEMPLATE),_this}return __name(SortIndicatorComp2,"SortIndicatorComp"),SortIndicatorComp2.prototype.attachCustomElements=function(eSortOrder,eSortAsc,eSortDesc,eSortMixed,eSortNone){this.eSortOrder=eSortOrder,this.eSortAsc=eSortAsc,this.eSortDesc=eSortDesc,this.eSortMixed=eSortMixed,this.eSortNone=eSortNone},SortIndicatorComp2.prototype.setupSort=function(column,suppressOrder){var _this=this;suppressOrder===void 0&&(suppressOrder=!1),this.column=column,this.suppressOrder=suppressOrder,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,column),this.addInIcon("sortDescending",this.eSortDesc,column),this.addInIcon("sortUnSort",this.eSortNone,column),this.addManagedPropertyListener("unSortIcon",function(){return _this.updateIcons()}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return _this.updateIcons()}),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,function(){return _this.onSortChanged()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return _this.onSortChanged()}),this.onSortChanged())},SortIndicatorComp2.prototype.addInIcon=function(iconName,eParent,column){if(eParent!=null){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,column);eIcon&&eParent.appendChild(eIcon)}},SortIndicatorComp2.prototype.onSortChanged=function(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()},SortIndicatorComp2.prototype.updateIcons=function(){var sortDirection=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){var isAscending=sortDirection==="asc";setDisplayed(this.eSortAsc,isAscending,{skipAriaHidden:!0})}if(this.eSortDesc){var isDescending=sortDirection==="desc";setDisplayed(this.eSortDesc,isDescending,{skipAriaHidden:!0})}if(this.eSortNone){var alwaysHideNoSort=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),isNone=sortDirection==null;setDisplayed(this.eSortNone,!alwaysHideNoSort&&isNone,{skipAriaHidden:!0})}},SortIndicatorComp2.prototype.setupMultiSortIndicator=function(){var _this=this;this.addInIcon("sortUnSort",this.eSortMixed,this.column);var isColumnShowingRowGroup=this.column.getColDef().showRowGroup,areGroupsCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup();areGroupsCoupled&&isColumnShowingRowGroup&&(this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,function(){return _this.updateMultiSortIndicator()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return _this.updateMultiSortIndicator()}),this.updateMultiSortIndicator())},SortIndicatorComp2.prototype.updateMultiSortIndicator=function(){if(this.eSortMixed){var isMixedSort=this.sortController.getDisplaySortForColumn(this.column)==="mixed";setDisplayed(this.eSortMixed,isMixedSort,{skipAriaHidden:!0})}},SortIndicatorComp2.prototype.updateSortOrder=function(){var _this=this,_a;if(this.eSortOrder){var allColumnsWithSorting=this.sortController.getColumnsWithSortingOrdered(),indexThisCol=(_a=this.sortController.getDisplaySortIndexForColumn(this.column))!==null&&_a!==void 0?_a:-1,moreThanOneColSorting=allColumnsWithSorting.some(function(col){var _a2;return(_a2=_this.sortController.getDisplaySortIndexForColumn(col))!==null&&_a2!==void 0?_a2:-1>=1}),showIndex=indexThisCol>=0&&moreThanOneColSorting;setDisplayed(this.eSortOrder,showIndex,{skipAriaHidden:!0}),indexThisCol>=0?this.eSortOrder.textContent=(indexThisCol+1).toString():clearElement(this.eSortOrder)}},SortIndicatorComp2.TEMPLATE=`<span class="ag-sort-indicator-container">
            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>
            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>
            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>
        </span>`,__decorate$2p([RefSelector("eSortOrder")],SortIndicatorComp2.prototype,"eSortOrder",void 0),__decorate$2p([RefSelector("eSortAsc")],SortIndicatorComp2.prototype,"eSortAsc",void 0),__decorate$2p([RefSelector("eSortDesc")],SortIndicatorComp2.prototype,"eSortDesc",void 0),__decorate$2p([RefSelector("eSortMixed")],SortIndicatorComp2.prototype,"eSortMixed",void 0),__decorate$2p([RefSelector("eSortNone")],SortIndicatorComp2.prototype,"eSortNone",void 0),__decorate$2p([Autowired("columnModel")],SortIndicatorComp2.prototype,"columnModel",void 0),__decorate$2p([Autowired("sortController")],SortIndicatorComp2.prototype,"sortController",void 0),SortIndicatorComp2}(Component),__extends$2K=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2o=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2o"),HeaderComp=function(_super){__extends$2K(HeaderComp2,_super);function HeaderComp2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.lastMovingChanged=0,_this}return __name(HeaderComp2,"HeaderComp"),HeaderComp2.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderComp2.prototype.refresh=function(params){return this.params=params,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide?!1:(this.setDisplayName(params),!0)},HeaderComp2.prototype.workOutTemplate=function(){var _a,template=(_a=this.params.template)!==null&&_a!==void 0?_a:HeaderComp2.TEMPLATE;return template=template&&template.trim?template.trim():template,template},HeaderComp2.prototype.init=function(params){this.params=params,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(params)},HeaderComp2.prototype.setDisplayName=function(params){if(this.currentDisplayName!=params.displayName){this.currentDisplayName=params.displayName;var displayNameSanitised=escapeString(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=displayNameSanitised)}},HeaderComp2.prototype.addInIcon=function(iconName,eParent,column){if(eParent!=null){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,column);eIcon&&eParent.appendChild(eIcon)}},HeaderComp2.prototype.setupTap=function(){var _this=this,gridOptionsService=this.gridOptionsService;if(!gridOptionsService.get("suppressTouch")){var touchListener=new TouchListener(this.getGui(),!0),suppressMenuHide=this.shouldSuppressMenuHide(),tapMenuButton=suppressMenuHide&&exists(this.eMenu),menuTouchListener=tapMenuButton?new TouchListener(this.eMenu,!0):touchListener;if(this.params.enableMenu){var eventType=tapMenuButton?"EVENT_TAP":"EVENT_LONG_TAP",showMenuFn=__name(function(event){return _this.params.showColumnMenuAfterMouseClick(event.touchStart)},"showMenuFn");this.addManagedListener(menuTouchListener,TouchListener[eventType],showMenuFn)}if(this.params.enableSorting){var tapListener=__name(function(event){var _a,_b,target=event.touchStart.target;suppressMenuHide&&(!((_a=_this.eMenu)===null||_a===void 0)&&_a.contains(target)||!((_b=_this.eFilterButton)===null||_b===void 0)&&_b.contains(target))||_this.sortController.progressSort(_this.params.column,!1,"uiColumnSorted")},"tapListener");this.addManagedListener(touchListener,TouchListener.EVENT_TAP,tapListener)}if(this.params.enableFilterButton){var filterButtonTouchListener_1=new TouchListener(this.eFilterButton,!0);this.addManagedListener(filterButtonTouchListener_1,"tap",function(){return _this.params.showFilter(_this.eFilterButton)}),this.addDestroyFunc(function(){return filterButtonTouchListener_1.destroy()})}this.addDestroyFunc(function(){return touchListener.destroy()}),tapMenuButton&&this.addDestroyFunc(function(){return menuTouchListener.destroy()})}},HeaderComp2.prototype.workOutShowMenu=function(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()},HeaderComp2.prototype.shouldSuppressMenuHide=function(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()},HeaderComp2.prototype.setMenu=function(){var _this=this;if(this.eMenu){if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){removeFromParent(this.eMenu),this.eMenu=void 0;return}var isLegacyMenu=this.menuService.isLegacyMenuEnabled();this.addInIcon(isLegacyMenu?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!isLegacyMenu),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",function(){return _this.params.showColumnMenu(_this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}},HeaderComp2.prototype.onMenuKeyboardShortcut=function(isFilterShortcut){var _a,_b,_c,_d,column=this.params.column,isLegacyMenuEnabled=this.menuService.isLegacyMenuEnabled();if(isFilterShortcut&&!isLegacyMenuEnabled){if(this.menuService.isFilterMenuInHeaderEnabled(column))return this.params.showFilter((_b=(_a=this.eFilterButton)!==null&&_a!==void 0?_a:this.eMenu)!==null&&_b!==void 0?_b:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu((_d=(_c=this.eMenu)!==null&&_c!==void 0?_c:this.eFilterButton)!==null&&_d!==void 0?_d:this.getGui()),!0;return!1},HeaderComp2.prototype.workOutSort=function(){return this.params.enableSorting},HeaderComp2.prototype.setupSort=function(){var _this=this;if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new SortIndicatorComp(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!!this.currentSort){this.addManagedListener(this.params.column,Column.EVENT_MOVING_CHANGED,function(){_this.lastMovingChanged=new Date().getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",function(event){var moving=_this.params.column.isMoving(),nowTime=new Date().getTime(),movedRecently=nowTime-_this.lastMovingChanged<50,columnMoving=moving||movedRecently;if(!columnMoving){var sortUsingCtrl=_this.gridOptionsService.get("multiSortKey")==="ctrl",multiSort=sortUsingCtrl?event.ctrlKey||event.metaKey:event.shiftKey;_this.params.progressSort(multiSort)}});var onSortingChanged=__name(function(){if(_this.addOrRemoveCssClass("ag-header-cell-sorted-asc",_this.params.column.isSortAscending()),_this.addOrRemoveCssClass("ag-header-cell-sorted-desc",_this.params.column.isSortDescending()),_this.addOrRemoveCssClass("ag-header-cell-sorted-none",_this.params.column.isSortNone()),_this.params.column.getColDef().showRowGroup){var sourceColumns=_this.columnModel.getSourceColumnsForGroupColumn(_this.params.column),sortDirectionsMatch=sourceColumns==null?void 0:sourceColumns.every(function(sourceCol){return _this.params.column.getSort()==sourceCol.getSort()}),isMultiSorting=!sortDirectionsMatch;_this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",isMultiSorting)}},"onSortingChanged");this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,onSortingChanged),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,onSortingChanged)}},HeaderComp2.prototype.setupFilterIcon=function(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))},HeaderComp2.prototype.setupFilterButton=function(){var _this=this;if(this.eFilterButton){var configured=this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this));configured?this.addManagedListener(this.eFilterButton,"click",function(){return _this.params.showFilter(_this.eFilterButton)}):this.eFilterButton=void 0}},HeaderComp2.prototype.configureFilter=function(enabled,element,filterChangedCallback){if(!enabled)return removeFromParent(element),!1;var column=this.params.column;return this.addInIcon("filter",element,column),this.addManagedListener(column,Column.EVENT_FILTER_CHANGED,filterChangedCallback),filterChangedCallback(),!0},HeaderComp2.prototype.onFilterChangedIcon=function(){var filterPresent=this.params.column.isFilterActive();setDisplayed(this.eFilter,filterPresent,{skipAriaHidden:!0})},HeaderComp2.prototype.onFilterChangedButton=function(){var filterPresent=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",filterPresent)},HeaderComp2.prototype.getAnchorElementForMenu=function(isFilter){var _a,_b,_c,_d;return isFilter?(_b=(_a=this.eFilterButton)!==null&&_a!==void 0?_a:this.eMenu)!==null&&_b!==void 0?_b:this.getGui():(_d=(_c=this.eMenu)!==null&&_c!==void 0?_c:this.eFilterButton)!==null&&_d!==void 0?_d:this.getGui()},HeaderComp2.TEMPLATE=`<div class="ag-cell-label-container" role="presentation">
            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
            <div ref="eLabel" class="ag-header-cell-label" role="presentation">
                <span ref="eText" class="ag-header-cell-text"></span>
                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>
            </div>
        </div>`,__decorate$2o([Autowired("sortController")],HeaderComp2.prototype,"sortController",void 0),__decorate$2o([Autowired("menuService")],HeaderComp2.prototype,"menuService",void 0),__decorate$2o([Autowired("columnModel")],HeaderComp2.prototype,"columnModel",void 0),__decorate$2o([RefSelector("eFilter")],HeaderComp2.prototype,"eFilter",void 0),__decorate$2o([RefSelector("eFilterButton")],HeaderComp2.prototype,"eFilterButton",void 0),__decorate$2o([RefSelector("eSortIndicator")],HeaderComp2.prototype,"eSortIndicator",void 0),__decorate$2o([RefSelector("eMenu")],HeaderComp2.prototype,"eMenu",void 0),__decorate$2o([RefSelector("eLabel")],HeaderComp2.prototype,"eLabel",void 0),__decorate$2o([RefSelector("eText")],HeaderComp2.prototype,"eText",void 0),__decorate$2o([RefSelector("eSortOrder")],HeaderComp2.prototype,"eSortOrder",void 0),__decorate$2o([RefSelector("eSortAsc")],HeaderComp2.prototype,"eSortAsc",void 0),__decorate$2o([RefSelector("eSortDesc")],HeaderComp2.prototype,"eSortDesc",void 0),__decorate$2o([RefSelector("eSortMixed")],HeaderComp2.prototype,"eSortMixed",void 0),__decorate$2o([RefSelector("eSortNone")],HeaderComp2.prototype,"eSortNone",void 0),HeaderComp2}(Component),__extends$2J=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2n=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2n"),HeaderGroupComp=function(_super){__extends$2J(HeaderGroupComp2,_super);function HeaderGroupComp2(){return _super.call(this,HeaderGroupComp2.TEMPLATE)||this}return __name(HeaderGroupComp2,"HeaderGroupComp"),HeaderGroupComp2.prototype.destroy=function(){_super.prototype.destroy.call(this)},HeaderGroupComp2.prototype.init=function(params){this.params=params,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()},HeaderGroupComp2.prototype.checkWarnings=function(){var paramsAny=this.params;paramsAny.template&&warnOnce("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")},HeaderGroupComp2.prototype.setupExpandIcons=function(){var _this=this;this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");var expandAction=__name(function(event){if(!isStopPropagationForAgGrid(event)){var newExpandedValue=!_this.params.columnGroup.isExpanded();_this.columnModel.setColumnGroupOpened(_this.params.columnGroup.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}},"expandAction");this.addTouchAndClickListeners(this.eCloseIcon,expandAction),this.addTouchAndClickListeners(this.eOpenIcon,expandAction);var stopPropagationAction=__name(function(event){stopPropagationForAgGrid(event)},"stopPropagationAction");this.addManagedListener(this.eCloseIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.eOpenIcon,"dblclick",stopPropagationAction),this.addManagedListener(this.getGui(),"dblclick",expandAction),this.updateIconVisibility();var providedColumnGroup=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(providedColumnGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))},HeaderGroupComp2.prototype.addTouchAndClickListeners=function(eElement,action){var touchListener=new TouchListener(eElement,!0);this.addManagedListener(touchListener,TouchListener.EVENT_TAP,action),this.addDestroyFunc(function(){return touchListener.destroy()}),this.addManagedListener(eElement,"click",action)},HeaderGroupComp2.prototype.updateIconVisibility=function(){var columnGroup=this.params.columnGroup;if(columnGroup.isExpandable()){var expanded=this.params.columnGroup.isExpanded();setDisplayed(this.eOpenIcon,expanded),setDisplayed(this.eCloseIcon,!expanded)}else setDisplayed(this.eOpenIcon,!1),setDisplayed(this.eCloseIcon,!1)},HeaderGroupComp2.prototype.addInIcon=function(iconName,refName){var eIcon=createIconNoSpan(iconName,this.gridOptionsService,null);eIcon&&this.getRefElement(refName).appendChild(eIcon)},HeaderGroupComp2.prototype.addGroupExpandIcon=function(){if(!this.params.columnGroup.isExpandable()){setDisplayed(this.eOpenIcon,!1),setDisplayed(this.eCloseIcon,!1);return}},HeaderGroupComp2.prototype.setupLabel=function(){var _a,_b=this.params,displayName=_b.displayName,columnGroup=_b.columnGroup;if(exists(displayName)){var displayNameSanitised=escapeString(displayName,!0);this.getRefElement("agLabel").textContent=displayNameSanitised}this.addOrRemoveCssClass("ag-sticky-label",!(!((_a=columnGroup.getColGroupDef())===null||_a===void 0)&&_a.suppressStickyLabel))},HeaderGroupComp2.TEMPLATE=`<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">
            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`,__decorate$2n([Autowired("columnModel")],HeaderGroupComp2.prototype,"columnModel",void 0),__decorate$2n([RefSelector("agOpened")],HeaderGroupComp2.prototype,"eOpenIcon",void 0),__decorate$2n([RefSelector("agClosed")],HeaderGroupComp2.prototype,"eCloseIcon",void 0),HeaderGroupComp2}(Component),__extends$2I=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),PopupComponent=function(_super){__extends$2I(PopupComponent2,_super);function PopupComponent2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(PopupComponent2,"PopupComponent"),PopupComponent2.prototype.isPopup=function(){return!0},PopupComponent2.prototype.setParentComponent=function(container){container.addCssClass("ag-has-popup"),_super.prototype.setParentComponent.call(this,container)},PopupComponent2.prototype.destroy=function(){var parentComp=this.parentComponent,hasParent=parentComp&&parentComp.isAlive();hasParent&&parentComp.getGui().classList.remove("ag-has-popup"),_super.prototype.destroy.call(this)},PopupComponent2}(Component),__extends$2H=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2m=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2m"),LargeTextCellEditor=function(_super){__extends$2H(LargeTextCellEditor2,_super);function LargeTextCellEditor2(){return _super.call(this,LargeTextCellEditor2.TEMPLATE)||this}return __name(LargeTextCellEditor2,"LargeTextCellEditor"),LargeTextCellEditor2.prototype.init=function(params){this.params=params,this.focusAfterAttached=params.cellStartedEdit,this.eTextArea.setMaxLength(params.maxLength||200).setCols(params.cols||60).setRows(params.rows||10),exists(params.value,!0)&&this.eTextArea.setValue(params.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()},LargeTextCellEditor2.prototype.onKeyDown=function(event){var key=event.key;(key===KeyCode.LEFT||key===KeyCode.UP||key===KeyCode.RIGHT||key===KeyCode.DOWN||event.shiftKey&&key===KeyCode.ENTER)&&event.stopPropagation()},LargeTextCellEditor2.prototype.afterGuiAttached=function(){var translate=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()},LargeTextCellEditor2.prototype.getValue=function(){var value=this.eTextArea.getValue();return!exists(value)&&!exists(this.params.value)?this.params.value:this.params.parseValue(value)},LargeTextCellEditor2.TEMPLATE=`<div class="ag-large-text">
            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,__decorate$2m([RefSelector("eTextArea")],LargeTextCellEditor2.prototype,"eTextArea",void 0),LargeTextCellEditor2}(PopupComponent),__extends$2G=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2l=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2l"),SelectCellEditor=function(_super){__extends$2G(SelectCellEditor2,_super);function SelectCellEditor2(){var _this=_super.call(this,`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>
            </div>`)||this;return _this.startedByEnter=!1,_this}return __name(SelectCellEditor2,"SelectCellEditor"),SelectCellEditor2.prototype.init=function(params){this.focusAfterAttached=params.cellStartedEdit;var _a=this,eSelect=_a.eSelect,valueFormatterService=_a.valueFormatterService,gridOptionsService=_a.gridOptionsService,values2=params.values,value=params.value,eventKey=params.eventKey;if(missing(values2)){console.warn("AG Grid: no values found for select cellEditor");return}this.startedByEnter=eventKey!=null?eventKey===KeyCode.ENTER:!1;var hasValue=!1;values2.forEach(function(currentValue){var option={value:currentValue},valueFormatted=valueFormatterService.formatValue(params.column,null,currentValue),valueFormattedExits=valueFormatted!=null;option.text=valueFormattedExits?valueFormatted:currentValue,eSelect.addOption(option),hasValue=hasValue||value===currentValue}),hasValue?eSelect.setValue(params.value,!0):params.values.length&&eSelect.setValue(params.values[0],!0);var valueListGap=params.valueListGap,valueListMaxWidth=params.valueListMaxWidth,valueListMaxHeight=params.valueListMaxHeight;valueListGap!=null&&eSelect.setPickerGap(valueListGap),valueListMaxHeight!=null&&eSelect.setPickerMaxHeight(valueListMaxHeight),valueListMaxWidth!=null&&eSelect.setPickerMaxWidth(valueListMaxWidth),gridOptionsService.get("editType")!=="fullRow"&&this.addManagedListener(this.eSelect,AgSelect.EVENT_ITEM_SELECTED,function(){return params.stopEditing()})},SelectCellEditor2.prototype.afterGuiAttached=function(){var _this=this;this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(function(){_this.isAlive()&&_this.eSelect.showPicker()})},SelectCellEditor2.prototype.focusIn=function(){this.eSelect.getFocusableElement().focus()},SelectCellEditor2.prototype.getValue=function(){return this.eSelect.getValue()},SelectCellEditor2.prototype.isPopup=function(){return!1},__decorate$2l([Autowired("valueFormatterService")],SelectCellEditor2.prototype,"valueFormatterService",void 0),__decorate$2l([RefSelector("eSelect")],SelectCellEditor2.prototype,"eSelect",void 0),SelectCellEditor2}(PopupComponent),__extends$2F=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2k=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2k"),SimpleCellEditor=function(_super){__extends$2F(SimpleCellEditor2,_super);function SimpleCellEditor2(cellEditorInput){var _this=_super.call(this,`
            <div class="ag-cell-edit-wrapper">
                `.concat(cellEditorInput.getTemplate(),`
            </div>`))||this;return _this.cellEditorInput=cellEditorInput,_this}return __name(SimpleCellEditor2,"SimpleCellEditor"),SimpleCellEditor2.prototype.init=function(params){this.params=params;var eInput=this.eInput;this.cellEditorInput.init(eInput,params);var startValue;if(params.cellStartedEdit){this.focusAfterAttached=!0;var eventKey=params.eventKey;eventKey===KeyCode.BACKSPACE||params.eventKey===KeyCode.DELETE?startValue="":eventKey&&eventKey.length===1?startValue=eventKey:(startValue=this.cellEditorInput.getStartValue(),eventKey!==KeyCode.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,startValue=this.cellEditorInput.getStartValue();startValue!=null&&eInput.setStartValue(startValue),this.addManagedListener(eInput.getGui(),"keydown",function(event){var key=event.key;(key===KeyCode.PAGE_UP||key===KeyCode.PAGE_DOWN)&&event.preventDefault()})},SimpleCellEditor2.prototype.afterGuiAttached=function(){var _a,_b,translate=this.localeService.getLocaleTextFunc(),eInput=this.eInput;if(eInput.setInputAriaLabel(translate("ariaInputEditor","Input Editor")),!!this.focusAfterAttached){isBrowserSafari()||eInput.getFocusableElement().focus();var inputEl=eInput.getInputElement();this.highlightAllOnFocus?inputEl.select():(_b=(_a=this.cellEditorInput).setCaret)===null||_b===void 0||_b.call(_a)}},SimpleCellEditor2.prototype.focusIn=function(){var eInput=this.eInput,focusEl=eInput.getFocusableElement(),inputEl=eInput.getInputElement();focusEl.focus(),inputEl.select()},SimpleCellEditor2.prototype.getValue=function(){return this.cellEditorInput.getValue()},SimpleCellEditor2.prototype.isPopup=function(){return!1},__decorate$2k([RefSelector("eInput")],SimpleCellEditor2.prototype,"eInput",void 0),SimpleCellEditor2}(PopupComponent),__extends$2E=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),TextCellEditorInput=function(){function TextCellEditorInput2(){}return __name(TextCellEditorInput2,"TextCellEditorInput"),TextCellEditorInput2.prototype.getTemplate=function(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'},TextCellEditorInput2.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,params.maxLength!=null&&eInput.setMaxLength(params.maxLength)},TextCellEditorInput2.prototype.getValue=function(){var value=this.eInput.getValue();return!exists(value)&&!exists(this.params.value)?this.params.value:this.params.parseValue(value)},TextCellEditorInput2.prototype.getStartValue=function(){var formatValue=this.params.useFormatter||this.params.column.getColDef().refData;return formatValue?this.params.formatValue(this.params.value):this.params.value},TextCellEditorInput2.prototype.setCaret=function(){var value=this.eInput.getValue(),len=exists(value)&&value.length||0;len&&this.eInput.getInputElement().setSelectionRange(len,len)},TextCellEditorInput2}(),TextCellEditor=function(_super){__extends$2E(TextCellEditor2,_super);function TextCellEditor2(){return _super.call(this,new TextCellEditorInput)||this}return __name(TextCellEditor2,"TextCellEditor"),TextCellEditor2}(SimpleCellEditor),__extends$2D=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2j=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2j"),ARROW_UP="↑",ARROW_DOWN="↓",AnimateShowChangeCellRenderer=function(_super){__extends$2D(AnimateShowChangeCellRenderer2,_super);function AnimateShowChangeCellRenderer2(){var _this=_super.call(this)||this;_this.refreshCount=0;var template=document.createElement("span"),delta=document.createElement("span");delta.setAttribute("class","ag-value-change-delta");var value=document.createElement("span");return value.setAttribute("class","ag-value-change-value"),template.appendChild(delta),template.appendChild(value),_this.setTemplateFromElement(template),_this}return __name(AnimateShowChangeCellRenderer2,"AnimateShowChangeCellRenderer"),AnimateShowChangeCellRenderer2.prototype.init=function(params){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(params,!0)},AnimateShowChangeCellRenderer2.prototype.showDelta=function(params,delta){var absDelta=Math.abs(delta),valueFormatted=params.formatValue(absDelta),valueToUse=exists(valueFormatted)?valueFormatted:absDelta,deltaUp=delta>=0;deltaUp?this.eDelta.textContent=ARROW_UP+valueToUse:this.eDelta.textContent=ARROW_DOWN+valueToUse,this.eDelta.classList.toggle("ag-value-change-delta-up",deltaUp),this.eDelta.classList.toggle("ag-value-change-delta-down",!deltaUp)},AnimateShowChangeCellRenderer2.prototype.setTimerToRemoveDelta=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(function(){window.setTimeout(function(){refreshCountCopy===_this.refreshCount&&_this.hideDeltaValue()},2e3)})},AnimateShowChangeCellRenderer2.prototype.hideDeltaValue=function(){this.eValue.classList.remove("ag-value-change-value-highlight"),clearElement(this.eDelta)},AnimateShowChangeCellRenderer2.prototype.refresh=function(params,isInitialRender){isInitialRender===void 0&&(isInitialRender=!1);var value=params.value;if(value===this.lastValue||(exists(params.valueFormatted)?this.eValue.textContent=params.valueFormatted:exists(params.value)?this.eValue.textContent=value:clearElement(this.eValue),this.filterManager.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof value=="number"&&typeof this.lastValue=="number"){var delta=value-this.lastValue;this.showDelta(params,delta)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),isInitialRender||this.setTimerToRemoveDelta(),this.lastValue=value,!0},__decorate$2j([Autowired("filterManager")],AnimateShowChangeCellRenderer2.prototype,"filterManager",void 0),AnimateShowChangeCellRenderer2}(Component),__extends$2C=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2i=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2i"),AnimateSlideCellRenderer=function(_super){__extends$2C(AnimateSlideCellRenderer2,_super);function AnimateSlideCellRenderer2(){var _this=_super.call(this)||this;_this.refreshCount=0;var template=document.createElement("span"),slide=document.createElement("span");return slide.setAttribute("class","ag-value-slide-current"),template.appendChild(slide),_this.setTemplateFromElement(template),_this.eCurrent=_this.queryForHtmlElement(".ag-value-slide-current"),_this}return __name(AnimateSlideCellRenderer2,"AnimateSlideCellRenderer"),AnimateSlideCellRenderer2.prototype.init=function(params){this.refresh(params,!0)},AnimateSlideCellRenderer2.prototype.addSlideAnimation=function(){var _this=this;this.refreshCount++;var refreshCountCopy=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);var prevElement=document.createElement("span");prevElement.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=prevElement,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(function(){window.setTimeout(function(){refreshCountCopy===_this.refreshCount&&_this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(function(){refreshCountCopy===_this.refreshCount&&(_this.getGui().removeChild(_this.ePrevious),_this.ePrevious=null)},3e3)})},AnimateSlideCellRenderer2.prototype.refresh=function(params,isInitialRender){isInitialRender===void 0&&(isInitialRender=!1);var value=params.value;return missing(value)&&(value=""),value===this.lastValue||this.filterManager.isSuppressFlashingCellsBecauseFiltering()?!1:(isInitialRender||this.addSlideAnimation(),this.lastValue=value,exists(params.valueFormatted)?this.eCurrent.textContent=params.valueFormatted:exists(params.value)?this.eCurrent.textContent=value:clearElement(this.eCurrent),!0)},__decorate$2i([Autowired("filterManager")],AnimateSlideCellRenderer2.prototype,"filterManager",void 0),AnimateSlideCellRenderer2}(Component),__assign$j=__name(function(){return __assign$j=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$j.apply(this,arguments)},"__assign$j"),RowNode=function(){function RowNode2(beans){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=RowNode2.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=beans}return __name(RowNode2,"RowNode"),RowNode2.prototype.setData=function(data){this.setDataCommon(data,!1)},RowNode2.prototype.updateData=function(data){this.setDataCommon(data,!0)},RowNode2.prototype.setDataCommon=function(data,update){var oldData=this.data;this.data=data,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();var event=this.createDataChangedEvent(data,oldData,update);this.dispatchLocalEvent(event)},RowNode2.prototype.updateDataOnDetailNode=function(){this.detailNode&&(this.detailNode.data=this.data)},RowNode2.prototype.createDataChangedEvent=function(newData,oldData,update){return{type:RowNode2.EVENT_DATA_CHANGED,node:this,oldData,newData,update}},RowNode2.prototype.createLocalRowEvent=function(type){return{type,node:this}},RowNode2.prototype.getRowIndexString=function(){return this.rowPinned==="top"?"t-"+this.rowIndex:this.rowPinned==="bottom"?"b-"+this.rowIndex:this.rowIndex.toString()},RowNode2.prototype.createDaemonNode=function(){var oldNode=new RowNode2(this.beans);return oldNode.id=this.id,oldNode.data=this.data,oldNode.__daemon=!0,oldNode.selected=this.selected,oldNode.level=this.level,oldNode},RowNode2.prototype.setDataAndId=function(data,id){var oldNode=exists(this.id)?this.createDaemonNode():null,oldData=this.data;this.data=data,this.updateDataOnDetailNode(),this.setId(id),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,oldNode);var event=this.createDataChangedEvent(data,oldData,!1);this.dispatchLocalEvent(event)},RowNode2.prototype.checkRowSelectable=function(){var isRowSelectableFunc=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(isRowSelectableFunc?isRowSelectableFunc(this):!0)},RowNode2.prototype.setRowSelectable=function(newVal,suppressSelectionUpdate){if(this.selectable!==newVal){if(this.selectable=newVal,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_SELECTABLE_CHANGED)),suppressSelectionUpdate)return;var isGroupSelectsChildren=this.beans.gridOptionsService.get("groupSelectsChildren");if(isGroupSelectsChildren){var selected=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:selected??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}},RowNode2.prototype.setId=function(id){var getRowIdFunc=this.beans.gridOptionsService.getCallback("getRowId");if(getRowIdFunc)if(this.data){var parentKeys=this.getGroupKeys(!0);this.id=getRowIdFunc({data:this.data,parentKeys:parentKeys.length>0?parentKeys:void 0,level:this.level}),this.id!==null&&typeof this.id=="string"&&this.id.startsWith(RowNode2.ID_PREFIX_ROW_GROUP)&&console.error("AG Grid: Row IDs cannot start with ".concat(RowNode2.ID_PREFIX_ROW_GROUP,", this is a reserved prefix for AG Grid's row grouping feature.")),this.id!==null&&typeof this.id!="string"&&(this.id=""+this.id)}else this.id=void 0;else this.id=id},RowNode2.prototype.getGroupKeys=function(excludeSelf){excludeSelf===void 0&&(excludeSelf=!1);var keys2=[],pointer=this;for(excludeSelf&&(pointer=pointer.parent);pointer&&pointer.level>=0;)keys2.push(pointer.key),pointer=pointer.parent;return keys2.reverse(),keys2},RowNode2.prototype.isPixelInRange=function(pixel){return!exists(this.rowTop)||!exists(this.rowHeight)?!1:pixel>=this.rowTop&&pixel<this.rowTop+this.rowHeight},RowNode2.prototype.setFirstChild=function(firstChild){this.firstChild!==firstChild&&(this.firstChild=firstChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_FIRST_CHILD_CHANGED)))},RowNode2.prototype.setLastChild=function(lastChild){this.lastChild!==lastChild&&(this.lastChild=lastChild,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_LAST_CHILD_CHANGED)))},RowNode2.prototype.setChildIndex=function(childIndex){this.childIndex!==childIndex&&(this.childIndex=childIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_CHILD_INDEX_CHANGED)))},RowNode2.prototype.setRowTop=function(rowTop){this.oldRowTop=this.rowTop,this.rowTop!==rowTop&&(this.rowTop=rowTop,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_TOP_CHANGED)),this.setDisplayed(rowTop!==null))},RowNode2.prototype.clearRowTopAndRowIndex=function(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)},RowNode2.prototype.setDisplayed=function(displayed){this.displayed!==displayed&&(this.displayed=displayed,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DISPLAYED_CHANGED)))},RowNode2.prototype.setDragging=function(dragging){this.dragging!==dragging&&(this.dragging=dragging,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_DRAGGING_CHANGED)))},RowNode2.prototype.setHighlighted=function(highlighted){highlighted!==this.highlighted&&(this.highlighted=highlighted,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HIGHLIGHT_CHANGED)))},RowNode2.prototype.setHovered=function(hovered){this.hovered!==hovered&&(this.hovered=hovered)},RowNode2.prototype.isHovered=function(){return this.hovered},RowNode2.prototype.setAllChildrenCount=function(allChildrenCount){this.allChildrenCount!==allChildrenCount&&(this.allChildrenCount=allChildrenCount,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED)))},RowNode2.prototype.setMaster=function(master){this.master!==master&&(this.master&&!master&&(this.expanded=!1),this.master=master,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_MASTER_CHANGED)))},RowNode2.prototype.setGroup=function(group){this.group!==group&&(this.group&&!group&&(this.expanded=!1),this.group=group,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_GROUP_CHANGED)))},RowNode2.prototype.setRowHeight=function(rowHeight,estimated){estimated===void 0&&(estimated=!1),this.rowHeight=rowHeight,this.rowHeightEstimated=estimated,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HEIGHT_CHANGED))},RowNode2.prototype.setRowAutoHeight=function(cellHeight,column){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[column.getId()]=cellHeight,cellHeight!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=debounce(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())},RowNode2.prototype.checkAutoHeights=function(){var _this=this,notAllPresent=!1,nonePresent=!0,newRowHeight=0,autoHeights=this.__autoHeights;if(autoHeights!=null){var displayedAutoHeightCols=this.beans.columnModel.getAllDisplayedAutoHeightCols();if(displayedAutoHeightCols.forEach(function(col){var cellHeight=autoHeights[col.getId()];if(cellHeight==null)if(_this.beans.columnModel.isColSpanActive()){var activeColsForRow=[];switch(col.getPinned()){case"left":activeColsForRow=_this.beans.columnModel.getDisplayedLeftColumnsForRow(_this);break;case"right":activeColsForRow=_this.beans.columnModel.getDisplayedRightColumnsForRow(_this);break;case null:activeColsForRow=_this.beans.columnModel.getViewportCenterColumnsForRow(_this);break}if(activeColsForRow.includes(col)){notAllPresent=!0;return}cellHeight=-1}else{notAllPresent=!0;return}else nonePresent=!1;cellHeight>newRowHeight&&(newRowHeight=cellHeight)}),!notAllPresent&&((nonePresent||newRowHeight<10)&&(newRowHeight=this.beans.gridOptionsService.getRowHeightForNode(this).height),newRowHeight!=this.rowHeight)){this.setRowHeight(newRowHeight);var rowModel=this.beans.rowModel;rowModel.onRowHeightChangedDebounced&&rowModel.onRowHeightChangedDebounced()}}},RowNode2.prototype.setRowIndex=function(rowIndex){this.rowIndex!==rowIndex&&(this.rowIndex=rowIndex,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_INDEX_CHANGED)))},RowNode2.prototype.setUiLevel=function(uiLevel){this.uiLevel!==uiLevel&&(this.uiLevel=uiLevel,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_UI_LEVEL_CHANGED)))},RowNode2.prototype.setExpanded=function(expanded,e){if(this.expanded!==expanded){this.expanded=expanded,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_EXPANDED_CHANGED));var event=Object.assign({},this.createGlobalRowEvent(Events.EVENT_ROW_GROUP_OPENED),{expanded,event:e||null});this.beans.rowNodeEventThrottle.dispatchExpanded(event),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}},RowNode2.prototype.createGlobalRowEvent=function(type){return this.beans.gridOptionsService.addGridCommonParams({type,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})},RowNode2.prototype.dispatchLocalEvent=function(event){this.eventService&&this.eventService.dispatchEvent(event)},RowNode2.prototype.setDataValue=function(colKey,newValue,eventSource){var _this=this,getColumnFromKey=__name(function(){var _a;return typeof colKey!="string"?colKey:(_a=_this.beans.columnModel.getGridColumn(colKey))!==null&&_a!==void 0?_a:_this.beans.columnModel.getPrimaryColumn(colKey)},"getColumnFromKey"),column=getColumnFromKey(),oldValue=this.getValueFromValueService(column);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(column,oldValue,newValue,eventSource),!1;var valueChanged=this.beans.valueService.setValue(this,column,newValue,eventSource);return this.dispatchCellChangedEvent(column,newValue,oldValue),this.checkRowSelectable(),valueChanged},RowNode2.prototype.getValueFromValueService=function(column){var lockedClosedGroup=this.leafGroup&&this.beans.columnModel.isPivotMode(),isOpenGroup=this.group&&this.expanded&&!this.footer&&!lockedClosedGroup,getGroupIncludeFooter=this.beans.gridOptionsService.getGroupIncludeFooter(),groupFootersEnabled=getGroupIncludeFooter({node:this}),groupAlwaysShowAggData=this.beans.gridOptionsService.get("groupSuppressBlankHeader"),ignoreAggData=isOpenGroup&&groupFootersEnabled&&!groupAlwaysShowAggData,value=this.beans.valueService.getValue(column,this,!1,ignoreAggData);return value},RowNode2.prototype.dispatchEventForSaveValueReadOnly=function(column,oldValue,newValue,eventSource){var event=this.beans.gridOptionsService.addGridCommonParams({type:Events.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column,colDef:column.getColDef(),data:this.data,node:this,oldValue,newValue,value:newValue,source:eventSource});this.beans.eventService.dispatchEvent(event)},RowNode2.prototype.setGroupValue=function(colKey,newValue){var column=this.beans.columnModel.getGridColumn(colKey);missing(this.groupData)&&(this.groupData={});var columnId=column.getColId(),oldValue=this.groupData[columnId];oldValue!==newValue&&(this.groupData[columnId]=newValue,this.dispatchCellChangedEvent(column,newValue,oldValue))},RowNode2.prototype.setAggData=function(newAggData){var _this=this,oldAggData=this.aggData;if(this.aggData=newAggData,this.eventService){var eventFunc=__name(function(colId){var value=_this.aggData?_this.aggData[colId]:void 0,oldValue=oldAggData?oldAggData[colId]:void 0;if(value!==oldValue){var column=_this.beans.columnModel.lookupGridColumn(colId);column&&_this.dispatchCellChangedEvent(column,value,oldValue)}},"eventFunc");for(var key in this.aggData)eventFunc(key);for(var key in newAggData)key in this.aggData||eventFunc(key)}},RowNode2.prototype.updateHasChildren=function(){var newValue=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0,isSsrm=this.beans.gridOptionsService.isRowModelType("serverSide");if(isSsrm){var isTreeData=this.beans.gridOptionsService.get("treeData"),isGroupFunc=this.beans.gridOptionsService.get("isServerSideGroup");newValue=!this.stub&&!this.footer&&(isTreeData?!!isGroupFunc&&isGroupFunc(this.data):!!this.group)}newValue!==this.__hasChildren&&(this.__hasChildren=!!newValue,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(RowNode2.EVENT_HAS_CHILDREN_CHANGED)))},RowNode2.prototype.hasChildren=function(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren},RowNode2.prototype.isEmptyRowGroupNode=function(){return this.group&&missingOrEmpty(this.childrenAfterGroup)},RowNode2.prototype.dispatchCellChangedEvent=function(column,newValue,oldValue){var cellChangedEvent={type:RowNode2.EVENT_CELL_CHANGED,node:this,column,newValue,oldValue};this.dispatchLocalEvent(cellChangedEvent)},RowNode2.prototype.resetQuickFilterAggregateText=function(){this.quickFilterAggregateText=null},RowNode2.prototype.isExpandable=function(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master},RowNode2.prototype.isSelected=function(){return this.footer?this.sibling.isSelected():this.selected},RowNode2.prototype.depthFirstSearch=function(callback){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(function(child){return child.depthFirstSearch(callback)}),callback(this)},RowNode2.prototype.calculateSelectedFromChildren=function(){var _a,atLeastOneSelected=!1,atLeastOneDeSelected=!1,atLeastOneMixed=!1;if(!(!((_a=this.childrenAfterGroup)===null||_a===void 0)&&_a.length))return this.selectable?this.selected:null;for(var i=0;i<this.childrenAfterGroup.length;i++){var child=this.childrenAfterGroup[i],childState=child.isSelected();if(!child.selectable){var selectable=child.calculateSelectedFromChildren();if(selectable===null)continue;childState=selectable}switch(childState){case!0:atLeastOneSelected=!0;break;case!1:atLeastOneDeSelected=!0;break;default:atLeastOneMixed=!0;break}}if(!(atLeastOneMixed||atLeastOneSelected&&atLeastOneDeSelected))return atLeastOneSelected?!0:atLeastOneDeSelected?!1:this.selectable?this.selected:null},RowNode2.prototype.setSelectedInitialValue=function(selected){this.selected=selected},RowNode2.prototype.selectThisNode=function(newValue,e,source){source===void 0&&(source="api");var selectionNotAllowed=!this.selectable&&newValue,selectionNotChanged=this.selected===newValue;if(selectionNotAllowed||selectionNotChanged)return!1;if(this.selected=newValue,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_ROW_SELECTED));var sibling=this.sibling;sibling&&sibling.footer&&sibling.dispatchLocalEvent(sibling.createLocalRowEvent(RowNode2.EVENT_ROW_SELECTED))}var event=__assign$j(__assign$j({},this.createGlobalRowEvent(Events.EVENT_ROW_SELECTED)),{event:e||null,source});return this.beans.eventService.dispatchEvent(event),!0},RowNode2.prototype.setSelected=function(newValue,clearSelection,source){if(clearSelection===void 0&&(clearSelection=!1),source===void 0&&(source="api"),typeof source=="boolean"){console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue,clearSelection,rangeSelect:!1,source})},RowNode2.prototype.setSelectedParams=function(params){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):this.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(__assign$j(__assign$j({},params),{nodes:[this.footer?this.sibling:this]}))},RowNode2.prototype.isRowPinned=function(){return this.rowPinned==="top"||this.rowPinned==="bottom"},RowNode2.prototype.isParentOfNode=function(potentialParent){for(var parentNode=this.parent;parentNode;){if(parentNode===potentialParent)return!0;parentNode=parentNode.parent}return!1},RowNode2.prototype.addEventListener=function(eventType,userListener){var _a,_b;this.eventService||(this.eventService=new EventService),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new FrameworkEventListenerService(this.beans.frameworkOverrides));var listener=(_b=(_a=this.frameworkEventListenerService)===null||_a===void 0?void 0:_a.wrap(userListener))!==null&&_b!==void 0?_b:userListener;this.eventService.addEventListener(eventType,listener)},RowNode2.prototype.removeEventListener=function(eventType,userListener){var _a,_b;if(this.eventService){var listener=(_b=(_a=this.frameworkEventListenerService)===null||_a===void 0?void 0:_a.unwrap(userListener))!==null&&_b!==void 0?_b:userListener;this.eventService.removeEventListener(eventType,listener),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}},RowNode2.prototype.onMouseEnter=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_ENTER))},RowNode2.prototype.onMouseLeave=function(){this.dispatchLocalEvent(this.createLocalRowEvent(RowNode2.EVENT_MOUSE_LEAVE))},RowNode2.prototype.getFirstChildOfFirstChild=function(rowGroupColumn){for(var currentRowNode=this,isCandidate=!0,foundFirstChildPath=!1,nodeToSwapIn=null;isCandidate&&!foundFirstChildPath;){var parentRowNode=currentRowNode.parent,firstChild=exists(parentRowNode)&&currentRowNode.firstChild;firstChild?parentRowNode.rowGroupColumn===rowGroupColumn&&(foundFirstChildPath=!0,nodeToSwapIn=parentRowNode):isCandidate=!1,currentRowNode=parentRowNode}return foundFirstChildPath?nodeToSwapIn:null},RowNode2.prototype.isFullWidthCell=function(){if(this.detail)return!0;var isFullWidthCellFunc=this.beans.gridOptionsService.getCallback("isFullWidthRow");return isFullWidthCellFunc?isFullWidthCellFunc({rowNode:this}):!1},RowNode2.prototype.getRoute=function(){if(this.key!=null){for(var res=[],pointer=this;pointer.key!=null;)res.push(pointer.key),pointer=pointer.parent;return res.reverse()}},RowNode2.prototype.createFooter=function(){var _this=this;if(!this.sibling){var ignoredProperties=new Set(["eventService","__objectId","sticky"]),footerNode=new RowNode2(this.beans);Object.keys(this).forEach(function(key){ignoredProperties.has(key)||(footerNode[key]=_this[key])}),footerNode.footer=!0,footerNode.setRowTop(null),footerNode.setRowIndex(null),footerNode.oldRowTop=null,footerNode.id="rowGroupFooter_"+this.id,footerNode.sibling=this,this.sibling=footerNode}},RowNode2.prototype.destroyFooter=function(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)},RowNode2.ID_PREFIX_ROW_GROUP="row-group-",RowNode2.ID_PREFIX_TOP_PINNED="t-",RowNode2.ID_PREFIX_BOTTOM_PINNED="b-",RowNode2.OBJECT_ID_SEQUENCE=0,RowNode2.EVENT_ROW_SELECTED="rowSelected",RowNode2.EVENT_DATA_CHANGED="dataChanged",RowNode2.EVENT_CELL_CHANGED="cellChanged",RowNode2.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",RowNode2.EVENT_MASTER_CHANGED="masterChanged",RowNode2.EVENT_GROUP_CHANGED="groupChanged",RowNode2.EVENT_MOUSE_ENTER="mouseEnter",RowNode2.EVENT_MOUSE_LEAVE="mouseLeave",RowNode2.EVENT_HEIGHT_CHANGED="heightChanged",RowNode2.EVENT_TOP_CHANGED="topChanged",RowNode2.EVENT_DISPLAYED_CHANGED="displayedChanged",RowNode2.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",RowNode2.EVENT_LAST_CHILD_CHANGED="lastChildChanged",RowNode2.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",RowNode2.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",RowNode2.EVENT_EXPANDED_CHANGED="expandedChanged",RowNode2.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",RowNode2.EVENT_SELECTABLE_CHANGED="selectableChanged",RowNode2.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",RowNode2.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",RowNode2.EVENT_DRAGGING_CHANGED="draggingChanged",RowNode2}(),__extends$2B=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$i=__name(function(){return __assign$i=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$i.apply(this,arguments)},"__assign$i"),__decorate$2h=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2h"),CheckboxSelectionComponent=function(_super){__extends$2B(CheckboxSelectionComponent2,_super);function CheckboxSelectionComponent2(){return _super.call(this,`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return __name(CheckboxSelectionComponent2,"CheckboxSelectionComponent"),CheckboxSelectionComponent2.prototype.postConstruct=function(){this.eCheckbox.setPassive(!0)},CheckboxSelectionComponent2.prototype.getCheckboxId=function(){return this.eCheckbox.getInputElement().id},CheckboxSelectionComponent2.prototype.onDataChanged=function(){this.onSelectionChanged()},CheckboxSelectionComponent2.prototype.onSelectableChanged=function(){this.showOrHideSelect()},CheckboxSelectionComponent2.prototype.onSelectionChanged=function(){var state=this.rowNode.isSelected();this.eCheckbox.setValue(state,!0)},CheckboxSelectionComponent2.prototype.onClicked=function(newValue,groupSelectsFiltered,event){return this.rowNode.setSelectedParams({newValue,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"checkboxSelected"})},CheckboxSelectionComponent2.prototype.init=function(params){var _this=this;this.rowNode=params.rowNode,this.column=params.column,this.overrides=params.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",function(event){stopPropagationForAgGrid(event)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",function(event){stopPropagationForAgGrid(event);var groupSelectsFiltered=_this.gridOptionsService.get("groupSelectsFiltered"),isSelected=_this.eCheckbox.getValue();if(_this.shouldHandleIndeterminateState(isSelected,groupSelectsFiltered)){var result=_this.onClicked(!0,groupSelectsFiltered,event||{});result===0&&_this.onClicked(!1,groupSelectsFiltered,event)}else isSelected?_this.onClicked(!1,groupSelectsFiltered,event):_this.onClicked(!0,groupSelectsFiltered,event||{})}),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this));var isRowSelectableFunc=this.gridOptionsService.get("isRowSelectable"),checkboxVisibleIsDynamic=isRowSelectableFunc||typeof this.getIsVisible()=="function";if(checkboxVisibleIsDynamic){var showOrHideSelectListener=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,showOrHideSelectListener),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,showOrHideSelectListener),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")},CheckboxSelectionComponent2.prototype.shouldHandleIndeterminateState=function(isSelected,groupSelectsFiltered){return groupSelectsFiltered&&(this.eCheckbox.getPreviousValue()===void 0||isSelected===void 0)&&this.gridOptionsService.isRowModelType("clientSide")},CheckboxSelectionComponent2.prototype.showOrHideSelect=function(){var _a,_b,_c,_d,selectable=this.rowNode.selectable,isVisible2=this.getIsVisible();if(selectable)if(typeof isVisible2=="function"){var extraParams=(_a=this.overrides)===null||_a===void 0?void 0:_a.callbackParams,params=(_b=this.column)===null||_b===void 0?void 0:_b.createColumnFunctionCallbackParams(this.rowNode);selectable=params?isVisible2(__assign$i(__assign$i({},extraParams),params)):!1}else selectable=isVisible2??!1;var disableInsteadOfHide=(_c=this.column)===null||_c===void 0?void 0:_c.getColDef().showDisabledCheckboxes;if(disableInsteadOfHide){this.eCheckbox.setDisabled(!selectable),this.setVisible(!0),this.setDisplayed(!0);return}if(!((_d=this.overrides)===null||_d===void 0)&&_d.removeHidden){this.setDisplayed(selectable);return}this.setVisible(selectable)},CheckboxSelectionComponent2.prototype.getIsVisible=function(){var _a,_b;return this.overrides?this.overrides.isVisible:(_b=(_a=this.column)===null||_a===void 0?void 0:_a.getColDef())===null||_b===void 0?void 0:_b.checkboxSelection},__decorate$2h([RefSelector("eCheckbox")],CheckboxSelectionComponent2.prototype,"eCheckbox",void 0),__decorate$2h([PostConstruct],CheckboxSelectionComponent2.prototype,"postConstruct",null),CheckboxSelectionComponent2}(Component),VerticalDirection;(function(VerticalDirection2){VerticalDirection2[VerticalDirection2.Up=0]="Up",VerticalDirection2[VerticalDirection2.Down=1]="Down"})(VerticalDirection||(VerticalDirection={}));var HorizontalDirection;(function(HorizontalDirection2){HorizontalDirection2[HorizontalDirection2.Left=0]="Left",HorizontalDirection2[HorizontalDirection2.Right=1]="Right"})(HorizontalDirection||(HorizontalDirection={}));var __extends$2A=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2g=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2g"),__values$7=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$7"),DragSourceType;(function(DragSourceType2){DragSourceType2[DragSourceType2.ToolPanel=0]="ToolPanel",DragSourceType2[DragSourceType2.HeaderCell=1]="HeaderCell",DragSourceType2[DragSourceType2.RowDrag=2]="RowDrag",DragSourceType2[DragSourceType2.ChartPanel=3]="ChartPanel",DragSourceType2[DragSourceType2.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"})(DragSourceType||(DragSourceType={}));var DragAndDropService=function(_super){__extends$2A(DragAndDropService2,_super);function DragAndDropService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.dragSourceAndParamsList=[],_this.dropTargets=[],_this}__name(DragAndDropService2,"DragAndDropService"),DragAndDropService_1=DragAndDropService2,DragAndDropService2.prototype.init=function(){this.ePinnedIcon=createIcon("columnMovePin",this.gridOptionsService,null),this.eHideIcon=createIcon("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=createIcon("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=createIcon("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=createIcon("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=createIcon("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=createIcon("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=createIcon("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=createIcon("dropNotAllowed",this.gridOptionsService,null)},DragAndDropService2.prototype.addDragSource=function(dragSource,allowTouch){allowTouch===void 0&&(allowTouch=!1);var params={eElement:dragSource.eElement,dragStartPixels:dragSource.dragStartPixels,onDragStart:this.onDragStart.bind(this,dragSource),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:allowTouch};this.dragSourceAndParamsList.push({params,dragSource}),this.dragService.addDragSource(params)},DragAndDropService2.prototype.removeDragSource=function(dragSource){var sourceAndParams=this.dragSourceAndParamsList.find(function(item){return item.dragSource===dragSource});sourceAndParams&&(this.dragService.removeDragSource(sourceAndParams.params),removeFromArray(this.dragSourceAndParamsList,sourceAndParams))},DragAndDropService2.prototype.clearDragSourceParamsList=function(){var _this=this;this.dragSourceAndParamsList.forEach(function(sourceAndParams){return _this.dragService.removeDragSource(sourceAndParams.params)}),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0},DragAndDropService2.prototype.nudge=function(){this.dragging&&this.onDragging(this.eventLastTime,!0)},DragAndDropService2.prototype.onDragStart=function(dragSource,mouseEvent){this.dragging=!0,this.dragSource=dragSource,this.eventLastTime=mouseEvent,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()},DragAndDropService2.prototype.onDragStop=function(mouseEvent){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){var draggingEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,null,null,!1);this.lastDropTarget.onDragStop(draggingEvent)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()},DragAndDropService2.prototype.onDragging=function(mouseEvent,fromNudge){var _this=this,_a,_b,_c,_d,hDirection=this.getHorizontalDirection(mouseEvent),vDirection=this.getVerticalDirection(mouseEvent);this.eventLastTime=mouseEvent,this.positionGhost(mouseEvent);var validDropTargets=this.dropTargets.filter(function(target){return _this.isMouseOnDropTarget(mouseEvent,target)}),dropTarget=this.findCurrentDropTarget(mouseEvent,validDropTargets);if(dropTarget!==this.lastDropTarget)this.leaveLastTargetIfExists(mouseEvent,hDirection,vDirection,fromNudge),this.lastDropTarget!==null&&dropTarget===null&&((_b=(_a=this.dragSource).onGridExit)===null||_b===void 0||_b.call(_a,this.dragItem)),this.lastDropTarget===null&&dropTarget!==null&&((_d=(_c=this.dragSource).onGridEnter)===null||_d===void 0||_d.call(_c,this.dragItem)),this.enterDragTargetIfExists(dropTarget,mouseEvent,hDirection,vDirection,fromNudge),this.lastDropTarget=dropTarget;else if(dropTarget&&dropTarget.onDragging){var draggingEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragging(draggingEvent)}},DragAndDropService2.prototype.getAllContainersFromDropTarget=function(dropTarget){var secondaryContainers=dropTarget.getSecondaryContainers?dropTarget.getSecondaryContainers():null,containers=[[dropTarget.getContainer()]];return secondaryContainers?containers.concat(secondaryContainers):containers},DragAndDropService2.prototype.allContainersIntersect=function(mouseEvent,containers){var e_1,_a;try{for(var containers_1=__values$7(containers),containers_1_1=containers_1.next();!containers_1_1.done;containers_1_1=containers_1.next()){var container=containers_1_1.value,rect=container.getBoundingClientRect();if(rect.width===0||rect.height===0)return!1;var horizontalFit=mouseEvent.clientX>=rect.left&&mouseEvent.clientX<rect.right,verticalFit=mouseEvent.clientY>=rect.top&&mouseEvent.clientY<rect.bottom;if(!horizontalFit||!verticalFit)return!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{containers_1_1&&!containers_1_1.done&&(_a=containers_1.return)&&_a.call(containers_1)}finally{if(e_1)throw e_1.error}}return!0},DragAndDropService2.prototype.isMouseOnDropTarget=function(mouseEvent,dropTarget){var e_2,_a,allContainersFromDropTarget=this.getAllContainersFromDropTarget(dropTarget),mouseOverTarget=!1;try{for(var allContainersFromDropTarget_1=__values$7(allContainersFromDropTarget),allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next();!allContainersFromDropTarget_1_1.done;allContainersFromDropTarget_1_1=allContainersFromDropTarget_1.next()){var currentContainers=allContainersFromDropTarget_1_1.value;if(this.allContainersIntersect(mouseEvent,currentContainers)){mouseOverTarget=!0;break}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{allContainersFromDropTarget_1_1&&!allContainersFromDropTarget_1_1.done&&(_a=allContainersFromDropTarget_1.return)&&_a.call(allContainersFromDropTarget_1)}finally{if(e_2)throw e_2.error}}return dropTarget.targetContainsSource&&!dropTarget.getContainer().contains(this.dragSource.eElement)?!1:mouseOverTarget&&dropTarget.isInterestedIn(this.dragSource.type,this.dragSource.eElement)},DragAndDropService2.prototype.findCurrentDropTarget=function(mouseEvent,validDropTargets){var e_3,_a,e_4,_b,len=validDropTargets.length;if(len===0)return null;if(len===1)return validDropTargets[0];var rootNode=this.gridOptionsService.getRootNode(),elementStack=rootNode.elementsFromPoint(mouseEvent.clientX,mouseEvent.clientY);try{for(var elementStack_1=__values$7(elementStack),elementStack_1_1=elementStack_1.next();!elementStack_1_1.done;elementStack_1_1=elementStack_1.next()){var el=elementStack_1_1.value;try{for(var validDropTargets_1=(e_4=void 0,__values$7(validDropTargets)),validDropTargets_1_1=validDropTargets_1.next();!validDropTargets_1_1.done;validDropTargets_1_1=validDropTargets_1.next()){var dropTarget=validDropTargets_1_1.value,containers=flatten(this.getAllContainersFromDropTarget(dropTarget));if(containers.indexOf(el)!==-1)return dropTarget}}catch(e_4_1){e_4={error:e_4_1}}finally{try{validDropTargets_1_1&&!validDropTargets_1_1.done&&(_b=validDropTargets_1.return)&&_b.call(validDropTargets_1)}finally{if(e_4)throw e_4.error}}}}catch(e_3_1){e_3={error:e_3_1}}finally{try{elementStack_1_1&&!elementStack_1_1.done&&(_a=elementStack_1.return)&&_a.call(elementStack_1)}finally{if(e_3)throw e_3.error}}return null},DragAndDropService2.prototype.enterDragTargetIfExists=function(dropTarget,mouseEvent,hDirection,vDirection,fromNudge){if(dropTarget){if(dropTarget.onDragEnter){var dragEnterEvent=this.createDropTargetEvent(dropTarget,mouseEvent,hDirection,vDirection,fromNudge);dropTarget.onDragEnter(dragEnterEvent)}this.setGhostIcon(dropTarget.getIconName?dropTarget.getIconName():null)}},DragAndDropService2.prototype.leaveLastTargetIfExists=function(mouseEvent,hDirection,vDirection,fromNudge){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){var dragLeaveEvent=this.createDropTargetEvent(this.lastDropTarget,mouseEvent,hDirection,vDirection,fromNudge);this.lastDropTarget.onDragLeave(dragLeaveEvent)}this.setGhostIcon(null)}},DragAndDropService2.prototype.addDropTarget=function(dropTarget){this.dropTargets.push(dropTarget)},DragAndDropService2.prototype.removeDropTarget=function(dropTarget){this.dropTargets=this.dropTargets.filter(function(target){return target.getContainer()!==dropTarget.getContainer()})},DragAndDropService2.prototype.hasExternalDropZones=function(){return this.dropTargets.some(function(zones){return zones.external})},DragAndDropService2.prototype.findExternalZone=function(params){var externalTargets=this.dropTargets.filter(function(target){return target.external});return externalTargets.find(function(zone){return zone.getContainer()===params.getContainer()})||null},DragAndDropService2.prototype.getHorizontalDirection=function(event){var clientX=this.eventLastTime&&this.eventLastTime.clientX,eClientX=event.clientX;return clientX===eClientX?null:clientX>eClientX?HorizontalDirection.Left:HorizontalDirection.Right},DragAndDropService2.prototype.getVerticalDirection=function(event){var clientY=this.eventLastTime&&this.eventLastTime.clientY,eClientY=event.clientY;return clientY===eClientY?null:clientY>eClientY?VerticalDirection.Up:VerticalDirection.Down},DragAndDropService2.prototype.createDropTargetEvent=function(dropTarget,event,hDirection,vDirection,fromNudge){var dropZoneTarget=dropTarget.getContainer(),rect=dropZoneTarget.getBoundingClientRect(),_a=this,api=_a.gridApi,columnApi=_a.columnApi,dragItem=_a.dragItem,dragSource=_a.dragSource,x=event.clientX-rect.left,y=event.clientY-rect.top;return{event,x,y,vDirection,hDirection,dragSource,fromNudge,dragItem,api,columnApi,dropZoneTarget}},DragAndDropService2.prototype.positionGhost=function(event){var ghost=this.eGhost;if(ghost){var ghostRect=ghost.getBoundingClientRect(),ghostHeight=ghostRect.height,browserWidth=getBodyWidth()-2,browserHeight=getBodyHeight()-2,offsetParentSize=getElementRectWithOffset(ghost.offsetParent),clientY=event.clientY,clientX=event.clientX,top=clientY-offsetParentSize.top-ghostHeight/2,left=clientX-offsetParentSize.left-10,eDocument=this.gridOptionsService.getDocument(),win=eDocument.defaultView||window,windowScrollY=win.pageYOffset||eDocument.documentElement.scrollTop,windowScrollX=win.pageXOffset||eDocument.documentElement.scrollLeft;browserWidth>0&&left+ghost.clientWidth>browserWidth+windowScrollX&&(left=browserWidth+windowScrollX-ghost.clientWidth),left<0&&(left=0),browserHeight>0&&top+ghost.clientHeight>browserHeight+windowScrollY&&(top=browserHeight+windowScrollY-ghost.clientHeight),top<0&&(top=0),ghost.style.left="".concat(left,"px"),ghost.style.top="".concat(top,"px")}},DragAndDropService2.prototype.removeGhost=function(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null},DragAndDropService2.prototype.createGhost=function(){this.eGhost=loadTemplate(DragAndDropService_1.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);var theme=this.environment.getTheme().theme;theme&&this.eGhost.classList.add(theme),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);var eText=this.eGhost.querySelector(".ag-dnd-ghost-label"),dragItemName=this.dragSource.dragItemName;isFunction(dragItemName)&&(dragItemName=dragItemName()),eText.innerHTML=escapeString(dragItemName)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";var eDocument=this.gridOptionsService.getDocument(),rootNode=null,targetEl=null;try{rootNode=eDocument.fullscreenElement}catch{}finally{rootNode||(rootNode=this.gridOptionsService.getRootNode());var body=rootNode.querySelector("body");body?targetEl=body:rootNode instanceof ShadowRoot?targetEl=rootNode:rootNode instanceof Document?targetEl=rootNode==null?void 0:rootNode.documentElement:targetEl=rootNode}this.eGhostParent=targetEl,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")},DragAndDropService2.prototype.setGhostIcon=function(iconName,shake){shake===void 0&&(shake=!1),clearElement(this.eGhostIcon);var eIcon=null;switch(iconName||(iconName=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():DragAndDropService_1.ICON_NOT_ALLOWED),iconName){case DragAndDropService_1.ICON_PINNED:eIcon=this.ePinnedIcon;break;case DragAndDropService_1.ICON_MOVE:eIcon=this.eMoveIcon;break;case DragAndDropService_1.ICON_LEFT:eIcon=this.eLeftIcon;break;case DragAndDropService_1.ICON_RIGHT:eIcon=this.eRightIcon;break;case DragAndDropService_1.ICON_GROUP:eIcon=this.eGroupIcon;break;case DragAndDropService_1.ICON_AGGREGATE:eIcon=this.eAggregateIcon;break;case DragAndDropService_1.ICON_PIVOT:eIcon=this.ePivotIcon;break;case DragAndDropService_1.ICON_NOT_ALLOWED:eIcon=this.eDropNotAllowedIcon;break;case DragAndDropService_1.ICON_HIDE:eIcon=this.eHideIcon;break}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",shake),!(eIcon===this.eHideIcon&&this.gridOptionsService.get("suppressDragLeaveHidesColumns"))&&eIcon&&this.eGhostIcon.appendChild(eIcon)};var DragAndDropService_1;return DragAndDropService2.ICON_PINNED="pinned",DragAndDropService2.ICON_MOVE="move",DragAndDropService2.ICON_LEFT="left",DragAndDropService2.ICON_RIGHT="right",DragAndDropService2.ICON_GROUP="group",DragAndDropService2.ICON_AGGREGATE="aggregate",DragAndDropService2.ICON_PIVOT="pivot",DragAndDropService2.ICON_NOT_ALLOWED="notAllowed",DragAndDropService2.ICON_HIDE="hide",DragAndDropService2.GHOST_TEMPLATE=`<div class="ag-dnd-ghost ag-unselectable">
            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
            <div class="ag-dnd-ghost-label"></div>
        </div>`,__decorate$2g([Autowired("dragService")],DragAndDropService2.prototype,"dragService",void 0),__decorate$2g([Autowired("mouseEventService")],DragAndDropService2.prototype,"mouseEventService",void 0),__decorate$2g([Autowired("columnApi")],DragAndDropService2.prototype,"columnApi",void 0),__decorate$2g([Autowired("gridApi")],DragAndDropService2.prototype,"gridApi",void 0),__decorate$2g([PostConstruct],DragAndDropService2.prototype,"init",null),__decorate$2g([PreDestroy],DragAndDropService2.prototype,"clearDragSourceParamsList",null),DragAndDropService2=DragAndDropService_1=__decorate$2g([Bean("dragAndDropService")],DragAndDropService2),DragAndDropService2}(BeanStub),__extends$2z=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2f=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2f"),RowDragComp=function(_super){__extends$2z(RowDragComp2,_super);function RowDragComp2(cellValueFn,rowNode,column,customGui,dragStartPixels,suppressVisibilityChange){var _this=_super.call(this)||this;return _this.cellValueFn=cellValueFn,_this.rowNode=rowNode,_this.column=column,_this.customGui=customGui,_this.dragStartPixels=dragStartPixels,_this.suppressVisibilityChange=suppressVisibilityChange,_this.dragSource=null,_this}return __name(RowDragComp2,"RowDragComp"),RowDragComp2.prototype.isCustomGui=function(){return this.customGui!=null},RowDragComp2.prototype.postConstruct=function(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(createIconNoSpan("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){var strategy=this.gridOptionsService.get("rowDragManaged")?new ManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column):new NonManagedVisibilityStrategy(this,this.beans,this.rowNode,this.column);this.createManagedBean(strategy,this.beans.context)}},RowDragComp2.prototype.setDragElement=function(dragElement,dragStartPixels){this.setTemplateFromElement(dragElement),this.addDragSource(dragStartPixels)},RowDragComp2.prototype.getSelectedNodes=function(){var isRowDragMultiRow=this.gridOptionsService.get("rowDragMultiRow");if(!isRowDragMultiRow)return[this.rowNode];var selection=this.beans.selectionService.getSelectedNodes();return selection.indexOf(this.rowNode)!==-1?selection:[this.rowNode]},RowDragComp2.prototype.checkCompatibility=function(){var managed=this.gridOptionsService.get("rowDragManaged"),treeData=this.gridOptionsService.get("treeData");treeData&&managed&&warnOnce("If using row drag with tree data, you cannot have rowDragManaged=true")},RowDragComp2.prototype.getDragItem=function(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}},RowDragComp2.prototype.getRowDragText=function(column){if(column){var colDef=column.getColDef();if(colDef.rowDragText)return colDef.rowDragText}return this.gridOptionsService.get("rowDragText")},RowDragComp2.prototype.addDragSource=function(dragStartPixels){var _this=this;dragStartPixels===void 0&&(dragStartPixels=4),this.dragSource&&this.removeDragSource();var translate=this.localeService.getLocaleTextFunc();this.dragSource={type:DragSourceType.RowDrag,eElement:this.getGui(),dragItemName:function(){var _a,dragItem=_this.getDragItem(),dragItemCount=((_a=dragItem.rowNodes)===null||_a===void 0?void 0:_a.length)||1,rowDragText=_this.getRowDragText(_this.column);return rowDragText?rowDragText(dragItem,dragItemCount):dragItemCount===1?_this.cellValueFn():"".concat(dragItemCount," ").concat(translate("rowDragRows","rows"))},getDragItem:function(){return _this.getDragItem()},dragStartPixels,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)},RowDragComp2.prototype.removeDragSource=function(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null},__decorate$2f([Autowired("beans")],RowDragComp2.prototype,"beans",void 0),__decorate$2f([PostConstruct],RowDragComp2.prototype,"postConstruct",null),__decorate$2f([PreDestroy],RowDragComp2.prototype,"removeDragSource",null),RowDragComp2}(Component),VisibilityStrategy=function(_super){__extends$2z(VisibilityStrategy2,_super);function VisibilityStrategy2(parent,rowNode,column){var _this=_super.call(this)||this;return _this.parent=parent,_this.rowNode=rowNode,_this.column=column,_this}return __name(VisibilityStrategy2,"VisibilityStrategy"),VisibilityStrategy2.prototype.setDisplayedOrVisible=function(neverDisplayed){var displayedOptions={skipAriaHidden:!0};if(neverDisplayed)this.parent.setDisplayed(!1,displayedOptions);else{var shown=!0,isShownSometimes=!1;this.column&&(shown=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),isShownSometimes=isFunction(this.column.getColDef().rowDrag)),isShownSometimes?(this.parent.setDisplayed(!0,displayedOptions),this.parent.setVisible(shown,displayedOptions)):(this.parent.setDisplayed(shown,displayedOptions),this.parent.setVisible(!0,displayedOptions))}},VisibilityStrategy2}(BeanStub),NonManagedVisibilityStrategy=function(_super){__extends$2z(NonManagedVisibilityStrategy2,_super);function NonManagedVisibilityStrategy2(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __name(NonManagedVisibilityStrategy2,"NonManagedVisibilityStrategy"),NonManagedVisibilityStrategy2.prototype.postConstruct=function(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()},NonManagedVisibilityStrategy2.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},NonManagedVisibilityStrategy2.prototype.workOutVisibility=function(){var neverDisplayed=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(neverDisplayed)},__decorate$2f([PostConstruct],NonManagedVisibilityStrategy2.prototype,"postConstruct",null),NonManagedVisibilityStrategy2}(VisibilityStrategy),ManagedVisibilityStrategy=function(_super){__extends$2z(ManagedVisibilityStrategy2,_super);function ManagedVisibilityStrategy2(parent,beans,rowNode,column){var _this=_super.call(this,parent,rowNode,column)||this;return _this.beans=beans,_this}return __name(ManagedVisibilityStrategy2,"ManagedVisibilityStrategy"),ManagedVisibilityStrategy2.prototype.postConstruct=function(){this.addManagedListener(this.beans.eventService,Events.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()},ManagedVisibilityStrategy2.prototype.onSuppressRowDrag=function(){this.workOutVisibility()},ManagedVisibilityStrategy2.prototype.workOutVisibility=function(){var gridBodyCon=this.beans.ctrlsService.getGridBodyCtrl(),rowDragFeature=gridBodyCon.getRowDragFeature(),shouldPreventRowMove=rowDragFeature&&rowDragFeature.shouldPreventRowMove(),suppressRowDrag=this.gridOptionsService.get("suppressRowDrag"),hasExternalDropZones=this.beans.dragAndDropService.hasExternalDropZones(),neverDisplayed=shouldPreventRowMove&&!hasExternalDropZones||suppressRowDrag;this.setDisplayedOrVisible(neverDisplayed)},__decorate$2f([PostConstruct],ManagedVisibilityStrategy2.prototype,"postConstruct",null),ManagedVisibilityStrategy2}(VisibilityStrategy),__extends$2y=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$h=__name(function(){return __assign$h=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$h.apply(this,arguments)},"__assign$h"),__decorate$2e=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2e"),GroupCellRendererCtrl=function(_super){__extends$2y(GroupCellRendererCtrl2,_super);function GroupCellRendererCtrl2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(GroupCellRendererCtrl2,"GroupCellRendererCtrl"),GroupCellRendererCtrl2.prototype.init=function(comp,eGui,eCheckbox,eExpanded,eContracted,compClass,params){var _a,_b,_c,_d;this.params=params,this.eGui=eGui,this.eCheckbox=eCheckbox,this.eExpanded=eExpanded,this.eContracted=eContracted,this.comp=comp,this.compClass=compClass;var node=params.node;params.value;var colDef=params.colDef,topLevelFooter=this.isTopLevelFooter();if(!topLevelFooter){var embeddedRowMismatch=this.isEmbeddedRowMismatch();if(embeddedRowMismatch)return;if(node.footer&&this.gridOptionsService.get("groupHideOpenParents")){var showRowGroup=colDef&&colDef.showRowGroup,rowGroupColumnId=node.rowGroupColumn&&node.rowGroupColumn.getColId();if(showRowGroup!==rowGroupColumnId)return}}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!topLevelFooter){var showingFooterTotal=params.node.footer&&params.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(function(c){var _a2;return c.getColId()===((_a2=params.colDef)===null||_a2===void 0?void 0:_a2.showRowGroup)}),isAlwaysShowing=this.gridOptionsService.get("groupDisplayType")!="multipleColumns"||this.gridOptionsService.get("treeData"),showOpenGroupValue=isAlwaysShowing||this.gridOptionsService.get("showOpenedGroup")&&!params.node.footer&&(!params.node.group||params.node.rowGroupIndex!=null&&params.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(function(c){var _a2;return c.getColId()===((_a2=params.colDef)===null||_a2===void 0?void 0:_a2.showRowGroup)})),leafWithValues=!node.group&&(((_a=this.params.colDef)===null||_a===void 0?void 0:_a.field)||((_b=this.params.colDef)===null||_b===void 0?void 0:_b.valueGetter)),isExpandable=this.isExpandable(),showPivotModeLeafValue=this.columnModel.isPivotMode()&&node.leafGroup&&((_c=node.rowGroupColumn)===null||_c===void 0?void 0:_c.getColId())===((_d=params.column)===null||_d===void 0?void 0:_d.getColDef().showRowGroup),canSkipRenderingCell=!this.showingValueForOpenedParent&&!isExpandable&&!leafWithValues&&!showOpenGroupValue&&!showingFooterTotal&&!showPivotModeLeafValue;if(canSkipRenderingCell)return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()},GroupCellRendererCtrl2.prototype.getCellAriaRole=function(){var _a,_b,colDefAriaRole=(_a=this.params.colDef)===null||_a===void 0?void 0:_a.cellAriaRole,columnColDefAriaRole=(_b=this.params.column)===null||_b===void 0?void 0:_b.getColDef().cellAriaRole;return colDefAriaRole||columnColDefAriaRole||"gridcell"},GroupCellRendererCtrl2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.expandListener=null},GroupCellRendererCtrl2.prototype.refreshAriaExpanded=function(){var _a=this.params,node=_a.node,eGridCell=_a.eGridCell;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable()){removeAriaExpanded(eGridCell);return}var listener=__name(function(){setAriaExpanded(eGridCell,!!node.expanded)},"listener");this.expandListener=this.addManagedListener(node,RowNode.EVENT_EXPANDED_CHANGED,listener)||null,listener()},GroupCellRendererCtrl2.prototype.isTopLevelFooter=function(){if(!this.gridOptionsService.get("groupIncludeTotalFooter")||this.params.value!=null||this.params.node.level!=-1)return!1;var colDef=this.params.colDef,doingFullWidth=colDef==null;if(doingFullWidth||colDef.showRowGroup===!0)return!0;var rowGroupCols=this.columnModel.getRowGroupColumns();if(!rowGroupCols||rowGroupCols.length===0)return!0;var firstRowGroupCol=rowGroupCols[0];return firstRowGroupCol.getId()===colDef.showRowGroup},GroupCellRendererCtrl2.prototype.isEmbeddedRowMismatch=function(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;var pinnedLeftCell=this.params.pinned==="left",pinnedRightCell=this.params.pinned==="right",bodyCell=!pinnedLeftCell&&!pinnedRightCell;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!pinnedRightCell:!bodyCell:this.columnModel.isPinningLeft()?!pinnedLeftCell:!bodyCell},GroupCellRendererCtrl2.prototype.findDisplayedGroupNode=function(){var column=this.params.column,rowNode=this.params.node;if(this.showingValueForOpenedParent)for(var pointer=rowNode.parent;pointer!=null;){if(pointer.rowGroupColumn&&column.isRowGroupDisplayed(pointer.rowGroupColumn.getId())){this.displayedGroupNode=pointer;break}pointer=pointer.parent}missing(this.displayedGroupNode)&&(this.displayedGroupNode=rowNode)},GroupCellRendererCtrl2.prototype.setupShowingValueForOpenedParent=function(){var rowNode=this.params.node,column=this.params.column;if(!this.gridOptionsService.get("groupHideOpenParents")){this.showingValueForOpenedParent=!1;return}if(!rowNode.groupData){this.showingValueForOpenedParent=!1;return}var showingGroupNode=rowNode.rowGroupColumn!=null;if(showingGroupNode){var keyOfGroupingColumn=rowNode.rowGroupColumn.getId(),configuredToShowThisGroupLevel=column.isRowGroupDisplayed(keyOfGroupingColumn);if(configuredToShowThisGroupLevel){this.showingValueForOpenedParent=!1;return}}var valPresent=rowNode.groupData[column.getId()]!=null;this.showingValueForOpenedParent=valPresent},GroupCellRendererCtrl2.prototype.addValueElement=function(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())},GroupCellRendererCtrl2.prototype.addGroupValue=function(){var _a,paramsAdjusted=this.adjustParamsWithDetailsFromRelatedColumn(),innerCompDetails=this.getInnerCompDetails(paramsAdjusted),valueFormatted=paramsAdjusted.valueFormatted,value=paramsAdjusted.value,valueWhenNoRenderer=valueFormatted;if(valueWhenNoRenderer==null){var isGroupColForNode=this.displayedGroupNode.rowGroupColumn&&((_a=this.params.column)===null||_a===void 0?void 0:_a.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));if(this.displayedGroupNode.key===""&&this.displayedGroupNode.group&&isGroupColForNode){var localeTextFunc=this.localeService.getLocaleTextFunc();valueWhenNoRenderer=localeTextFunc("blanks","(Blanks)")}else valueWhenNoRenderer=value??null}this.comp.setInnerRenderer(innerCompDetails,valueWhenNoRenderer)},GroupCellRendererCtrl2.prototype.adjustParamsWithDetailsFromRelatedColumn=function(){var relatedColumn=this.displayedGroupNode.rowGroupColumn,column=this.params.column;if(!relatedColumn)return this.params;var notFullWidth=column!=null;if(notFullWidth){var showingThisRowGroup=column.isRowGroupDisplayed(relatedColumn.getId());if(!showingThisRowGroup)return this.params}var params=this.params,_a=this.params,value=_a.value,node=_a.node,valueFormatted=this.valueFormatterService.formatValue(relatedColumn,node,value),paramsAdjusted=__assign$h(__assign$h({},params),{valueFormatted});return paramsAdjusted},GroupCellRendererCtrl2.prototype.addFooterValue=function(){var footerValueGetter=this.params.footerValueGetter,footerValue="";if(footerValueGetter){var paramsClone=cloneObject(this.params);paramsClone.value=this.params.value,typeof footerValueGetter=="function"?footerValue=footerValueGetter(paramsClone):typeof footerValueGetter=="string"?footerValue=this.expressionService.evaluate(footerValueGetter,paramsClone):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else{var localeTextFunc=this.localeService.getLocaleTextFunc(),footerTotalPrefix=localeTextFunc("footerTotal","Total");footerValue=footerTotalPrefix+" "+(this.params.value!=null?this.params.value:"")}var innerCompDetails=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(innerCompDetails,footerValue)},GroupCellRendererCtrl2.prototype.getInnerCompDetails=function(params){var _this=this;if(params.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),params);var innerCompDetails=this.userComponentFactory.getInnerRendererDetails(params,params),isGroupRowRenderer=__name(function(details){return details&&details.componentClass==_this.compClass},"isGroupRowRenderer");if(innerCompDetails&&!isGroupRowRenderer(innerCompDetails))return innerCompDetails;var relatedColumn=this.displayedGroupNode.rowGroupColumn,relatedColDef=relatedColumn?relatedColumn.getColDef():void 0;if(relatedColDef){var relatedCompDetails=this.userComponentFactory.getCellRendererDetails(relatedColDef,params);if(relatedCompDetails&&!isGroupRowRenderer(relatedCompDetails))return relatedCompDetails;if(isGroupRowRenderer(relatedCompDetails)&&relatedColDef.cellRendererParams&&relatedColDef.cellRendererParams.innerRenderer){var res=this.userComponentFactory.getInnerRendererDetails(relatedColDef.cellRendererParams,params);return res}}},GroupCellRendererCtrl2.prototype.addChildCount=function(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())},GroupCellRendererCtrl2.prototype.updateChildCount=function(){var allChildrenCount=this.displayedGroupNode.allChildrenCount,showingGroupForThisNode=this.isShowRowGroupForThisRow(),showCount=showingGroupForThisNode&&allChildrenCount!=null&&allChildrenCount>=0,countString=showCount?"(".concat(allChildrenCount,")"):"";this.comp.setChildCount(countString)},GroupCellRendererCtrl2.prototype.isShowRowGroupForThisRow=function(){if(this.gridOptionsService.get("treeData"))return!0;var rowGroupColumn=this.displayedGroupNode.rowGroupColumn;if(!rowGroupColumn)return!1;var column=this.params.column,thisColumnIsInterested=column==null||column.isRowGroupDisplayed(rowGroupColumn.getId());return thisColumnIsInterested},GroupCellRendererCtrl2.prototype.addExpandAndContract=function(){var _a,params=this.params,eExpandedIcon=createIconNoSpan("groupExpanded",this.gridOptionsService,null),eContractedIcon=createIconNoSpan("groupContracted",this.gridOptionsService,null);eExpandedIcon&&this.eExpanded.appendChild(eExpandedIcon),eContractedIcon&&this.eContracted.appendChild(eContractedIcon);var eGroupCell=params.eGridCell,isDoubleClickEdit=((_a=this.params.column)===null||_a===void 0?void 0:_a.isCellEditable(params.node))&&this.gridOptionsService.get("enableGroupEdit");!isDoubleClickEdit&&this.isExpandable()&&!params.suppressDoubleClickExpand&&this.addManagedListener(eGroupCell,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(eGroupCell,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(params.node,RowNode.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();var expandableChangedListener=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_ALL_CHILDREN_COUNT_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_MASTER_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_GROUP_CHANGED,expandableChangedListener),this.addManagedListener(this.displayedGroupNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,expandableChangedListener)},GroupCellRendererCtrl2.prototype.onExpandClicked=function(mouseEvent){isStopPropagationForAgGrid(mouseEvent)||(stopPropagationForAgGrid(mouseEvent),this.onExpandOrContract(mouseEvent))},GroupCellRendererCtrl2.prototype.onExpandOrContract=function(e){var rowNode=this.displayedGroupNode,nextExpandState=!rowNode.expanded;!nextExpandState&&rowNode.sticky&&this.scrollToStickyNode(rowNode),rowNode.setExpanded(nextExpandState,e)},GroupCellRendererCtrl2.prototype.scrollToStickyNode=function(rowNode){var gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),scrollFeature=gridBodyCtrl.getScrollFeature();scrollFeature.setVerticalScrollPosition(rowNode.rowTop-rowNode.stickyRowTop)},GroupCellRendererCtrl2.prototype.isExpandable=function(){if(this.showingValueForOpenedParent)return!0;var rowNode=this.displayedGroupNode,reducedLeafNode=this.columnModel.isPivotMode()&&rowNode.leafGroup,expandableGroup=rowNode.isExpandable()&&!rowNode.footer&&!reducedLeafNode;if(!expandableGroup)return!1;var column=this.params.column,displayingForOneColumnOnly=column!=null&&typeof column.getColDef().showRowGroup=="string";if(displayingForOneColumnOnly){var showing=this.isShowRowGroupForThisRow();return showing}return!0},GroupCellRendererCtrl2.prototype.showExpandAndContractIcons=function(){var _a=this,params=_a.params,displayedGroup=_a.displayedGroupNode,columnModel=_a.columnModel,node=params.node,isExpandable=this.isExpandable();if(isExpandable){var expanded=this.showingValueForOpenedParent?!0:node.expanded;this.comp.setExpandedDisplayed(expanded),this.comp.setContractedDisplayed(!expanded)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);var pivotMode=columnModel.isPivotMode(),pivotModeAndLeafGroup=pivotMode&&displayedGroup.leafGroup,addExpandableCss=isExpandable&&!pivotModeAndLeafGroup,isTotalFooterNode=node.footer&&node.level===-1;this.comp.addOrRemoveCssClass("ag-cell-expandable",addExpandableCss),this.comp.addOrRemoveCssClass("ag-row-group",addExpandableCss),pivotMode?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",pivotModeAndLeafGroup):isTotalFooterNode||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!addExpandableCss)},GroupCellRendererCtrl2.prototype.onRowNodeIsExpandableChanged=function(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()},GroupCellRendererCtrl2.prototype.setupIndent=function(){var node=this.params.node,suppressPadding=this.params.suppressPadding;suppressPadding||(this.addManagedListener(node,RowNode.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())},GroupCellRendererCtrl2.prototype.setIndent=function(){if(!this.gridOptionsService.get("groupHideOpenParents")){var params=this.params,rowNode=params.node,fullWithRow=!!params.colDef,treeData=this.gridOptionsService.get("treeData"),manyDimensionThisColumn=!fullWithRow||treeData||params.colDef.showRowGroup===!0,paddingCount=manyDimensionThisColumn?rowNode.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+paddingCount,this.comp.addOrRemoveCssClass(this.indentClass,!0)}},GroupCellRendererCtrl2.prototype.addFullWidthRowDraggerIfNeeded=function(){var _this=this;if(!(!this.params.fullWidth||!this.params.rowDrag)){var rowDragComp=new RowDragComp(function(){return _this.params.value},this.params.node);this.createManagedBean(rowDragComp,this.context),this.eGui.insertAdjacentElement("afterbegin",rowDragComp.getGui())}},GroupCellRendererCtrl2.prototype.isUserWantsSelected=function(){var paramsCheckbox=this.params.checkbox;return typeof paramsCheckbox=="function"||paramsCheckbox===!0},GroupCellRendererCtrl2.prototype.addCheckboxIfNeeded=function(){var _this=this,rowNode=this.displayedGroupNode,checkboxNeeded=this.isUserWantsSelected()&&!rowNode.footer&&!rowNode.rowPinned&&!rowNode.detail;if(checkboxNeeded){var cbSelectionComponent_1=new CheckboxSelectionComponent;this.getContext().createBean(cbSelectionComponent_1),cbSelectionComponent_1.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(cbSelectionComponent_1.getGui()),this.addDestroyFunc(function(){return _this.getContext().destroyBean(cbSelectionComponent_1)})}this.comp.setCheckboxVisible(checkboxNeeded)},GroupCellRendererCtrl2.prototype.onKeyDown=function(event){var isEnterKey=event.key===KeyCode.ENTER;if(!(!isEnterKey||this.params.suppressEnterExpand)){var cellEditable=this.params.column&&this.params.column.isCellEditable(this.params.node);cellEditable||this.onExpandOrContract(event)}},GroupCellRendererCtrl2.prototype.onCellDblClicked=function(mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent)){var targetIsExpandIcon=isElementInEventPath(this.eExpanded,mouseEvent)||isElementInEventPath(this.eContracted,mouseEvent);targetIsExpandIcon||this.onExpandOrContract(mouseEvent)}},__decorate$2e([Autowired("expressionService")],GroupCellRendererCtrl2.prototype,"expressionService",void 0),__decorate$2e([Autowired("valueFormatterService")],GroupCellRendererCtrl2.prototype,"valueFormatterService",void 0),__decorate$2e([Autowired("columnModel")],GroupCellRendererCtrl2.prototype,"columnModel",void 0),__decorate$2e([Autowired("userComponentFactory")],GroupCellRendererCtrl2.prototype,"userComponentFactory",void 0),__decorate$2e([Autowired("ctrlsService")],GroupCellRendererCtrl2.prototype,"ctrlsService",void 0),GroupCellRendererCtrl2}(BeanStub),__extends$2x=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2d=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2d"),GroupCellRenderer=function(_super){__extends$2x(GroupCellRenderer2,_super);function GroupCellRenderer2(){return _super.call(this,GroupCellRenderer2.TEMPLATE)||this}return __name(GroupCellRenderer2,"GroupCellRenderer"),GroupCellRenderer2.prototype.init=function(params){var _this=this,compProxy={setInnerRenderer:function(compDetails,valueToDisplay){return _this.setRenderDetails(compDetails,valueToDisplay)},setChildCount:function(count){return _this.eChildCount.textContent=count},addOrRemoveCssClass:function(cssClass,value){return _this.addOrRemoveCssClass(cssClass,value)},setContractedDisplayed:function(expanded){return setDisplayed(_this.eContracted,expanded)},setExpandedDisplayed:function(expanded){return setDisplayed(_this.eExpanded,expanded)},setCheckboxVisible:function(visible){return _this.eCheckbox.classList.toggle("ag-invisible",!visible)}},ctrl=this.createManagedBean(new GroupCellRendererCtrl),fullWidth=!params.colDef,eGui=this.getGui();ctrl.init(compProxy,eGui,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,params),fullWidth&&setAriaRole(eGui,ctrl.getCellAriaRole())},GroupCellRenderer2.prototype.setRenderDetails=function(compDetails,valueToDisplay){var _this=this;if(compDetails){var componentPromise=compDetails.newAgStackInstance();if(!componentPromise)return;componentPromise.then(function(comp){if(comp){var destroyComp=__name(function(){return _this.context.destroyBean(comp)},"destroyComp");_this.isAlive()?(_this.eValue.appendChild(comp.getGui()),_this.addDestroyFunc(destroyComp)):destroyComp()}})}else this.eValue.innerText=valueToDisplay},GroupCellRenderer2.prototype.destroy=function(){this.getContext().destroyBean(this.innerCellRenderer),_super.prototype.destroy.call(this)},GroupCellRenderer2.prototype.refresh=function(){return!1},GroupCellRenderer2.TEMPLATE=`<span class="ag-cell-wrapper">
            <span class="ag-group-expanded" ref="eExpanded"></span>
            <span class="ag-group-contracted" ref="eContracted"></span>
            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>
            <span class="ag-group-value" ref="eValue"></span>
            <span class="ag-group-child-count" ref="eChildCount"></span>
        </span>`,__decorate$2d([RefSelector("eExpanded")],GroupCellRenderer2.prototype,"eExpanded",void 0),__decorate$2d([RefSelector("eContracted")],GroupCellRenderer2.prototype,"eContracted",void 0),__decorate$2d([RefSelector("eCheckbox")],GroupCellRenderer2.prototype,"eCheckbox",void 0),__decorate$2d([RefSelector("eValue")],GroupCellRenderer2.prototype,"eValue",void 0),__decorate$2d([RefSelector("eChildCount")],GroupCellRenderer2.prototype,"eChildCount",void 0),GroupCellRenderer2}(Component),__extends$2w=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2c=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2c"),LoadingCellRenderer=function(_super){__extends$2w(LoadingCellRenderer2,_super);function LoadingCellRenderer2(){return _super.call(this,LoadingCellRenderer2.TEMPLATE)||this}return __name(LoadingCellRenderer2,"LoadingCellRenderer"),LoadingCellRenderer2.prototype.init=function(params){params.node.failedLoad?this.setupFailed():this.setupLoading()},LoadingCellRenderer2.prototype.setupFailed=function(){var localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingError","ERR")},LoadingCellRenderer2.prototype.setupLoading=function(){var eLoadingIcon=createIconNoSpan("groupLoading",this.gridOptionsService,null);eLoadingIcon&&this.eLoadingIcon.appendChild(eLoadingIcon);var localeTextFunc=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=localeTextFunc("loadingOoo","Loading")},LoadingCellRenderer2.prototype.refresh=function(params){return!1},LoadingCellRenderer2.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingCellRenderer2.TEMPLATE=`<div class="ag-loading">
            <span class="ag-loading-icon" ref="eLoadingIcon"></span>
            <span class="ag-loading-text" ref="eLoadingText"></span>
        </div>`,__decorate$2c([RefSelector("eLoadingIcon")],LoadingCellRenderer2.prototype,"eLoadingIcon",void 0),__decorate$2c([RefSelector("eLoadingText")],LoadingCellRenderer2.prototype,"eLoadingText",void 0),LoadingCellRenderer2}(Component),__extends$2v=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),LoadingOverlayComponent$1=function(_super){__extends$2v(LoadingOverlayComponent2,_super);function LoadingOverlayComponent2(){return _super.call(this)||this}return __name(LoadingOverlayComponent2,"LoadingOverlayComponent"),LoadingOverlayComponent2.prototype.destroy=function(){_super.prototype.destroy.call(this)},LoadingOverlayComponent2.prototype.init=function(params){var _this=this,customTemplate=this.gridOptionsService.get("overlayLoadingTemplate");if(this.setTemplate(customTemplate??LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE),!customTemplate){var localeTextFunc_1=this.localeService.getLocaleTextFunc();setTimeout(function(){_this.getGui().textContent=localeTextFunc_1("loadingOoo","Loading...")})}},LoadingOverlayComponent2.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>',LoadingOverlayComponent2}(Component),__extends$2u=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),NoRowsOverlayComponent$1=function(_super){__extends$2u(NoRowsOverlayComponent2,_super);function NoRowsOverlayComponent2(){return _super.call(this)||this}return __name(NoRowsOverlayComponent2,"NoRowsOverlayComponent"),NoRowsOverlayComponent2.prototype.destroy=function(){_super.prototype.destroy.call(this)},NoRowsOverlayComponent2.prototype.init=function(params){var _this=this,customTemplate=this.gridOptionsService.get("overlayNoRowsTemplate");if(this.setTemplate(customTemplate??NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE),!customTemplate){var localeTextFunc_1=this.localeService.getLocaleTextFunc();setTimeout(function(){_this.getGui().textContent=localeTextFunc_1("noRowsToShow","No Rows To Show")})}},NoRowsOverlayComponent2.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>',NoRowsOverlayComponent2}(Component),__extends$2t=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipComponent$1=function(_super){__extends$2t(TooltipComponent2,_super);function TooltipComponent2(){return _super.call(this,'<div class="ag-tooltip"></div>')||this}return __name(TooltipComponent2,"TooltipComponent"),TooltipComponent2.prototype.init=function(params){var value=params.value;this.getGui().textContent=escapeString(value,!0)},TooltipComponent2}(PopupComponent),__extends$2s=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),NumberCellEditorInput=function(){function NumberCellEditorInput2(){}return __name(NumberCellEditorInput2,"NumberCellEditorInput"),NumberCellEditorInput2.prototype.getTemplate=function(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'},NumberCellEditorInput2.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,params.max!=null&&eInput.setMax(params.max),params.min!=null&&eInput.setMin(params.min),params.precision!=null&&eInput.setPrecision(params.precision),params.step!=null&&eInput.setStep(params.step);var inputEl=eInput.getInputElement();params.preventStepping?eInput.addManagedListener(inputEl,"keydown",this.preventStepping):params.showStepperButtons&&inputEl.classList.add("ag-number-field-input-stepper")},NumberCellEditorInput2.prototype.preventStepping=function(e){(e.key===KeyCode.UP||e.key===KeyCode.DOWN)&&e.preventDefault()},NumberCellEditorInput2.prototype.getValue=function(){var value=this.eInput.getValue();if(!exists(value)&&!exists(this.params.value))return this.params.value;var parsedValue=this.params.parseValue(value);if(parsedValue==null)return parsedValue;if(typeof parsedValue=="string"){if(parsedValue==="")return null;parsedValue=Number(parsedValue)}return isNaN(parsedValue)?null:parsedValue},NumberCellEditorInput2.prototype.getStartValue=function(){return this.params.value},NumberCellEditorInput2}(),NumberCellEditor=function(_super){__extends$2s(NumberCellEditor2,_super);function NumberCellEditor2(){return _super.call(this,new NumberCellEditorInput)||this}return __name(NumberCellEditor2,"NumberCellEditor"),NumberCellEditor2}(SimpleCellEditor),__extends$2r=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),DateCellEditorInput=function(){function DateCellEditorInput2(){}return __name(DateCellEditorInput2,"DateCellEditorInput"),DateCellEditorInput2.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},DateCellEditorInput2.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,params.min!=null&&eInput.setMin(params.min),params.max!=null&&eInput.setMax(params.max),params.step!=null&&eInput.setStep(params.step)},DateCellEditorInput2.prototype.getValue=function(){var value=this.eInput.getDate();return!exists(value)&&!exists(this.params.value)?this.params.value:value??null},DateCellEditorInput2.prototype.getStartValue=function(){var value=this.params.value;if(value instanceof Date)return serialiseDate(value,!1)},DateCellEditorInput2}(),DateCellEditor=function(_super){__extends$2r(DateCellEditor2,_super);function DateCellEditor2(){return _super.call(this,new DateCellEditorInput)||this}return __name(DateCellEditor2,"DateCellEditor"),DateCellEditor2}(SimpleCellEditor),__extends$2q=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2b=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2b"),DateStringCellEditorInput=function(){function DateStringCellEditorInput2(getDataTypeService){this.getDataTypeService=getDataTypeService}return __name(DateStringCellEditorInput2,"DateStringCellEditorInput"),DateStringCellEditorInput2.prototype.getTemplate=function(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'},DateStringCellEditorInput2.prototype.init=function(eInput,params){this.eInput=eInput,this.params=params,params.min!=null&&eInput.setMin(params.min),params.max!=null&&eInput.setMax(params.max),params.step!=null&&eInput.setStep(params.step)},DateStringCellEditorInput2.prototype.getValue=function(){var value=this.formatDate(this.eInput.getDate());return!exists(value)&&!exists(this.params.value)?this.params.value:this.params.parseValue(value??"")},DateStringCellEditorInput2.prototype.getStartValue=function(){var _a,_b;return serialiseDate((_b=this.parseDate((_a=this.params.value)!==null&&_a!==void 0?_a:void 0))!==null&&_b!==void 0?_b:null,!1)},DateStringCellEditorInput2.prototype.parseDate=function(value){return this.getDataTypeService().getDateParserFunction(this.params.column)(value)},DateStringCellEditorInput2.prototype.formatDate=function(value){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(value)},DateStringCellEditorInput2}(),DateStringCellEditor=function(_super){__extends$2q(DateStringCellEditor2,_super);function DateStringCellEditor2(){var _this=_super.call(this,new DateStringCellEditorInput(function(){return _this.dataTypeService}))||this;return _this}return __name(DateStringCellEditor2,"DateStringCellEditor"),__decorate$2b([Autowired("dataTypeService")],DateStringCellEditor2.prototype,"dataTypeService",void 0),DateStringCellEditor2}(SimpleCellEditor),__extends$2p=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2a=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2a"),CheckboxCellRenderer=function(_super){__extends$2p(CheckboxCellRenderer2,_super);function CheckboxCellRenderer2(){return _super.call(this,CheckboxCellRenderer2.TEMPLATE)||this}return __name(CheckboxCellRenderer2,"CheckboxCellRenderer"),CheckboxCellRenderer2.prototype.init=function(params){var _this=this;this.params=params,this.updateCheckbox(params);var inputEl=this.eCheckbox.getInputElement();inputEl.setAttribute("tabindex","-1"),setAriaLive(inputEl,"polite"),this.addManagedListener(inputEl,"click",function(event){if(stopPropagationForAgGrid(event),!_this.eCheckbox.isDisabled()){var isSelected=_this.eCheckbox.getValue();_this.onCheckboxChanged(isSelected)}}),this.addManagedListener(inputEl,"dblclick",function(event){stopPropagationForAgGrid(event)});var eDocument=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",function(event){if(event.key===KeyCode.SPACE&&!_this.eCheckbox.isDisabled()){_this.params.eGridCell===eDocument.activeElement&&_this.eCheckbox.toggle();var isSelected=_this.eCheckbox.getValue();_this.onCheckboxChanged(isSelected),event.preventDefault()}})},CheckboxCellRenderer2.prototype.refresh=function(params){return this.params=params,this.updateCheckbox(params),!0},CheckboxCellRenderer2.prototype.updateCheckbox=function(params){var _a,_b,_c,isSelected,displayed=!0;if(params.node.group&&params.column){var colId=params.column.getColId();colId.startsWith(GROUP_AUTO_COLUMN_ID)?isSelected=params.value==null||params.value===""?void 0:params.value==="true":params.node.aggData&&params.node.aggData[colId]!==void 0?isSelected=(_a=params.value)!==null&&_a!==void 0?_a:void 0:displayed=!1}else isSelected=(_b=params.value)!==null&&_b!==void 0?_b:void 0;if(!displayed){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(isSelected);var disabled=params.disabled!=null?params.disabled:!(!((_c=params.column)===null||_c===void 0)&&_c.isCellEditable(params.node));this.eCheckbox.setDisabled(disabled);var translate=this.localeService.getLocaleTextFunc(),stateName=getAriaCheckboxStateName(translate,isSelected),ariaLabel=disabled?stateName:"".concat(translate("ariaToggleCellValue","Press SPACE to toggle cell value")," (").concat(stateName,")");this.eCheckbox.setInputAriaLabel(ariaLabel)},CheckboxCellRenderer2.prototype.onCheckboxChanged=function(isSelected){var _a=this.params,column=_a.column,node=_a.node,rowIndex=_a.rowIndex,value=_a.value,eventStarted={type:Events.EVENT_CELL_EDITING_STARTED,column,colDef:column==null?void 0:column.getColDef(),data:node.data,node,rowIndex,rowPinned:node.rowPinned,value};this.eventService.dispatchEvent(eventStarted);var valueChanged=this.params.node.setDataValue(this.params.column,isSelected,"edit"),eventStopped={type:Events.EVENT_CELL_EDITING_STOPPED,column,colDef:column==null?void 0:column.getColDef(),data:node.data,node,rowIndex,rowPinned:node.rowPinned,value,oldValue:value,newValue:isSelected,valueChanged};this.eventService.dispatchEvent(eventStopped)},CheckboxCellRenderer2.TEMPLATE=`
        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
        </div>`,__decorate$2a([RefSelector("eCheckbox")],CheckboxCellRenderer2.prototype,"eCheckbox",void 0),CheckboxCellRenderer2}(Component),__extends$2o=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$29=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$29"),CheckboxCellEditor=function(_super){__extends$2o(CheckboxCellEditor2,_super);function CheckboxCellEditor2(){return _super.call(this,`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>
            </div>`)||this}return __name(CheckboxCellEditor2,"CheckboxCellEditor"),CheckboxCellEditor2.prototype.init=function(params){var _this=this,_a;this.params=params;var isSelected=(_a=params.value)!==null&&_a!==void 0?_a:void 0;this.eCheckbox.setValue(isSelected);var inputEl=this.eCheckbox.getInputElement();inputEl.setAttribute("tabindex","-1"),this.setAriaLabel(isSelected),this.addManagedListener(this.eCheckbox,Events.EVENT_FIELD_VALUE_CHANGED,function(event){return _this.setAriaLabel(event.selected)})},CheckboxCellEditor2.prototype.getValue=function(){return this.eCheckbox.getValue()},CheckboxCellEditor2.prototype.focusIn=function(){this.eCheckbox.getFocusableElement().focus()},CheckboxCellEditor2.prototype.afterGuiAttached=function(){this.params.cellStartedEdit&&this.focusIn()},CheckboxCellEditor2.prototype.isPopup=function(){return!1},CheckboxCellEditor2.prototype.setAriaLabel=function(isSelected){var translate=this.localeService.getLocaleTextFunc(),stateName=getAriaCheckboxStateName(translate,isSelected),ariaLabel=translate("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel("".concat(ariaLabel," (").concat(stateName,")"))},__decorate$29([RefSelector("eCheckbox")],CheckboxCellEditor2.prototype,"eCheckbox",void 0),CheckboxCellEditor2}(PopupComponent),__extends$2n=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgMenuItemRenderer=function(_super){__extends$2n(AgMenuItemRenderer2,_super);function AgMenuItemRenderer2(){var _this=_super.call(this)||this;return _this.setTemplate("<div></div>"),_this}return __name(AgMenuItemRenderer2,"AgMenuItemRenderer"),AgMenuItemRenderer2.prototype.init=function(params){var _a;this.params=params,this.cssClassPrefix=(_a=this.params.cssClassPrefix)!==null&&_a!==void 0?_a:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()},AgMenuItemRenderer2.prototype.configureDefaults=function(){return!0},AgMenuItemRenderer2.prototype.addIcon=function(){if(!this.params.isCompact){var icon=loadTemplate('<span ref="eIcon" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("icon"),'" role="presentation"></span>'));this.params.checked?icon.appendChild(createIconNoSpan("check",this.gridOptionsService)):this.params.icon&&(isNodeOrElement(this.params.icon)?icon.appendChild(this.params.icon):typeof this.params.icon=="string"?icon.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(icon)}},AgMenuItemRenderer2.prototype.addName=function(){var name=loadTemplate('<span ref="eName" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("text"),'">').concat(this.params.name||"","</span>"));this.getGui().appendChild(name)},AgMenuItemRenderer2.prototype.addShortcut=function(){if(!this.params.isCompact){var shortcut=loadTemplate('<span ref="eShortcut" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("shortcut"),'">').concat(this.params.shortcut||"","</span>"));this.getGui().appendChild(shortcut)}},AgMenuItemRenderer2.prototype.addSubMenu=function(){var pointer=loadTemplate('<span ref="ePopupPointer" class="'.concat(this.getClassName("part")," ").concat(this.getClassName("popup-pointer"),'"></span>')),eGui=this.getGui();if(this.params.subMenu){var iconName=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";setAriaExpanded(eGui,!1),pointer.appendChild(createIconNoSpan(iconName,this.gridOptionsService))}eGui.appendChild(pointer)},AgMenuItemRenderer2.prototype.getClassName=function(suffix){return"".concat(this.cssClassPrefix,"-").concat(suffix)},AgMenuItemRenderer2.prototype.destroy=function(){_super.prototype.destroy.call(this)},AgMenuItemRenderer2}(Component),__extends$2m=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$28=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$28"),__read$t=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$t"),__spreadArray$o=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$o"),UserComponentRegistry=function(_super){__extends$2m(UserComponentRegistry2,_super);function UserComponentRegistry2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.agGridDefaults={agDateInput:DefaultDateComponent,agColumnHeader:HeaderComp,agColumnGroupHeader:HeaderGroupComp,agSortIndicator:SortIndicatorComp,agTextColumnFloatingFilter:TextFloatingFilter,agNumberColumnFloatingFilter:NumberFloatingFilter,agDateColumnFloatingFilter:DateFloatingFilter,agReadOnlyFloatingFilter:ReadOnlyFloatingFilter,agAnimateShowChangeCellRenderer:AnimateShowChangeCellRenderer,agAnimateSlideCellRenderer:AnimateSlideCellRenderer,agGroupCellRenderer:GroupCellRenderer,agGroupRowRenderer:GroupCellRenderer,agLoadingCellRenderer:LoadingCellRenderer,agCheckboxCellRenderer:CheckboxCellRenderer,agCellEditor:TextCellEditor,agTextCellEditor:TextCellEditor,agNumberCellEditor:NumberCellEditor,agDateCellEditor:DateCellEditor,agDateStringCellEditor:DateStringCellEditor,agSelectCellEditor:SelectCellEditor,agLargeTextCellEditor:LargeTextCellEditor,agCheckboxCellEditor:CheckboxCellEditor,agTextColumnFilter:TextFilter,agNumberColumnFilter:NumberFilter,agDateColumnFilter:DateFilter,agLoadingOverlay:LoadingOverlayComponent$1,agNoRowsOverlay:NoRowsOverlayComponent$1,agTooltipComponent:TooltipComponent$1,agMenuItem:AgMenuItemRenderer},_this.enterpriseAgDefaultCompsModule={agSetColumnFilter:ModuleNames.SetFilterModule,agSetColumnFloatingFilter:ModuleNames.SetFilterModule,agMultiColumnFilter:ModuleNames.MultiFilterModule,agMultiColumnFloatingFilter:ModuleNames.MultiFilterModule,agGroupColumnFilter:ModuleNames.RowGroupingModule,agGroupColumnFloatingFilter:ModuleNames.RowGroupingModule,agRichSelect:ModuleNames.RichSelectModule,agRichSelectCellEditor:ModuleNames.RichSelectModule,agDetailCellRenderer:ModuleNames.MasterDetailModule,agSparklineCellRenderer:ModuleNames.SparklinesModule},_this.jsComps={},_this}return __name(UserComponentRegistry2,"UserComponentRegistry"),UserComponentRegistry2.prototype.init=function(){var _this=this;this.gridOptions.components!=null&&iterateObject(this.gridOptions.components,function(key,component){return _this.registerJsComponent(key,component)})},UserComponentRegistry2.prototype.registerDefaultComponent=function(name,component){if(this.agGridDefaults[name]){console.error("Trying to overwrite a default component. You should call registerComponent");return}this.agGridDefaults[name]=component},UserComponentRegistry2.prototype.registerJsComponent=function(name,component){this.jsComps[name]=component},UserComponentRegistry2.prototype.retrieve=function(propertyName,name){var _this=this,createResult=__name(function(component,componentFromFramework){return{componentFromFramework,component}},"createResult"),registeredViaFrameworkComp=this.getFrameworkOverrides().frameworkComponent(name,this.gridOptions.components);if(registeredViaFrameworkComp!=null)return createResult(registeredViaFrameworkComp,!0);var jsComponent=this.jsComps[name];if(jsComponent){var isFwkComp=this.getFrameworkOverrides().isFrameworkComponent(jsComponent);return createResult(jsComponent,isFwkComp)}var defaultComponent=this.agGridDefaults[name];if(defaultComponent)return createResult(defaultComponent,!1);var moduleForComponent=this.enterpriseAgDefaultCompsModule[name];return moduleForComponent?ModuleRegistry.__assertRegistered(moduleForComponent,"AG Grid '".concat(propertyName,"' component: ").concat(name),this.context.getGridId()):doOnce(function(){_this.warnAboutMissingComponent(propertyName,name)},"MissingComp"+name),null},UserComponentRegistry2.prototype.warnAboutMissingComponent=function(propertyName,componentName){var validComponents=__spreadArray$o(__spreadArray$o([],__read$t(Object.keys(this.agGridDefaults).filter(function(k){return!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(k)})),!1),__read$t(Object.keys(this.jsComps)),!1),suggestions=fuzzySuggestions(componentName,validComponents,!0,.8).values;console.warn("AG Grid: Could not find '".concat(componentName,`' component. It was configured as "`).concat(propertyName,": '").concat(componentName,`'" but it wasn't found in the list of registered components.`)),suggestions.length>0&&console.warn("         Did you mean: [".concat(suggestions.slice(0,3),"]?")),console.warn("If using a custom component check it has been registered as described in: ".concat(this.getFrameworkOverrides().getDocLink("components/")))},__decorate$28([Autowired("gridOptions")],UserComponentRegistry2.prototype,"gridOptions",void 0),__decorate$28([PostConstruct],UserComponentRegistry2.prototype,"init",null),UserComponentRegistry2=__decorate$28([Bean("userComponentRegistry")],UserComponentRegistry2),UserComponentRegistry2}(BeanStub),DateComponent={propertyName:"dateComponent",cellRenderer:!1},HeaderComponent={propertyName:"headerComponent",cellRenderer:!1},HeaderGroupComponent={propertyName:"headerGroupComponent",cellRenderer:!1},CellRendererComponent={propertyName:"cellRenderer",cellRenderer:!0},CellEditorComponent={propertyName:"cellEditor",cellRenderer:!1},InnerRendererComponent={propertyName:"innerRenderer",cellRenderer:!0},LoadingOverlayComponent={propertyName:"loadingOverlayComponent",cellRenderer:!1},NoRowsOverlayComponent={propertyName:"noRowsOverlayComponent",cellRenderer:!1},TooltipComponent={propertyName:"tooltipComponent",cellRenderer:!1},FilterComponent={propertyName:"filter",cellRenderer:!1},FloatingFilterComponent={propertyName:"floatingFilterComponent",cellRenderer:!1},ToolPanelComponent={propertyName:"toolPanel",cellRenderer:!1},StatusPanelComponent={propertyName:"statusPanel",cellRenderer:!1},FullWidth={propertyName:"fullWidthCellRenderer",cellRenderer:!0},FullWidthLoading={propertyName:"loadingCellRenderer",cellRenderer:!0},FullWidthGroup={propertyName:"groupRowRenderer",cellRenderer:!0},FullWidthDetail={propertyName:"detailCellRenderer",cellRenderer:!0},MenuItemComponent={propertyName:"menuItem",cellRenderer:!1},FloatingFilterMapper=function(){function FloatingFilterMapper2(){}return __name(FloatingFilterMapper2,"FloatingFilterMapper"),FloatingFilterMapper2.getFloatingFilterType=function(filterType){return this.filterToFloatingFilterMapping[filterType]},FloatingFilterMapper2.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},FloatingFilterMapper2}(),__extends$2l=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$27=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$27"),UserComponentFactory=function(_super){__extends$2l(UserComponentFactory2,_super);function UserComponentFactory2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(UserComponentFactory2,"UserComponentFactory"),UserComponentFactory2.prototype.getHeaderCompDetails=function(colDef,params){return this.getCompDetails(colDef,HeaderComponent,"agColumnHeader",params)},UserComponentFactory2.prototype.getHeaderGroupCompDetails=function(params){var colGroupDef=params.columnGroup.getColGroupDef();return this.getCompDetails(colGroupDef,HeaderGroupComponent,"agColumnGroupHeader",params)},UserComponentFactory2.prototype.getFullWidthCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidth,null,params,!0)},UserComponentFactory2.prototype.getFullWidthLoadingCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthLoading,"agLoadingCellRenderer",params,!0)},UserComponentFactory2.prototype.getFullWidthGroupCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthGroup,"agGroupRowRenderer",params,!0)},UserComponentFactory2.prototype.getFullWidthDetailCellRendererDetails=function(params){return this.getCompDetails(this.gridOptions,FullWidthDetail,"agDetailCellRenderer",params,!0)},UserComponentFactory2.prototype.getInnerRendererDetails=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory2.prototype.getFullWidthGroupRowInnerCellRenderer=function(def,params){return this.getCompDetails(def,InnerRendererComponent,null,params)},UserComponentFactory2.prototype.getCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory2.prototype.getCellEditorDetails=function(def,params){return this.getCompDetails(def,CellEditorComponent,"agCellEditor",params,!0)},UserComponentFactory2.prototype.getFilterDetails=function(def,params,defaultFilter){return this.getCompDetails(def,FilterComponent,defaultFilter,params,!0)},UserComponentFactory2.prototype.getDateCompDetails=function(params){return this.getCompDetails(this.gridOptions,DateComponent,"agDateInput",params,!0)},UserComponentFactory2.prototype.getLoadingOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,LoadingOverlayComponent,"agLoadingOverlay",params,!0)},UserComponentFactory2.prototype.getNoRowsOverlayCompDetails=function(params){return this.getCompDetails(this.gridOptions,NoRowsOverlayComponent,"agNoRowsOverlay",params,!0)},UserComponentFactory2.prototype.getTooltipCompDetails=function(params){return this.getCompDetails(params.colDef,TooltipComponent,"agTooltipComponent",params,!0)},UserComponentFactory2.prototype.getSetFilterCellRendererDetails=function(def,params){return this.getCompDetails(def,CellRendererComponent,null,params)},UserComponentFactory2.prototype.getFloatingFilterCompDetails=function(def,params,defaultFloatingFilter){return this.getCompDetails(def,FloatingFilterComponent,defaultFloatingFilter,params)},UserComponentFactory2.prototype.getToolPanelCompDetails=function(toolPanelDef,params){return this.getCompDetails(toolPanelDef,ToolPanelComponent,null,params,!0)},UserComponentFactory2.prototype.getStatusPanelCompDetails=function(def,params){return this.getCompDetails(def,StatusPanelComponent,null,params,!0)},UserComponentFactory2.prototype.getMenuItemCompDetails=function(def,params){return this.getCompDetails(def,MenuItemComponent,"agMenuItem",params,!0)},UserComponentFactory2.prototype.getCompDetails=function(defObject,type,defaultName,params,mandatory){var _this=this;mandatory===void 0&&(mandatory=!1);var propertyName=type.propertyName,cellRenderer=type.cellRenderer,_a=this.getCompKeys(defObject,type,params),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp,paramsFromSelector=_a.paramsFromSelector,popupFromSelector=_a.popupFromSelector,popupPositionFromSelector=_a.popupPositionFromSelector,lookupFromRegistry=__name(function(key){var item=_this.userComponentRegistry.retrieve(propertyName,key);item&&(jsComp=item.componentFromFramework?void 0:item.component,fwComp=item.componentFromFramework?item.component:void 0)},"lookupFromRegistry");if(compName!=null&&lookupFromRegistry(compName),jsComp==null&&fwComp==null&&defaultName!=null&&lookupFromRegistry(defaultName),jsComp&&cellRenderer&&!this.agComponentUtils.doesImplementIComponent(jsComp)&&(jsComp=this.agComponentUtils.adaptFunction(propertyName,jsComp)),!jsComp&&!fwComp){mandatory&&console.error("AG Grid: Could not find component ".concat(compName,", did you forget to configure this component?"));return}var paramsMerged=this.mergeParamsWithApplicationProvidedParams(defObject,type,params,paramsFromSelector),componentFromFramework=jsComp==null,componentClass=jsComp||fwComp;return{componentFromFramework,componentClass,params:paramsMerged,type,popupFromSelector,popupPositionFromSelector,newAgStackInstance:function(){return _this.newAgStackInstance(componentClass,componentFromFramework,paramsMerged,type)}}},UserComponentFactory2.prototype.getCompKeys=function(defObject,type,params){var _this=this,propertyName=type.propertyName,compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector;if(defObject){var defObjectAny=defObject,selectorFunc=defObjectAny[propertyName+"Selector"],selectorRes=selectorFunc?selectorFunc(params):null,assignComp=__name(function(providedJsComp){if(typeof providedJsComp=="string")compName=providedJsComp;else if(providedJsComp!=null&&providedJsComp!==!0){var isFwkComp=_this.getFrameworkOverrides().isFrameworkComponent(providedJsComp);isFwkComp?fwComp=providedJsComp:jsComp=providedJsComp}},"assignComp");selectorRes?(assignComp(selectorRes.component),paramsFromSelector=selectorRes.params,popupFromSelector=selectorRes.popup,popupPositionFromSelector=selectorRes.popupPosition):assignComp(defObjectAny[propertyName])}return{compName,jsComp,fwComp,paramsFromSelector,popupFromSelector,popupPositionFromSelector}},UserComponentFactory2.prototype.newAgStackInstance=function(ComponentClass,componentFromFramework,params,type){var propertyName=type.propertyName,jsComponent=!componentFromFramework,instance;if(jsComponent)instance=new ComponentClass;else{var thisComponentConfig=this.componentMetadataProvider.retrieve(propertyName);instance=this.frameworkComponentWrapper.wrap(ComponentClass,thisComponentConfig.mandatoryMethodList,thisComponentConfig.optionalMethodList,type)}var deferredInit=this.initComponent(instance,params);return deferredInit==null?AgPromise.resolve(instance):deferredInit.then(function(){return instance})},UserComponentFactory2.prototype.mergeParamsWithApplicationProvidedParams=function(defObject,type,paramsFromGrid,paramsFromSelector){paramsFromSelector===void 0&&(paramsFromSelector=null);var params=this.gridOptionsService.getGridCommonParams();mergeDeep(params,paramsFromGrid);var defObjectAny=defObject,userParams=defObjectAny&&defObjectAny[type.propertyName+"Params"];if(typeof userParams=="function"){var userParamsFromFunc=userParams(paramsFromGrid);mergeDeep(params,userParamsFromFunc)}else typeof userParams=="object"&&mergeDeep(params,userParams);return mergeDeep(params,paramsFromSelector),params},UserComponentFactory2.prototype.initComponent=function(component,params){if(this.context.createBean(component),component.init!=null)return component.init(params)},UserComponentFactory2.prototype.getDefaultFloatingFilterType=function(def,getFromDefault){if(def==null)return null;var defaultFloatingFilterType=null,_a=this.getCompKeys(def,FilterComponent),compName=_a.compName,jsComp=_a.jsComp,fwComp=_a.fwComp;if(compName)defaultFloatingFilterType=FloatingFilterMapper.getFloatingFilterType(compName);else{var usingDefaultFilter=jsComp==null&&fwComp==null&&def.filter===!0;usingDefaultFilter&&(defaultFloatingFilterType=getFromDefault())}return defaultFloatingFilterType},__decorate$27([Autowired("gridOptions")],UserComponentFactory2.prototype,"gridOptions",void 0),__decorate$27([Autowired("agComponentUtils")],UserComponentFactory2.prototype,"agComponentUtils",void 0),__decorate$27([Autowired("componentMetadataProvider")],UserComponentFactory2.prototype,"componentMetadataProvider",void 0),__decorate$27([Autowired("userComponentRegistry")],UserComponentFactory2.prototype,"userComponentRegistry",void 0),__decorate$27([Optional("frameworkComponentWrapper")],UserComponentFactory2.prototype,"frameworkComponentWrapper",void 0),UserComponentFactory2=__decorate$27([Bean("userComponentFactory")],UserComponentFactory2),UserComponentFactory2}(BeanStub),ColDefUtil=function(){function ColDefUtil2(){}return __name(ColDefUtil2,"ColDefUtil"),ColDefUtil2.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0},ColDefUtil2.ALL_PROPERTIES=Object.keys(ColDefUtil2.ColDefPropertyMap),ColDefUtil2}(),ExcelFactoryMode;(function(ExcelFactoryMode2){ExcelFactoryMode2[ExcelFactoryMode2.SINGLE_SHEET=0]="SINGLE_SHEET",ExcelFactoryMode2[ExcelFactoryMode2.MULTI_SHEET=1]="MULTI_SHEET"})(ExcelFactoryMode||(ExcelFactoryMode={}));var __extends$2k=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$26=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$26"),DragService=function(_super){__extends$2k(DragService2,_super);function DragService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.dragEndFunctions=[],_this.dragSources=[],_this}return __name(DragService2,"DragService"),DragService2.prototype.removeAllListeners=function(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0},DragService2.prototype.removeListener=function(dragSourceAndListener){var element=dragSourceAndListener.dragSource.eElement,mouseDownListener=dragSourceAndListener.mouseDownListener;if(element.removeEventListener("mousedown",mouseDownListener),dragSourceAndListener.touchEnabled){var touchStartListener=dragSourceAndListener.touchStartListener;element.removeEventListener("touchstart",touchStartListener,{passive:!0})}},DragService2.prototype.removeDragSource=function(params){var dragSourceAndListener=this.dragSources.find(function(item){return item.dragSource===params});dragSourceAndListener&&(this.removeListener(dragSourceAndListener),removeFromArray(this.dragSources,dragSourceAndListener))},DragService2.prototype.isDragging=function(){return this.dragging},DragService2.prototype.addDragSource=function(params){var _this=this,mouseListener=this.onMouseDown.bind(this,params),eElement=params.eElement,includeTouch=params.includeTouch,stopPropagationForTouch=params.stopPropagationForTouch;eElement.addEventListener("mousedown",mouseListener);var touchListener=null,suppressTouch=this.gridOptionsService.get("suppressTouch");includeTouch&&!suppressTouch&&(touchListener=__name(function(touchEvent){isFocusableFormField(touchEvent.target)||(touchEvent.cancelable&&(touchEvent.preventDefault(),stopPropagationForTouch&&touchEvent.stopPropagation()),_this.onTouchStart(params,touchEvent))},"touchListener"),eElement.addEventListener("touchstart",touchListener,{passive:!1})),this.dragSources.push({dragSource:params,mouseDownListener:mouseListener,touchStartListener:touchListener,touchEnabled:!!includeTouch})},DragService2.prototype.getStartTarget=function(){return this.startTarget},DragService2.prototype.onTouchStart=function(params,touchEvent){var _this=this;this.currentDragParams=params,this.dragging=!1;var touch=touchEvent.touches[0];this.touchLastTime=touch,this.touchStart=touch;var touchMoveEvent=__name(function(e){return _this.onTouchMove(e,params.eElement)},"touchMoveEvent"),touchEndEvent=__name(function(e){return _this.onTouchUp(e,params.eElement)},"touchEndEvent"),documentTouchMove=__name(function(e){e.cancelable&&e.preventDefault()},"documentTouchMove"),target=touchEvent.target,events=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:documentTouchMove,options:{passive:!1}},{target,type:"touchmove",listener:touchMoveEvent,options:{passive:!0}},{target,type:"touchend",listener:touchEndEvent,options:{passive:!0}},{target,type:"touchcancel",listener:touchEndEvent,options:{passive:!0}}];this.addTemporaryEvents(events),params.dragStartPixels===0&&this.onCommonMove(touch,this.touchStart,params.eElement)},DragService2.prototype.onMouseDown=function(params,mouseEvent){var _this=this,e=mouseEvent;if(!(params.skipMouseEvent&&params.skipMouseEvent(mouseEvent))&&!e._alreadyProcessedByDragService&&(e._alreadyProcessedByDragService=!0,mouseEvent.button===0)){this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.currentDragParams=params,this.dragging=!1,this.mouseStartEvent=mouseEvent,this.startTarget=mouseEvent.target;var mouseMoveEvent=__name(function(event){return _this.onMouseMove(event,params.eElement)},"mouseMoveEvent"),mouseUpEvent=__name(function(event){return _this.onMouseUp(event,params.eElement)},"mouseUpEvent"),contextEvent=__name(function(event){return event.preventDefault()},"contextEvent"),target=this.gridOptionsService.getRootNode(),events=[{target,type:"mousemove",listener:mouseMoveEvent},{target,type:"mouseup",listener:mouseUpEvent},{target,type:"contextmenu",listener:contextEvent}];this.addTemporaryEvents(events),params.dragStartPixels===0&&this.onMouseMove(mouseEvent,params.eElement)}},DragService2.prototype.addTemporaryEvents=function(events){events.forEach(function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.addEventListener(type,listener,options)}),this.dragEndFunctions.push(function(){events.forEach(function(currentEvent){var target=currentEvent.target,type=currentEvent.type,listener=currentEvent.listener,options=currentEvent.options;target.removeEventListener(type,listener,options)})})},DragService2.prototype.isEventNearStartEvent=function(currentEvent,startEvent){var dragStartPixels=this.currentDragParams.dragStartPixels,requiredPixelDiff=exists(dragStartPixels)?dragStartPixels:4;return areEventsNear(currentEvent,startEvent,requiredPixelDiff)},DragService2.prototype.getFirstActiveTouch=function(touchList){for(var i=0;i<touchList.length;i++)if(touchList[i].identifier===this.touchStart.identifier)return touchList[i];return null},DragService2.prototype.onCommonMove=function(currentEvent,startEvent,el){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(currentEvent,startEvent))return;this.dragging=!0;var event_1={type:Events.EVENT_DRAG_STARTED,target:el};this.eventService.dispatchEvent(event_1),this.currentDragParams.onDragStart(startEvent),this.currentDragParams.onDragging(startEvent)}this.currentDragParams.onDragging(currentEvent)},DragService2.prototype.onTouchMove=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.touches);touch&&this.onCommonMove(touch,this.touchStart,el)},DragService2.prototype.onMouseMove=function(mouseEvent,el){var _a;if(isBrowserSafari()){var eDocument=this.gridOptionsService.getDocument();(_a=eDocument.getSelection())===null||_a===void 0||_a.removeAllRanges()}this.shouldPreventMouseEvent(mouseEvent)&&mouseEvent.preventDefault(),this.onCommonMove(mouseEvent,this.mouseStartEvent,el)},DragService2.prototype.shouldPreventMouseEvent=function(mouseEvent){var isEnableCellTextSelect=this.gridOptionsService.get("enableCellTextSelection"),isMouseMove=mouseEvent.type==="mousemove";return isEnableCellTextSelect&&isMouseMove&&mouseEvent.cancelable&&this.mouseEventService.isEventFromThisGrid(mouseEvent)&&!this.isOverFormFieldElement(mouseEvent)},DragService2.prototype.isOverFormFieldElement=function(mouseEvent){var el=mouseEvent.target,tagName=el==null?void 0:el.tagName.toLocaleLowerCase();return!!(tagName!=null&&tagName.match("^a$|textarea|input|select|button"))},DragService2.prototype.onTouchUp=function(touchEvent,el){var touch=this.getFirstActiveTouch(touchEvent.changedTouches);touch||(touch=this.touchLastTime),this.onUpCommon(touch,el)},DragService2.prototype.onMouseUp=function(mouseEvent,el){this.onUpCommon(mouseEvent,el)},DragService2.prototype.onUpCommon=function(eventOrTouch,el){if(this.dragging){this.dragging=!1,this.currentDragParams.onDragStop(eventOrTouch);var event_2={type:Events.EVENT_DRAG_STOPPED,target:el};this.eventService.dispatchEvent(event_2)}this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(function(func){return func()}),this.dragEndFunctions.length=0},__decorate$26([Autowired("mouseEventService")],DragService2.prototype,"mouseEventService",void 0),__decorate$26([PreDestroy],DragService2.prototype,"removeAllListeners",null),DragService2=__decorate$26([Bean("dragService")],DragService2),DragService2}(BeanStub),AutoScrollService=function(){function AutoScrollService2(params){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=params.scrollContainer,this.scrollHorizontally=params.scrollAxis.indexOf("x")!==-1,this.scrollVertically=params.scrollAxis.indexOf("y")!==-1,this.scrollByTick=params.scrollByTick!=null?params.scrollByTick:20,params.onScrollCallback&&(this.onScrollCallback=params.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=params.getVerticalPosition,this.setVerticalPosition=params.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=params.getHorizontalPosition,this.setHorizontalPosition=params.setHorizontalPosition),this.shouldSkipVerticalScroll=params.shouldSkipVerticalScroll||function(){return!1},this.shouldSkipHorizontalScroll=params.shouldSkipHorizontalScroll||function(){return!1}}return __name(AutoScrollService2,"AutoScrollService"),AutoScrollService2.prototype.check=function(mouseEvent,forceSkipVerticalScroll){forceSkipVerticalScroll===void 0&&(forceSkipVerticalScroll=!1);var skipVerticalScroll=forceSkipVerticalScroll||this.shouldSkipVerticalScroll();if(!(skipVerticalScroll&&this.shouldSkipHorizontalScroll())){var rect=this.scrollContainer.getBoundingClientRect(),scrollTick=this.scrollByTick;this.tickLeft=mouseEvent.clientX<rect.left+scrollTick,this.tickRight=mouseEvent.clientX>rect.right-scrollTick,this.tickUp=mouseEvent.clientY<rect.top+scrollTick&&!skipVerticalScroll,this.tickDown=mouseEvent.clientY>rect.bottom-scrollTick&&!skipVerticalScroll,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}},AutoScrollService2.prototype.ensureTickingStarted=function(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)},AutoScrollService2.prototype.doTick=function(){this.tickCount++;var tickAmount;if(tickAmount=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){var vScrollPosition=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(vScrollPosition-tickAmount),this.tickDown&&this.setVerticalPosition(vScrollPosition+tickAmount)}if(this.scrollHorizontally){var hScrollPosition=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(hScrollPosition-tickAmount),this.tickRight&&this.setHorizontalPosition(hScrollPosition+tickAmount)}this.onScrollCallback&&this.onScrollCallback()},AutoScrollService2.prototype.ensureCleared=function(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)},AutoScrollService2}(),__extends$2j=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$25=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$25"),LIST_ITEM_HOVERED="ag-list-item-hovered",VirtualListDragFeature=function(_super){__extends$2j(VirtualListDragFeature2,_super);function VirtualListDragFeature2(comp,virtualList,params){var _this=_super.call(this)||this;return _this.comp=comp,_this.virtualList=virtualList,_this.params=params,_this.currentDragValue=null,_this.lastHoveredListItem=null,_this}return __name(VirtualListDragFeature2,"VirtualListDragFeature"),VirtualListDragFeature2.prototype.postConstruct=function(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()},VirtualListDragFeature2.prototype.listItemDragStart=function(event){this.currentDragValue=this.params.getCurrentDragValue(event),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)},VirtualListDragFeature2.prototype.listItemDragEnd=function(){var _this=this;window.setTimeout(function(){_this.currentDragValue=null,_this.moveBlocked=!1},10)},VirtualListDragFeature2.prototype.createDropTarget=function(){var _this=this,dropTarget={isInterestedIn:function(type){return type===_this.params.dragSourceType},getIconName:function(){return _this.moveBlocked?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE},getContainer:function(){return _this.comp.getGui()},onDragging:function(e){return _this.onDragging(e)},onDragStop:function(){return _this.onDragStop()},onDragLeave:function(){return _this.onDragLeave()}};this.dragAndDropService.addDropTarget(dropTarget)},VirtualListDragFeature2.prototype.createAutoScrollService=function(){var virtualListGui=this.virtualList.getGui();this.autoScrollService=new AutoScrollService({scrollContainer:virtualListGui,scrollAxis:"y",getVerticalPosition:function(){return virtualListGui.scrollTop},setVerticalPosition:function(position){return virtualListGui.scrollTop=position}})},VirtualListDragFeature2.prototype.onDragging=function(e){if(!(!this.currentDragValue||this.moveBlocked)){var hoveredListItem=this.getListDragItem(e),comp=this.virtualList.getComponentAt(hoveredListItem.rowIndex);if(comp){var el=comp.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===hoveredListItem.rowIndex&&this.lastHoveredListItem.position===hoveredListItem.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=hoveredListItem,radioCssClass(el,LIST_ITEM_HOVERED),radioCssClass(el,"ag-item-highlight-".concat(hoveredListItem.position)))}}},VirtualListDragFeature2.prototype.getListDragItem=function(e){var virtualListGui=this.virtualList.getGui(),paddingTop=parseFloat(window.getComputedStyle(virtualListGui).paddingTop),rowHeight=this.virtualList.getRowHeight(),scrollTop=this.virtualList.getScrollTop(),rowIndex=Math.max(0,(e.y-paddingTop+scrollTop)/rowHeight),maxLen=this.params.getNumRows(this.comp)-1,normalizedRowIndex=Math.min(maxLen,rowIndex)|0;return{rowIndex:normalizedRowIndex,position:Math.round(rowIndex)>rowIndex||rowIndex>maxLen?"bottom":"top",component:this.virtualList.getComponentAt(normalizedRowIndex)}},VirtualListDragFeature2.prototype.onDragStop=function(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())},VirtualListDragFeature2.prototype.onDragLeave=function(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()},VirtualListDragFeature2.prototype.clearHoveredItems=function(){var virtualListGui=this.virtualList.getGui();virtualListGui.querySelectorAll(".".concat(LIST_ITEM_HOVERED)).forEach(function(el){[LIST_ITEM_HOVERED,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(function(cls){el.classList.remove(cls)})}),this.lastHoveredListItem=null},__decorate$25([Autowired("dragAndDropService")],VirtualListDragFeature2.prototype,"dragAndDropService",void 0),__decorate$25([PostConstruct],VirtualListDragFeature2.prototype,"postConstruct",null),VirtualListDragFeature2}(BeanStub),RowHighlightPosition;(function(RowHighlightPosition2){RowHighlightPosition2[RowHighlightPosition2.Above=0]="Above",RowHighlightPosition2[RowHighlightPosition2.Below=1]="Below"})(RowHighlightPosition||(RowHighlightPosition={}));var __decorate$24=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$24");function unwrapUserComp(comp){var compAsAny=comp,isProxy=compAsAny!=null&&compAsAny.getFrameworkComponentInstance!=null;return isProxy?compAsAny.getFrameworkComponentInstance():comp}__name(unwrapUserComp,"unwrapUserComp");var GridApi=function(){function GridApi2(){this.detailGridInfoMap={},this.destroyCalled=!1}return __name(GridApi2,"GridApi"),GridApi2.prototype.init=function(){var _this=this;switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel;break}this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()})},GridApi2.prototype.__getAlignedGridService=function(){return this.alignedGridsService},GridApi2.prototype.__getContext=function(){return this.context},GridApi2.prototype.__getModel=function(){return this.rowModel},GridApi2.prototype.getGridId=function(){return this.context.getGridId()},GridApi2.prototype.addDetailGridInfo=function(id,gridInfo){this.detailGridInfoMap[id]=gridInfo},GridApi2.prototype.removeDetailGridInfo=function(id){this.detailGridInfoMap[id]=void 0},GridApi2.prototype.getDetailGridInfo=function(id){return this.detailGridInfoMap[id]},GridApi2.prototype.forEachDetailGridInfo=function(callback){var index=0;iterateObject(this.detailGridInfoMap,function(id,gridInfo){exists(gridInfo)&&(callback(gridInfo,index),index++)})},GridApi2.prototype.getDataAsCsv=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(params)},GridApi2.prototype.exportDataAsCsv=function(params){ModuleRegistry.__assertRegistered(ModuleNames.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(params)},GridApi2.prototype.assertNotExcelMultiSheet=function(method,params){return ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api."+method,this.context.getGridId())?this.excelCreator.getFactoryMode()===ExcelFactoryMode.MULTI_SHEET?(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),!1):!0:!1},GridApi2.prototype.getDataAsExcel=function(params){if(this.assertNotExcelMultiSheet("getDataAsExcel",params))return this.excelCreator.getDataAsExcel(params)},GridApi2.prototype.exportDataAsExcel=function(params){this.assertNotExcelMultiSheet("exportDataAsExcel",params)&&this.excelCreator.exportDataAsExcel(params)},GridApi2.prototype.getSheetDataForExcel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(ExcelFactoryMode.MULTI_SHEET),this.excelCreator.getSheetDataForExcel(params)},GridApi2.prototype.getMultipleSheetsAsExcel=function(params){if(ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(params)},GridApi2.prototype.exportMultipleSheetsAsExcel=function(params){ModuleRegistry.__assertRegistered(ModuleNames.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(params)},GridApi2.prototype.setGridAriaProperty=function(property,value){if(property){var eGrid=this.ctrlsService.getGridBodyCtrl().getGui(),ariaProperty="aria-".concat(property);value===null?eGrid.removeAttribute(ariaProperty):eGrid.setAttribute(ariaProperty,value)}},GridApi2.prototype.logMissingRowModel=function(apiMethod){for(var requiredRowModels=[],_i=1;_i<arguments.length;_i++)requiredRowModels[_i-1]=arguments[_i];console.error("AG Grid: api.".concat(apiMethod," can only be called when gridOptions.rowModelType is ").concat(requiredRowModels.join(" or ")))},GridApi2.prototype.logDeprecation=function(version,apiMethod,replacement,message){warnOnce("Since ".concat(version," api.").concat(apiMethod," is deprecated. Please use ").concat(replacement," instead. ").concat(message))},GridApi2.prototype.getPinnedTopRowCount=function(){return this.pinnedRowModel.getPinnedTopRowCount()},GridApi2.prototype.getPinnedBottomRowCount=function(){return this.pinnedRowModel.getPinnedBottomRowCount()},GridApi2.prototype.getPinnedTopRow=function(index){return this.pinnedRowModel.getPinnedTopRow(index)},GridApi2.prototype.getPinnedBottomRow=function(index){return this.pinnedRowModel.getPinnedBottomRow(index)},GridApi2.prototype.expireValueCache=function(){this.valueCache.expire()},GridApi2.prototype.getVerticalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()},GridApi2.prototype.getHorizontalPixelRange=function(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()},GridApi2.prototype.refreshCells=function(params){var _this=this;params===void 0&&(params={}),this.frameworkOverrides.wrapIncoming(function(){return _this.rowRenderer.refreshCells(params)})},GridApi2.prototype.flashCells=function(params){var _this=this;params===void 0&&(params={});var warning=__name(function(prop){return warnOnce("Since v31.1 api.flashCells parameter '".concat(prop,"Delay' is deprecated. Please use '").concat(prop,"Duration' instead."))},"warning");exists(params.fadeDelay)&&warning("fade"),exists(params.flashDelay)&&warning("flash"),this.frameworkOverrides.wrapIncoming(function(){return _this.rowRenderer.flashCells(params)})},GridApi2.prototype.redrawRows=function(params){var _this=this;params===void 0&&(params={});var rowNodes=params?params.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(function(){return _this.rowRenderer.redrawRows(rowNodes)})},GridApi2.prototype.refreshHeader=function(){var _this=this;this.frameworkOverrides.wrapIncoming(function(){return _this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(c){return c.refresh()})})},GridApi2.prototype.isAnyFilterPresent=function(){return this.filterManager.isAnyFilterPresent()},GridApi2.prototype.isColumnFilterPresent=function(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()},GridApi2.prototype.isQuickFilterPresent=function(){return this.filterManager.isQuickFilterPresent()},GridApi2.prototype.getModel=function(){return warnOnce("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel},GridApi2.prototype.setRowNodeExpanded=function(rowNode,expanded,expandParents){this.expansionService.setRowNodeExpanded(rowNode,expanded,expandParents)},GridApi2.prototype.onGroupExpandedOrCollapsed=function(){if(missing(this.clientSideRowModel)){this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide");return}this.expansionService.onGroupExpandedOrCollapsed()},GridApi2.prototype.refreshClientSideRowModel=function(step){if(missing(this.clientSideRowModel)){this.logMissingRowModel("refreshClientSideRowModel","clientSide");return}this.clientSideRowModel.refreshModel(step)},GridApi2.prototype.isAnimationFrameQueueEmpty=function(){return this.animationFrameService.isQueueEmpty()},GridApi2.prototype.flushAllAnimationFrames=function(){this.animationFrameService.flushAllFrames()},GridApi2.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},GridApi2.prototype.getSizesForCurrentTheme=function(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}},GridApi2.prototype.expandAll=function(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")},GridApi2.prototype.collapseAll=function(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")},GridApi2.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){this.rowRenderer.addRenderedRowListener(eventName,rowIndex,callback)},GridApi2.prototype.getQuickFilter=function(){return this.gos.get("quickFilterText")},GridApi2.prototype.getAdvancedFilterModel=function(){return ModuleRegistry.__assertRegistered(ModuleNames.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null},GridApi2.prototype.setAdvancedFilterModel=function(advancedFilterModel){this.filterManager.setAdvancedFilterModel(advancedFilterModel)},GridApi2.prototype.showAdvancedFilterBuilder=function(){ModuleRegistry.__assertRegistered(ModuleNames.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")},GridApi2.prototype.setNodesSelected=function(params){var allNodesValid=params.nodes.every(function(node){return node.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):node.id===void 0?(console.warn("AG Grid: cannot select node until id for node is known"),!1):!0});if(allNodesValid){var nodes=params.nodes,source=params.source,newValue=params.newValue,nodesAsRowNode=nodes;this.selectionService.setNodesSelected({nodes:nodesAsRowNode,source:source??"api",newValue})}},GridApi2.prototype.selectAll=function(source){source===void 0&&(source="apiSelectAll"),this.selectionService.selectAllRowNodes({source})},GridApi2.prototype.deselectAll=function(source){source===void 0&&(source="apiSelectAll"),this.selectionService.deselectAllRowNodes({source})},GridApi2.prototype.selectAllFiltered=function(source){source===void 0&&(source="apiSelectAllFiltered"),this.selectionService.selectAllRowNodes({source,justFiltered:!0})},GridApi2.prototype.deselectAllFiltered=function(source){source===void 0&&(source="apiSelectAllFiltered"),this.selectionService.deselectAllRowNodes({source,justFiltered:!0})},GridApi2.prototype.getServerSideSelectionState=function(){return missing(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()},GridApi2.prototype.setServerSideSelectionState=function(state){if(missing(this.serverSideRowModel)){this.logMissingRowModel("setServerSideSelectionState","serverSide");return}this.selectionService.setSelectionState(state,"api")},GridApi2.prototype.selectAllOnCurrentPage=function(source){source===void 0&&(source="apiSelectAllCurrentPage"),this.selectionService.selectAllRowNodes({source,justCurrentPage:!0})},GridApi2.prototype.deselectAllOnCurrentPage=function(source){source===void 0&&(source="apiSelectAllCurrentPage"),this.selectionService.deselectAllRowNodes({source,justCurrentPage:!0})},GridApi2.prototype.showLoadingOverlay=function(){this.overlayService.showLoadingOverlay()},GridApi2.prototype.showNoRowsOverlay=function(){this.overlayService.showNoRowsOverlay()},GridApi2.prototype.hideOverlay=function(){this.overlayService.hideOverlay()},GridApi2.prototype.getSelectedNodes=function(){return this.selectionService.getSelectedNodes()},GridApi2.prototype.getSelectedRows=function(){return this.selectionService.getSelectedRows()},GridApi2.prototype.getBestCostNodeSelection=function(){if(missing(this.clientSideRowModel)){this.logMissingRowModel("getBestCostNodeSelection","clientSide");return}return this.selectionService.getBestCostNodeSelection()},GridApi2.prototype.getRenderedNodes=function(){return this.rowRenderer.getRenderedNodes()},GridApi2.prototype.ensureColumnVisible=function(key,position){var _this=this;position===void 0&&(position="auto"),this.frameworkOverrides.wrapIncoming(function(){return _this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(key,position)},"ensureVisible")},GridApi2.prototype.ensureIndexVisible=function(index,position){var _this=this;this.frameworkOverrides.wrapIncoming(function(){return _this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(index,position)},"ensureVisible")},GridApi2.prototype.ensureNodeVisible=function(nodeSelector,position){var _this=this;position===void 0&&(position=null),this.frameworkOverrides.wrapIncoming(function(){return _this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(nodeSelector,position)},"ensureVisible")},GridApi2.prototype.forEachLeafNode=function(callback){if(missing(this.clientSideRowModel)){this.logMissingRowModel("forEachLeafNode","clientSide");return}this.clientSideRowModel.forEachLeafNode(callback)},GridApi2.prototype.forEachNode=function(callback,includeFooterNodes){this.rowModel.forEachNode(callback,includeFooterNodes)},GridApi2.prototype.forEachNodeAfterFilter=function(callback){if(missing(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilter","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilter(callback)},GridApi2.prototype.forEachNodeAfterFilterAndSort=function(callback){if(missing(this.clientSideRowModel)){this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide");return}this.clientSideRowModel.forEachNodeAfterFilterAndSort(callback)},GridApi2.prototype.getFilterInstance=function(key,callback){return warnOnce("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(key,callback)},GridApi2.prototype.getColumnFilterInstance=function(key){return this.filterManager.getColumnFilterInstance(key)},GridApi2.prototype.destroyFilter=function(key){var column=this.columnModel.getPrimaryColumn(key);if(column)return this.filterManager.destroyFilter(column,"api")},GridApi2.prototype.getStatusPanel=function(key){if(ModuleRegistry.__assertRegistered(ModuleNames.StatusBarModule,"api.getStatusPanel",this.context.getGridId())){var comp=this.statusBarService.getStatusPanel(key);return unwrapUserComp(comp)}},GridApi2.prototype.getColumnDef=function(key){var column=this.columnModel.getPrimaryColumn(key);return column?column.getColDef():null},GridApi2.prototype.getColumnDefs=function(){return this.columnModel.getColumnDefs()},GridApi2.prototype.onFilterChanged=function(source){source===void 0&&(source="api"),this.filterManager.onFilterChanged({source})},GridApi2.prototype.onSortChanged=function(){this.sortController.onSortChanged("api")},GridApi2.prototype.setFilterModel=function(model){var _this=this;this.frameworkOverrides.wrapIncoming(function(){return _this.filterManager.setFilterModel(model)})},GridApi2.prototype.getFilterModel=function(){return this.filterManager.getFilterModel()},GridApi2.prototype.getColumnFilterModel=function(column){return this.filterManager.getColumnFilterModel(column)},GridApi2.prototype.setColumnFilterModel=function(column,model){return this.filterManager.setColumnFilterModel(column,model)},GridApi2.prototype.getFocusedCell=function(){return this.focusService.getFocusedCell()},GridApi2.prototype.clearFocusedCell=function(){return this.focusService.clearFocusedCell()},GridApi2.prototype.setFocusedCell=function(rowIndex,colKey,rowPinned){this.focusService.setFocusedCell({rowIndex,column:colKey,rowPinned,forceBrowserFocus:!0})},GridApi2.prototype.addRowDropZone=function(params){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(params)},GridApi2.prototype.removeRowDropZone=function(params){var activeDropTarget=this.dragAndDropService.findExternalZone(params);activeDropTarget&&this.dragAndDropService.removeDropTarget(activeDropTarget)},GridApi2.prototype.getRowDropZoneParams=function(events){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(events)},GridApi2.prototype.assertSideBarLoaded=function(apiMethod){return ModuleRegistry.__assertRegistered(ModuleNames.SideBarModule,"api."+apiMethod,this.context.getGridId())},GridApi2.prototype.isSideBarVisible=function(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()},GridApi2.prototype.setSideBarVisible=function(show){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(show)},GridApi2.prototype.setSideBarPosition=function(position){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(position)},GridApi2.prototype.openToolPanel=function(key){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(key,"api")},GridApi2.prototype.closeToolPanel=function(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")},GridApi2.prototype.getOpenedToolPanel=function(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null},GridApi2.prototype.refreshToolPanel=function(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()},GridApi2.prototype.isToolPanelShowing=function(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()},GridApi2.prototype.getToolPanelInstance=function(id){if(this.assertSideBarLoaded("getToolPanelInstance")){var comp=this.sideBarService.getSideBarComp().getToolPanelInstance(id);return unwrapUserComp(comp)}},GridApi2.prototype.getSideBar=function(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()},GridApi2.prototype.resetRowHeights=function(){if(exists(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive()){console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}this.clientSideRowModel.resetRowHeights()}},GridApi2.prototype.setRowCount=function(rowCount,maxRowFound){if(this.serverSideRowModel){if(this.columnModel.isRowGroupEmpty()){this.serverSideRowModel.setRowCount(rowCount,maxRowFound);return}console.error("AG Grid: setRowCount cannot be used while using row grouping.");return}if(this.infiniteRowModel){this.infiniteRowModel.setRowCount(rowCount,maxRowFound);return}this.logMissingRowModel("setRowCount","infinite","serverSide")},GridApi2.prototype.onRowHeightChanged=function(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()},GridApi2.prototype.getValue=function(colKey,rowNode){var column=this.columnModel.getPrimaryColumn(colKey);return missing(column)&&(column=this.columnModel.getGridColumn(colKey)),missing(column)?null:this.valueService.getValue(column,rowNode)},GridApi2.prototype.addEventListener=function(eventType,listener){this.apiEventService.addEventListener(eventType,listener)},GridApi2.prototype.addGlobalListener=function(listener){this.apiEventService.addGlobalListener(listener)},GridApi2.prototype.removeEventListener=function(eventType,listener){this.apiEventService.removeEventListener(eventType,listener)},GridApi2.prototype.removeGlobalListener=function(listener){this.apiEventService.removeGlobalListener(listener)},GridApi2.prototype.dispatchEvent=function(event){this.eventService.dispatchEvent(event)},GridApi2.prototype.destroy=function(){var preDestroyLink="See ".concat(this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed"));if(!this.destroyCalled){var event={type:Events.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(event),this.destroyCalled=!0;var gridCtrl=this.ctrlsService.getGridCtrl();gridCtrl&&gridCtrl.destroyGridUi(),this.context.destroy(),removeAllReferences(this,["isDestroyed"],preDestroyLink)}},GridApi2.prototype.isDestroyed=function(){return this.destroyCalled},GridApi2.prototype.resetQuickFilter=function(){this.filterManager.resetQuickFilterCache()},GridApi2.prototype.getCellRanges=function(){return this.rangeService?this.rangeService.getCellRanges():(ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)},GridApi2.prototype.addCellRange=function(params){if(this.rangeService){this.rangeService.addCellRange(params);return}ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"api.addCellRange",this.context.getGridId())},GridApi2.prototype.clearRangeSelection=function(){this.rangeService&&this.rangeService.removeAllCellRanges(),ModuleRegistry.__assertRegistered(ModuleNames.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())},GridApi2.prototype.undoCellEditing=function(){this.undoRedoService.undo("api")},GridApi2.prototype.redoCellEditing=function(){this.undoRedoService.redo("api")},GridApi2.prototype.getCurrentUndoSize=function(){return this.undoRedoService.getCurrentUndoStackSize()},GridApi2.prototype.getCurrentRedoSize=function(){return this.undoRedoService.getCurrentRedoStackSize()},GridApi2.prototype.assertChart=function(methodName,func){if(ModuleRegistry.__assertRegistered(ModuleNames.GridChartsModule,"api."+methodName,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(function(){return func()})},GridApi2.prototype.getChartModels=function(){var _this=this;return this.assertChart("getChartModels",function(){return _this.chartService.getChartModels()})},GridApi2.prototype.getChartRef=function(chartId){var _this=this;return this.assertChart("getChartRef",function(){return _this.chartService.getChartRef(chartId)})},GridApi2.prototype.getChartImageDataURL=function(params){var _this=this;return this.assertChart("getChartImageDataURL",function(){return _this.chartService.getChartImageDataURL(params)})},GridApi2.prototype.downloadChart=function(params){var _this=this;return this.assertChart("downloadChart",function(){return _this.chartService.downloadChart(params)})},GridApi2.prototype.openChartToolPanel=function(params){var _this=this;return this.assertChart("openChartToolPanel",function(){return _this.chartService.openChartToolPanel(params)})},GridApi2.prototype.closeChartToolPanel=function(params){var _this=this;return this.assertChart("closeChartToolPanel",function(){return _this.chartService.closeChartToolPanel(params.chartId)})},GridApi2.prototype.createRangeChart=function(params){var _this=this;return this.assertChart("createRangeChart",function(){return _this.chartService.createRangeChart(params)})},GridApi2.prototype.createPivotChart=function(params){var _this=this;return this.assertChart("createPivotChart",function(){return _this.chartService.createPivotChart(params)})},GridApi2.prototype.createCrossFilterChart=function(params){var _this=this;return this.assertChart("createCrossFilterChart",function(){return _this.chartService.createCrossFilterChart(params)})},GridApi2.prototype.updateChart=function(params){var _this=this;return this.assertChart("updateChart",function(){return _this.chartService.updateChart(params)})},GridApi2.prototype.restoreChart=function(chartModel,chartContainer){var _this=this;return this.assertChart("restoreChart",function(){return _this.chartService.restoreChart(chartModel,chartContainer)})},GridApi2.prototype.assertClipboard=function(methodName,func){ModuleRegistry.__assertRegistered(ModuleNames.ClipboardModule,"api"+methodName,this.context.getGridId())&&func()},GridApi2.prototype.copyToClipboard=function(params){var _this=this;this.assertClipboard("copyToClipboard",function(){return _this.clipboardService.copyToClipboard(params)})},GridApi2.prototype.cutToClipboard=function(params){var _this=this;this.assertClipboard("cutToClipboard",function(){return _this.clipboardService.cutToClipboard(params)})},GridApi2.prototype.copySelectedRowsToClipboard=function(params){var _this=this;this.assertClipboard("copySelectedRowsToClipboard",function(){return _this.clipboardService.copySelectedRowsToClipboard(params)})},GridApi2.prototype.copySelectedRangeToClipboard=function(params){var _this=this;this.assertClipboard("copySelectedRangeToClipboard",function(){return _this.clipboardService.copySelectedRangeToClipboard(params)})},GridApi2.prototype.copySelectedRangeDown=function(){var _this=this;this.assertClipboard("copySelectedRangeDown",function(){return _this.clipboardService.copyRangeDown()})},GridApi2.prototype.pasteFromClipboard=function(){var _this=this;this.assertClipboard("pasteFromClipboard",function(){return _this.clipboardService.pasteFromClipboard()})},GridApi2.prototype.showColumnMenuAfterButtonClick=function(colKey,buttonElement){warnOnce("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");var column=this.columnModel.getGridColumn(colKey);this.menuService.showColumnMenu({column,buttonElement,positionBy:"button"})},GridApi2.prototype.showColumnMenuAfterMouseClick=function(colKey,mouseEvent){warnOnce("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");var column=this.columnModel.getGridColumn(colKey);if(column||(column=this.columnModel.getPrimaryColumn(colKey)),!column){console.error("AG Grid: column '".concat(colKey,"' not found"));return}this.menuService.showColumnMenu({column,mouseEvent,positionBy:"mouse"})},GridApi2.prototype.showColumnChooser=function(params){this.menuService.showColumnChooser({chooserParams:params})},GridApi2.prototype.showColumnFilter=function(colKey){var column=this.columnModel.getGridColumn(colKey);if(!column){console.error("AG Grid: column '".concat(colKey,"' not found"));return}this.menuService.showFilterMenu({column,containerType:"columnFilter",positionBy:"auto"})},GridApi2.prototype.showColumnMenu=function(colKey){var column=this.columnModel.getGridColumn(colKey);if(!column){console.error("AG Grid: column '".concat(colKey,"' not found"));return}this.menuService.showColumnMenu({column,positionBy:"auto"})},GridApi2.prototype.hidePopupMenu=function(){this.menuService.hidePopupMenu()},GridApi2.prototype.hideColumnChooser=function(){this.menuService.hideColumnChooser()},GridApi2.prototype.tabToNextCell=function(event){return this.navigationService.tabToNextCell(!1,event)},GridApi2.prototype.tabToPreviousCell=function(event){return this.navigationService.tabToNextCell(!0,event)},GridApi2.prototype.getCellRendererInstances=function(params){params===void 0&&(params={});var res=this.rowRenderer.getCellRendererInstances(params),unwrapped=res.map(unwrapUserComp);return unwrapped},GridApi2.prototype.getCellEditorInstances=function(params){params===void 0&&(params={});var res=this.rowRenderer.getCellEditorInstances(params),unwrapped=res.map(unwrapUserComp);return unwrapped},GridApi2.prototype.getEditingCells=function(){return this.rowRenderer.getEditingCells()},GridApi2.prototype.stopEditing=function(cancel){cancel===void 0&&(cancel=!1),this.rowRenderer.stopEditing(cancel)},GridApi2.prototype.startEditingCell=function(params){var column=this.columnModel.getGridColumn(params.colKey);if(!column){console.warn("AG Grid: no column found for ".concat(params.colKey));return}var cellPosition={rowIndex:params.rowIndex,rowPinned:params.rowPinned||null,column},notPinned=params.rowPinned==null;notPinned&&this.ensureIndexVisible(params.rowIndex),this.ensureColumnVisible(params.colKey);var cell=this.navigationService.getCellByPosition(cellPosition);cell&&(this.focusService.isCellFocused(cellPosition)||this.focusService.setFocusedCell(cellPosition),cell.startRowOrCellEdit(params.key))},GridApi2.prototype.addAggFunc=function(key,aggFunc){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:aggFunc})},GridApi2.prototype.addAggFuncs=function(aggFuncs){this.aggFuncService&&this.aggFuncService.addAggFuncs(aggFuncs)},GridApi2.prototype.clearAggFuncs=function(){this.aggFuncService&&this.aggFuncService.clear()},GridApi2.prototype.applyServerSideTransaction=function(transaction){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransaction","serverSide");return}return this.serverSideTransactionManager.applyTransaction(transaction)},GridApi2.prototype.applyServerSideTransactionAsync=function(transaction,callback){if(!this.serverSideTransactionManager){this.logMissingRowModel("applyServerSideTransactionAsync","serverSide");return}return this.serverSideTransactionManager.applyTransactionAsync(transaction,callback)},GridApi2.prototype.applyServerSideRowData=function(params){var _a,_b,startRow=(_a=params.startRow)!==null&&_a!==void 0?_a:0,route=(_b=params.route)!==null&&_b!==void 0?_b:[];if(startRow<0){console.warn("AG Grid: invalid value ".concat(params.startRow," for startRow, the value should be >= 0"));return}this.serverSideRowModel?this.serverSideRowModel.applyRowData(params.successParams,startRow,route):this.logMissingRowModel("setServerSideDatasource","serverSide")},GridApi2.prototype.retryServerSideLoads=function(){if(!this.serverSideRowModel){this.logMissingRowModel("retryServerSideLoads","serverSide");return}this.serverSideRowModel.retryLoads()},GridApi2.prototype.flushServerSideAsyncTransactions=function(){if(!this.serverSideTransactionManager){this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide");return}return this.serverSideTransactionManager.flushAsyncTransactions()},GridApi2.prototype.applyTransaction=function(rowDataTransaction){var _this=this;if(!this.clientSideRowModel){this.logMissingRowModel("applyTransaction","clientSide");return}return this.frameworkOverrides.wrapIncoming(function(){return _this.clientSideRowModel.updateRowData(rowDataTransaction)})},GridApi2.prototype.applyTransactionAsync=function(rowDataTransaction,callback){var _this=this;if(!this.clientSideRowModel){this.logMissingRowModel("applyTransactionAsync","clientSide");return}this.frameworkOverrides.wrapIncoming(function(){return _this.clientSideRowModel.batchUpdateRowData(rowDataTransaction,callback)})},GridApi2.prototype.flushAsyncTransactions=function(){var _this=this;if(!this.clientSideRowModel){this.logMissingRowModel("flushAsyncTransactions","clientSide");return}this.frameworkOverrides.wrapIncoming(function(){return _this.clientSideRowModel.flushAsyncTransactions()})},GridApi2.prototype.refreshInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")},GridApi2.prototype.purgeInfiniteCache=function(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")},GridApi2.prototype.refreshServerSide=function(params){if(!this.serverSideRowModel){this.logMissingRowModel("refreshServerSide","serverSide");return}this.serverSideRowModel.refreshStore(params)},GridApi2.prototype.getServerSideGroupLevelState=function(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])},GridApi2.prototype.getInfiniteRowCount=function(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")},GridApi2.prototype.isLastRowIndexKnown=function(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")},GridApi2.prototype.getCacheBlockState=function(){return this.rowNodeBlockLoader.getBlockState()},GridApi2.prototype.getFirstDisplayedRow=function(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()},GridApi2.prototype.getFirstDisplayedRowIndex=function(){return this.rowRenderer.getFirstVirtualRenderedRow()},GridApi2.prototype.getLastDisplayedRow=function(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()},GridApi2.prototype.getLastDisplayedRowIndex=function(){return this.rowRenderer.getLastVirtualRenderedRow()},GridApi2.prototype.getDisplayedRowAtIndex=function(index){return this.rowModel.getRow(index)},GridApi2.prototype.getDisplayedRowCount=function(){return this.rowModel.getRowCount()},GridApi2.prototype.paginationIsLastPageFound=function(){return this.paginationProxy.isLastPageFound()},GridApi2.prototype.paginationGetPageSize=function(){return this.paginationProxy.getPageSize()},GridApi2.prototype.paginationGetCurrentPage=function(){return this.paginationProxy.getCurrentPage()},GridApi2.prototype.paginationGetTotalPages=function(){return this.paginationProxy.getTotalPages()},GridApi2.prototype.paginationGetRowCount=function(){return this.paginationProxy.getMasterRowCount()},GridApi2.prototype.paginationGoToNextPage=function(){this.paginationProxy.goToNextPage()},GridApi2.prototype.paginationGoToPreviousPage=function(){this.paginationProxy.goToPreviousPage()},GridApi2.prototype.paginationGoToFirstPage=function(){this.paginationProxy.goToFirstPage()},GridApi2.prototype.paginationGoToLastPage=function(){this.paginationProxy.goToLastPage()},GridApi2.prototype.paginationGoToPage=function(page){this.paginationProxy.goToPage(page)},GridApi2.prototype.sizeColumnsToFit=function(paramsOrGridWidth){typeof paramsOrGridWidth=="number"?this.columnModel.sizeColumnsToFit(paramsOrGridWidth,"api"):this.gridBodyCtrl.sizeColumnsToFit(paramsOrGridWidth)},GridApi2.prototype.setColumnGroupOpened=function(group,newValue){this.columnModel.setColumnGroupOpened(group,newValue,"api")},GridApi2.prototype.getColumnGroup=function(name,instanceId){return this.columnModel.getColumnGroup(name,instanceId)},GridApi2.prototype.getProvidedColumnGroup=function(name){return this.columnModel.getProvidedColumnGroup(name)},GridApi2.prototype.getDisplayNameForColumn=function(column,location){return this.columnModel.getDisplayNameForColumn(column,location)||""},GridApi2.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.columnModel.getDisplayNameForColumnGroup(columnGroup,location)||""},GridApi2.prototype.getColumn=function(key){return this.columnModel.getPrimaryColumn(key)},GridApi2.prototype.getColumns=function(){return this.columnModel.getAllPrimaryColumns()},GridApi2.prototype.applyColumnState=function(params){return this.columnModel.applyColumnState(params,"api")},GridApi2.prototype.getColumnState=function(){return this.columnModel.getColumnState()},GridApi2.prototype.resetColumnState=function(){this.columnModel.resetColumnState("api")},GridApi2.prototype.getColumnGroupState=function(){return this.columnModel.getColumnGroupState()},GridApi2.prototype.setColumnGroupState=function(stateItems){this.columnModel.setColumnGroupState(stateItems,"api")},GridApi2.prototype.resetColumnGroupState=function(){this.columnModel.resetColumnGroupState("api")},GridApi2.prototype.isPinning=function(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()},GridApi2.prototype.isPinningLeft=function(){return this.columnModel.isPinningLeft()},GridApi2.prototype.isPinningRight=function(){return this.columnModel.isPinningRight()},GridApi2.prototype.getDisplayedColAfter=function(col){return this.columnModel.getDisplayedColAfter(col)},GridApi2.prototype.getDisplayedColBefore=function(col){return this.columnModel.getDisplayedColBefore(col)},GridApi2.prototype.setColumnVisible=function(key,visible){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([key],visible,"api")},GridApi2.prototype.setColumnsVisible=function(keys2,visible){this.columnModel.setColumnsVisible(keys2,visible,"api")},GridApi2.prototype.setColumnPinned=function(key,pinned){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([key],pinned,"api")},GridApi2.prototype.setColumnsPinned=function(keys2,pinned){this.columnModel.setColumnsPinned(keys2,pinned,"api")},GridApi2.prototype.getAllGridColumns=function(){return this.columnModel.getAllGridColumns()},GridApi2.prototype.getDisplayedLeftColumns=function(){return this.columnModel.getDisplayedLeftColumns()},GridApi2.prototype.getDisplayedCenterColumns=function(){return this.columnModel.getDisplayedCenterColumns()},GridApi2.prototype.getDisplayedRightColumns=function(){return this.columnModel.getDisplayedRightColumns()},GridApi2.prototype.getAllDisplayedColumns=function(){return this.columnModel.getAllDisplayedColumns()},GridApi2.prototype.getAllDisplayedVirtualColumns=function(){return this.columnModel.getViewportColumns()},GridApi2.prototype.moveColumn=function(key,toIndex){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([key],toIndex,"api")},GridApi2.prototype.moveColumnByIndex=function(fromIndex,toIndex){this.columnModel.moveColumnByIndex(fromIndex,toIndex,"api")},GridApi2.prototype.moveColumns=function(columnsToMoveKeys,toIndex){this.columnModel.moveColumns(columnsToMoveKeys,toIndex,"api")},GridApi2.prototype.moveRowGroupColumn=function(fromIndex,toIndex){this.columnModel.moveRowGroupColumn(fromIndex,toIndex,"api")},GridApi2.prototype.setColumnAggFunc=function(key,aggFunc){this.columnModel.setColumnAggFunc(key,aggFunc,"api")},GridApi2.prototype.setColumnWidth=function(key,newWidth,finished,source){finished===void 0&&(finished=!0),source===void 0&&(source="api"),this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key,newWidth}],!1,finished,source)},GridApi2.prototype.setColumnWidths=function(columnWidths,finished,source){finished===void 0&&(finished=!0),source===void 0&&(source="api"),this.columnModel.setColumnWidths(columnWidths,!1,finished,source)},GridApi2.prototype.isPivotMode=function(){return this.columnModel.isPivotMode()},GridApi2.prototype.getPivotResultColumn=function(pivotKeys,valueColKey){return this.columnModel.getSecondaryPivotColumn(pivotKeys,valueColKey)},GridApi2.prototype.setValueColumns=function(colKeys){this.columnModel.setValueColumns(colKeys,"api")},GridApi2.prototype.getValueColumns=function(){return this.columnModel.getValueColumns()},GridApi2.prototype.removeValueColumn=function(colKey){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([colKey],"api")},GridApi2.prototype.removeValueColumns=function(colKeys){this.columnModel.removeValueColumns(colKeys,"api")},GridApi2.prototype.addValueColumn=function(colKey){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([colKey],"api")},GridApi2.prototype.addValueColumns=function(colKeys){this.columnModel.addValueColumns(colKeys,"api")},GridApi2.prototype.setRowGroupColumns=function(colKeys){this.columnModel.setRowGroupColumns(colKeys,"api")},GridApi2.prototype.removeRowGroupColumn=function(colKey){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([colKey],"api")},GridApi2.prototype.removeRowGroupColumns=function(colKeys){this.columnModel.removeRowGroupColumns(colKeys,"api")},GridApi2.prototype.addRowGroupColumn=function(colKey){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([colKey],"api")},GridApi2.prototype.addRowGroupColumns=function(colKeys){this.columnModel.addRowGroupColumns(colKeys,"api")},GridApi2.prototype.getRowGroupColumns=function(){return this.columnModel.getRowGroupColumns()},GridApi2.prototype.setPivotColumns=function(colKeys){this.columnModel.setPivotColumns(colKeys,"api")},GridApi2.prototype.removePivotColumn=function(colKey){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([colKey],"api")},GridApi2.prototype.removePivotColumns=function(colKeys){this.columnModel.removePivotColumns(colKeys,"api")},GridApi2.prototype.addPivotColumn=function(colKey){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([colKey],"api")},GridApi2.prototype.addPivotColumns=function(colKeys){this.columnModel.addPivotColumns(colKeys,"api")},GridApi2.prototype.getPivotColumns=function(){return this.columnModel.getPivotColumns()},GridApi2.prototype.getLeftDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeLeft()},GridApi2.prototype.getCenterDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeCentre()},GridApi2.prototype.getRightDisplayedColumnGroups=function(){return this.columnModel.getDisplayedTreeRight()},GridApi2.prototype.getAllDisplayedColumnGroups=function(){return this.columnModel.getAllDisplayedTrees()},GridApi2.prototype.autoSizeColumn=function(key,skipHeader){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[key],skipHeader,source:"api"})},GridApi2.prototype.autoSizeColumns=function(keys2,skipHeader){this.columnModel.autoSizeColumns({columns:keys2,skipHeader,source:"api"})},GridApi2.prototype.autoSizeAllColumns=function(skipHeader){this.columnModel.autoSizeAllColumns("api",skipHeader)},GridApi2.prototype.setPivotResultColumns=function(colDefs){this.columnModel.setSecondaryColumns(colDefs,"api")},GridApi2.prototype.getPivotResultColumns=function(){return this.columnModel.getSecondaryColumns()},GridApi2.prototype.getState=function(){return this.stateService.getState()},GridApi2.prototype.getGridOption=function(key){return this.gos.get(key)},GridApi2.prototype.setGridOption=function(key,value){var _a;this.updateGridOptions((_a={},_a[key]=value,_a))},GridApi2.prototype.updateGridOptions=function(options){this.gos.updateGridOptions({options})},GridApi2.prototype.__internalUpdateGridOptions=function(options){this.gos.updateGridOptions({options,source:"gridOptionsUpdated"})},GridApi2.prototype.deprecatedUpdateGridOption=function(key,value){warnOnce("set".concat(key.charAt(0).toUpperCase()).concat(key.slice(1,key.length)," is deprecated. Please use 'api.setGridOption('").concat(key,"', newValue)' or 'api.updateGridOptions({ ").concat(key,": newValue })' instead.")),this.setGridOption(key,value)},GridApi2.prototype.setPivotMode=function(pivotMode){this.deprecatedUpdateGridOption("pivotMode",pivotMode)},GridApi2.prototype.setPinnedTopRowData=function(rows){this.deprecatedUpdateGridOption("pinnedTopRowData",rows)},GridApi2.prototype.setPinnedBottomRowData=function(rows){this.deprecatedUpdateGridOption("pinnedBottomRowData",rows)},GridApi2.prototype.setPopupParent=function(ePopupParent){this.deprecatedUpdateGridOption("popupParent",ePopupParent)},GridApi2.prototype.setSuppressModelUpdateAfterUpdateTransaction=function(value){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",value)},GridApi2.prototype.setDataTypeDefinitions=function(dataTypeDefinitions){this.deprecatedUpdateGridOption("dataTypeDefinitions",dataTypeDefinitions)},GridApi2.prototype.setPagination=function(value){this.deprecatedUpdateGridOption("pagination",value)},GridApi2.prototype.paginationSetPageSize=function(size){this.deprecatedUpdateGridOption("paginationPageSize",size)},GridApi2.prototype.setSideBar=function(def){this.deprecatedUpdateGridOption("sideBar",def)},GridApi2.prototype.setSuppressClipboardPaste=function(value){this.deprecatedUpdateGridOption("suppressClipboardPaste",value)},GridApi2.prototype.setGroupRemoveSingleChildren=function(value){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",value)},GridApi2.prototype.setGroupRemoveLowestSingleChildren=function(value){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",value)},GridApi2.prototype.setGroupDisplayType=function(value){this.deprecatedUpdateGridOption("groupDisplayType",value)},GridApi2.prototype.setGroupIncludeFooter=function(value){this.deprecatedUpdateGridOption("groupIncludeFooter",value)},GridApi2.prototype.setGroupIncludeTotalFooter=function(value){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",value)},GridApi2.prototype.setRowClass=function(className){this.deprecatedUpdateGridOption("rowClass",className)},GridApi2.prototype.setDeltaSort=function(enable){this.deprecatedUpdateGridOption("deltaSort",enable)},GridApi2.prototype.setSuppressRowDrag=function(value){this.deprecatedUpdateGridOption("suppressRowDrag",value)},GridApi2.prototype.setSuppressMoveWhenRowDragging=function(value){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",value)},GridApi2.prototype.setSuppressRowClickSelection=function(value){this.deprecatedUpdateGridOption("suppressRowClickSelection",value)},GridApi2.prototype.setEnableAdvancedFilter=function(enabled){this.deprecatedUpdateGridOption("enableAdvancedFilter",enabled)},GridApi2.prototype.setIncludeHiddenColumnsInAdvancedFilter=function(value){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",value)},GridApi2.prototype.setAdvancedFilterParent=function(advancedFilterParent){this.deprecatedUpdateGridOption("advancedFilterParent",advancedFilterParent)},GridApi2.prototype.setAdvancedFilterBuilderParams=function(params){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",params)},GridApi2.prototype.setQuickFilter=function(newFilter){warnOnce("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:newFilter}})},GridApi2.prototype.setExcludeHiddenColumnsFromQuickFilter=function(value){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!value)},GridApi2.prototype.setIncludeHiddenColumnsInQuickFilter=function(value){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",value)},GridApi2.prototype.setQuickFilterParser=function(quickFilterParser){this.deprecatedUpdateGridOption("quickFilterParser",quickFilterParser)},GridApi2.prototype.setQuickFilterMatcher=function(quickFilterMatcher){this.deprecatedUpdateGridOption("quickFilterMatcher",quickFilterMatcher)},GridApi2.prototype.setAlwaysShowHorizontalScroll=function(show){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",show)},GridApi2.prototype.setAlwaysShowVerticalScroll=function(show){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",show)},GridApi2.prototype.setFunctionsReadOnly=function(readOnly){this.deprecatedUpdateGridOption("functionsReadOnly",readOnly)},GridApi2.prototype.setColumnDefs=function(colDefs,source){source===void 0&&(source="api"),warnOnce("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:colDefs},source})},GridApi2.prototype.setAutoGroupColumnDef=function(colDef,source){source===void 0&&(source="api"),warnOnce("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:colDef},source})},GridApi2.prototype.setDefaultColDef=function(colDef,source){source===void 0&&(source="api"),warnOnce("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:colDef},source})},GridApi2.prototype.setColumnTypes=function(columnTypes,source){source===void 0&&(source="api"),warnOnce("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes},source})},GridApi2.prototype.setTreeData=function(newTreeData){this.deprecatedUpdateGridOption("treeData",newTreeData)},GridApi2.prototype.setServerSideDatasource=function(datasource){this.deprecatedUpdateGridOption("serverSideDatasource",datasource)},GridApi2.prototype.setCacheBlockSize=function(blockSize){this.deprecatedUpdateGridOption("cacheBlockSize",blockSize)},GridApi2.prototype.setDatasource=function(datasource){this.deprecatedUpdateGridOption("datasource",datasource)},GridApi2.prototype.setViewportDatasource=function(viewportDatasource){this.deprecatedUpdateGridOption("viewportDatasource",viewportDatasource)},GridApi2.prototype.setRowData=function(rowData){this.deprecatedUpdateGridOption("rowData",rowData)},GridApi2.prototype.setEnableCellTextSelection=function(selectable){this.deprecatedUpdateGridOption("enableCellTextSelection",selectable)},GridApi2.prototype.setHeaderHeight=function(headerHeight){this.deprecatedUpdateGridOption("headerHeight",headerHeight)},GridApi2.prototype.setDomLayout=function(domLayout){this.deprecatedUpdateGridOption("domLayout",domLayout)},GridApi2.prototype.setFillHandleDirection=function(direction){this.deprecatedUpdateGridOption("fillHandleDirection",direction)},GridApi2.prototype.setGroupHeaderHeight=function(headerHeight){this.deprecatedUpdateGridOption("groupHeaderHeight",headerHeight)},GridApi2.prototype.setFloatingFiltersHeight=function(headerHeight){this.deprecatedUpdateGridOption("floatingFiltersHeight",headerHeight)},GridApi2.prototype.setPivotHeaderHeight=function(headerHeight){this.deprecatedUpdateGridOption("pivotHeaderHeight",headerHeight)},GridApi2.prototype.setPivotGroupHeaderHeight=function(headerHeight){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",headerHeight)},GridApi2.prototype.setAnimateRows=function(animateRows){this.deprecatedUpdateGridOption("animateRows",animateRows)},GridApi2.prototype.setIsExternalFilterPresent=function(isExternalFilterPresentFunc){this.deprecatedUpdateGridOption("isExternalFilterPresent",isExternalFilterPresentFunc)},GridApi2.prototype.setDoesExternalFilterPass=function(doesExternalFilterPassFunc){this.deprecatedUpdateGridOption("doesExternalFilterPass",doesExternalFilterPassFunc)},GridApi2.prototype.setNavigateToNextCell=function(navigateToNextCellFunc){this.deprecatedUpdateGridOption("navigateToNextCell",navigateToNextCellFunc)},GridApi2.prototype.setTabToNextCell=function(tabToNextCellFunc){this.deprecatedUpdateGridOption("tabToNextCell",tabToNextCellFunc)},GridApi2.prototype.setTabToNextHeader=function(tabToNextHeaderFunc){this.deprecatedUpdateGridOption("tabToNextHeader",tabToNextHeaderFunc)},GridApi2.prototype.setNavigateToNextHeader=function(navigateToNextHeaderFunc){this.deprecatedUpdateGridOption("navigateToNextHeader",navigateToNextHeaderFunc)},GridApi2.prototype.setRowGroupPanelShow=function(rowGroupPanelShow){this.deprecatedUpdateGridOption("rowGroupPanelShow",rowGroupPanelShow)},GridApi2.prototype.setGetGroupRowAgg=function(getGroupRowAggFunc){this.deprecatedUpdateGridOption("getGroupRowAgg",getGroupRowAggFunc)},GridApi2.prototype.setGetBusinessKeyForNode=function(getBusinessKeyForNodeFunc){this.deprecatedUpdateGridOption("getBusinessKeyForNode",getBusinessKeyForNodeFunc)},GridApi2.prototype.setGetChildCount=function(getChildCountFunc){this.deprecatedUpdateGridOption("getChildCount",getChildCountFunc)},GridApi2.prototype.setProcessRowPostCreate=function(processRowPostCreateFunc){this.deprecatedUpdateGridOption("processRowPostCreate",processRowPostCreateFunc)},GridApi2.prototype.setGetRowId=function(getRowIdFunc){warnOnce("getRowId is a static property and can no longer be updated.")},GridApi2.prototype.setGetRowClass=function(rowClassFunc){this.deprecatedUpdateGridOption("getRowClass",rowClassFunc)},GridApi2.prototype.setIsFullWidthRow=function(isFullWidthRowFunc){this.deprecatedUpdateGridOption("isFullWidthRow",isFullWidthRowFunc)},GridApi2.prototype.setIsRowSelectable=function(isRowSelectableFunc){this.deprecatedUpdateGridOption("isRowSelectable",isRowSelectableFunc)},GridApi2.prototype.setIsRowMaster=function(isRowMasterFunc){this.deprecatedUpdateGridOption("isRowMaster",isRowMasterFunc)},GridApi2.prototype.setPostSortRows=function(postSortRowsFunc){this.deprecatedUpdateGridOption("postSortRows",postSortRowsFunc)},GridApi2.prototype.setGetDocument=function(getDocumentFunc){this.deprecatedUpdateGridOption("getDocument",getDocumentFunc)},GridApi2.prototype.setGetContextMenuItems=function(getContextMenuItemsFunc){this.deprecatedUpdateGridOption("getContextMenuItems",getContextMenuItemsFunc)},GridApi2.prototype.setGetMainMenuItems=function(getMainMenuItemsFunc){this.deprecatedUpdateGridOption("getMainMenuItems",getMainMenuItemsFunc)},GridApi2.prototype.setProcessCellForClipboard=function(processCellForClipboardFunc){this.deprecatedUpdateGridOption("processCellForClipboard",processCellForClipboardFunc)},GridApi2.prototype.setSendToClipboard=function(sendToClipboardFunc){this.deprecatedUpdateGridOption("sendToClipboard",sendToClipboardFunc)},GridApi2.prototype.setProcessCellFromClipboard=function(processCellFromClipboardFunc){this.deprecatedUpdateGridOption("processCellFromClipboard",processCellFromClipboardFunc)},GridApi2.prototype.setProcessPivotResultColDef=function(processPivotResultColDefFunc){this.deprecatedUpdateGridOption("processPivotResultColDef",processPivotResultColDefFunc)},GridApi2.prototype.setProcessPivotResultColGroupDef=function(processPivotResultColGroupDefFunc){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",processPivotResultColGroupDefFunc)},GridApi2.prototype.setPostProcessPopup=function(postProcessPopupFunc){this.deprecatedUpdateGridOption("postProcessPopup",postProcessPopupFunc)},GridApi2.prototype.setInitialGroupOrderComparator=function(initialGroupOrderComparatorFunc){this.deprecatedUpdateGridOption("initialGroupOrderComparator",initialGroupOrderComparatorFunc)},GridApi2.prototype.setGetChartToolbarItems=function(getChartToolbarItemsFunc){this.deprecatedUpdateGridOption("getChartToolbarItems",getChartToolbarItemsFunc)},GridApi2.prototype.setPaginationNumberFormatter=function(paginationNumberFormatterFunc){this.deprecatedUpdateGridOption("paginationNumberFormatter",paginationNumberFormatterFunc)},GridApi2.prototype.setGetServerSideGroupLevelParams=function(getServerSideGroupLevelParamsFunc){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",getServerSideGroupLevelParamsFunc)},GridApi2.prototype.setIsServerSideGroupOpenByDefault=function(isServerSideGroupOpenByDefaultFunc){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",isServerSideGroupOpenByDefaultFunc)},GridApi2.prototype.setIsApplyServerSideTransaction=function(isApplyServerSideTransactionFunc){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",isApplyServerSideTransactionFunc)},GridApi2.prototype.setIsServerSideGroup=function(isServerSideGroupFunc){this.deprecatedUpdateGridOption("isServerSideGroup",isServerSideGroupFunc)},GridApi2.prototype.setGetServerSideGroupKey=function(getServerSideGroupKeyFunc){this.deprecatedUpdateGridOption("getServerSideGroupKey",getServerSideGroupKeyFunc)},GridApi2.prototype.setGetRowStyle=function(rowStyleFunc){this.deprecatedUpdateGridOption("getRowStyle",rowStyleFunc)},GridApi2.prototype.setGetRowHeight=function(rowHeightFunc){this.deprecatedUpdateGridOption("getRowHeight",rowHeightFunc)},__decorate$24([Optional("csvCreator")],GridApi2.prototype,"csvCreator",void 0),__decorate$24([Optional("excelCreator")],GridApi2.prototype,"excelCreator",void 0),__decorate$24([Autowired("rowRenderer")],GridApi2.prototype,"rowRenderer",void 0),__decorate$24([Autowired("navigationService")],GridApi2.prototype,"navigationService",void 0),__decorate$24([Autowired("filterManager")],GridApi2.prototype,"filterManager",void 0),__decorate$24([Autowired("columnModel")],GridApi2.prototype,"columnModel",void 0),__decorate$24([Autowired("selectionService")],GridApi2.prototype,"selectionService",void 0),__decorate$24([Autowired("gridOptionsService")],GridApi2.prototype,"gos",void 0),__decorate$24([Autowired("valueService")],GridApi2.prototype,"valueService",void 0),__decorate$24([Autowired("alignedGridsService")],GridApi2.prototype,"alignedGridsService",void 0),__decorate$24([Autowired("eventService")],GridApi2.prototype,"eventService",void 0),__decorate$24([Autowired("pinnedRowModel")],GridApi2.prototype,"pinnedRowModel",void 0),__decorate$24([Autowired("context")],GridApi2.prototype,"context",void 0),__decorate$24([Autowired("rowModel")],GridApi2.prototype,"rowModel",void 0),__decorate$24([Autowired("sortController")],GridApi2.prototype,"sortController",void 0),__decorate$24([Autowired("paginationProxy")],GridApi2.prototype,"paginationProxy",void 0),__decorate$24([Autowired("focusService")],GridApi2.prototype,"focusService",void 0),__decorate$24([Autowired("dragAndDropService")],GridApi2.prototype,"dragAndDropService",void 0),__decorate$24([Optional("rangeService")],GridApi2.prototype,"rangeService",void 0),__decorate$24([Optional("clipboardService")],GridApi2.prototype,"clipboardService",void 0),__decorate$24([Optional("aggFuncService")],GridApi2.prototype,"aggFuncService",void 0),__decorate$24([Autowired("menuService")],GridApi2.prototype,"menuService",void 0),__decorate$24([Autowired("valueCache")],GridApi2.prototype,"valueCache",void 0),__decorate$24([Autowired("animationFrameService")],GridApi2.prototype,"animationFrameService",void 0),__decorate$24([Optional("statusBarService")],GridApi2.prototype,"statusBarService",void 0),__decorate$24([Optional("chartService")],GridApi2.prototype,"chartService",void 0),__decorate$24([Optional("undoRedoService")],GridApi2.prototype,"undoRedoService",void 0),__decorate$24([Optional("rowNodeBlockLoader")],GridApi2.prototype,"rowNodeBlockLoader",void 0),__decorate$24([Optional("ssrmTransactionManager")],GridApi2.prototype,"serverSideTransactionManager",void 0),__decorate$24([Autowired("ctrlsService")],GridApi2.prototype,"ctrlsService",void 0),__decorate$24([Autowired("overlayService")],GridApi2.prototype,"overlayService",void 0),__decorate$24([Optional("sideBarService")],GridApi2.prototype,"sideBarService",void 0),__decorate$24([Autowired("stateService")],GridApi2.prototype,"stateService",void 0),__decorate$24([Autowired("expansionService")],GridApi2.prototype,"expansionService",void 0),__decorate$24([Autowired("apiEventService")],GridApi2.prototype,"apiEventService",void 0),__decorate$24([Autowired("frameworkOverrides")],GridApi2.prototype,"frameworkOverrides",void 0),__decorate$24([PostConstruct],GridApi2.prototype,"init",null),GridApi2=__decorate$24([Bean("gridApi")],GridApi2),GridApi2}(),__extends$2i=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$23=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$23"),QuickFilterService=function(_super){__extends$2i(QuickFilterService2,_super);function QuickFilterService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.quickFilter=null,_this.quickFilterParts=null,_this}__name(QuickFilterService2,"QuickFilterService"),QuickFilterService_1=QuickFilterService2,QuickFilterService2.prototype.postConstruct=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return _this.resetQuickFilterCache()}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return _this.resetQuickFilterCache()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return _this.resetQuickFilterCache()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,function(){_this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||_this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",function(e){return _this.setQuickFilter(e.currentValue)}),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",function(){return _this.onIncludeHiddenColumnsInQuickFilterChanged()}),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],function(){return _this.setQuickFilterParserAndMatcher()})},QuickFilterService2.prototype.isQuickFilterPresent=function(){return this.quickFilter!==null},QuickFilterService2.prototype.doesRowPassQuickFilter=function(node){var _this=this,usingCache=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(usingCache,node):this.quickFilterParts.every(function(part){return usingCache?_this.doesRowPassQuickFilterCache(node,part):_this.doesRowPassQuickFilterNoCache(node,part)})},QuickFilterService2.prototype.resetQuickFilterCache=function(){this.rowModel.forEachNode(function(node){return node.quickFilterAggregateText=null})},QuickFilterService2.prototype.setQuickFilterParts=function(){var _a=this,quickFilter=_a.quickFilter,parser=_a.parser;quickFilter?this.quickFilterParts=parser?parser(quickFilter):quickFilter.split(" "):this.quickFilterParts=null},QuickFilterService2.prototype.parseQuickFilter=function(newFilter){return exists(newFilter)?this.gridOptionsService.isRowModelType("clientSide")?newFilter.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null},QuickFilterService2.prototype.setQuickFilter=function(newFilter){if(newFilter!=null&&typeof newFilter!="string"){console.warn("AG Grid - Grid option quickFilterText only supports string inputs, received: ".concat(typeof newFilter));return}var parsedFilter=this.parseQuickFilter(newFilter);this.quickFilter!==parsedFilter&&(this.quickFilter=parsedFilter,this.setQuickFilterParts(),this.dispatchEvent({type:QuickFilterService_1.EVENT_QUICK_FILTER_CHANGED}))},QuickFilterService2.prototype.setQuickFilterParserAndMatcher=function(){var parser=this.gridOptionsService.get("quickFilterParser"),matcher=this.gridOptionsService.get("quickFilterMatcher"),hasChanged=parser!==this.parser||matcher!==this.matcher;this.parser=parser,this.matcher=matcher,hasChanged&&(this.setQuickFilterParts(),this.dispatchEvent({type:QuickFilterService_1.EVENT_QUICK_FILTER_CHANGED}))},QuickFilterService2.prototype.onIncludeHiddenColumnsInQuickFilterChanged=function(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:QuickFilterService_1.EVENT_QUICK_FILTER_CHANGED})},QuickFilterService2.prototype.doesRowPassQuickFilterNoCache=function(node,filterPart){var _this=this,columns=this.columnModel.getAllColumnsForQuickFilter();return columns.some(function(column){var part=_this.getQuickFilterTextForColumn(column,node);return exists(part)&&part.indexOf(filterPart)>=0})},QuickFilterService2.prototype.doesRowPassQuickFilterCache=function(node,filterPart){return this.checkGenerateQuickFilterAggregateText(node),node.quickFilterAggregateText.indexOf(filterPart)>=0},QuickFilterService2.prototype.doesRowPassQuickFilterMatcher=function(usingCache,node){var quickFilterAggregateText;usingCache?(this.checkGenerateQuickFilterAggregateText(node),quickFilterAggregateText=node.quickFilterAggregateText):quickFilterAggregateText=this.getQuickFilterAggregateText(node);var _a=this,quickFilterParts=_a.quickFilterParts,matcher=_a.matcher;return matcher(quickFilterParts,quickFilterAggregateText)},QuickFilterService2.prototype.checkGenerateQuickFilterAggregateText=function(node){node.quickFilterAggregateText||(node.quickFilterAggregateText=this.getQuickFilterAggregateText(node))},QuickFilterService2.prototype.getQuickFilterTextForColumn=function(column,node){var value=this.valueService.getValue(column,node,!0),colDef=column.getColDef();if(colDef.getQuickFilterText){var params=this.gridOptionsService.addGridCommonParams({value,node,data:node.data,column,colDef});value=colDef.getQuickFilterText(params)}return exists(value)?value.toString().toUpperCase():null},QuickFilterService2.prototype.getQuickFilterAggregateText=function(node){var _this=this,stringParts=[],columns=this.columnModel.getAllColumnsForQuickFilter();return columns.forEach(function(column){var part=_this.getQuickFilterTextForColumn(column,node);exists(part)&&stringParts.push(part)}),stringParts.join(QuickFilterService_1.QUICK_FILTER_SEPARATOR)};var QuickFilterService_1;return QuickFilterService2.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",QuickFilterService2.QUICK_FILTER_SEPARATOR=`
`,__decorate$23([Autowired("valueService")],QuickFilterService2.prototype,"valueService",void 0),__decorate$23([Autowired("columnModel")],QuickFilterService2.prototype,"columnModel",void 0),__decorate$23([Autowired("rowModel")],QuickFilterService2.prototype,"rowModel",void 0),__decorate$23([PostConstruct],QuickFilterService2.prototype,"postConstruct",null),QuickFilterService2=QuickFilterService_1=__decorate$23([Bean("quickFilterService")],QuickFilterService2),QuickFilterService2}(BeanStub),__extends$2h=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$g=__name(function(){return __assign$g=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$g.apply(this,arguments)},"__assign$g"),__decorate$22=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$22"),FilterManager=function(_super){__extends$2h(FilterManager2,_super);function FilterManager2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.allColumnFilters=new Map,_this.allColumnListeners=new Map,_this.activeAggregateFilters=[],_this.activeColumnFilters=[],_this.processingFilterChange=!1,_this.filterModelUpdateQueue=[],_this.columnFilterModelUpdateQueue=[],_this.advancedFilterModelUpdateQueue=[],_this}return __name(FilterManager2,"FilterManager"),FilterManager2.prototype.init=function(){var _this=this,_a,_b,_c;this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,function(){return _this.onColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,function(){return _this.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,function(){return _this.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return _this.refreshFiltersForAggregations()}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return _this.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,function(){return _this.updateAdvancedFilterColumns()}),this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATED,function(){return _this.onNewRowsLoaded("rowDataUpdated")}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],function(){_this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",function(){_this.updateAggFiltering(),_this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",function(event){return _this.setAdvancedFilterModel(event.currentValue)}),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,function(_a2){var enabled=_a2.enabled;return _this.onAdvancedFilterEnabledChanged(enabled)}),this.addManagedListener(this.eventService,Events.EVENT_DATA_TYPES_INFERRED,function(){return _this.processFilterModelUpdateQueue()}),this.addManagedListener(this.quickFilterService,QuickFilterService.EVENT_QUICK_FILTER_CHANGED,function(){return _this.onFilterChanged({source:"quickFilter"})}),this.initialFilterModel=__assign$g({},(_c=(_b=(_a=this.gridOptionsService.get("initialState"))===null||_a===void 0?void 0:_a.filter)===null||_b===void 0?void 0:_b.filterModel)!==null&&_c!==void 0?_c:{})},FilterManager2.prototype.isExternalFilterPresentCallback=function(){var isFilterPresent=this.gridOptionsService.getCallback("isExternalFilterPresent");return typeof isFilterPresent=="function"?isFilterPresent({}):!1},FilterManager2.prototype.doesExternalFilterPass=function(node){var doesFilterPass=this.gridOptionsService.get("doesExternalFilterPass");return typeof doesFilterPass=="function"?doesFilterPass(node):!1},FilterManager2.prototype.setFilterModel=function(model,source){var _this=this;if(source===void 0&&(source="api"),this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}if(this.dataTypeService.isPendingInference()){this.filterModelUpdateQueue.push({model,source});return}var allPromises=[],previousModel=this.getFilterModel();if(model){var modelKeys_1=convertToSet(Object.keys(model));this.allColumnFilters.forEach(function(filterWrapper,colId){var newModel=model[colId];allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,newModel)),modelKeys_1.delete(colId)}),modelKeys_1.forEach(function(colId){var column=_this.columnModel.getPrimaryColumn(colId)||_this.columnModel.getGridColumn(colId);if(!column){console.warn("AG Grid: setFilterModel() - no column found for colId: "+colId);return}if(!column.isFilterAllowed()){console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+colId);return}var filterWrapper=_this.getOrCreateFilterWrapper(column,"NO_UI");if(!filterWrapper){console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+colId);return}allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,model[colId]))})}else this.allColumnFilters.forEach(function(filterWrapper){allPromises.push(_this.setModelOnFilterWrapper(filterWrapper.filterPromise,null))});AgPromise.all(allPromises).then(function(){var currentModel=_this.getFilterModel(),columns=[];_this.allColumnFilters.forEach(function(filterWrapper,colId){var before=previousModel?previousModel[colId]:null,after=currentModel?currentModel[colId]:null;_.jsonEquals(before,after)||columns.push(filterWrapper.column)}),columns.length>0&&_this.onFilterChanged({columns,source})})},FilterManager2.prototype.setModelOnFilterWrapper=function(filterPromise,newModel){return new AgPromise(function(resolve){filterPromise.then(function(filter){typeof filter.setModel!="function"&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),resolve()),(filter.setModel(newModel)||AgPromise.resolve()).then(function(){return resolve()})})})},FilterManager2.prototype.getFilterModel=function(){var _this=this,result={};return this.allColumnFilters.forEach(function(filterWrapper,key){var model=_this.getModelFromFilterWrapper(filterWrapper);exists(model)&&(result[key]=model)}),result},FilterManager2.prototype.getModelFromFilterWrapper=function(filterWrapper){var _a,filterPromise=filterWrapper.filterPromise,filter=filterPromise.resolveNow(null,function(promiseFilter){return promiseFilter});return filter==null?(_a=this.initialFilterModel[filterWrapper.column.getColId()])!==null&&_a!==void 0?_a:null:typeof filter.getModel!="function"?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):filter.getModel()},FilterManager2.prototype.isColumnFilterPresent=function(){return this.activeColumnFilters.length>0},FilterManager2.prototype.isAggregateFilterPresent=function(){return!!this.activeAggregateFilters.length},FilterManager2.prototype.isExternalFilterPresent=function(){return this.externalFilterPresent},FilterManager2.prototype.isChildFilterPresent=function(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},FilterManager2.prototype.isAdvancedFilterPresent=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()},FilterManager2.prototype.onAdvancedFilterEnabledChanged=function(enabled){var _this=this,_a;enabled?this.allColumnFilters.size&&(this.allColumnFilters.forEach(function(filterWrapper){return _this.disposeFilterWrapper(filterWrapper,"advancedFilterEnabled")}),this.onFilterChanged({source:"advancedFilter"})):!((_a=this.advancedFilterService)===null||_a===void 0)&&_a.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))},FilterManager2.prototype.isAdvancedFilterEnabled=function(){var _a;return(_a=this.advancedFilterService)===null||_a===void 0?void 0:_a.isEnabled()},FilterManager2.prototype.isAdvancedFilterHeaderActive=function(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()},FilterManager2.prototype.doAggregateFiltersPass=function(node,filterToSkip){return this.doColumnFiltersPass(node,filterToSkip,!0)},FilterManager2.prototype.updateActiveFilters=function(){var _this=this;this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;var isFilterActive=__name(function(filter){return filter?filter.isFilterActive?filter.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1):!1},"isFilterActive"),groupFilterEnabled=!!this.gridOptionsService.getGroupAggFiltering(),isAggFilter=__name(function(column){var isSecondary=!column.isPrimary();if(isSecondary)return!0;var isShowingPrimaryColumns=!_this.columnModel.isPivotActive(),isValueActive=column.isValueActive();return!isValueActive||!isShowingPrimaryColumns?!1:_this.columnModel.isPivotMode()?!0:groupFilterEnabled},"isAggFilter");this.allColumnFilters.forEach(function(filterWrapper){if(filterWrapper.filterPromise.resolveNow(!1,isFilterActive)){var filterComp=filterWrapper.filterPromise.resolveNow(null,function(filter){return filter});isAggFilter(filterWrapper.column)?_this.activeAggregateFilters.push(filterComp):_this.activeColumnFilters.push(filterComp)}})},FilterManager2.prototype.updateFilterFlagInColumns=function(source,additionalEventAttributes){this.allColumnFilters.forEach(function(filterWrapper){var isFilterActive=filterWrapper.filterPromise.resolveNow(!1,function(filter){return filter.isFilterActive()});filterWrapper.column.setFilterActive(isFilterActive,source,additionalEventAttributes)})},FilterManager2.prototype.isAnyFilterPresent=function(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()},FilterManager2.prototype.doColumnFiltersPass=function(node,filterToSkip,targetAggregates){for(var data=node.data,aggData=node.aggData,targetedFilters=targetAggregates?this.activeAggregateFilters:this.activeColumnFilters,targetedData=targetAggregates?aggData:data,i=0;i<targetedFilters.length;i++){var filter=targetedFilters[i];if(!(filter==null||filter===filterToSkip)){if(typeof filter.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!filter.doesFilterPass({node,data:targetedData}))return!1}}return!0},FilterManager2.prototype.resetQuickFilterCache=function(){this.quickFilterService.resetQuickFilterCache()},FilterManager2.prototype.refreshFiltersForAggregations=function(){var isAggFiltering=this.gridOptionsService.getGroupAggFiltering();isAggFiltering&&this.onFilterChanged()},FilterManager2.prototype.callOnFilterChangedOutsideRenderCycle=function(params){var _this=this,action=__name(function(){return _this.onFilterChanged(params)},"action");this.rowRenderer.isRefreshInProgress()?setTimeout(action,0):action()},FilterManager2.prototype.onFilterChanged=function(params){params===void 0&&(params={});var source=params.source,filterInstance=params.filterInstance,additionalEventAttributes=params.additionalEventAttributes,columns=params.columns;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",additionalEventAttributes),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(function(filterWrapper){filterWrapper.filterPromise&&filterWrapper.filterPromise.then(function(filter){filter&&filter!==filterInstance&&filter.onAnyFilterChanged&&filter.onAnyFilterChanged()})});var filterChangedEvent={source,type:Events.EVENT_FILTER_CHANGED,columns:columns||[]};additionalEventAttributes&&mergeDeep(filterChangedEvent,additionalEventAttributes),this.processingFilterChange=!0,this.eventService.dispatchEvent(filterChangedEvent),this.processingFilterChange=!1},FilterManager2.prototype.isSuppressFlashingCellsBecauseFiltering=function(){var _a,allowShowChangeAfterFilter=(_a=this.gridOptionsService.get("allowShowChangeAfterFilter"))!==null&&_a!==void 0?_a:!1;return!allowShowChangeAfterFilter&&this.processingFilterChange},FilterManager2.prototype.isQuickFilterPresent=function(){return this.quickFilterService.isQuickFilterPresent()},FilterManager2.prototype.updateAggFiltering=function(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()},FilterManager2.prototype.isAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())},FilterManager2.prototype.isNonAggregateQuickFilterPresent=function(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())},FilterManager2.prototype.doesRowPassOtherFilters=function(filterToSkip,node){return this.doesRowPassFilter({rowNode:node,filterInstanceToSkip:filterToSkip})},FilterManager2.prototype.doesRowPassAggregateFilters=function(params){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(params.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(params.rowNode,params.filterInstanceToSkip))},FilterManager2.prototype.doesRowPassFilter=function(params){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(params.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(params.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(params.rowNode,params.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(params.rowNode))},FilterManager2.prototype.onNewRowsLoaded=function(source){this.allColumnFilters.forEach(function(filterWrapper){filterWrapper.filterPromise.then(function(filter){filter.onNewRowsLoaded&&filter.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(source,{afterDataChange:!0}),this.updateActiveFilters()},FilterManager2.prototype.createValueGetter=function(column){var _this=this;return function(_a){var node=_a.node;return _this.valueService.getValue(column,node,!0)}},FilterManager2.prototype.createGetValue=function(filterColumn){var _this=this;return function(rowNode,column){var columnToUse=column?_this.columnModel.getGridColumn(column):filterColumn;return columnToUse?_this.valueService.getValue(columnToUse,rowNode,!0):void 0}},FilterManager2.prototype.getFilterComponent=function(column,source,createIfDoesNotExist){var _a;if(createIfDoesNotExist===void 0&&(createIfDoesNotExist=!0),createIfDoesNotExist)return((_a=this.getOrCreateFilterWrapper(column,source))===null||_a===void 0?void 0:_a.filterPromise)||null;var filterWrapper=this.cachedFilter(column);return filterWrapper?filterWrapper.filterPromise:null},FilterManager2.prototype.isFilterActive=function(column){var filterWrapper=this.cachedFilter(column);return!!filterWrapper&&filterWrapper.filterPromise.resolveNow(!1,function(filter){return filter.isFilterActive()})},FilterManager2.prototype.getOrCreateFilterWrapper=function(column,source){if(!column.isFilterAllowed())return null;var filterWrapper=this.cachedFilter(column);return filterWrapper?source!=="NO_UI"&&this.putIntoGui(filterWrapper,source):(filterWrapper=this.createFilterWrapper(column,source),this.setColumnFilterWrapper(column,filterWrapper)),filterWrapper},FilterManager2.prototype.cachedFilter=function(column){return this.allColumnFilters.get(column.getColId())},FilterManager2.prototype.getDefaultFilter=function(column){var defaultFilter;if(ModuleRegistry.__isRegistered(ModuleNames.SetFilterModule,this.context.getGridId()))defaultFilter="agSetColumnFilter";else{var cellDataType=this.dataTypeService.getBaseDataType(column);cellDataType==="number"?defaultFilter="agNumberColumnFilter":cellDataType==="date"||cellDataType==="dateString"?defaultFilter="agDateColumnFilter":defaultFilter="agTextColumnFilter"}return defaultFilter},FilterManager2.prototype.getDefaultFloatingFilter=function(column){var defaultFloatingFilterType;if(ModuleRegistry.__isRegistered(ModuleNames.SetFilterModule,this.context.getGridId()))defaultFloatingFilterType="agSetColumnFloatingFilter";else{var cellDataType=this.dataTypeService.getBaseDataType(column);cellDataType==="number"?defaultFloatingFilterType="agNumberColumnFloatingFilter":cellDataType==="date"||cellDataType==="dateString"?defaultFloatingFilterType="agDateColumnFloatingFilter":defaultFloatingFilterType="agTextColumnFloatingFilter"}return defaultFloatingFilterType},FilterManager2.prototype.createFilterInstance=function(column){var _this=this,defaultFilter=this.getDefaultFilter(column),colDef=column.getColDef(),filterInstance,params=__assign$g(__assign$g({},this.createFilterParams(column,colDef)),{filterModifiedCallback:function(){return _this.filterModifiedCallbackFactory(filterInstance,column)()},filterChangedCallback:function(additionalEventAttributes){return _this.filterChangedCallbackFactory(filterInstance,column)(additionalEventAttributes)},doesRowPassOtherFilter:function(node){return _this.doesRowPassOtherFilters(filterInstance,node)}}),compDetails=this.userComponentFactory.getFilterDetails(colDef,params,defaultFilter);return compDetails?{filterPromise:function(){var filterPromise=compDetails.newAgStackInstance();return filterPromise&&filterPromise.then(function(r){return filterInstance=r}),filterPromise},compDetails}:{filterPromise:null,compDetails:null}},FilterManager2.prototype.createFilterParams=function(column,colDef){var params=this.gridOptionsService.addGridCommonParams({column,colDef:cloneObject(colDef),rowModel:this.rowModel,filterChangedCallback:function(){},filterModifiedCallback:function(){},valueGetter:this.createValueGetter(column),getValue:this.createGetValue(column),doesRowPassOtherFilter:function(){return!0}});return params},FilterManager2.prototype.createFilterWrapper=function(column,source){var _a,filterWrapper={column,filterPromise:null,compiledElement:null,guiPromise:AgPromise.resolve(null),compDetails:null},_b=this.createFilterInstance(column),filterPromise=_b.filterPromise,compDetails=_b.compDetails;return filterWrapper.filterPromise=(_a=filterPromise==null?void 0:filterPromise())!==null&&_a!==void 0?_a:null,filterWrapper.compDetails=compDetails,filterPromise&&this.putIntoGui(filterWrapper,source),filterWrapper},FilterManager2.prototype.putIntoGui=function(filterWrapper,source){var _this=this,eFilterGui=document.createElement("div");eFilterGui.className="ag-filter",filterWrapper.guiPromise=new AgPromise(function(resolve){filterWrapper.filterPromise.then(function(filter){var guiFromFilter=filter.getGui();exists(guiFromFilter)||console.warn("AG Grid: getGui method from filter returned ".concat(guiFromFilter,", it should be a DOM element or an HTML template string.")),typeof guiFromFilter=="string"&&(guiFromFilter=loadTemplate(guiFromFilter)),eFilterGui.appendChild(guiFromFilter),resolve(eFilterGui);var event={type:Events.EVENT_FILTER_OPENED,column:filterWrapper.column,source,eGui:eFilterGui};_this.eventService.dispatchEvent(event)})})},FilterManager2.prototype.onColumnsChanged=function(){var _this=this,columns=[];this.allColumnFilters.forEach(function(wrapper,colId){var currentColumn;wrapper.column.isPrimary()?currentColumn=_this.columnModel.getPrimaryColumn(colId):currentColumn=_this.columnModel.getGridColumn(colId),!currentColumn&&(columns.push(wrapper.column),_this.disposeFilterWrapper(wrapper,"columnChanged"),_this.disposeColumnListener(colId))}),columns.length>0?this.onFilterChanged({columns,source:"api"}):this.updateDependantFilters()},FilterManager2.prototype.updateDependantFilters=function(){var _this=this,groupColumns=this.columnModel.getGroupAutoColumns();groupColumns==null||groupColumns.forEach(function(groupColumn){groupColumn.getColDef().filter==="agGroupColumnFilter"&&_this.getOrCreateFilterWrapper(groupColumn,"NO_UI")})},FilterManager2.prototype.isFilterAllowed=function(column){var _a,_b;if(this.isAdvancedFilterEnabled())return!1;var isFilterAllowed=column.isFilterAllowed();if(!isFilterAllowed)return!1;var filterWrapper=this.allColumnFilters.get(column.getColId());return(_b=(_a=filterWrapper==null?void 0:filterWrapper.filterPromise)===null||_a===void 0?void 0:_a.resolveNow(!0,function(filter){return typeof(filter==null?void 0:filter.isFilterAllowed)=="function"?filter==null?void 0:filter.isFilterAllowed():!0}))!==null&&_b!==void 0?_b:!0},FilterManager2.prototype.getFloatingFilterCompDetails=function(column,showParentFilter){var _this=this,parentFilterInstance=__name(function(callback){var filterComponent=_this.getFilterComponent(column,"NO_UI");filterComponent!=null&&filterComponent.then(function(instance){callback(unwrapUserComp(instance))})},"parentFilterInstance"),colDef=column.getColDef(),filterParams=__assign$g(__assign$g({},this.createFilterParams(column,colDef)),{filterChangedCallback:function(){return parentFilterInstance(function(filterInstance){return _this.filterChangedCallbackFactory(filterInstance,column)()})}}),finalFilterParams=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(colDef,FilterComponent,filterParams),defaultFloatingFilterType=this.userComponentFactory.getDefaultFloatingFilterType(colDef,function(){return _this.getDefaultFloatingFilter(column)});defaultFloatingFilterType==null&&(defaultFloatingFilterType="agReadOnlyFloatingFilter");var params={column,filterParams:finalFilterParams,currentParentModel:function(){return _this.getCurrentFloatingFilterParentModel(column)},parentFilterInstance,showParentFilter,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(colDef,params,defaultFloatingFilterType)},FilterManager2.prototype.getCurrentFloatingFilterParentModel=function(column){var filterComponent=this.getFilterComponent(column,"NO_UI",!1);return filterComponent?filterComponent.resolveNow(null,function(filter){return filter&&filter.getModel()}):null},FilterManager2.prototype.destroyFilter=function(column,source){source===void 0&&(source="api");var colId=column.getColId(),filterWrapper=this.allColumnFilters.get(colId);this.disposeColumnListener(colId),delete this.initialFilterModel[colId],filterWrapper&&(this.disposeFilterWrapper(filterWrapper,source),this.onFilterChanged({columns:[column],source:"api"}))},FilterManager2.prototype.disposeColumnListener=function(colId){var columnListener=this.allColumnListeners.get(colId);columnListener&&(this.allColumnListeners.delete(colId),columnListener())},FilterManager2.prototype.disposeFilterWrapper=function(filterWrapper,source){var _this=this;filterWrapper.filterPromise.then(function(filter){_this.getContext().destroyBean(filter),filterWrapper.column.setFilterActive(!1,"filterDestroyed"),_this.allColumnFilters.delete(filterWrapper.column.getColId());var event={type:Events.EVENT_FILTER_DESTROYED,source,column:filterWrapper.column};_this.eventService.dispatchEvent(event)})},FilterManager2.prototype.filterModifiedCallbackFactory=function(filter,column){var _this=this;return function(){var event={type:Events.EVENT_FILTER_MODIFIED,column,filterInstance:filter};_this.eventService.dispatchEvent(event)}},FilterManager2.prototype.filterChangedCallbackFactory=function(filter,column){var _this=this;return function(additionalEventAttributes){var _a,source=(_a=additionalEventAttributes==null?void 0:additionalEventAttributes.source)!==null&&_a!==void 0?_a:"api",params={filter,additionalEventAttributes,columns:[column],source};_this.callOnFilterChangedOutsideRenderCycle(params)}},FilterManager2.prototype.checkDestroyFilter=function(colId){var _this=this,filterWrapper=this.allColumnFilters.get(colId);if(filterWrapper){var column=filterWrapper.column,compDetails=(column.isFilterAllowed()?this.createFilterInstance(column):{compDetails:null}).compDetails;if(this.areFilterCompsDifferent(filterWrapper.compDetails,compDetails)){this.destroyFilter(column,"paramsUpdated");return}var newFilterParams=column.getColDef().filterParams;if(!filterWrapper.filterPromise){this.destroyFilter(column,"paramsUpdated");return}filterWrapper.filterPromise.then(function(filter){var shouldRefreshFilter=filter!=null&&filter.refresh?filter.refresh(__assign$g(__assign$g(__assign$g({},_this.createFilterParams(column,column.getColDef())),{filterModifiedCallback:_this.filterModifiedCallbackFactory(filter,column),filterChangedCallback:_this.filterChangedCallbackFactory(filter,column),doesRowPassOtherFilter:function(node){return _this.doesRowPassOtherFilters(filter,node)}}),newFilterParams)):!0;shouldRefreshFilter===!1&&_this.destroyFilter(column,"paramsUpdated")})}},FilterManager2.prototype.setColumnFilterWrapper=function(column,filterWrapper){var _this=this,colId=column.getColId();this.allColumnFilters.set(colId,filterWrapper),this.allColumnListeners.set(colId,this.addManagedListener(column,Column.EVENT_COL_DEF_CHANGED,function(){return _this.checkDestroyFilter(colId)}))},FilterManager2.prototype.areFilterCompsDifferent=function(oldCompDetails,newCompDetails){if(!newCompDetails||!oldCompDetails)return!0;var oldComponentClass=oldCompDetails.componentClass,newComponentClass=newCompDetails.componentClass,isSameComponentClass=oldComponentClass===newComponentClass||(oldComponentClass==null?void 0:oldComponentClass.render)&&(newComponentClass==null?void 0:newComponentClass.render)&&oldComponentClass.render===newComponentClass.render;return!isSameComponentClass},FilterManager2.prototype.getAdvancedFilterModel=function(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null},FilterManager2.prototype.setAdvancedFilterModel=function(expression){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference()){this.advancedFilterModelUpdateQueue.push(expression);return}this.advancedFilterService.setModel(expression??null),this.onFilterChanged({source:"advancedFilter"})}},FilterManager2.prototype.showAdvancedFilterBuilder=function(source){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder(source,!0)},FilterManager2.prototype.updateAdvancedFilterColumns=function(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})},FilterManager2.prototype.hasFloatingFilters=function(){if(this.isAdvancedFilterEnabled())return!1;var gridColumns=this.columnModel.getAllGridColumns();return gridColumns.some(function(col){return col.getColDef().floatingFilter})},FilterManager2.prototype.getFilterInstance=function(key,callback){if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}var res=this.getFilterInstanceImpl(key,function(instance){if(callback){var unwrapped2=unwrapUserComp(instance);callback(unwrapped2)}}),unwrapped=unwrapUserComp(res);return unwrapped},FilterManager2.prototype.getColumnFilterInstance=function(key){var _this=this;return new Promise(function(resolve){_this.getFilterInstance(key,function(filter){resolve(filter)})})},FilterManager2.prototype.getFilterInstanceImpl=function(key,callback){var column=this.columnModel.getPrimaryColumn(key);if(column){var filterPromise=this.getFilterComponent(column,"NO_UI"),currentValue=filterPromise&&filterPromise.resolveNow(null,function(filterComp){return filterComp});return currentValue?setTimeout(callback,0,currentValue):filterPromise&&filterPromise.then(function(comp){callback(comp)}),currentValue}},FilterManager2.prototype.warnAdvancedFilters=function(){warnOnce("Column Filter API methods have been disabled as Advanced Filters are enabled.")},FilterManager2.prototype.setupAdvancedFilterHeaderComp=function(eCompToInsertBefore){var _a;(_a=this.advancedFilterService)===null||_a===void 0||_a.getCtrl().setupHeaderComp(eCompToInsertBefore)},FilterManager2.prototype.getHeaderRowCount=function(){return this.isAdvancedFilterHeaderActive()?1:0},FilterManager2.prototype.getHeaderHeight=function(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0},FilterManager2.prototype.processFilterModelUpdateQueue=function(){var _this=this;this.filterModelUpdateQueue.forEach(function(_a){var model=_a.model,source=_a.source;return _this.setFilterModel(model,source)}),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(function(_a){var key=_a.key,model=_a.model,resolve=_a.resolve;_this.setColumnFilterModel(key,model).then(function(){return resolve()})}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(function(model){return _this.setAdvancedFilterModel(model)}),this.advancedFilterModelUpdateQueue=[]},FilterManager2.prototype.getColumnFilterModel=function(key){var filterWrapper=this.getFilterWrapper(key);return filterWrapper?this.getModelFromFilterWrapper(filterWrapper):null},FilterManager2.prototype.setColumnFilterModel=function(key,model){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){var resolve_1=__name(function(){},"resolve_1"),promise=new Promise(function(res){resolve_1=res});return this.columnFilterModelUpdateQueue.push({key,model,resolve:resolve_1}),promise}var column=this.columnModel.getPrimaryColumn(key),filterWrapper=column?this.getOrCreateFilterWrapper(column,"NO_UI"):null,convertPromise=__name(function(promise2){return new Promise(function(resolve){promise2.then(function(result){return resolve(result)})})},"convertPromise");return filterWrapper?convertPromise(this.setModelOnFilterWrapper(filterWrapper.filterPromise,model)):Promise.resolve()},FilterManager2.prototype.getFilterWrapper=function(key){var _a,column=this.columnModel.getPrimaryColumn(key);return column&&(_a=this.cachedFilter(column))!==null&&_a!==void 0?_a:null},FilterManager2.prototype.destroy=function(){var _this=this;_super.prototype.destroy.call(this),this.allColumnFilters.forEach(function(filterWrapper){return _this.disposeFilterWrapper(filterWrapper,"gridDestroyed")}),this.allColumnListeners.clear()},__decorate$22([Autowired("valueService")],FilterManager2.prototype,"valueService",void 0),__decorate$22([Autowired("columnModel")],FilterManager2.prototype,"columnModel",void 0),__decorate$22([Autowired("rowModel")],FilterManager2.prototype,"rowModel",void 0),__decorate$22([Autowired("userComponentFactory")],FilterManager2.prototype,"userComponentFactory",void 0),__decorate$22([Autowired("rowRenderer")],FilterManager2.prototype,"rowRenderer",void 0),__decorate$22([Autowired("dataTypeService")],FilterManager2.prototype,"dataTypeService",void 0),__decorate$22([Autowired("quickFilterService")],FilterManager2.prototype,"quickFilterService",void 0),__decorate$22([Optional("advancedFilterService")],FilterManager2.prototype,"advancedFilterService",void 0),__decorate$22([PostConstruct],FilterManager2.prototype,"init",null),FilterManager2=__decorate$22([Bean("filterManager")],FilterManager2),FilterManager2}(BeanStub),__extends$2g=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AbstractHeaderCellComp=function(_super){__extends$2g(AbstractHeaderCellComp2,_super);function AbstractHeaderCellComp2(template,ctrl){var _this=_super.call(this,template)||this;return _this.ctrl=ctrl,_this}return __name(AbstractHeaderCellComp2,"AbstractHeaderCellComp"),AbstractHeaderCellComp2.prototype.getCtrl=function(){return this.ctrl},AbstractHeaderCellComp2}(Component),__extends$2f=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$21=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$21"),HeaderFilterCellComp=function(_super){__extends$2f(HeaderFilterCellComp2,_super);function HeaderFilterCellComp2(ctrl){return _super.call(this,HeaderFilterCellComp2.TEMPLATE,ctrl)||this}return __name(HeaderFilterCellComp2,"HeaderFilterCellComp"),HeaderFilterCellComp2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},addOrRemoveBodyCssClass:function(cssClassName,on){return _this.eFloatingFilterBody.classList.toggle(cssClassName,on)},setButtonWrapperDisplayed:function(displayed){return setDisplayed(_this.eButtonWrapper,displayed)},setCompDetails:function(compDetails){return _this.setCompDetails(compDetails)},getFloatingFilterComp:function(){return _this.compPromise},setWidth:function(width){return eGui.style.width=width},setMenuIcon:function(eIcon){return _this.eButtonShowMainFilter.appendChild(eIcon)}};this.ctrl.setComp(compProxy,eGui,this.eButtonShowMainFilter,this.eFloatingFilterBody)},HeaderFilterCellComp2.prototype.setCompDetails=function(compDetails){var _this=this;if(!compDetails){this.destroyFloatingFilterComp(),this.compPromise=null;return}this.compPromise=compDetails.newAgStackInstance(),this.compPromise.then(function(comp){return _this.afterCompCreated(comp)})},HeaderFilterCellComp2.prototype.destroyFloatingFilterComp=function(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))},HeaderFilterCellComp2.prototype.afterCompCreated=function(comp){if(comp){if(!this.isAlive()){this.destroyBean(comp);return}this.destroyFloatingFilterComp(),this.floatingFilterComp=comp,this.eFloatingFilterBody.appendChild(comp.getGui()),comp.afterGuiAttached&&comp.afterGuiAttached()}},HeaderFilterCellComp2.TEMPLATE=`<div class="ag-header-cell ag-floating-filter" role="gridcell">
            <div ref="eFloatingFilterBody" role="presentation"></div>
            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">
                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>
            </div>
        </div>`,__decorate$21([RefSelector("eFloatingFilterBody")],HeaderFilterCellComp2.prototype,"eFloatingFilterBody",void 0),__decorate$21([RefSelector("eButtonWrapper")],HeaderFilterCellComp2.prototype,"eButtonWrapper",void 0),__decorate$21([RefSelector("eButtonShowMainFilter")],HeaderFilterCellComp2.prototype,"eButtonShowMainFilter",void 0),__decorate$21([PostConstruct],HeaderFilterCellComp2.prototype,"postConstruct",null),__decorate$21([PreDestroy],HeaderFilterCellComp2.prototype,"destroyFloatingFilterComp",null),HeaderFilterCellComp2}(AbstractHeaderCellComp),__extends$2e=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$20=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$20"),LayoutCssClasses;(function(LayoutCssClasses2){LayoutCssClasses2.AUTO_HEIGHT="ag-layout-auto-height",LayoutCssClasses2.NORMAL="ag-layout-normal",LayoutCssClasses2.PRINT="ag-layout-print"})(LayoutCssClasses||(LayoutCssClasses={}));var LayoutFeature=function(_super){__extends$2e(LayoutFeature2,_super);function LayoutFeature2(view){var _this=_super.call(this)||this;return _this.view=view,_this}return __name(LayoutFeature2,"LayoutFeature"),LayoutFeature2.prototype.postConstruct=function(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()},LayoutFeature2.prototype.updateLayoutClasses=function(){var domLayout=this.getDomLayout(),params={autoHeight:domLayout==="autoHeight",normal:domLayout==="normal",print:domLayout==="print"},cssClass=params.autoHeight?LayoutCssClasses.AUTO_HEIGHT:params.print?LayoutCssClasses.PRINT:LayoutCssClasses.NORMAL;this.view.updateLayoutClasses(cssClass,params)},LayoutFeature2.prototype.getDomLayout=function(){var _a,domLayout=(_a=this.gridOptionsService.get("domLayout"))!==null&&_a!==void 0?_a:"normal",validLayouts=["normal","print","autoHeight"];return validLayouts.indexOf(domLayout)===-1?(warnOnce("".concat(domLayout," is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.")),"normal"):domLayout},__decorate$20([PostConstruct],LayoutFeature2.prototype,"postConstruct",null),LayoutFeature2}(BeanStub),__extends$2d=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$f=__name(function(){return __assign$f=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$f.apply(this,arguments)},"__assign$f"),__decorate$1$=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1$"),ScrollDirection;(function(ScrollDirection2){ScrollDirection2[ScrollDirection2.Vertical=0]="Vertical",ScrollDirection2[ScrollDirection2.Horizontal=1]="Horizontal"})(ScrollDirection||(ScrollDirection={}));var ScrollSource;(function(ScrollSource2){ScrollSource2[ScrollSource2.Container=0]="Container",ScrollSource2[ScrollSource2.FakeContainer=1]="FakeContainer"})(ScrollSource||(ScrollSource={}));var GridBodyScrollFeature=function(_super){__extends$2d(GridBodyScrollFeature2,_super);function GridBodyScrollFeature2(eBodyViewport){var _this=_super.call(this)||this;return _this.lastScrollSource=[null,null],_this.scrollLeft=-1,_this.nextScrollTop=-1,_this.scrollTop=-1,_this.lastOffsetHeight=-1,_this.lastScrollTop=-1,_this.eBodyViewport=eBodyViewport,_this.resetLastHScrollDebounced=debounce(function(){return _this.lastScrollSource[ScrollDirection.Horizontal]=null},500),_this.resetLastVScrollDebounced=debounce(function(){return _this.lastScrollSource[ScrollDirection.Vertical]=null},500),_this}return __name(GridBodyScrollFeature2,"GridBodyScrollFeature"),GridBodyScrollFeature2.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl,_this.onDisplayedColumnsWidthChanged(),_this.addScrollListener()})},GridBodyScrollFeature2.prototype.addScrollListener=function(){var fakeHScroll=this.ctrlsService.getFakeHScrollComp(),fakeVScroll=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),fakeHScroll.onScrollCallback(this.onFakeHScroll.bind(this));var isDebounce=this.gridOptionsService.get("debounceVerticalScrollbar"),onVScroll=isDebounce?debounce(this.onVScroll.bind(this),100):this.onVScroll.bind(this),onFakeVScroll=isDebounce?debounce(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",onVScroll),fakeVScroll.onScrollCallback(onFakeVScroll)},GridBodyScrollFeature2.prototype.onDisplayedColumnsWidthChanged=function(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()},GridBodyScrollFeature2.prototype.horizontallyScrollHeaderCenterAndFloatingCenter=function(scrollLeft){var notYetInitialised=this.centerRowContainerCtrl==null;if(!notYetInitialised){scrollLeft===void 0&&(scrollLeft=this.centerRowContainerCtrl.getCenterViewportScrollLeft());var offset=this.enableRtl?scrollLeft:-scrollLeft,topCenterContainer=this.ctrlsService.getTopCenterRowContainerCtrl(),stickyTopCenterContainer=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),bottomCenterContainer=this.ctrlsService.getBottomCenterRowContainerCtrl(),fakeHScroll=this.ctrlsService.getFakeHScrollComp(),centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();centerHeaderContainer.setHorizontalScroll(-offset),bottomCenterContainer.setContainerTranslateX(offset),topCenterContainer.setContainerTranslateX(offset),stickyTopCenterContainer.setContainerTranslateX(offset);var centerViewport=this.centerRowContainerCtrl.getViewportElement(),isCenterViewportLastHorizontal=this.lastScrollSource[ScrollDirection.Horizontal]===ScrollSource.Container;scrollLeft=Math.abs(scrollLeft),isCenterViewportLastHorizontal?fakeHScroll.setScrollPosition(scrollLeft):setScrollLeft(centerViewport,scrollLeft,this.enableRtl)}},GridBodyScrollFeature2.prototype.isControllingScroll=function(source,direction){return this.lastScrollSource[direction]==null?(this.lastScrollSource[direction]=source,!0):this.lastScrollSource[direction]===source},GridBodyScrollFeature2.prototype.onFakeHScroll=function(){this.isControllingScroll(ScrollSource.FakeContainer,ScrollDirection.Horizontal)&&this.onHScrollCommon(ScrollSource.FakeContainer)},GridBodyScrollFeature2.prototype.onHScroll=function(){this.isControllingScroll(ScrollSource.Container,ScrollDirection.Horizontal)&&this.onHScrollCommon(ScrollSource.Container)},GridBodyScrollFeature2.prototype.onHScrollCommon=function(source){var centerContainerViewport=this.centerRowContainerCtrl.getViewportElement(),scrollLeft=centerContainerViewport.scrollLeft;if(!this.shouldBlockScrollUpdate(ScrollDirection.Horizontal,scrollLeft,!0)){var newScrollLeft;source===ScrollSource.Container?newScrollLeft=getScrollLeft(centerContainerViewport,this.enableRtl):newScrollLeft=this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(newScrollLeft)),this.resetLastHScrollDebounced()}},GridBodyScrollFeature2.prototype.onFakeVScroll=function(){this.isControllingScroll(ScrollSource.FakeContainer,ScrollDirection.Vertical)&&this.onVScrollCommon(ScrollSource.FakeContainer)},GridBodyScrollFeature2.prototype.onVScroll=function(){this.isControllingScroll(ScrollSource.Container,ScrollDirection.Vertical)&&this.onVScrollCommon(ScrollSource.Container)},GridBodyScrollFeature2.prototype.onVScrollCommon=function(source){var scrollTop;source===ScrollSource.Container?scrollTop=this.eBodyViewport.scrollTop:scrollTop=this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(ScrollDirection.Vertical,scrollTop,!0)&&(this.animationFrameService.setScrollTop(scrollTop),this.nextScrollTop=scrollTop,source===ScrollSource.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(scrollTop):this.eBodyViewport.scrollTop=scrollTop,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())},GridBodyScrollFeature2.prototype.doHorizontalScroll=function(scrollLeft){var fakeScrollLeft=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===scrollLeft&&scrollLeft===fakeScrollLeft||(this.scrollLeft=scrollLeft,this.fireScrollEvent(ScrollDirection.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(scrollLeft),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))},GridBodyScrollFeature2.prototype.fireScrollEvent=function(direction){var _this=this,bodyScrollEvent={type:Events.EVENT_BODY_SCROLL,direction:direction===ScrollDirection.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(bodyScrollEvent),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(function(){var bodyScrollEndEvent=__assign$f(__assign$f({},bodyScrollEvent),{type:Events.EVENT_BODY_SCROLL_END});_this.eventService.dispatchEvent(bodyScrollEndEvent)},100)},GridBodyScrollFeature2.prototype.shouldBlockScrollUpdate=function(direction,scrollTo,touchOnly){return touchOnly===void 0&&(touchOnly=!1),touchOnly&&!isIOSUserAgent()?!1:direction===ScrollDirection.Vertical?this.shouldBlockVerticalScroll(scrollTo):this.shouldBlockHorizontalScroll(scrollTo)},GridBodyScrollFeature2.prototype.shouldBlockVerticalScroll=function(scrollTo){var clientHeight=getInnerHeight(this.eBodyViewport),scrollHeight=this.eBodyViewport.scrollHeight;return scrollTo<0||scrollTo+clientHeight>scrollHeight},GridBodyScrollFeature2.prototype.shouldBlockHorizontalScroll=function(scrollTo){var clientWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollWidth=this.centerRowContainerCtrl.getViewportElement().scrollWidth;if(this.enableRtl&&isRtlNegativeScroll()){if(scrollTo>0)return!0}else if(scrollTo<0)return!0;return Math.abs(scrollTo)+clientWidth>scrollWidth},GridBodyScrollFeature2.prototype.redrawRowsAfterScroll=function(){this.fireScrollEvent(ScrollDirection.Vertical)},GridBodyScrollFeature2.prototype.checkScrollLeft=function(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(ScrollSource.Container)},GridBodyScrollFeature2.prototype.scrollGridIfNeeded=function(){var frameNeeded=this.scrollTop!=this.nextScrollTop;return frameNeeded&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),frameNeeded},GridBodyScrollFeature2.prototype.setHorizontalScrollPosition=function(hScrollPosition,fromAlignedGridsService){fromAlignedGridsService===void 0&&(fromAlignedGridsService=!1);var minScrollLeft=0,maxScrollLeft=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!fromAlignedGridsService&&this.shouldBlockScrollUpdate(ScrollDirection.Horizontal,hScrollPosition)&&(this.enableRtl&&isRtlNegativeScroll()?hScrollPosition=hScrollPosition>0?0:maxScrollLeft:hScrollPosition=Math.min(Math.max(hScrollPosition,minScrollLeft),maxScrollLeft)),setScrollLeft(this.centerRowContainerCtrl.getViewportElement(),Math.abs(hScrollPosition),this.enableRtl),this.doHorizontalScroll(hScrollPosition)},GridBodyScrollFeature2.prototype.setVerticalScrollPosition=function(vScrollPosition){this.eBodyViewport.scrollTop=vScrollPosition},GridBodyScrollFeature2.prototype.getVScrollPosition=function(){this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight;var result={top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight};return result},GridBodyScrollFeature2.prototype.getApproximateVScollPosition=function(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()},GridBodyScrollFeature2.prototype.getHScrollPosition=function(){return this.centerRowContainerCtrl.getHScrollPosition()},GridBodyScrollFeature2.prototype.isHorizontalScrollShowing=function(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()},GridBodyScrollFeature2.prototype.scrollHorizontally=function(pixels){var oldScrollPosition=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(oldScrollPosition+pixels),this.centerRowContainerCtrl.getViewportElement().scrollLeft-oldScrollPosition},GridBodyScrollFeature2.prototype.scrollToTop=function(){this.eBodyViewport.scrollTop=0},GridBodyScrollFeature2.prototype.ensureNodeVisible=function(comparator,position){position===void 0&&(position=null);for(var rowCount=this.rowModel.getRowCount(),indexToSelect=-1,i=0;i<rowCount;i++){var node=this.rowModel.getRow(i);if(typeof comparator=="function"){var predicate=comparator;if(node&&predicate(node)){indexToSelect=i;break}}else if(comparator===node||comparator===node.data){indexToSelect=i;break}}indexToSelect>=0&&this.ensureIndexVisible(indexToSelect,position)},GridBodyScrollFeature2.prototype.ensureIndexVisible=function(index,position){var _this=this;if(!this.gridOptionsService.isDomLayout("print")){var rowCount=this.paginationProxy.getRowCount();if(typeof index!="number"||index<0||index>=rowCount){console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+index);return}var isPaging=this.gridOptionsService.get("pagination"),paginationPanelEnabled=isPaging&&!this.gridOptionsService.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(function(){paginationPanelEnabled||_this.paginationProxy.goToPageWithIndex(index);var gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),stickyTopHeight=gridBodyCtrl.getStickyTopHeight(),rowNode=_this.paginationProxy.getRow(index),rowGotShiftedDuringOperation;do{var startingRowTop=rowNode.rowTop,startingRowHeight=rowNode.rowHeight,paginationOffset=_this.paginationProxy.getPixelOffset(),rowTopPixel=rowNode.rowTop-paginationOffset,rowBottomPixel=rowTopPixel+rowNode.rowHeight,scrollPosition=_this.getVScrollPosition(),heightOffset=_this.heightScaler.getDivStretchOffset(),vScrollTop=scrollPosition.top+heightOffset,vScrollBottom=scrollPosition.bottom+heightOffset,viewportHeight=vScrollBottom-vScrollTop,pxTop=_this.heightScaler.getScrollPositionForPixel(rowTopPixel),pxBottom=_this.heightScaler.getScrollPositionForPixel(rowBottomPixel-viewportHeight),pxMiddle=Math.min((pxTop+pxBottom)/2,rowTopPixel),rowAboveViewport=vScrollTop+stickyTopHeight>rowTopPixel,rowBelowViewport=vScrollBottom<rowBottomPixel,newScrollPosition=null;position==="top"?newScrollPosition=pxTop:position==="bottom"?newScrollPosition=pxBottom:position==="middle"?newScrollPosition=pxMiddle:rowAboveViewport?newScrollPosition=pxTop-stickyTopHeight:rowBelowViewport&&(newScrollPosition=pxBottom),newScrollPosition!==null&&(_this.setVerticalScrollPosition(newScrollPosition),_this.rowRenderer.redraw({afterScroll:!0})),rowGotShiftedDuringOperation=startingRowTop!==rowNode.rowTop||startingRowHeight!==rowNode.rowHeight}while(rowGotShiftedDuringOperation);_this.animationFrameService.flushAllFrames()})}},GridBodyScrollFeature2.prototype.ensureColumnVisible=function(key,position){var _this=this;position===void 0&&(position="auto");var column=this.columnModel.getGridColumn(key);if(column&&!column.isPinned()&&this.columnModel.isColumnDisplayed(column)){var newHorizontalScroll=this.getPositionedHorizontalScroll(column,position);this.getFrameworkOverrides().wrapIncoming(function(){newHorizontalScroll!==null&&_this.centerRowContainerCtrl.setCenterViewportScrollLeft(newHorizontalScroll),_this.centerRowContainerCtrl.onHorizontalViewportChanged(),_this.animationFrameService.flushAllFrames()})}},GridBodyScrollFeature2.prototype.setScrollPosition=function(top,left){var _this=this;this.getFrameworkOverrides().wrapIncoming(function(){_this.centerRowContainerCtrl.setCenterViewportScrollLeft(left),_this.setVerticalScrollPosition(top),_this.rowRenderer.redraw({afterScroll:!0}),_this.animationFrameService.flushAllFrames()})},GridBodyScrollFeature2.prototype.getPositionedHorizontalScroll=function(column,position){var _a=this.isColumnOutsideViewport(column),columnBeforeStart=_a.columnBeforeStart,columnAfterEnd=_a.columnAfterEnd,viewportTooSmallForColumn=this.centerRowContainerCtrl.getCenterWidth()<column.getActualWidth(),viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),isRtl=this.enableRtl,alignColToStart=(isRtl?columnBeforeStart:columnAfterEnd)||viewportTooSmallForColumn,alignColToEnd=isRtl?columnAfterEnd:columnBeforeStart;position!=="auto"&&(alignColToStart=position==="start",alignColToEnd=position==="end");var isMiddle=position==="middle";if(alignColToStart||alignColToEnd||isMiddle){var _b=this.getColumnBounds(column),colLeft=_b.colLeft,colMiddle=_b.colMiddle,colRight=_b.colRight;return isMiddle?colMiddle-viewportWidth/2:alignColToStart?isRtl?colRight:colLeft:isRtl?colLeft-viewportWidth:colRight-viewportWidth}return null},GridBodyScrollFeature2.prototype.isColumnOutsideViewport=function(column){var _a=this.getViewportBounds(),viewportStart=_a.start,viewportEnd=_a.end,_b=this.getColumnBounds(column),colLeft=_b.colLeft,colRight=_b.colRight,isRtl=this.enableRtl,columnBeforeStart=isRtl?viewportStart>colRight:viewportEnd<colRight,columnAfterEnd=isRtl?viewportEnd<colLeft:viewportStart>colLeft;return{columnBeforeStart,columnAfterEnd}},GridBodyScrollFeature2.prototype.getColumnBounds=function(column){var isRtl=this.enableRtl,bodyWidth=this.columnModel.getBodyContainerWidth(),colWidth=column.getActualWidth(),colLeft=column.getLeft(),multiplier=isRtl?-1:1,colLeftPixel=isRtl?bodyWidth-colLeft:colLeft,colRightPixel=colLeftPixel+colWidth*multiplier,colMidPixel=colLeftPixel+colWidth/2*multiplier;return{colLeft:colLeftPixel,colMiddle:colMidPixel,colRight:colRightPixel}},GridBodyScrollFeature2.prototype.getViewportBounds=function(){var viewportWidth=this.centerRowContainerCtrl.getCenterWidth(),scrollPosition=this.centerRowContainerCtrl.getCenterViewportScrollLeft(),viewportStartPixel=scrollPosition,viewportEndPixel=viewportWidth+scrollPosition;return{start:viewportStartPixel,end:viewportEndPixel,width:viewportWidth}},__decorate$1$([Autowired("ctrlsService")],GridBodyScrollFeature2.prototype,"ctrlsService",void 0),__decorate$1$([Autowired("animationFrameService")],GridBodyScrollFeature2.prototype,"animationFrameService",void 0),__decorate$1$([Autowired("paginationProxy")],GridBodyScrollFeature2.prototype,"paginationProxy",void 0),__decorate$1$([Autowired("rowModel")],GridBodyScrollFeature2.prototype,"rowModel",void 0),__decorate$1$([Autowired("rowContainerHeightService")],GridBodyScrollFeature2.prototype,"heightScaler",void 0),__decorate$1$([Autowired("rowRenderer")],GridBodyScrollFeature2.prototype,"rowRenderer",void 0),__decorate$1$([Autowired("columnModel")],GridBodyScrollFeature2.prototype,"columnModel",void 0),__decorate$1$([PostConstruct],GridBodyScrollFeature2.prototype,"postConstruct",null),GridBodyScrollFeature2}(BeanStub),__extends$2c=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$e=__name(function(){return __assign$e=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$e.apply(this,arguments)},"__assign$e"),__decorate$1_=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1_"),__read$s=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$s"),__spreadArray$n=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$n"),RowDragFeature=function(_super){__extends$2c(RowDragFeature2,_super);function RowDragFeature2(eContainer){var _this=_super.call(this)||this;return _this.isMultiRowDrag=!1,_this.eContainer=eContainer,_this}return __name(RowDragFeature2,"RowDragFeature"),RowDragFeature2.prototype.postConstruct=function(){var _this=this;this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(function(){var gridBodyCon=_this.ctrlsService.getGridBodyCtrl();_this.autoScrollService=new AutoScrollService({scrollContainer:gridBodyCon.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:function(){return gridBodyCon.getScrollFeature().getVScrollPosition().top},setVerticalPosition:function(position){return gridBodyCon.getScrollFeature().setVerticalScrollPosition(position)},onScrollCallback:function(){_this.onDragging(_this.lastDraggingEvent)}})})},RowDragFeature2.prototype.getContainer=function(){return this.eContainer},RowDragFeature2.prototype.isInterestedIn=function(type){return type===DragSourceType.RowDrag},RowDragFeature2.prototype.getIconName=function(){var managedDrag=this.gridOptionsService.get("rowDragManaged");return managedDrag&&this.shouldPreventRowMove()?DragAndDropService.ICON_NOT_ALLOWED:DragAndDropService.ICON_MOVE},RowDragFeature2.prototype.shouldPreventRowMove=function(){var rowGroupCols=this.columnModel.getRowGroupColumns();if(rowGroupCols.length)return!0;var isFilterPresent=this.filterManager.isAnyFilterPresent();if(isFilterPresent)return!0;var isSortActive=this.sortController.isSortActive();return!!isSortActive},RowDragFeature2.prototype.getRowNodes=function(draggingEvent){var _this=this;if(!this.isFromThisGrid(draggingEvent))return draggingEvent.dragItem.rowNodes||[];var isRowDragMultiRow=this.gridOptionsService.get("rowDragMultiRow"),selectedNodes=__spreadArray$n([],__read$s(this.selectionService.getSelectedNodes()),!1).sort(function(a,b){return a.rowIndex==null||b.rowIndex==null?0:_this.getRowIndexNumber(a)-_this.getRowIndexNumber(b)}),currentNode=draggingEvent.dragItem.rowNode;return isRowDragMultiRow&&selectedNodes.indexOf(currentNode)!==-1?(this.isMultiRowDrag=!0,selectedNodes):(this.isMultiRowDrag=!1,[currentNode])},RowDragFeature2.prototype.onDragEnter=function(draggingEvent){draggingEvent.dragItem.rowNodes=this.getRowNodes(draggingEvent),this.dispatchGridEvent(Events.EVENT_ROW_DRAG_ENTER,draggingEvent),this.getRowNodes(draggingEvent).forEach(function(rowNode){rowNode.setDragging(!0)}),this.onEnterOrDragging(draggingEvent)},RowDragFeature2.prototype.onDragging=function(draggingEvent){this.onEnterOrDragging(draggingEvent)},RowDragFeature2.prototype.isFromThisGrid=function(draggingEvent){var dragSourceDomDataKey=draggingEvent.dragSource.dragSourceDomDataKey;return dragSourceDomDataKey===this.gridOptionsService.getDomDataKey()},RowDragFeature2.prototype.isDropZoneWithinThisGrid=function(draggingEvent){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),gridGui=gridBodyCon.getGui(),dropZoneTarget=draggingEvent.dropZoneTarget;return!gridGui.contains(dropZoneTarget)},RowDragFeature2.prototype.onEnterOrDragging=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_MOVE,draggingEvent),this.lastDraggingEvent=draggingEvent;var pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y,managedDrag=this.gridOptionsService.get("rowDragManaged");managedDrag&&this.doManagedDrag(draggingEvent,pixel),this.autoScrollService.check(draggingEvent.event)},RowDragFeature2.prototype.doManagedDrag=function(draggingEvent,pixel){var isFromThisGrid=this.isFromThisGrid(draggingEvent),managedDrag=this.gridOptionsService.get("rowDragManaged"),rowNodes=draggingEvent.dragItem.rowNodes;managedDrag&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!isFromThisGrid?this.isDropZoneWithinThisGrid(draggingEvent)||this.clientSideRowModel.highlightRowAtPixel(rowNodes[0],pixel):this.moveRows(rowNodes,pixel))},RowDragFeature2.prototype.getRowIndexNumber=function(rowNode){return parseInt(last(rowNode.getRowIndexString().split("-")),10)},RowDragFeature2.prototype.moveRowAndClearHighlight=function(draggingEvent){var _this=this,lastHighlightedRowNode=this.clientSideRowModel.getLastHighlightedRowNode(),isBelow=lastHighlightedRowNode&&lastHighlightedRowNode.highlighted===RowHighlightPosition.Below,pixel=this.mouseEventService.getNormalisedPosition(draggingEvent).y,rowNodes=draggingEvent.dragItem.rowNodes,increment=isBelow?1:0;if(this.isFromThisGrid(draggingEvent))rowNodes.forEach(function(rowNode){rowNode.rowTop<pixel&&(increment-=1)}),this.moveRows(rowNodes,pixel,increment);else{var getRowIdFunc_1=this.gridOptionsService.getCallback("getRowId"),addIndex=this.clientSideRowModel.getRowIndexAtPixel(pixel)+1;this.clientSideRowModel.getHighlightPosition(pixel)===RowHighlightPosition.Above&&addIndex--,this.clientSideRowModel.updateRowData({add:rowNodes.map(function(node){return node.data}).filter(function(data){return!_this.clientSideRowModel.getRowNode(getRowIdFunc_1?getRowIdFunc_1({data,level:0}):data.id)}),addIndex})}this.clearRowHighlight()},RowDragFeature2.prototype.clearRowHighlight=function(){this.clientSideRowModel.highlightRowAtPixel(null)},RowDragFeature2.prototype.moveRows=function(rowNodes,pixel,increment){increment===void 0&&(increment=0);var rowWasMoved=this.clientSideRowModel.ensureRowsAtPixel(rowNodes,pixel,increment);rowWasMoved&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())},RowDragFeature2.prototype.addRowDropZone=function(params){var _this=this;if(!params.getContainer()){warnOnce("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(params)){console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}var processedParams={getContainer:params.getContainer};params.fromGrid?(params.fromGrid=void 0,processedParams=params):(params.onDragEnter&&(processedParams.onDragEnter=function(e){params.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}),params.onDragLeave&&(processedParams.onDragLeave=function(e){params.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}),params.onDragging&&(processedParams.onDragging=function(e){params.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}),params.onDragStop&&(processedParams.onDragStop=function(e){params.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))})),this.dragAndDropService.addDropTarget(__assign$e({isInterestedIn:function(type){return type===DragSourceType.RowDrag},getIconName:function(){return DragAndDropService.ICON_MOVE},external:!0},processedParams))},RowDragFeature2.prototype.getRowDropZone=function(events){var _this=this,getContainer=this.getContainer.bind(this),onDragEnter=this.onDragEnter.bind(this),onDragLeave=this.onDragLeave.bind(this),onDragging=this.onDragging.bind(this),onDragStop=this.onDragStop.bind(this);return events?{getContainer,onDragEnter:events.onDragEnter?function(e){onDragEnter(e),events.onDragEnter(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_ENTER,e))}:onDragEnter,onDragLeave:events.onDragLeave?function(e){onDragLeave(e),events.onDragLeave(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_LEAVE,e))}:onDragLeave,onDragging:events.onDragging?function(e){onDragging(e),events.onDragging(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_MOVE,e))}:onDragging,onDragStop:events.onDragStop?function(e){onDragStop(e),events.onDragStop(_this.draggingToRowDragEvent(Events.EVENT_ROW_DRAG_END,e))}:onDragStop,fromGrid:!0}:{getContainer,onDragEnter,onDragLeave,onDragging,onDragStop,fromGrid:!0}},RowDragFeature2.prototype.draggingToRowDragEvent=function(type,draggingEvent){var yNormalised=this.mouseEventService.getNormalisedPosition(draggingEvent).y,mouseIsPastLastRow=yNormalised>this.paginationProxy.getCurrentPageHeight(),overIndex=-1,overNode;mouseIsPastLastRow||(overIndex=this.rowModel.getRowIndexAtPixel(yNormalised),overNode=this.rowModel.getRow(overIndex));var vDirectionString;switch(draggingEvent.vDirection){case VerticalDirection.Down:vDirectionString="down";break;case VerticalDirection.Up:vDirectionString="up";break;default:vDirectionString=null;break}var event=this.gridOptionsService.addGridCommonParams({type,event:draggingEvent.event,node:draggingEvent.dragItem.rowNode,nodes:draggingEvent.dragItem.rowNodes,overIndex,overNode,y:yNormalised,vDirection:vDirectionString});return event},RowDragFeature2.prototype.dispatchGridEvent=function(type,draggingEvent){var event=this.draggingToRowDragEvent(type,draggingEvent);this.eventService.dispatchEvent(event)},RowDragFeature2.prototype.onDragLeave=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_LEAVE,draggingEvent),this.stopDragging(draggingEvent),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(draggingEvent)&&(this.isMultiRowDrag=!1)},RowDragFeature2.prototype.onDragStop=function(draggingEvent){this.dispatchGridEvent(Events.EVENT_ROW_DRAG_END,draggingEvent),this.stopDragging(draggingEvent),this.gridOptionsService.get("rowDragManaged")&&(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(draggingEvent))&&!this.isDropZoneWithinThisGrid(draggingEvent)&&this.moveRowAndClearHighlight(draggingEvent)},RowDragFeature2.prototype.stopDragging=function(draggingEvent){this.autoScrollService.ensureCleared(),this.getRowNodes(draggingEvent).forEach(function(rowNode){rowNode.setDragging(!1)})},__decorate$1_([Autowired("dragAndDropService")],RowDragFeature2.prototype,"dragAndDropService",void 0),__decorate$1_([Autowired("rowModel")],RowDragFeature2.prototype,"rowModel",void 0),__decorate$1_([Autowired("paginationProxy")],RowDragFeature2.prototype,"paginationProxy",void 0),__decorate$1_([Autowired("columnModel")],RowDragFeature2.prototype,"columnModel",void 0),__decorate$1_([Autowired("focusService")],RowDragFeature2.prototype,"focusService",void 0),__decorate$1_([Autowired("sortController")],RowDragFeature2.prototype,"sortController",void 0),__decorate$1_([Autowired("filterManager")],RowDragFeature2.prototype,"filterManager",void 0),__decorate$1_([Autowired("selectionService")],RowDragFeature2.prototype,"selectionService",void 0),__decorate$1_([Autowired("mouseEventService")],RowDragFeature2.prototype,"mouseEventService",void 0),__decorate$1_([Autowired("ctrlsService")],RowDragFeature2.prototype,"ctrlsService",void 0),__decorate$1_([Optional("rangeService")],RowDragFeature2.prototype,"rangeService",void 0),__decorate$1_([PostConstruct],RowDragFeature2.prototype,"postConstruct",null),RowDragFeature2}(BeanStub),__extends$2b=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Z=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1Z"),RowAnimationCssClasses;(function(RowAnimationCssClasses2){RowAnimationCssClasses2.ANIMATION_ON="ag-row-animation",RowAnimationCssClasses2.ANIMATION_OFF="ag-row-no-animation"})(RowAnimationCssClasses||(RowAnimationCssClasses={}));var CSS_CLASS_FORCE_VERTICAL_SCROLL="ag-force-vertical-scroll",CSS_CLASS_CELL_SELECTABLE="ag-selectable",CSS_CLASS_COLUMN_MOVING="ag-column-moving",GridBodyCtrl=function(_super){__extends$2b(GridBodyCtrl2,_super);function GridBodyCtrl2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.stickyTopHeight=0,_this}return __name(GridBodyCtrl2,"GridBodyCtrl"),GridBodyCtrl2.prototype.getScrollFeature=function(){return this.bodyScrollFeature},GridBodyCtrl2.prototype.getBodyViewportElement=function(){return this.eBodyViewport},GridBodyCtrl2.prototype.setComp=function(comp,eGridBody,eBodyViewport,eTop,eBottom,eStickyTop){var _this=this;this.comp=comp,this.eGridBody=eGridBody,this.eBodyViewport=eBodyViewport,this.eTop=eTop,this.eBottom=eBottom,this.eStickyTop=eStickyTop,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",function(props){return _this.setCellTextSelection(props.currentValue)}),this.createManagedBean(new LayoutFeature(this.comp)),this.bodyScrollFeature=this.createManagedBean(new GridBodyScrollFeature(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([eTop,eBodyViewport,eBottom,eStickyTop]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(eTop),this.ctrlsService.registerGridBodyCtrl(this)},GridBodyCtrl2.prototype.getComp=function(){return this.comp},GridBodyCtrl2.prototype.addEventListeners=function(){this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},GridBodyCtrl2.prototype.addFocusListeners=function(elements){var _this=this;elements.forEach(function(element){_this.addManagedListener(element,"focusin",function(e){var target=e.target,isFocusedElementNested=isElementChildOfClass(target,"ag-root",element);element.classList.toggle("ag-has-focus",!isFocusedElementNested)}),_this.addManagedListener(element,"focusout",function(e){var target=e.target,relatedTarget=e.relatedTarget,gridContainRelatedTarget=element.contains(relatedTarget),isNestedRelatedTarget=isElementChildOfClass(relatedTarget,"ag-root",element),isNestedTarget=isElementChildOfClass(target,"ag-root",element);isNestedTarget||(!gridContainRelatedTarget||isNestedRelatedTarget)&&element.classList.remove("ag-has-focus")})})},GridBodyCtrl2.prototype.setColumnMovingCss=function(moving){this.comp.setColumnMovingCss(CSS_CLASS_COLUMN_MOVING,moving)},GridBodyCtrl2.prototype.setCellTextSelection=function(selectable){selectable===void 0&&(selectable=!1),this.comp.setCellSelectableCss(CSS_CLASS_CELL_SELECTABLE,selectable)},GridBodyCtrl2.prototype.onScrollVisibilityChanged=function(){var _this=this,visible=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(visible),this.setStickyTopWidth(visible);var scrollbarWidth=visible&&this.gridOptionsService.getScrollbarWidth()||0,pad=isInvisibleScrollbar()?16:0,width="calc(100% + ".concat(scrollbarWidth+pad,"px)");this.animationFrameService.requestAnimationFrame(function(){return _this.comp.setBodyViewportWidth(width)})},GridBodyCtrl2.prototype.onGridColumnsChanged=function(){var columns=this.columnModel.getAllGridColumns();this.comp.setColumnCount(columns.length)},GridBodyCtrl2.prototype.disableBrowserDragging=function(){this.addManagedListener(this.eGridBody,"dragstart",function(event){if(event.target instanceof HTMLImageElement)return event.preventDefault(),!1})},GridBodyCtrl2.prototype.addStopEditingWhenGridLosesFocus=function(){var _this=this;if(this.gridOptionsService.get("stopEditingWhenCellsLoseFocus")){var focusOutListener=__name(function(event){var elementWithFocus=event.relatedTarget;if(getTabIndex(elementWithFocus)===null){_this.rowRenderer.stopEditing();return}var clickInsideGrid=viewports.some(function(viewport){return viewport.contains(elementWithFocus)})&&_this.mouseEventService.isElementInThisGrid(elementWithFocus);if(!clickInsideGrid){var popupService=_this.popupService;clickInsideGrid=popupService.getActivePopups().some(function(popup){return popup.contains(elementWithFocus)})||popupService.isElementWithinCustomPopup(elementWithFocus)}clickInsideGrid||_this.rowRenderer.stopEditing()},"focusOutListener"),viewports=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];viewports.forEach(function(viewport){return _this.addManagedListener(viewport,"focusout",focusOutListener)})}},GridBodyCtrl2.prototype.updateRowCount=function(){var headerCount=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),rowCount=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,total=rowCount===-1?-1:headerCount+rowCount;this.comp.setRowCount(total)},GridBodyCtrl2.prototype.registerBodyViewportResizeListener=function(listener){this.comp.registerBodyViewportResizeListener(listener)},GridBodyCtrl2.prototype.setVerticalScrollPaddingVisible=function(visible){var overflowY=visible?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(overflowY)},GridBodyCtrl2.prototype.isVerticalScrollShowing=function(){var show=this.gridOptionsService.get("alwaysShowVerticalScroll"),cssClass=show?CSS_CLASS_FORCE_VERTICAL_SCROLL:null,allowVerticalScroll=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(cssClass,show),show||allowVerticalScroll&&isVerticalScrollShowing(this.eBodyViewport)},GridBodyCtrl2.prototype.setupRowAnimationCssClass=function(){var _this=this,listener=__name(function(){var animateRows=_this.gridOptionsService.isAnimateRows()&&!_this.rowContainerHeightService.isStretching(),animateRowsCssClass=animateRows?RowAnimationCssClasses.ANIMATION_ON:RowAnimationCssClasses.ANIMATION_OFF;_this.comp.setRowAnimationCssOnBodyViewport(animateRowsCssClass,animateRows)},"listener");listener(),this.addManagedListener(this.eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,listener),this.addManagedPropertyListener("animateRows",listener)},GridBodyCtrl2.prototype.getGridBodyElement=function(){return this.eGridBody},GridBodyCtrl2.prototype.addBodyViewportListener=function(){var listener=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",listener),this.mockContextMenuForIPad(listener),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()},GridBodyCtrl2.prototype.addFullWidthContainerWheelListener=function(){var _this=this,fullWidthContainer=this.eBodyViewport.querySelector(".ag-full-width-container"),eCenterColsViewport=this.eBodyViewport.querySelector(".ag-center-cols-viewport");fullWidthContainer&&eCenterColsViewport&&this.addManagedListener(fullWidthContainer,"wheel",function(e){return _this.onFullWidthContainerWheel(e,eCenterColsViewport)})},GridBodyCtrl2.prototype.onFullWidthContainerWheel=function(e,eCenterColsViewport){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),eCenterColsViewport.scrollBy({left:e.deltaX}))},GridBodyCtrl2.prototype.onBodyViewportContextMenu=function(mouseEvent,touch,touchEvent){if(!(!mouseEvent&&!touchEvent)){if(this.gridOptionsService.get("preventDefaultOnContextMenu")){var event_1=mouseEvent||touchEvent;event_1.preventDefault()}var target=(mouseEvent||touch).target;(target===this.eBodyViewport||target===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&this.menuService.showContextMenu({mouseEvent,touchEvent,value:null,anchorToElement:this.eGridBody})}},GridBodyCtrl2.prototype.mockContextMenuForIPad=function(listener){if(isIOSUserAgent()){var touchListener=new TouchListener(this.eBodyViewport),longTapListener=__name(function(event){listener(void 0,event.touchStart,event.touchEvent)},"longTapListener");this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,longTapListener),this.addDestroyFunc(function(){return touchListener.destroy()})}},GridBodyCtrl2.prototype.onBodyViewportWheel=function(e){this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()},GridBodyCtrl2.prototype.onStickyTopWheel=function(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)},GridBodyCtrl2.prototype.getGui=function(){return this.eGridBody},GridBodyCtrl2.prototype.scrollVertically=function(pixels){var oldScrollPosition=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(oldScrollPosition+pixels),this.eBodyViewport.scrollTop-oldScrollPosition},GridBodyCtrl2.prototype.addRowDragListener=function(){this.rowDragFeature=this.createManagedBean(new RowDragFeature(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)},GridBodyCtrl2.prototype.getRowDragFeature=function(){return this.rowDragFeature},GridBodyCtrl2.prototype.onPinnedRowDataChanged=function(){this.setFloatingHeights()},GridBodyCtrl2.prototype.setFloatingHeights=function(){var pinnedRowModel=this.pinnedRowModel,floatingTopHeight=pinnedRowModel.getPinnedTopTotalHeight(),floatingBottomHeight=pinnedRowModel.getPinnedBottomTotalHeight();this.comp.setTopHeight(floatingTopHeight),this.comp.setBottomHeight(floatingBottomHeight),this.comp.setTopDisplay(floatingTopHeight?"inherit":"none"),this.comp.setBottomDisplay(floatingBottomHeight?"inherit":"none"),this.setStickyTopOffsetTop()},GridBodyCtrl2.prototype.setStickyTopHeight=function(height){height===void 0&&(height=0),this.comp.setStickyTopHeight("".concat(height,"px")),this.stickyTopHeight=height},GridBodyCtrl2.prototype.getStickyTopHeight=function(){return this.stickyTopHeight},GridBodyCtrl2.prototype.setStickyTopWidth=function(vScrollVisible){if(!vScrollVisible)this.comp.setStickyTopWidth("100%");else{var scrollbarWidth=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth("calc(100% - ".concat(scrollbarWidth,"px)"))}},GridBodyCtrl2.prototype.onHeaderHeightChanged=function(){this.setStickyTopOffsetTop()},GridBodyCtrl2.prototype.setStickyTopOffsetTop=function(){var headerCtrl=this.ctrlsService.getGridHeaderCtrl(),headerHeight=headerCtrl.getHeaderHeight()+this.filterManager.getHeaderHeight(),pinnedTopHeight=this.pinnedRowModel.getPinnedTopTotalHeight(),height=0;headerHeight>0&&(height+=headerHeight+1),pinnedTopHeight>0&&(height+=pinnedTopHeight+1),this.comp.setStickyTopTop("".concat(height,"px"))},GridBodyCtrl2.prototype.sizeColumnsToFit=function(params,nextTimeout){var _this=this,removeScrollWidth=this.isVerticalScrollShowing(),scrollWidthToRemove=removeScrollWidth?this.gridOptionsService.getScrollbarWidth():0,bodyViewportWidth=getInnerWidth(this.eGridBody),availableWidth=bodyViewportWidth-scrollWidthToRemove;if(availableWidth>0){this.columnModel.sizeColumnsToFit(availableWidth,"sizeColumnsToFit",!1,params);return}nextTimeout===void 0?window.setTimeout(function(){_this.sizeColumnsToFit(params,100)},0):nextTimeout===100?window.setTimeout(function(){_this.sizeColumnsToFit(params,500)},100):nextTimeout===500?window.setTimeout(function(){_this.sizeColumnsToFit(params,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")},GridBodyCtrl2.prototype.addScrollEventListener=function(listener){this.eBodyViewport.addEventListener("scroll",listener,{passive:!0})},GridBodyCtrl2.prototype.removeScrollEventListener=function(listener){this.eBodyViewport.removeEventListener("scroll",listener)},__decorate$1Z([Autowired("animationFrameService")],GridBodyCtrl2.prototype,"animationFrameService",void 0),__decorate$1Z([Autowired("rowContainerHeightService")],GridBodyCtrl2.prototype,"rowContainerHeightService",void 0),__decorate$1Z([Autowired("ctrlsService")],GridBodyCtrl2.prototype,"ctrlsService",void 0),__decorate$1Z([Autowired("columnModel")],GridBodyCtrl2.prototype,"columnModel",void 0),__decorate$1Z([Autowired("scrollVisibleService")],GridBodyCtrl2.prototype,"scrollVisibleService",void 0),__decorate$1Z([Autowired("menuService")],GridBodyCtrl2.prototype,"menuService",void 0),__decorate$1Z([Autowired("headerNavigationService")],GridBodyCtrl2.prototype,"headerNavigationService",void 0),__decorate$1Z([Autowired("dragAndDropService")],GridBodyCtrl2.prototype,"dragAndDropService",void 0),__decorate$1Z([Autowired("pinnedRowModel")],GridBodyCtrl2.prototype,"pinnedRowModel",void 0),__decorate$1Z([Autowired("rowRenderer")],GridBodyCtrl2.prototype,"rowRenderer",void 0),__decorate$1Z([Autowired("popupService")],GridBodyCtrl2.prototype,"popupService",void 0),__decorate$1Z([Autowired("mouseEventService")],GridBodyCtrl2.prototype,"mouseEventService",void 0),__decorate$1Z([Autowired("rowModel")],GridBodyCtrl2.prototype,"rowModel",void 0),__decorate$1Z([Autowired("filterManager")],GridBodyCtrl2.prototype,"filterManager",void 0),GridBodyCtrl2}(BeanStub),SelectionHandleType;(function(SelectionHandleType2){SelectionHandleType2[SelectionHandleType2.FILL=0]="FILL",SelectionHandleType2[SelectionHandleType2.RANGE=1]="RANGE"})(SelectionHandleType||(SelectionHandleType={}));var CellRangeType;(function(CellRangeType2){CellRangeType2[CellRangeType2.VALUE=0]="VALUE",CellRangeType2[CellRangeType2.DIMENSION=1]="DIMENSION"})(CellRangeType||(CellRangeType={}));var CSS_CELL_RANGE_SELECTED="ag-cell-range-selected",CSS_CELL_RANGE_CHART="ag-cell-range-chart",CSS_CELL_RANGE_SINGLE_CELL="ag-cell-range-single-cell",CSS_CELL_RANGE_CHART_CATEGORY="ag-cell-range-chart-category",CSS_CELL_RANGE_HANDLE="ag-cell-range-handle",CSS_CELL_RANGE_TOP="ag-cell-range-top",CSS_CELL_RANGE_RIGHT="ag-cell-range-right",CSS_CELL_RANGE_BOTTOM="ag-cell-range-bottom",CSS_CELL_RANGE_LEFT="ag-cell-range-left",CellRangeFeature=function(){function CellRangeFeature2(beans,ctrl){this.beans=beans,this.cellCtrl=ctrl}return __name(CellRangeFeature2,"CellRangeFeature"),CellRangeFeature2.prototype.setComp=function(cellComp,eGui){this.cellComp=cellComp,this.eGui=eGui,this.onRangeSelectionChanged()},CellRangeFeature2.prototype.onRangeSelectionChanged=function(){this.cellComp&&(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SELECTED,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass("".concat(CSS_CELL_RANGE_SELECTED,"-1"),this.rangeCount===1),this.cellComp.addOrRemoveCssClass("".concat(CSS_CELL_RANGE_SELECTED,"-2"),this.rangeCount===2),this.cellComp.addOrRemoveCssClass("".concat(CSS_CELL_RANGE_SELECTED,"-3"),this.rangeCount===3),this.cellComp.addOrRemoveCssClass("".concat(CSS_CELL_RANGE_SELECTED,"-4"),this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART,this.hasChartRange),setAriaSelected(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_SINGLE_CELL,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature2.prototype.updateRangeBorders=function(){var rangeBorders=this.getRangeBorders(),isSingleCell=this.isSingleCell(),isTop=!isSingleCell&&rangeBorders.top,isRight=!isSingleCell&&rangeBorders.right,isBottom=!isSingleCell&&rangeBorders.bottom,isLeft=!isSingleCell&&rangeBorders.left;this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_TOP,isTop),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_RIGHT,isRight),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_BOTTOM,isBottom),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_LEFT,isLeft)},CellRangeFeature2.prototype.isSingleCell=function(){var rangeService=this.beans.rangeService;return this.rangeCount===1&&rangeService&&!rangeService.isMoreThanOneCell()},CellRangeFeature2.prototype.getHasChartRange=function(){var rangeService=this.beans.rangeService;if(!this.rangeCount||!rangeService)return!1;var cellRanges=rangeService.getCellRanges();return cellRanges.length>0&&cellRanges.every(function(range){return includes([CellRangeType.DIMENSION,CellRangeType.VALUE],range.type)})},CellRangeFeature2.prototype.updateRangeBordersIfRangeCount=function(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())},CellRangeFeature2.prototype.getRangeBorders=function(){var _this=this,isRtl=this.beans.gridOptionsService.get("enableRtl"),top=!1,right=!1,bottom=!1,left=!1,thisCol=this.cellCtrl.getCellPosition().column,_a=this.beans,rangeService=_a.rangeService,columnModel=_a.columnModel,leftCol,rightCol;isRtl?(leftCol=columnModel.getDisplayedColAfter(thisCol),rightCol=columnModel.getDisplayedColBefore(thisCol)):(leftCol=columnModel.getDisplayedColBefore(thisCol),rightCol=columnModel.getDisplayedColAfter(thisCol));var ranges=rangeService.getCellRanges().filter(function(range2){return rangeService.isCellInSpecificRange(_this.cellCtrl.getCellPosition(),range2)});leftCol||(left=!0),rightCol||(right=!0);for(var i=0;i<ranges.length&&!(top&&right&&bottom&&left);i++){var range=ranges[i],startRow=rangeService.getRangeStartRow(range),endRow=rangeService.getRangeEndRow(range);!top&&this.beans.rowPositionUtils.sameRow(startRow,this.cellCtrl.getCellPosition())&&(top=!0),!bottom&&this.beans.rowPositionUtils.sameRow(endRow,this.cellCtrl.getCellPosition())&&(bottom=!0),!left&&leftCol&&range.columns.indexOf(leftCol)<0&&(left=!0),!right&&rightCol&&range.columns.indexOf(rightCol)<0&&(right=!0)}return{top,right,bottom,left}},CellRangeFeature2.prototype.refreshHandle=function(){if(!(!this.beans.rangeService||this.beans.context.isDestroyed())){var shouldHaveSelectionHandle=this.shouldHaveSelectionHandle();this.selectionHandle&&!shouldHaveSelectionHandle&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),shouldHaveSelectionHandle&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_HANDLE,!!this.selectionHandle)}},CellRangeFeature2.prototype.shouldHaveSelectionHandle=function(){var _a=this.beans,gridOptionsService=_a.gridOptionsService,rangeService=_a.rangeService,cellRanges=rangeService.getCellRanges(),rangesLen=cellRanges.length;if(this.rangeCount<1||rangesLen<1)return!1;var cellRange=last(cellRanges),cellPosition=this.cellCtrl.getCellPosition(),isFillHandleAvailable=gridOptionsService.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),isRangeHandleAvailable=gridOptionsService.get("enableRangeHandle"),handleIsAvailable=rangesLen===1&&!this.cellCtrl.isEditing()&&(isFillHandleAvailable||isRangeHandleAvailable);if(this.hasChartRange){var hasCategoryRange=cellRanges[0].type===CellRangeType.DIMENSION,isCategoryCell=hasCategoryRange&&rangeService.isCellInSpecificRange(cellPosition,cellRanges[0]);this.cellComp.addOrRemoveCssClass(CSS_CELL_RANGE_CHART_CATEGORY,isCategoryCell),handleIsAvailable=cellRange.type===CellRangeType.VALUE}return handleIsAvailable&&cellRange.endRow!=null&&rangeService.isContiguousRange(cellRange)&&rangeService.isBottomRightCell(cellRange,cellPosition)},CellRangeFeature2.prototype.addSelectionHandle=function(){var _a=this.beans,gridOptionsService=_a.gridOptionsService,rangeService=_a.rangeService,cellRangeType=last(rangeService.getCellRanges()).type,selectionHandleFill=gridOptionsService.get("enableFillHandle")&&missing(cellRangeType),type=selectionHandleFill?SelectionHandleType.FILL:SelectionHandleType.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==type&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(type)),this.selectionHandle.refresh(this.cellCtrl)},CellRangeFeature2.prototype.destroy=function(){this.beans.context.destroyBean(this.selectionHandle)},CellRangeFeature2}(),__extends$2a=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellPositionFeature=function(_super){__extends$2a(CellPositionFeature2,_super);function CellPositionFeature2(ctrl,beans){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this.setupColSpan(),_this.setupRowSpan(),_this}return __name(CellPositionFeature2,"CellPositionFeature"),CellPositionFeature2.prototype.setupRowSpan=function(){var _this=this;this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return _this.onNewColumnsLoaded()})},CellPositionFeature2.prototype.setComp=function(eGui){this.eGui=eGui,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()},CellPositionFeature2.prototype.onNewColumnsLoaded=function(){var rowSpan=this.column.getRowSpan(this.rowNode);this.rowSpan!==rowSpan&&(this.rowSpan=rowSpan,this.applyRowSpan(!0))},CellPositionFeature2.prototype.onDisplayColumnsChanged=function(){var colsSpanning=this.getColSpanningList();areEqual(this.colsSpanning,colsSpanning)||(this.colsSpanning=colsSpanning,this.onWidthChanged(),this.onLeftChanged())},CellPositionFeature2.prototype.setupColSpan=function(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))},CellPositionFeature2.prototype.onWidthChanged=function(){if(this.eGui){var width=this.getCellWidth();this.eGui.style.width="".concat(width,"px")}},CellPositionFeature2.prototype.getCellWidth=function(){return this.colsSpanning?this.colsSpanning.reduce(function(width,col){return width+col.getActualWidth()},0):this.column.getActualWidth()},CellPositionFeature2.prototype.getColSpanningList=function(){var colSpan=this.column.getColSpan(this.rowNode),colsSpanning=[];if(colSpan===1)colsSpanning.push(this.column);else for(var pointer=this.column,pinned=this.column.getPinned(),i=0;pointer&&i<colSpan&&(colsSpanning.push(pointer),pointer=this.beans.columnModel.getDisplayedColAfter(pointer),!(!pointer||missing(pointer)||pinned!==pointer.getPinned()));i++);return colsSpanning},CellPositionFeature2.prototype.onLeftChanged=function(){if(this.eGui){var left=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=left+"px"}},CellPositionFeature2.prototype.getCellLeft=function(){var mostLeftCol;return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?mostLeftCol=last(this.colsSpanning):mostLeftCol=this.column,mostLeftCol.getLeft()},CellPositionFeature2.prototype.modifyLeftForPrintLayout=function(leftPosition){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(this.column.getPinned()==="right"){var bodyWidth=this.beans.columnModel.getBodyContainerWidth();return leftWidth+bodyWidth+(leftPosition||0)}return leftWidth+(leftPosition||0)},CellPositionFeature2.prototype.applyRowSpan=function(force){if(!(this.rowSpan===1&&!force)){var singleRowHeight=this.beans.gridOptionsService.getRowHeightAsNumber(),totalRowHeight=singleRowHeight*this.rowSpan;this.eGui.style.height="".concat(totalRowHeight,"px"),this.eGui.style.zIndex="1"}},CellPositionFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellPositionFeature2}(BeanStub),__extends$29=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellCustomStyleFeature=function(_super){__extends$29(CellCustomStyleFeature2,_super);function CellCustomStyleFeature2(ctrl,beans){var _this=_super.call(this)||this;return _this.staticClasses=[],_this.cellCtrl=ctrl,_this.beans=beans,_this.column=ctrl.getColumn(),_this.rowNode=ctrl.getRowNode(),_this}return __name(CellCustomStyleFeature2,"CellCustomStyleFeature"),CellCustomStyleFeature2.prototype.setComp=function(comp){this.cellComp=comp,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()},CellCustomStyleFeature2.prototype.applyCellClassRules=function(){var _this=this,colDef=this.column.getColDef(),cellClassRules=colDef.cellClassRules,cellClassParams=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(cellClassRules===this.cellClassRules?void 0:this.cellClassRules,cellClassRules,cellClassParams,function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)},function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)}),this.cellClassRules=cellClassRules},CellCustomStyleFeature2.prototype.applyUserStyles=function(){var colDef=this.column.getColDef();if(colDef.cellStyle){var styles;if(typeof colDef.cellStyle=="function"){var cellStyleParams=this.beans.gridOptionsService.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),cellStyleFunc=colDef.cellStyle;styles=cellStyleFunc(cellStyleParams)}else styles=colDef.cellStyle;styles&&this.cellComp.setUserStyles(styles)}},CellCustomStyleFeature2.prototype.applyClassesFromColDef=function(){var _this=this,colDef=this.column.getColDef(),cellClassParams=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(function(className){return _this.cellComp.addOrRemoveCssClass(className,!1)}),this.staticClasses=this.beans.stylingService.getStaticCellClasses(colDef,cellClassParams),this.staticClasses.length&&this.staticClasses.forEach(function(className){return _this.cellComp.addOrRemoveCssClass(className,!0)})},CellCustomStyleFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellCustomStyleFeature2}(BeanStub),__extends$28=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),TooltipFeature=function(_super){__extends$28(TooltipFeature2,_super);function TooltipFeature2(ctrl,beans){var _this=_super.call(this)||this;return _this.ctrl=ctrl,_this.beans=beans,_this}return __name(TooltipFeature2,"TooltipFeature"),TooltipFeature2.prototype.setComp=function(eGui){this.eGui=eGui,this.setupTooltip()},TooltipFeature2.prototype.setBrowserTooltip=function(tooltip){var name="title";tooltip!=null&&tooltip!=""?this.eGui.setAttribute(name,tooltip):this.eGui.removeAttribute(name)},TooltipFeature2.prototype.setupTooltip=function(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()},TooltipFeature2.prototype.updateTooltipText=function(){this.tooltip=this.ctrl.getTooltipValue()},TooltipFeature2.prototype.createTooltipFeatureIfNeeded=function(){var _this=this,_a,_b,_c,_d;if(this.genericTooltipFeature==null){var parent={getTooltipParams:function(){return _this.getTooltipParams()},getGui:function(){return _this.ctrl.getGui()}};this.genericTooltipFeature=this.createManagedBean(new CustomTooltipFeature(parent,(_b=(_a=this.ctrl).getTooltipShowDelayOverride)===null||_b===void 0?void 0:_b.call(_a),(_d=(_c=this.ctrl).getTooltipHideDelayOverride)===null||_d===void 0?void 0:_d.call(_c)),this.beans.context)}},TooltipFeature2.prototype.refreshToolTip=function(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)},TooltipFeature2.prototype.getTooltipParams=function(){var _this=this,ctrl=this.ctrl,column=ctrl.getColumn?ctrl.getColumn():void 0,colDef=ctrl.getColDef?ctrl.getColDef():void 0,rowNode=ctrl.getRowNode?ctrl.getRowNode():void 0;return{location:ctrl.getLocation(),colDef,column,rowIndex:ctrl.getRowIndex?ctrl.getRowIndex():void 0,node:rowNode,data:rowNode?rowNode.data:void 0,value:this.getTooltipText(),valueFormatted:ctrl.getValueFormatted?ctrl.getValueFormatted():void 0,hideTooltipCallback:function(){return _this.genericTooltipFeature.hideTooltip(!0)}}},TooltipFeature2.prototype.getTooltipText=function(){return this.tooltip},TooltipFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},TooltipFeature2}(BeanStub),__decorate$1Y=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1Y"),Beans=function(){function Beans2(){}return __name(Beans2,"Beans"),Beans2.prototype.postConstruct=function(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)},__decorate$1Y([Autowired("resizeObserverService")],Beans2.prototype,"resizeObserverService",void 0),__decorate$1Y([Autowired("paginationProxy")],Beans2.prototype,"paginationProxy",void 0),__decorate$1Y([Autowired("context")],Beans2.prototype,"context",void 0),__decorate$1Y([Autowired("columnApi")],Beans2.prototype,"columnApi",void 0),__decorate$1Y([Autowired("gridApi")],Beans2.prototype,"gridApi",void 0),__decorate$1Y([Autowired("gridOptionsService")],Beans2.prototype,"gridOptionsService",void 0),__decorate$1Y([Autowired("expressionService")],Beans2.prototype,"expressionService",void 0),__decorate$1Y([Autowired("environment")],Beans2.prototype,"environment",void 0),__decorate$1Y([Autowired("rowRenderer")],Beans2.prototype,"rowRenderer",void 0),__decorate$1Y([Autowired("templateService")],Beans2.prototype,"templateService",void 0),__decorate$1Y([Autowired("valueService")],Beans2.prototype,"valueService",void 0),__decorate$1Y([Autowired("eventService")],Beans2.prototype,"eventService",void 0),__decorate$1Y([Autowired("columnModel")],Beans2.prototype,"columnModel",void 0),__decorate$1Y([Autowired("headerNavigationService")],Beans2.prototype,"headerNavigationService",void 0),__decorate$1Y([Autowired("navigationService")],Beans2.prototype,"navigationService",void 0),__decorate$1Y([Autowired("columnAnimationService")],Beans2.prototype,"columnAnimationService",void 0),__decorate$1Y([Optional("rangeService")],Beans2.prototype,"rangeService",void 0),__decorate$1Y([Autowired("focusService")],Beans2.prototype,"focusService",void 0),__decorate$1Y([Autowired("popupService")],Beans2.prototype,"popupService",void 0),__decorate$1Y([Autowired("valueFormatterService")],Beans2.prototype,"valueFormatterService",void 0),__decorate$1Y([Autowired("stylingService")],Beans2.prototype,"stylingService",void 0),__decorate$1Y([Autowired("columnHoverService")],Beans2.prototype,"columnHoverService",void 0),__decorate$1Y([Autowired("userComponentFactory")],Beans2.prototype,"userComponentFactory",void 0),__decorate$1Y([Autowired("userComponentRegistry")],Beans2.prototype,"userComponentRegistry",void 0),__decorate$1Y([Autowired("animationFrameService")],Beans2.prototype,"animationFrameService",void 0),__decorate$1Y([Autowired("dragService")],Beans2.prototype,"dragService",void 0),__decorate$1Y([Autowired("dragAndDropService")],Beans2.prototype,"dragAndDropService",void 0),__decorate$1Y([Autowired("sortController")],Beans2.prototype,"sortController",void 0),__decorate$1Y([Autowired("filterManager")],Beans2.prototype,"filterManager",void 0),__decorate$1Y([Autowired("rowContainerHeightService")],Beans2.prototype,"rowContainerHeightService",void 0),__decorate$1Y([Autowired("frameworkOverrides")],Beans2.prototype,"frameworkOverrides",void 0),__decorate$1Y([Autowired("cellPositionUtils")],Beans2.prototype,"cellPositionUtils",void 0),__decorate$1Y([Autowired("rowPositionUtils")],Beans2.prototype,"rowPositionUtils",void 0),__decorate$1Y([Autowired("selectionService")],Beans2.prototype,"selectionService",void 0),__decorate$1Y([Optional("selectionHandleFactory")],Beans2.prototype,"selectionHandleFactory",void 0),__decorate$1Y([Autowired("rowCssClassCalculator")],Beans2.prototype,"rowCssClassCalculator",void 0),__decorate$1Y([Autowired("rowModel")],Beans2.prototype,"rowModel",void 0),__decorate$1Y([Autowired("ctrlsService")],Beans2.prototype,"ctrlsService",void 0),__decorate$1Y([Autowired("ctrlsFactory")],Beans2.prototype,"ctrlsFactory",void 0),__decorate$1Y([Autowired("agStackComponentsRegistry")],Beans2.prototype,"agStackComponentsRegistry",void 0),__decorate$1Y([Autowired("valueCache")],Beans2.prototype,"valueCache",void 0),__decorate$1Y([Autowired("rowNodeEventThrottle")],Beans2.prototype,"rowNodeEventThrottle",void 0),__decorate$1Y([Autowired("localeService")],Beans2.prototype,"localeService",void 0),__decorate$1Y([Autowired("valueParserService")],Beans2.prototype,"valueParserService",void 0),__decorate$1Y([Autowired("syncService")],Beans2.prototype,"syncService",void 0),__decorate$1Y([Autowired("ariaAnnouncementService")],Beans2.prototype,"ariaAnnouncementService",void 0),__decorate$1Y([PostConstruct],Beans2.prototype,"postConstruct",null),Beans2=__decorate$1Y([Bean("beans")],Beans2),Beans2}(),__extends$27=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellMouseListenerFeature=function(_super){__extends$27(CellMouseListenerFeature2,_super);function CellMouseListenerFeature2(ctrl,beans,column){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.column=column,_this}return __name(CellMouseListenerFeature2,"CellMouseListenerFeature"),CellMouseListenerFeature2.prototype.onMouseEvent=function(eventName,mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent))switch(eventName){case"click":this.onCellClicked(mouseEvent);break;case"mousedown":case"touchstart":this.onMouseDown(mouseEvent);break;case"dblclick":this.onCellDoubleClicked(mouseEvent);break;case"mouseout":this.onMouseOut(mouseEvent);break;case"mouseover":this.onMouseOver(mouseEvent);break}},CellMouseListenerFeature2.prototype.onCellClicked=function(mouseEvent){var _this=this;if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(mouseEvent),mouseEvent.preventDefault();return}var _a=this.beans,eventService=_a.eventService,rangeService=_a.rangeService,gridOptionsService=_a.gridOptionsService,isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey;rangeService&&isMultiKey&&rangeService.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&rangeService.intersectLastRange(!0);var cellClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_CLICKED);eventService.dispatchEvent(cellClickedEvent);var colDef=this.column.getColDef();colDef.onCellClicked&&window.setTimeout(function(){_this.beans.frameworkOverrides.wrapOutgoing(function(){colDef.onCellClicked(cellClickedEvent)})},0);var editOnSingleClick=(gridOptionsService.get("singleClickEdit")||colDef.singleClickEdit)&&!gridOptionsService.get("suppressClickEdit");editOnSingleClick&&!(mouseEvent.shiftKey&&(rangeService==null?void 0:rangeService.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()},CellMouseListenerFeature2.prototype.isDoubleClickOnIPad=function(){if(!isIOSUserAgent()||isEventSupported("dblclick"))return!1;var nowMillis=new Date().getTime(),res=nowMillis-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=nowMillis,res},CellMouseListenerFeature2.prototype.onCellDoubleClicked=function(mouseEvent){var _this=this,colDef=this.column.getColDef(),cellDoubleClickedEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(cellDoubleClickedEvent),typeof colDef.onCellDoubleClicked=="function"&&window.setTimeout(function(){_this.beans.frameworkOverrides.wrapOutgoing(function(){colDef.onCellDoubleClicked(cellDoubleClickedEvent)})},0);var editOnDoubleClick=!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit");editOnDoubleClick&&this.cellCtrl.startRowOrCellEdit(null,mouseEvent)},CellMouseListenerFeature2.prototype.onMouseDown=function(mouseEvent){var ctrlKey=mouseEvent.ctrlKey,metaKey=mouseEvent.metaKey,shiftKey=mouseEvent.shiftKey,target=mouseEvent.target,_a=this,cellCtrl=_a.cellCtrl,beans=_a.beans,eventService=beans.eventService,rangeService=beans.rangeService,focusService=beans.focusService;if(!this.isRightClickInExistingRange(mouseEvent)){var ranges=rangeService&&rangeService.getCellRanges().length!=0;if(!shiftKey||!ranges){var forceBrowserFocus=isBrowserSafari()&&!cellCtrl.isEditing()&&!isFocusableFormField(target);cellCtrl.focusCell(forceBrowserFocus)}if(shiftKey&&ranges&&!focusService.isCellFocused(cellCtrl.getCellPosition())){mouseEvent.preventDefault();var focusedCellPosition=focusService.getFocusedCell();if(focusedCellPosition){var column=focusedCellPosition.column,rowIndex=focusedCellPosition.rowIndex,rowPinned=focusedCellPosition.rowPinned,focusedRowCtrl=beans.rowRenderer.getRowByPosition({rowIndex,rowPinned}),focusedCellCtrl=focusedRowCtrl==null?void 0:focusedRowCtrl.getCellCtrl(column);focusedCellCtrl!=null&&focusedCellCtrl.isEditing()&&focusedCellCtrl.stopEditing(),focusService.setFocusedCell({column,rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(target)){if(rangeService){var thisCell=this.cellCtrl.getCellPosition();if(shiftKey)rangeService.extendLatestRangeToCell(thisCell);else{var isMultiKey=ctrlKey||metaKey;rangeService.setRangeToCell(thisCell,isMultiKey)}}eventService.dispatchEvent(this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_DOWN))}}},CellMouseListenerFeature2.prototype.isRightClickInExistingRange=function(mouseEvent){var rangeService=this.beans.rangeService;if(rangeService){var cellInRange=rangeService.isCellInAnyRange(this.cellCtrl.getCellPosition()),isRightClick=mouseEvent.button===2||mouseEvent.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(cellInRange&&isRightClick)return!0}return!1},CellMouseListenerFeature2.prototype.containsWidget=function(target){return isElementChildOfClass(target,"ag-selection-checkbox",3)},CellMouseListenerFeature2.prototype.onMouseOut=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOutEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(cellMouseOutEvent),this.beans.columnHoverService.clearMouseOver()}},CellMouseListenerFeature2.prototype.onMouseOver=function(mouseEvent){if(!this.mouseStayingInsideCell(mouseEvent)){var cellMouseOverEvent=this.cellCtrl.createEvent(mouseEvent,Events.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(cellMouseOverEvent),this.beans.columnHoverService.setMouseOver([this.column])}},CellMouseListenerFeature2.prototype.mouseStayingInsideCell=function(e){if(!e.target||!e.relatedTarget)return!1;var eGui=this.cellCtrl.getGui(),cellContainsTarget=eGui.contains(e.target),cellContainsRelatedTarget=eGui.contains(e.relatedTarget);return cellContainsTarget&&cellContainsRelatedTarget},CellMouseListenerFeature2.prototype.destroy=function(){},CellMouseListenerFeature2}(Beans),__extends$26=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellKeyboardListenerFeature=function(_super){__extends$26(CellKeyboardListenerFeature2,_super);function CellKeyboardListenerFeature2(ctrl,beans,column,rowNode,rowCtrl){var _this=_super.call(this)||this;return _this.cellCtrl=ctrl,_this.beans=beans,_this.rowNode=rowNode,_this.rowCtrl=rowCtrl,_this}return __name(CellKeyboardListenerFeature2,"CellKeyboardListenerFeature"),CellKeyboardListenerFeature2.prototype.setComp=function(eGui){this.eGui=eGui},CellKeyboardListenerFeature2.prototype.onKeyDown=function(event){var key=event.key;switch(key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.F2:this.onF2KeyDown(event);break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.BACKSPACE:case KeyCode.DELETE:this.onBackspaceOrDeleteKeyDown(key,event);break;case KeyCode.DOWN:case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.LEFT:this.onNavigationKeyDown(event,key);break}},CellKeyboardListenerFeature2.prototype.onNavigationKeyDown=function(event,key){this.cellCtrl.isEditing()||(event.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(event):this.beans.navigationService.navigateToNextCell(event,key,this.cellCtrl.getCellPosition(),!0),event.preventDefault())},CellKeyboardListenerFeature2.prototype.onShiftRangeSelect=function(event){if(this.beans.rangeService){var endCell=this.beans.rangeService.extendLatestRangeInDirection(event);endCell&&this.beans.navigationService.ensureCellVisible(endCell)}},CellKeyboardListenerFeature2.prototype.onTabKeyDown=function(event){this.beans.navigationService.onTabKeyDown(this.cellCtrl,event)},CellKeyboardListenerFeature2.prototype.onBackspaceOrDeleteKeyDown=function(key,event){var _a=this,cellCtrl=_a.cellCtrl,beans=_a.beans,rowNode=_a.rowNode,gridOptionsService=beans.gridOptionsService,rangeService=beans.rangeService,eventService=beans.eventService;cellCtrl.isEditing()||(eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),isDeleteKey(key,gridOptionsService.get("enableCellEditingOnBackspace"))?rangeService&&gridOptionsService.get("enableRangeSelection")?rangeService.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):cellCtrl.isCellEditable()&&rowNode.setDataValue(cellCtrl.getColumn(),null,"cellClear"):cellCtrl.startRowOrCellEdit(key,event),eventService.dispatchEvent({type:Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))},CellKeyboardListenerFeature2.prototype.onEnterKeyDown=function(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gridOptionsService.get("enterNavigatesVertically")){var key=e.shiftKey?KeyCode.UP:KeyCode.DOWN;this.beans.navigationService.navigateToNextCell(null,key,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(KeyCode.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()},CellKeyboardListenerFeature2.prototype.onF2KeyDown=function(event){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(KeyCode.F2,event)},CellKeyboardListenerFeature2.prototype.onEscapeKeyDown=function(event){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))},CellKeyboardListenerFeature2.prototype.processCharacter=function(event){var eventTarget=event.target,eventOnChildComponent=eventTarget!==this.eGui;if(!(eventOnChildComponent||this.cellCtrl.isEditing())){var key=event.key;key===" "?this.onSpaceKeyDown(event):(this.cellCtrl.startRowOrCellEdit(key,event),event.preventDefault())}},CellKeyboardListenerFeature2.prototype.onSpaceKeyDown=function(event){var gridOptionsService=this.beans.gridOptionsService;if(!this.cellCtrl.isEditing()&&gridOptionsService.isRowSelection()){var currentSelection=this.rowNode.isSelected(),newSelection=!currentSelection;if(newSelection||!gridOptionsService.get("suppressRowDeselection")){var groupSelectsFiltered=this.beans.gridOptionsService.get("groupSelectsFiltered"),updatedCount=this.rowNode.setSelectedParams({newValue:newSelection,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spaceKey"});currentSelection===void 0&&updatedCount===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:event.shiftKey,groupSelectsFiltered,event,source:"spaceKey"})}}event.preventDefault()},CellKeyboardListenerFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this)},CellKeyboardListenerFeature2}(BeanStub),__extends$25=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1X=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1X"),DndSourceComp=function(_super){__extends$25(DndSourceComp2,_super);function DndSourceComp2(rowNode,column,eCell){var _this=_super.call(this,'<div class="ag-drag-handle ag-row-drag" draggable="true"></div>')||this;return _this.rowNode=rowNode,_this.column=column,_this.eCell=eCell,_this}return __name(DndSourceComp2,"DndSourceComp"),DndSourceComp2.prototype.postConstruct=function(){var eGui=this.getGui();eGui.appendChild(createIconNoSpan("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",function(e){e.stopPropagation()}),this.addDragSource(),this.checkVisibility()},DndSourceComp2.prototype.addDragSource=function(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))},DndSourceComp2.prototype.onDragStart=function(dragEvent){var _this=this,providedOnRowDrag=this.column.getColDef().dndSourceOnRowDrag;dragEvent.dataTransfer.setDragImage(this.eCell,0,0);var defaultOnRowDrag=__name(function(){try{var jsonData=JSON.stringify(_this.rowNode.data);dragEvent.dataTransfer.setData("application/json",jsonData),dragEvent.dataTransfer.setData("text/plain",jsonData)}catch{}},"defaultOnRowDrag");if(providedOnRowDrag){var params=this.gridOptionsService.addGridCommonParams({rowNode:this.rowNode,dragEvent});providedOnRowDrag(params)}else defaultOnRowDrag()},DndSourceComp2.prototype.checkVisibility=function(){var visible=this.column.isDndSource(this.rowNode);this.setDisplayed(visible)},__decorate$1X([PostConstruct],DndSourceComp2.prototype,"postConstruct",null),DndSourceComp2}(Component),__read$r=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$r"),__spreadArray$m=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$m"),CSS_FIRST_COLUMN="ag-column-first",CSS_LAST_COLUMN="ag-column-last",CssClassApplier=function(){function CssClassApplier2(){}return __name(CssClassApplier2,"CssClassApplier"),CssClassApplier2.getHeaderClassesFromColDef=function(abstractColDef,gridOptionsService,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.headerClass,abstractColDef,gridOptionsService,column,columnGroup)},CssClassApplier2.getToolPanelClassesFromColDef=function(abstractColDef,gridOptionsService,column,columnGroup){return missing(abstractColDef)?[]:this.getColumnClassesFromCollDef(abstractColDef.toolPanelClass,abstractColDef,gridOptionsService,column,columnGroup)},CssClassApplier2.refreshFirstAndLastStyles=function(comp,column,columnModel){comp.addOrRemoveCssClass(CSS_FIRST_COLUMN,columnModel.isColumnAtEdge(column,"first")),comp.addOrRemoveCssClass(CSS_LAST_COLUMN,columnModel.isColumnAtEdge(column,"last"))},CssClassApplier2.getClassParams=function(abstractColDef,gridOptionsService,column,columnGroup){return gridOptionsService.addGridCommonParams({colDef:abstractColDef,column,columnGroup})},CssClassApplier2.getColumnClassesFromCollDef=function(classesOrFunc,abstractColDef,gridOptionsService,column,columnGroup){if(missing(classesOrFunc))return[];var classToUse;if(typeof classesOrFunc=="function"){var params=this.getClassParams(abstractColDef,gridOptionsService,column,columnGroup);classToUse=classesOrFunc(params)}else classToUse=classesOrFunc;return typeof classToUse=="string"?[classToUse]:Array.isArray(classToUse)?__spreadArray$m([],__read$r(classToUse),!1):[]},CssClassApplier2}(),__extends$24=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$d=__name(function(){return __assign$d=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$d.apply(this,arguments)},"__assign$d"),CSS_CELL="ag-cell",CSS_AUTO_HEIGHT="ag-cell-auto-height",CSS_NORMAL_HEIGHT="ag-cell-normal-height",CSS_CELL_FOCUS="ag-cell-focus",CSS_CELL_FIRST_RIGHT_PINNED="ag-cell-first-right-pinned",CSS_CELL_LAST_LEFT_PINNED="ag-cell-last-left-pinned",CSS_CELL_NOT_INLINE_EDITING="ag-cell-not-inline-editing",CSS_COLUMN_HOVER="ag-column-hover",CSS_CELL_WRAP_TEXT="ag-cell-wrap-text",instanceIdSequence$3=0,CellCtrl=function(_super){__extends$24(CellCtrl2,_super);function CellCtrl2(column,rowNode,beans,rowCtrl){var _this=_super.call(this)||this;return _this.cellRangeFeature=null,_this.cellPositionFeature=null,_this.cellCustomStyleFeature=null,_this.tooltipFeature=null,_this.cellMouseListenerFeature=null,_this.cellKeyboardListenerFeature=null,_this.suppressRefreshCell=!1,_this.onCellCompAttachedFuncs=[],_this.column=column,_this.rowNode=rowNode,_this.beans=beans,_this.rowCtrl=rowCtrl,_this.instanceId=column.getId()+"-"+instanceIdSequence$3++,_this.colIdSanitised=escapeString(_this.column.getId()),beans.gridOptionsService.get("suppressCellFocus")||(_this.tabIndex=-1),_this.createCellPosition(),_this.addFeatures(),_this.updateAndFormatValue(!1),_this}return __name(CellCtrl2,"CellCtrl"),CellCtrl2.prototype.shouldRestoreFocus=function(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)},CellCtrl2.prototype.addFeatures=function(){var _this=this;this.cellPositionFeature=new CellPositionFeature(this,this.beans),this.addDestroyFunc(function(){var _a;(_a=_this.cellPositionFeature)===null||_a===void 0||_a.destroy(),_this.cellPositionFeature=null}),this.cellCustomStyleFeature=new CellCustomStyleFeature(this,this.beans),this.addDestroyFunc(function(){var _a;(_a=_this.cellCustomStyleFeature)===null||_a===void 0||_a.destroy(),_this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new CellMouseListenerFeature(this,this.beans,this.column),this.addDestroyFunc(function(){var _a;(_a=_this.cellMouseListenerFeature)===null||_a===void 0||_a.destroy(),_this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new CellKeyboardListenerFeature(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(function(){var _a;(_a=_this.cellKeyboardListenerFeature)===null||_a===void 0||_a.destroy(),_this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(function(){_this.disableTooltipFeature()}));var rangeSelectionEnabled=this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection");rangeSelectionEnabled&&(this.cellRangeFeature=new CellRangeFeature(this.beans,this),this.addDestroyFunc(function(){var _a;(_a=_this.cellRangeFeature)===null||_a===void 0||_a.destroy(),_this.cellRangeFeature=null}))},CellCtrl2.prototype.enableTooltipFeature=function(){var _this=this,getTooltipValue=__name(function(){var colDef=_this.column.getColDef(),data=_this.rowNode.data;if(colDef.tooltipField&&exists(data))return getValueUsingField(data,colDef.tooltipField,_this.column.isTooltipFieldContainsDots());var valueGetter=colDef.tooltipValueGetter;return valueGetter?valueGetter(_this.beans.gridOptionsService.addGridCommonParams({location:"cell",colDef:_this.column.getColDef(),column:_this.column,rowIndex:_this.cellPosition.rowIndex,node:_this.rowNode,data:_this.rowNode.data,value:_this.value,valueFormatted:_this.valueFormatted})):null},"getTooltipValue"),tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getRowIndex:function(){return _this.cellPosition.rowIndex},getRowNode:function(){return _this.rowNode},getGui:function(){return _this.getGui()},getLocation:function(){return"cell"},getTooltipValue,getValueFormatted:function(){return _this.valueFormatted}};this.tooltipFeature=new TooltipFeature(tooltipCtrl,this.beans)},CellCtrl2.prototype.disableTooltipFeature=function(){this.tooltipFeature&&(this.tooltipFeature.destroy(),this.tooltipFeature=null)},CellCtrl2.prototype.setComp=function(comp,eGui,eCellWrapper,printLayout,startEditing){var _a,_b,_c,_d;this.cellComp=comp,this.eGui=eGui,this.printLayout=printLayout,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(eCellWrapper),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(_a=this.cellPositionFeature)===null||_a===void 0||_a.setComp(eGui),(_b=this.cellCustomStyleFeature)===null||_b===void 0||_b.setComp(comp),(_c=this.tooltipFeature)===null||_c===void 0||_c.setComp(eGui),(_d=this.cellKeyboardListenerFeature)===null||_d===void 0||_d.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(comp,eGui),startEditing&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(function(func){return func()}),this.onCellCompAttachedFuncs=[])},CellCtrl2.prototype.setupAutoHeight=function(eCellWrapper){var _this=this;if(this.isAutoHeight=this.column.isAutoHeight(),!(!this.isAutoHeight||!eCellWrapper)){var eParentCell=eCellWrapper.parentElement,minRowHeight=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,measureHeight=__name(function(timesCalled){if(!_this.editing&&_this.isAlive()){var _a=getElementSize(eParentCell),paddingTop=_a.paddingTop,paddingBottom=_a.paddingBottom,borderBottomWidth=_a.borderBottomWidth,borderTopWidth=_a.borderTopWidth,extraHeight=paddingTop+paddingBottom+borderBottomWidth+borderTopWidth,wrapperHeight=eCellWrapper.offsetHeight,autoHeight=wrapperHeight+extraHeight;if(timesCalled<5){var doc=_this.beans.gridOptionsService.getDocument(),notYetInDom=!doc||!doc.contains(eCellWrapper),possiblyNoContentYet=autoHeight==0;if(notYetInDom||possiblyNoContentYet){window.setTimeout(function(){return measureHeight(timesCalled+1)},0);return}}var newHeight=Math.max(autoHeight,minRowHeight);_this.rowNode.setRowAutoHeight(newHeight,_this.column)}},"measureHeight"),listener=__name(function(){return measureHeight(0)},"listener");listener();var destroyResizeObserver=this.beans.resizeObserverService.observeResize(eCellWrapper,listener);this.addDestroyFunc(function(){destroyResizeObserver(),_this.rowNode.setRowAutoHeight(void 0,_this.column)})}},CellCtrl2.prototype.getCellAriaRole=function(){var _a;return(_a=this.column.getColDef().cellAriaRole)!==null&&_a!==void 0?_a:"gridcell"},CellCtrl2.prototype.getInstanceId=function(){return this.instanceId},CellCtrl2.prototype.getIncludeSelection=function(){return this.includeSelection},CellCtrl2.prototype.getIncludeRowDrag=function(){return this.includeRowDrag},CellCtrl2.prototype.getIncludeDndSource=function(){return this.includeDndSource},CellCtrl2.prototype.getColumnIdSanitised=function(){return this.colIdSanitised},CellCtrl2.prototype.getTabIndex=function(){return this.tabIndex},CellCtrl2.prototype.isCellRenderer=function(){var colDef=this.column.getColDef();return colDef.cellRenderer!=null||colDef.cellRendererSelector!=null},CellCtrl2.prototype.getValueToDisplay=function(){return this.valueFormatted!=null?this.valueFormatted:this.value},CellCtrl2.prototype.showValue=function(forceNewCellRendererInstance){forceNewCellRendererInstance===void 0&&(forceNewCellRendererInstance=!1);var valueToDisplay=this.getValueToDisplay(),compDetails;if(this.isCellRenderer()){var params=this.createCellRendererParams();compDetails=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),params)}this.cellComp.setRenderDetails(compDetails,valueToDisplay,forceNewCellRendererInstance),this.refreshHandle()},CellCtrl2.prototype.setupControlComps=function(){var colDef=this.column.getColDef();this.includeSelection=this.isIncludeControl(colDef.checkboxSelection),this.includeRowDrag=this.isIncludeControl(colDef.rowDrag),this.includeDndSource=this.isIncludeControl(colDef.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)},CellCtrl2.prototype.isForceWrapper=function(){var forceWrapper=this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight();return forceWrapper},CellCtrl2.prototype.isIncludeControl=function(value){var rowNodePinned=this.rowNode.rowPinned!=null,isFunc=typeof value=="function",res=rowNodePinned?!1:isFunc||value===!0;return res},CellCtrl2.prototype.refreshShouldDestroy=function(){var colDef=this.column.getColDef(),selectionChanged=this.includeSelection!=this.isIncludeControl(colDef.checkboxSelection),rowDragChanged=this.includeRowDrag!=this.isIncludeControl(colDef.rowDrag),dndSourceChanged=this.includeDndSource!=this.isIncludeControl(colDef.dndSource);return selectionChanged||rowDragChanged||dndSourceChanged},CellCtrl2.prototype.startEditing=function(key,cellStartedEdit,event){var _this=this;if(key===void 0&&(key=null),cellStartedEdit===void 0&&(cellStartedEdit=!1),event===void 0&&(event=null),!(!this.isCellEditable()||this.editing)){if(!this.cellComp){this.onCellCompAttachedFuncs.push(function(){_this.startEditing(key,cellStartedEdit,event)});return}var editorParams=this.createCellEditorParams(key,cellStartedEdit),colDef=this.column.getColDef(),compDetails=this.beans.userComponentFactory.getCellEditorDetails(colDef,editorParams);this.editCompDetails=compDetails;var popup=(compDetails==null?void 0:compDetails.popupFromSelector)!=null?compDetails.popupFromSelector:!!colDef.cellEditorPopup,position=(compDetails==null?void 0:compDetails.popupPositionFromSelector)!=null?compDetails.popupPositionFromSelector:colDef.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(compDetails,popup,position,this.beans.gridOptionsService.get("reactiveCustomComponents"));var e=this.createEvent(event,Events.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(e)}},CellCtrl2.prototype.setEditing=function(editing){this.editing!==editing&&(this.editing=editing,this.refreshHandle())},CellCtrl2.prototype.stopRowOrCellEdit=function(cancel){cancel===void 0&&(cancel=!1),this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.stopEditing(cancel):this.stopEditing(cancel)},CellCtrl2.prototype.onPopupEditorClosed=function(){this.isEditing()&&this.stopEditingAndFocus()},CellCtrl2.prototype.takeValueFromCellEditor=function(cancel){var noValueResult={newValueExists:!1};if(cancel)return noValueResult;var cellEditor=this.cellComp.getCellEditor();if(!cellEditor)return noValueResult;var userWantsToCancel=cellEditor.isCancelAfterEnd&&cellEditor.isCancelAfterEnd();if(userWantsToCancel)return noValueResult;var newValue=cellEditor.getValue();return{newValue,newValueExists:!0}},CellCtrl2.prototype.saveNewValue=function(oldValue,newValue){if(newValue===oldValue)return!1;this.suppressRefreshCell=!0;var valueChanged=this.rowNode.setDataValue(this.column,newValue,"edit");return this.suppressRefreshCell=!1,valueChanged},CellCtrl2.prototype.stopEditing=function(cancel){if(cancel===void 0&&(cancel=!1),!this.editing)return!1;var _a=this.takeValueFromCellEditor(cancel),newValue=_a.newValue,newValueExists=_a.newValueExists,oldValue=this.rowNode.getValueFromValueService(this.column),valueChanged=!1;return newValueExists&&(valueChanged=this.saveNewValue(oldValue,newValue)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(oldValue,newValue,!cancel&&!!valueChanged),valueChanged},CellCtrl2.prototype.dispatchEditingStoppedEvent=function(oldValue,newValue,valueChanged){var editingStoppedEvent=__assign$d(__assign$d({},this.createEvent(null,Events.EVENT_CELL_EDITING_STOPPED)),{oldValue,newValue,valueChanged});this.beans.eventService.dispatchEvent(editingStoppedEvent)},CellCtrl2.prototype.createCellEditorParams=function(key,cellStartedEdit){return this.beans.gridOptionsService.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:key,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})},CellCtrl2.prototype.createCellRendererParams=function(){var _this=this,res=this.beans.gridOptionsService.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:function(){return _this.rowNode.getValueFromValueService(_this.column)},setValue:function(value){return _this.beans.valueService.setValue(_this.rowNode,_this.column,value)},formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.registerRowDragger(rowDraggerElement,dragStartPixels,suppressVisibilityChange)}});return res},CellCtrl2.prototype.parseValue=function(newValue){return this.beans.valueParserService.parseValue(this.column,this.rowNode,newValue,this.getValue())},CellCtrl2.prototype.setFocusOutOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusOut&&cellEditor.focusOut()}},CellCtrl2.prototype.setFocusInOnEditor=function(){if(this.editing){var cellEditor=this.cellComp.getCellEditor();cellEditor&&cellEditor.focusIn?cellEditor.focusIn():this.focusCell(!0)}},CellCtrl2.prototype.onCellChanged=function(event){var eventImpactsThisCell=event.column===this.column;eventImpactsThisCell&&this.refreshCell({})},CellCtrl2.prototype.refreshOrDestroyCell=function(params){var _a;this.refreshShouldDestroy()?(_a=this.rowCtrl)===null||_a===void 0||_a.refreshCell(this):this.refreshCell(params)},CellCtrl2.prototype.refreshCell=function(params){var _a,_b,_c;if(!(this.suppressRefreshCell||this.editing)){var colDef=this.column.getColDef(),newData=params!=null&&!!params.newData,suppressFlash=params!=null&&!!params.suppressFlash||!!colDef.suppressCellFlash,noValueProvided=colDef.field==null&&colDef.valueGetter==null&&colDef.showRowGroup==null,forceRefresh=params&&params.forceRefresh||noValueProvided||newData,isCellCompReady=!!this.cellComp,valuesDifferent=this.updateAndFormatValue(isCellCompReady),dataNeedsUpdating=forceRefresh||valuesDifferent;if(isCellCompReady){if(dataNeedsUpdating){this.showValue(newData);var processingFilterChange=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering(),flashCell=!suppressFlash&&!processingFilterChange&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||colDef.enableCellChangeFlash);flashCell&&this.flashCell(),(_a=this.cellCustomStyleFeature)===null||_a===void 0||_a.applyUserStyles(),(_b=this.cellCustomStyleFeature)===null||_b===void 0||_b.applyClassesFromColDef()}this.refreshToolTip(),(_c=this.cellCustomStyleFeature)===null||_c===void 0||_c.applyCellClassRules()}}},CellCtrl2.prototype.stopEditingAndFocus=function(suppressNavigateAfterEdit,shiftKey){suppressNavigateAfterEdit===void 0&&(suppressNavigateAfterEdit=!1),shiftKey===void 0&&(shiftKey=!1),this.stopRowOrCellEdit(),this.focusCell(!0),suppressNavigateAfterEdit||this.navigateAfterEdit(shiftKey)},CellCtrl2.prototype.navigateAfterEdit=function(shiftKey){var enterNavigatesVerticallyAfterEdit=this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit");if(enterNavigatesVerticallyAfterEdit){var key=shiftKey?KeyCode.UP:KeyCode.DOWN;this.beans.navigationService.navigateToNextCell(null,key,this.getCellPosition(),!1)}},CellCtrl2.prototype.flashCell=function(delays){var _a,_b,flashDuration=(_a=delays==null?void 0:delays.flashDuration)!==null&&_a!==void 0?_a:delays==null?void 0:delays.flashDelay,fadeDuration=(_b=delays==null?void 0:delays.fadeDuration)!==null&&_b!==void 0?_b:delays==null?void 0:delays.fadeDelay;this.animateCell("data-changed",flashDuration,fadeDuration)},CellCtrl2.prototype.animateCell=function(cssName,flashDuration,fadeDuration){var _this=this;if(this.cellComp){var fullName="ag-cell-".concat(cssName),animationFullName="ag-cell-".concat(cssName,"-animation"),gridOptionsService=this.beans.gridOptionsService;flashDuration||(flashDuration=gridOptionsService.get("cellFlashDuration")),exists(fadeDuration)||(fadeDuration=gridOptionsService.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(fullName,!0),this.cellComp.addOrRemoveCssClass(animationFullName,!1),this.beans.frameworkOverrides.wrapIncoming(function(){window.setTimeout(function(){_this.isAlive()&&(_this.cellComp.addOrRemoveCssClass(fullName,!1),_this.cellComp.addOrRemoveCssClass(animationFullName,!0),_this.eGui.style.transition="background-color ".concat(fadeDuration,"ms"),window.setTimeout(function(){_this.isAlive()&&(_this.cellComp.addOrRemoveCssClass(animationFullName,!1),_this.eGui.style.transition="")},fadeDuration))},flashDuration)})}},CellCtrl2.prototype.onFlashCells=function(event){if(this.cellComp){var cellId=this.beans.cellPositionUtils.createId(this.getCellPosition()),shouldFlash=event.cells[cellId];shouldFlash&&this.animateCell("highlight")}},CellCtrl2.prototype.isCellEditable=function(){return this.column.isCellEditable(this.rowNode)},CellCtrl2.prototype.isSuppressFillHandle=function(){return this.column.isSuppressFillHandle()},CellCtrl2.prototype.formatValue=function(value){var _a;return(_a=this.callValueFormatter(value))!==null&&_a!==void 0?_a:value},CellCtrl2.prototype.callValueFormatter=function(value){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,value)},CellCtrl2.prototype.updateAndFormatValue=function(compareValues){var oldValue=this.value,oldValueFormatted=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),compareValues?!this.valuesAreEqual(oldValue,this.value)||this.valueFormatted!=oldValueFormatted:!0},CellCtrl2.prototype.valuesAreEqual=function(val1,val2){var colDef=this.column.getColDef();return colDef.equals?colDef.equals(val1,val2):val1===val2},CellCtrl2.prototype.getComp=function(){return this.cellComp},CellCtrl2.prototype.getValue=function(){return this.value},CellCtrl2.prototype.getValueFormatted=function(){return this.valueFormatted},CellCtrl2.prototype.addDomData=function(){var _this=this,element=this.getGui();this.beans.gridOptionsService.setDomData(element,CellCtrl2.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(function(){return _this.beans.gridOptionsService.setDomData(element,CellCtrl2.DOM_DATA_KEY_CELL_CTRL,null)})},CellCtrl2.prototype.createEvent=function(domEvent,eventType){var event=this.beans.gridOptionsService.addGridCommonParams({type:eventType,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:domEvent,rowIndex:this.rowNode.rowIndex});return event},CellCtrl2.prototype.processCharacter=function(event){var _a;(_a=this.cellKeyboardListenerFeature)===null||_a===void 0||_a.processCharacter(event)},CellCtrl2.prototype.onKeyDown=function(event){var _a;(_a=this.cellKeyboardListenerFeature)===null||_a===void 0||_a.onKeyDown(event)},CellCtrl2.prototype.onMouseEvent=function(eventName,mouseEvent){var _a;(_a=this.cellMouseListenerFeature)===null||_a===void 0||_a.onMouseEvent(eventName,mouseEvent)},CellCtrl2.prototype.getGui=function(){return this.eGui},CellCtrl2.prototype.refreshToolTip=function(){var _a;(_a=this.tooltipFeature)===null||_a===void 0||_a.refreshToolTip()},CellCtrl2.prototype.getColSpanningList=function(){return this.cellPositionFeature.getColSpanningList()},CellCtrl2.prototype.onLeftChanged=function(){var _a;this.cellComp&&((_a=this.cellPositionFeature)===null||_a===void 0||_a.onLeftChanged())},CellCtrl2.prototype.onDisplayedColumnsChanged=function(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())},CellCtrl2.prototype.refreshFirstAndLastStyles=function(){var _a=this,cellComp=_a.cellComp,column=_a.column,beans=_a.beans;CssClassApplier.refreshFirstAndLastStyles(cellComp,column,beans.columnModel)},CellCtrl2.prototype.refreshAriaColIndex=function(){var colIdx=this.beans.columnModel.getAriaColumnIndex(this.column);setAriaColIndex(this.getGui(),colIdx)},CellCtrl2.prototype.isSuppressNavigable=function(){return this.column.isSuppressNavigable(this.rowNode)},CellCtrl2.prototype.onWidthChanged=function(){var _a;return(_a=this.cellPositionFeature)===null||_a===void 0?void 0:_a.onWidthChanged()},CellCtrl2.prototype.getColumn=function(){return this.column},CellCtrl2.prototype.getRowNode=function(){return this.rowNode},CellCtrl2.prototype.getBeans=function(){return this.beans},CellCtrl2.prototype.isPrintLayout=function(){return this.printLayout},CellCtrl2.prototype.appendChild=function(htmlElement){this.eGui.appendChild(htmlElement)},CellCtrl2.prototype.refreshHandle=function(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()},CellCtrl2.prototype.getCellPosition=function(){return this.cellPosition},CellCtrl2.prototype.isEditing=function(){return this.editing},CellCtrl2.prototype.startRowOrCellEdit=function(key,event){var _this=this;if(event===void 0&&(event=null),!this.cellComp){this.onCellCompAttachedFuncs.push(function(){_this.startRowOrCellEdit(key,event)});return}this.beans.gridOptionsService.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(key,this):this.startEditing(key,!0,event)},CellCtrl2.prototype.getRowCtrl=function(){return this.rowCtrl},CellCtrl2.prototype.getRowPosition=function(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}},CellCtrl2.prototype.updateRangeBordersIfRangeCount=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()},CellCtrl2.prototype.onRangeSelectionChanged=function(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl2.prototype.isRangeSelectionEnabled=function(){return this.cellRangeFeature!=null},CellCtrl2.prototype.focusCell=function(forceBrowserFocus){forceBrowserFocus===void 0&&(forceBrowserFocus=!1),this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus})},CellCtrl2.prototype.onRowIndexChanged=function(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()},CellCtrl2.prototype.onFirstRightPinnedChanged=function(){if(this.cellComp){var firstRightPinned=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(CSS_CELL_FIRST_RIGHT_PINNED,firstRightPinned)}},CellCtrl2.prototype.onLastLeftPinnedChanged=function(){if(this.cellComp){var lastLeftPinned=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(CSS_CELL_LAST_LEFT_PINNED,lastLeftPinned)}},CellCtrl2.prototype.onCellFocused=function(event){if(!this.beans.gridOptionsService.get("suppressCellFocus")){var cellFocused=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){cellFocused&&(event!=null&&event.forceBrowserFocus)&&(this.focusEventToRestore=event);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(CSS_CELL_FOCUS,cellFocused),cellFocused&&event&&event.forceBrowserFocus){var focusEl=this.cellComp.getFocusableElement();focusEl.focus({preventScroll:!!event.preventScrollOnBrowserFocus})}var fullRowEdit=this.beans.gridOptionsService.get("editType")==="fullRow";!cellFocused&&!fullRowEdit&&this.editing&&this.stopRowOrCellEdit(),cellFocused&&this.rowCtrl.announceDescription()}},CellCtrl2.prototype.createCellPosition=function(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:makeNull(this.rowNode.rowPinned),column:this.column}},CellCtrl2.prototype.applyStaticCssClasses=function(){this.cellComp.addOrRemoveCssClass(CSS_CELL,!0),this.cellComp.addOrRemoveCssClass(CSS_CELL_NOT_INLINE_EDITING,!0);var autoHeight=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(CSS_AUTO_HEIGHT,autoHeight),this.cellComp.addOrRemoveCssClass(CSS_NORMAL_HEIGHT,!autoHeight)},CellCtrl2.prototype.onColumnHover=function(){if(this.cellComp&&this.beans.gridOptionsService.get("columnHoverHighlight")){var isHovered=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(CSS_COLUMN_HOVER,isHovered)}},CellCtrl2.prototype.onColDefChanged=function(){var _a,_b;if(this.cellComp){var isAutoHeight=this.column.isAutoHeight();isAutoHeight!==this.isAutoHeight&&((_a=this.rowCtrl)===null||_a===void 0||_a.refreshCell(this));var isTooltipEnabled=this.column.isTooltipEnabled();if(isTooltipEnabled?(this.disableTooltipFeature(),this.enableTooltipFeature(),(_b=this.tooltipFeature)===null||_b===void 0||_b.setComp(this.eGui)):this.disableTooltipFeature(),this.setWrapText(),!this.editing)this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0});else{var cellEditor=this.getCellEditor();if(cellEditor!=null&&cellEditor.refresh){var _c=this.editCompDetails.params,eventKey=_c.eventKey,cellStartedEdit=_c.cellStartedEdit,editorParams=this.createCellEditorParams(eventKey,cellStartedEdit),colDef=this.column.getColDef(),compDetails=this.beans.userComponentFactory.getCellEditorDetails(colDef,editorParams);cellEditor.refresh(compDetails.params)}}}},CellCtrl2.prototype.setWrapText=function(){var value=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(CSS_CELL_WRAP_TEXT,value)},CellCtrl2.prototype.dispatchCellContextMenuEvent=function(event){var _this=this,colDef=this.column.getColDef(),cellContextMenuEvent=this.createEvent(event,Events.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(cellContextMenuEvent),colDef.onCellContextMenu&&window.setTimeout(function(){_this.beans.frameworkOverrides.wrapOutgoing(function(){colDef.onCellContextMenu(cellContextMenuEvent)})},0)},CellCtrl2.prototype.getCellRenderer=function(){return this.cellComp?this.cellComp.getCellRenderer():null},CellCtrl2.prototype.getCellEditor=function(){return this.cellComp?this.cellComp.getCellEditor():null},CellCtrl2.prototype.destroy=function(){this.onCellCompAttachedFuncs=[],_super.prototype.destroy.call(this)},CellCtrl2.prototype.createSelectionCheckbox=function(){var cbSelectionComponent=new CheckboxSelectionComponent;return this.beans.context.createBean(cbSelectionComponent),cbSelectionComponent.init({rowNode:this.rowNode,column:this.column}),cbSelectionComponent},CellCtrl2.prototype.createDndSource=function(){var dndSourceComp=new DndSourceComp(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(dndSourceComp),dndSourceComp},CellCtrl2.prototype.registerRowDragger=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this;if(this.customRowDragComp){this.customRowDragComp.setDragElement(customElement,dragStartPixels);return}var newComp=this.createRowDragComp(customElement,dragStartPixels,suppressVisibilityChange);newComp&&(this.customRowDragComp=newComp,this.addDestroyFunc(function(){_this.beans.context.destroyBean(newComp),_this.customRowDragComp=null}))},CellCtrl2.prototype.createRowDragComp=function(customElement,dragStartPixels,suppressVisibilityChange){var _this=this,pagination=this.beans.gridOptionsService.get("pagination"),rowDragManaged=this.beans.gridOptionsService.get("rowDragManaged"),clientSideRowModelActive=this.beans.gridOptionsService.isRowModelType("clientSide");if(rowDragManaged){if(!clientSideRowModelActive){warnOnce("managed row dragging is only allowed in the Client Side Row Model");return}if(pagination){warnOnce("managed row dragging is not possible when doing pagination");return}}var rowDragComp=new RowDragComp(function(){return _this.value},this.rowNode,this.column,customElement,dragStartPixels,suppressVisibilityChange);return this.beans.context.createBean(rowDragComp),rowDragComp},CellCtrl2.DOM_DATA_KEY_CELL_CTRL="cellCtrl",CellCtrl2}(BeanStub),__extends$23=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__values$6=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$6"),__read$q=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$q"),__spreadArray$l=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$l"),RowType$1;(function(RowType2){RowType2.Normal="Normal",RowType2.FullWidth="FullWidth",RowType2.FullWidthLoading="FullWidthLoading",RowType2.FullWidthGroup="FullWidthGroup",RowType2.FullWidthDetail="FullWidthDetail"})(RowType$1||(RowType$1={}));var instanceIdSequence$2=0,RowCtrl=function(_super){__extends$23(RowCtrl2,_super);function RowCtrl2(rowNode,beans,animateIn,useAnimationFrameForCreate,printLayout){var _this=_super.call(this)||this;return _this.allRowGuis=[],_this.active=!0,_this.centerCellCtrls={list:[],map:{}},_this.leftCellCtrls={list:[],map:{}},_this.rightCellCtrls={list:[],map:{}},_this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},_this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},_this.rowDragComps=[],_this.lastMouseDownOnDragger=!1,_this.emptyStyle={},_this.updateColumnListsPending=!1,_this.rowId=null,_this.businessKeySanitised=null,_this.beans=beans,_this.gridOptionsService=beans.gridOptionsService,_this.rowNode=rowNode,_this.paginationPage=beans.paginationProxy.getCurrentPage(),_this.useAnimationFrameForCreate=useAnimationFrameForCreate,_this.printLayout=printLayout,_this.suppressRowTransform=_this.gridOptionsService.get("suppressRowTransform"),_this.instanceId=rowNode.id+"-"+instanceIdSequence$2++,_this.rowId=escapeString(rowNode.id),_this.initRowBusinessKey(),_this.rowFocused=beans.focusService.isRowFocused(_this.rowNode.rowIndex,_this.rowNode.rowPinned),_this.rowLevel=beans.rowCssClassCalculator.calculateRowLevel(_this.rowNode),_this.setRowType(),_this.setAnimateFlags(animateIn),_this.rowStyles=_this.processStylesFromGridOptions(),_this.isFullWidth()&&!_this.gridOptionsService.get("suppressCellFocus")&&(_this.tabIndex=-1),_this.addListeners(),_this}return __name(RowCtrl2,"RowCtrl"),RowCtrl2.prototype.initRowBusinessKey=function(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()},RowCtrl2.prototype.updateRowBusinessKey=function(){if(typeof this.businessKeyForNodeFunc=="function"){var businessKey=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=escapeString(businessKey)}},RowCtrl2.prototype.getRowId=function(){return this.rowId},RowCtrl2.prototype.getRowStyles=function(){return this.rowStyles},RowCtrl2.prototype.getTabIndex=function(){return this.tabIndex},RowCtrl2.prototype.isSticky=function(){return this.rowNode.sticky},RowCtrl2.prototype.getBeans=function(){return this.beans},RowCtrl2.prototype.getInstanceId=function(){return this.instanceId},RowCtrl2.prototype.setComp=function(rowComp,element,containerType){var gui={rowComp,element,containerType};this.allRowGuis.push(gui),containerType===RowContainerType.LEFT?this.leftGui=gui:containerType===RowContainerType.RIGHT?this.rightGui=gui:containerType===RowContainerType.FULL_WIDTH?this.fullWidthGui=gui:this.centerGui=gui,this.initialiseRowComp(gui),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()},RowCtrl2.prototype.unsetComp=function(containerType){switch(this.allRowGuis=this.allRowGuis.filter(function(rowGui){return rowGui.containerType!==containerType}),containerType){case RowContainerType.LEFT:this.leftGui=void 0;break;case RowContainerType.RIGHT:this.rightGui=void 0;break;case RowContainerType.FULL_WIDTH:this.fullWidthGui=void 0;break;case RowContainerType.CENTER:this.centerGui=void 0;break}},RowCtrl2.prototype.isCacheable=function(){return this.rowType===RowType$1.FullWidthDetail&&this.gridOptionsService.get("keepDetailRows")},RowCtrl2.prototype.setCached=function(cached){var displayValue=cached?"none":"";this.allRowGuis.forEach(function(rg){return rg.element.style.display=displayValue})},RowCtrl2.prototype.initialiseRowComp=function(gui){var _this=this,gos=this.gridOptionsService;this.listenOnDomOrder(gui),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(gui),this.updateRowIndexes(gui),this.setFocusedClasses(gui),this.setStylesFromGridOptions(!1,gui),gos.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(gui),this.updateColumnLists(!this.useAnimationFrameForCreate);var comp=gui.rowComp,initialRowClasses=this.getInitialRowClasses(gui.containerType);initialRowClasses.forEach(function(name){return comp.addOrRemoveCssClass(name,!0)}),this.executeSlideAndFadeAnimations(gui),this.rowNode.group&&setAriaExpanded(gui.element,this.rowNode.expanded==!0),this.setRowCompRowId(comp),this.setRowCompRowBusinessKey(comp),gos.setDomData(gui.element,RowCtrl2.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(function(){return gos.setDomData(gui.element,RowCtrl2.DOM_DATA_KEY_ROW_CTRL,null)}),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,gui.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(gui.element),this.isFullWidth()&&this.setupFullWidth(gui),gos.get("rowDragEntireRow")&&this.addRowDraggerToRow(gui),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(function(){_this.isAlive()&&gui.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()},RowCtrl2.prototype.setRowCompRowBusinessKey=function(comp){this.businessKeySanitised!=null&&comp.setRowBusinessKey(this.businessKeySanitised)},RowCtrl2.prototype.getBusinessKey=function(){return this.businessKeySanitised},RowCtrl2.prototype.setRowCompRowId=function(comp){this.rowId=escapeString(this.rowNode.id),this.rowId!=null&&comp.setRowId(this.rowId)},RowCtrl2.prototype.executeSlideAndFadeAnimations=function(gui){var _this=this,containerType=gui.containerType,shouldSlide=this.slideInAnimation[containerType];shouldSlide&&(executeNextVMTurn(function(){_this.onTopChanged()}),this.slideInAnimation[containerType]=!1);var shouldFade=this.fadeInAnimation[containerType];shouldFade&&(executeNextVMTurn(function(){gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[containerType]=!1)},RowCtrl2.prototype.addRowDraggerToRow=function(gui){if(this.gridOptionsService.get("enableRangeSelection")){warnOnce("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");return}var translate=this.beans.localeService.getLocaleTextFunc(),rowDragComp=new RowDragComp(function(){return"1 ".concat(translate("rowDragRow","row"))},this.rowNode,void 0,gui.element,void 0,!0),rowDragBean=this.createBean(rowDragComp,this.beans.context);this.rowDragComps.push(rowDragBean)},RowCtrl2.prototype.setupFullWidth=function(gui){var pinned=this.getPinnedForContainer(gui.containerType),params=this.createFullWidthParams(gui.element,pinned);if(!(this.rowType==RowType$1.FullWidthDetail&&!ModuleRegistry.__assertRegistered(ModuleNames.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))){var compDetails;switch(this.rowType){case RowType$1.FullWidthDetail:compDetails=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(params);break;case RowType$1.FullWidthGroup:compDetails=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(params);break;case RowType$1.FullWidthLoading:compDetails=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(params);break;default:compDetails=this.beans.userComponentFactory.getFullWidthCellRendererDetails(params);break}gui.rowComp.showFullWidth(compDetails)}},RowCtrl2.prototype.isPrintLayout=function(){return this.printLayout},RowCtrl2.prototype.getFullWidthCellRenderers=function(){var _a,_b;return this.gridOptionsService.get("embedFullWidthRows")?this.allRowGuis.map(function(gui){var _a2;return(_a2=gui==null?void 0:gui.rowComp)===null||_a2===void 0?void 0:_a2.getFullWidthCellRenderer()}):[(_b=(_a=this.fullWidthGui)===null||_a===void 0?void 0:_a.rowComp)===null||_b===void 0?void 0:_b.getFullWidthCellRenderer()]},RowCtrl2.prototype.getCellElement=function(column){var cellCtrl=this.getCellCtrl(column);return cellCtrl?cellCtrl.getGui():null},RowCtrl2.prototype.executeProcessRowPostCreateFunc=function(){var func=this.gridOptionsService.getCallback("processRowPostCreate");if(!(!func||!this.areAllContainersReady())){var params={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};func(params)}},RowCtrl2.prototype.areAllContainersReady=function(){var isLeftReady=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),isCenterReady=!!this.centerGui,isRightReady=!!this.rightGui||!this.beans.columnModel.isPinningRight();return isLeftReady&&isCenterReady&&isRightReady},RowCtrl2.prototype.setRowType=function(){var isStub=this.rowNode.stub,isFullWidthCell=this.rowNode.isFullWidthCell(),isDetailCell=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,pivotMode=this.beans.columnModel.isPivotMode(),isGroupRow=!!this.rowNode.group&&!this.rowNode.footer,isFullWidthGroup=isGroupRow&&this.gridOptionsService.isGroupUseEntireRow(pivotMode);isStub?this.rowType=RowType$1.FullWidthLoading:isDetailCell?this.rowType=RowType$1.FullWidthDetail:isFullWidthCell?this.rowType=RowType$1.FullWidth:isFullWidthGroup?this.rowType=RowType$1.FullWidthGroup:this.rowType=RowType$1.Normal},RowCtrl2.prototype.updateColumnLists=function(suppressAnimationFrame,useFlushSync){var _this=this;if(suppressAnimationFrame===void 0&&(suppressAnimationFrame=!1),useFlushSync===void 0&&(useFlushSync=!1),!this.isFullWidth()){var noAnimation=suppressAnimationFrame||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout;if(noAnimation){this.updateColumnListsImpl(useFlushSync);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(function(){_this.active&&_this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}},RowCtrl2.prototype.createCellCtrls=function(prev,cols,pinned){var _this=this;pinned===void 0&&(pinned=null);var res={list:[],map:{}},addCell=__name(function(colInstanceId,cellCtrl){res.list.push(cellCtrl),res.map[colInstanceId]=cellCtrl},"addCell");return cols.forEach(function(col){var colInstanceId=col.getInstanceId(),cellCtrl=prev.map[colInstanceId];cellCtrl||(cellCtrl=new CellCtrl(col,_this.rowNode,_this.beans,_this)),addCell(colInstanceId,cellCtrl)}),prev.list.forEach(function(prevCellCtrl){var cellInResult=res.map[prevCellCtrl.getColumn().getInstanceId()]!=null;if(!cellInResult){var keepCell=!_this.isCellEligibleToBeRemoved(prevCellCtrl,pinned);if(keepCell){addCell(prevCellCtrl.getColumn().getInstanceId(),prevCellCtrl);return}prevCellCtrl.destroy()}}),res},RowCtrl2.prototype.updateColumnListsImpl=function(useFlushSync){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(useFlushSync)},RowCtrl2.prototype.setCellCtrls=function(useFlushSync){var _this=this;this.allRowGuis.forEach(function(item){var cellControls=_this.getCellCtrlsForContainer(item.containerType);item.rowComp.setCellCtrls(cellControls,useFlushSync)})},RowCtrl2.prototype.getCellCtrlsForContainer=function(containerType){switch(containerType){case RowContainerType.LEFT:return this.leftCellCtrls.list;case RowContainerType.RIGHT:return this.rightCellCtrls.list;case RowContainerType.FULL_WIDTH:return[];case RowContainerType.CENTER:return this.centerCellCtrls.list;default:var exhaustiveCheck=containerType;throw new Error("Unhandled case: ".concat(exhaustiveCheck))}},RowCtrl2.prototype.createAllCellCtrls=function(){var columnModel=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,columnModel.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{var centerCols=columnModel.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,centerCols);var leftCols=columnModel.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,leftCols,"left");var rightCols=columnModel.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,rightCols,"right")}},RowCtrl2.prototype.isCellEligibleToBeRemoved=function(cellCtrl,nextContainerPinned){var REMOVE_CELL=!0,KEEP_CELL=!1,column=cellCtrl.getColumn();if(column.getPinned()!=nextContainerPinned)return REMOVE_CELL;var editing=cellCtrl.isEditing(),focused=this.beans.focusService.isCellFocused(cellCtrl.getCellPosition()),mightWantToKeepCell=editing||focused;if(mightWantToKeepCell){var column_1=cellCtrl.getColumn(),displayedColumns=this.beans.columnModel.getAllDisplayedColumns(),cellStillDisplayed=displayedColumns.indexOf(column_1)>=0;return cellStillDisplayed?KEEP_CELL:REMOVE_CELL}return REMOVE_CELL},RowCtrl2.prototype.getDomOrder=function(){var isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder");return isEnsureDomOrder||this.gridOptionsService.isDomLayout("print")},RowCtrl2.prototype.listenOnDomOrder=function(gui){var _this=this,listener=__name(function(){gui.rowComp.setDomOrder(_this.getDomOrder())},"listener");this.addManagedPropertyListener("domLayout",listener),this.addManagedPropertyListener("ensureDomOrder",listener)},RowCtrl2.prototype.setAnimateFlags=function(animateIn){if(!(this.isSticky()||!animateIn)){var oldRowTopExists=exists(this.rowNode.oldRowTop),pinningLeft=this.beans.columnModel.isPinningLeft(),pinningRight=this.beans.columnModel.isPinningRight();if(oldRowTopExists){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=pinningLeft,this.slideInAnimation.right=pinningRight}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=pinningLeft,this.fadeInAnimation.right=pinningRight}}},RowCtrl2.prototype.isEditing=function(){return this.editingRow},RowCtrl2.prototype.isFullWidth=function(){return this.rowType!==RowType$1.Normal},RowCtrl2.prototype.getRowType=function(){return this.rowType},RowCtrl2.prototype.refreshFullWidth=function(){var _this=this,tryRefresh=__name(function(gui,pinned){return gui?gui.rowComp.refreshFullWidth(function(){return _this.createFullWidthParams(gui.element,pinned)}):!0},"tryRefresh"),fullWidthSuccess=tryRefresh(this.fullWidthGui,null),centerSuccess=tryRefresh(this.centerGui,null),leftSuccess=tryRefresh(this.leftGui,"left"),rightSuccess=tryRefresh(this.rightGui,"right"),allFullWidthRowsRefreshed=fullWidthSuccess&&centerSuccess&&leftSuccess&&rightSuccess;return allFullWidthRowsRefreshed},RowCtrl2.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_HEIGHT_CHANGED,function(){return _this.onRowHeightChanged()}),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_SELECTED,function(){return _this.onRowSelected()}),this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,RowNode.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));var eventService=this.beans.eventService;this.addManagedListener(eventService,Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(eventService,Events.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(eventService,Events.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(function(){_this.destroyBeans(_this.rowDragComps,_this.beans.context)}),this.addManagedPropertyListeners(["rowDragEntireRow"],function(){var useRowDragEntireRow=_this.gridOptionsService.get("rowDragEntireRow");if(useRowDragEntireRow){_this.allRowGuis.forEach(function(gui){_this.addRowDraggerToRow(gui)});return}_this.destroyBeans(_this.rowDragComps,_this.beans.context),_this.rowDragComps=[]}),this.addListenersForCellComps()},RowCtrl2.prototype.addListenersForCellComps=function(){var _this=this;this.addManagedListener(this.rowNode,RowNode.EVENT_ROW_INDEX_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onRowIndexChanged()})}),this.addManagedListener(this.rowNode,RowNode.EVENT_CELL_CHANGED,function(event){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onCellChanged(event)})})},RowCtrl2.prototype.onRowNodeDataChanged=function(event){var _this=this,fullWidthChanged=this.isFullWidth()!==!!this.rowNode.isFullWidthCell();if(fullWidthChanged){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){var refresh=this.refreshFullWidth();refresh||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.refreshCell({suppressFlash:!event.update,newData:!event.update})}),this.allRowGuis.forEach(function(gui){_this.setRowCompRowId(gui.rowComp),_this.updateRowBusinessKey(),_this.setRowCompRowBusinessKey(gui.rowComp)}),this.onRowSelected(),this.postProcessCss()},RowCtrl2.prototype.postProcessCss=function(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()},RowCtrl2.prototype.onRowNodeHighlightChanged=function(){var highlighted=this.rowNode.highlighted;this.allRowGuis.forEach(function(gui){var aboveOn=highlighted===RowHighlightPosition.Above,belowOn=highlighted===RowHighlightPosition.Below;gui.rowComp.addOrRemoveCssClass("ag-row-highlight-above",aboveOn),gui.rowComp.addOrRemoveCssClass("ag-row-highlight-below",belowOn)})},RowCtrl2.prototype.postProcessRowDragging=function(){var dragging=this.rowNode.dragging;this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-dragging",dragging)})},RowCtrl2.prototype.updateExpandedCss=function(){var expandable=this.rowNode.isExpandable(),expanded=this.rowNode.expanded==!0;this.allRowGuis.forEach(function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-group",expandable),gui.rowComp.addOrRemoveCssClass("ag-row-group-expanded",expandable&&expanded),gui.rowComp.addOrRemoveCssClass("ag-row-group-contracted",expandable&&!expanded),setAriaExpanded(gui.element,expandable&&expanded)})},RowCtrl2.prototype.onDisplayedColumnsChanged=function(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()},RowCtrl2.prototype.onVirtualColumnsChanged=function(){this.updateColumnLists(!1,!0)},RowCtrl2.prototype.getRowPosition=function(){return{rowPinned:makeNull(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}},RowCtrl2.prototype.onKeyboardNavigate=function(keyboardEvent){var currentFullWidthComp=this.allRowGuis.find(function(c){return c.element.contains(keyboardEvent.target)}),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target;if(isFullWidthContainerFocused){var node=this.rowNode,lastFocusedCell=this.beans.focusService.getFocusedCell(),cellPosition={rowIndex:node.rowIndex,rowPinned:node.rowPinned,column:lastFocusedCell&&lastFocusedCell.column};this.beans.navigationService.navigateToNextCell(keyboardEvent,keyboardEvent.key,cellPosition,!0),keyboardEvent.preventDefault()}},RowCtrl2.prototype.onTabKeyDown=function(keyboardEvent){if(!(keyboardEvent.defaultPrevented||isStopPropagationForAgGrid(keyboardEvent))){var currentFullWidthComp=this.allRowGuis.find(function(c){return c.element.contains(keyboardEvent.target)}),currentFullWidthContainer=currentFullWidthComp?currentFullWidthComp.element:null,isFullWidthContainerFocused=currentFullWidthContainer===keyboardEvent.target,nextEl=null;isFullWidthContainerFocused||(nextEl=this.beans.focusService.findNextFocusableElement(currentFullWidthContainer,!1,keyboardEvent.shiftKey)),(this.isFullWidth()&&isFullWidthContainerFocused||!nextEl)&&this.beans.navigationService.onTabKeyDown(this,keyboardEvent)}},RowCtrl2.prototype.onFullWidthRowFocused=function(event){var _a,node=this.rowNode,isFocused=event?this.isFullWidth()&&event.rowIndex===node.rowIndex&&event.rowPinned==node.rowPinned:!1,element=this.fullWidthGui?this.fullWidthGui.element:(_a=this.centerGui)===null||_a===void 0?void 0:_a.element;element&&(element.classList.toggle("ag-full-width-focus",isFocused),isFocused&&element.focus({preventScroll:!0}))},RowCtrl2.prototype.refreshCell=function(cellCtrl){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,cellCtrl),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,cellCtrl),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,cellCtrl),this.updateColumnLists()},RowCtrl2.prototype.removeCellCtrl=function(prev,cellCtrlToRemove){var res={list:[],map:{}};return prev.list.forEach(function(cellCtrl){cellCtrl!==cellCtrlToRemove&&(res.list.push(cellCtrl),res.map[cellCtrl.getInstanceId()]=cellCtrl)}),res},RowCtrl2.prototype.onMouseEvent=function(eventName,mouseEvent){switch(eventName){case"dblclick":this.onRowDblClick(mouseEvent);break;case"click":this.onRowClick(mouseEvent);break;case"touchstart":case"mousedown":this.onRowMouseDown(mouseEvent);break}},RowCtrl2.prototype.createRowEvent=function(type,domEvent){return this.gridOptionsService.addGridCommonParams({type,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:domEvent})},RowCtrl2.prototype.createRowEventWithSource=function(type,domEvent){var event=this.createRowEvent(type,domEvent);return event.source=this,event},RowCtrl2.prototype.onRowDblClick=function(mouseEvent){if(!isStopPropagationForAgGrid(mouseEvent)){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_DOUBLE_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent)}},RowCtrl2.prototype.onRowMouseDown=function(mouseEvent){if(this.lastMouseDownOnDragger=isElementChildOfClass(mouseEvent.target,"ag-row-drag",3),!!this.isFullWidth()){var node=this.rowNode,columnModel=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:node.rowIndex,column:columnModel.getAllDisplayedColumns()[0],rowPinned:node.rowPinned,forceBrowserFocus:!0})}},RowCtrl2.prototype.onRowClick=function(mouseEvent){var stop=isStopPropagationForAgGrid(mouseEvent)||this.lastMouseDownOnDragger;if(!stop){var agEvent=this.createRowEventWithSource(Events.EVENT_ROW_CLICKED,mouseEvent);this.beans.eventService.dispatchEvent(agEvent);var isMultiKey=mouseEvent.ctrlKey||mouseEvent.metaKey,isShiftKey=mouseEvent.shiftKey,groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren");if(!(groupSelectsChildren&&this.rowNode.group||this.isRowSelectionBlocked()||this.gridOptionsService.get("suppressRowClickSelection"))){var multiSelectOnClick=this.gridOptionsService.get("rowMultiSelectWithClick"),rowDeselectionWithCtrl=!this.gridOptionsService.get("suppressRowDeselection"),source="rowClicked";if(this.rowNode.isSelected())multiSelectOnClick?this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):isMultiKey?rowDeselectionWithCtrl&&this.rowNode.setSelectedParams({newValue:!1,event:mouseEvent,source}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!isShiftKey,rangeSelect:isShiftKey,event:mouseEvent,source});else{var clearSelection=multiSelectOnClick?!1:!isMultiKey;this.rowNode.setSelectedParams({newValue:!0,clearSelection,rangeSelect:isShiftKey,event:mouseEvent,source})}}}},RowCtrl2.prototype.isRowSelectionBlocked=function(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()},RowCtrl2.prototype.setupDetailRowAutoHeight=function(eDetailGui){var _this=this;if(this.rowType===RowType$1.FullWidthDetail&&this.gridOptionsService.get("detailRowAutoHeight")){var checkRowSizeFunc=__name(function(){var clientHeight=eDetailGui.clientHeight;if(clientHeight!=null&&clientHeight>0){var updateRowHeightFunc=__name(function(){_this.rowNode.setRowHeight(clientHeight),_this.beans.clientSideRowModel?_this.beans.clientSideRowModel.onRowHeightChanged():_this.beans.serverSideRowModel&&_this.beans.serverSideRowModel.onRowHeightChanged()},"updateRowHeightFunc");window.setTimeout(updateRowHeightFunc,0)}},"checkRowSizeFunc"),resizeObserverDestroyFunc=this.beans.resizeObserverService.observeResize(eDetailGui,checkRowSizeFunc);this.addDestroyFunc(resizeObserverDestroyFunc),checkRowSizeFunc()}},RowCtrl2.prototype.createFullWidthParams=function(eRow,pinned){var _this=this,params=this.gridOptionsService.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:eRow,eParentOfValue:eRow,pinned,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){return _this.addFullWidthRowDragging(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange)}});return params},RowCtrl2.prototype.addFullWidthRowDragging=function(rowDraggerElement,dragStartPixels,value,suppressVisibilityChange){if(value===void 0&&(value=""),!!this.isFullWidth()){var rowDragComp=new RowDragComp(function(){return value},this.rowNode,void 0,rowDraggerElement,dragStartPixels,suppressVisibilityChange);this.createManagedBean(rowDragComp,this.beans.context)}},RowCtrl2.prototype.onUiLevelChanged=function(){var newLevel=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=newLevel){var classToAdd_1="ag-row-level-"+newLevel,classToRemove_1="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(function(gui){gui.rowComp.addOrRemoveCssClass(classToAdd_1,!0),gui.rowComp.addOrRemoveCssClass(classToRemove_1,!1)})}this.rowLevel=newLevel},RowCtrl2.prototype.isFirstRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()},RowCtrl2.prototype.isLastRowOnPage=function(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()},RowCtrl2.prototype.refreshFirstAndLastRowStyles=function(){var newFirst=this.isFirstRowOnPage(),newLast=this.isLastRowOnPage();this.firstRowOnPage!==newFirst&&(this.firstRowOnPage=newFirst,this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-first",newFirst)})),this.lastRowOnPage!==newLast&&(this.lastRowOnPage=newLast,this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-last",newLast)}))},RowCtrl2.prototype.stopEditing=function(cancel){var e_1,_a;if(cancel===void 0&&(cancel=!1),!this.stoppingRowEdit){var cellControls=this.getAllCellCtrls(),isRowEdit=this.editingRow;this.stoppingRowEdit=!0;var fireRowEditEvent=!1;try{for(var cellControls_1=__values$6(cellControls),cellControls_1_1=cellControls_1.next();!cellControls_1_1.done;cellControls_1_1=cellControls_1.next()){var ctrl=cellControls_1_1.value,valueChanged=ctrl.stopEditing(cancel);isRowEdit&&!cancel&&!fireRowEditEvent&&valueChanged&&(fireRowEditEvent=!0)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{cellControls_1_1&&!cellControls_1_1.done&&(_a=cellControls_1.return)&&_a.call(cellControls_1)}finally{if(e_1)throw e_1.error}}if(fireRowEditEvent){var event_1=this.createRowEvent(Events.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(event_1)}isRowEdit&&this.setEditingRow(!1),this.stoppingRowEdit=!1}},RowCtrl2.prototype.setInlineEditingCss=function(editing){this.allRowGuis.forEach(function(gui){gui.rowComp.addOrRemoveCssClass("ag-row-inline-editing",editing),gui.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!editing)})},RowCtrl2.prototype.setEditingRow=function(value){this.editingRow=value,this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-row-editing",value)});var event=value?this.createRowEvent(Events.EVENT_ROW_EDITING_STARTED):this.createRowEvent(Events.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(event)},RowCtrl2.prototype.startRowEditing=function(key,sourceRenderedCell,event){if(key===void 0&&(key=null),sourceRenderedCell===void 0&&(sourceRenderedCell=null),event===void 0&&(event=null),!this.editingRow){var atLeastOneEditing=this.getAllCellCtrls().reduce(function(prev,cellCtrl){var cellStartedEdit=cellCtrl===sourceRenderedCell;return cellStartedEdit?cellCtrl.startEditing(key,cellStartedEdit,event):cellCtrl.startEditing(null,cellStartedEdit,event),prev?!0:cellCtrl.isEditing()},!1);atLeastOneEditing&&this.setEditingRow(!0)}},RowCtrl2.prototype.getAllCellCtrls=function(){if(this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0)return this.centerCellCtrls.list;var res=__spreadArray$l(__spreadArray$l(__spreadArray$l([],__read$q(this.centerCellCtrls.list),!1),__read$q(this.leftCellCtrls.list),!1),__read$q(this.rightCellCtrls.list),!1);return res},RowCtrl2.prototype.postProcessClassesFromGridOptions=function(){var _this=this,cssClasses=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!cssClasses||!cssClasses.length||cssClasses.forEach(function(classStr){_this.allRowGuis.forEach(function(c){return c.rowComp.addOrRemoveCssClass(classStr,!0)})})},RowCtrl2.prototype.postProcessRowClassRules=function(){var _this=this;this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,function(className){_this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass(className,!0)})},function(className){_this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass(className,!1)})})},RowCtrl2.prototype.setStylesFromGridOptions=function(updateStyles,gui){var _this=this;updateStyles&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(gui,function(gui2){return gui2.rowComp.setUserStyles(_this.rowStyles)})},RowCtrl2.prototype.getPinnedForContainer=function(rowContainerType){var pinned=rowContainerType===RowContainerType.LEFT?"left":rowContainerType===RowContainerType.RIGHT?"right":null;return pinned},RowCtrl2.prototype.getInitialRowClasses=function(rowContainerType){var pinned=this.getPinnedForContainer(rowContainerType),params={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[rowContainerType],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned};return this.beans.rowCssClassCalculator.getInitialRowClasses(params)},RowCtrl2.prototype.processStylesFromGridOptions=function(){var rowStyle=this.gridOptionsService.get("rowStyle");if(rowStyle&&typeof rowStyle=="function"){console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}var rowStyleFunc=this.gridOptionsService.getCallback("getRowStyle"),rowStyleFuncResult;if(rowStyleFunc){var params={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};rowStyleFuncResult=rowStyleFunc(params)}return rowStyleFuncResult||rowStyle?Object.assign({},rowStyle,rowStyleFuncResult):this.emptyStyle},RowCtrl2.prototype.onRowSelected=function(gui){var _this=this,eDocument=this.beans.gridOptionsService.getDocument(),selected=!!this.rowNode.isSelected();this.forEachGui(gui,function(gui2){gui2.rowComp.addOrRemoveCssClass("ag-row-selected",selected),setAriaSelected(gui2.element,selected);var hasFocus=gui2.element.contains(eDocument.activeElement);hasFocus&&(gui2===_this.centerGui||gui2===_this.fullWidthGui)&&_this.announceDescription()})},RowCtrl2.prototype.announceDescription=function(){if(!this.isRowSelectionBlocked()){var selected=this.rowNode.isSelected();if(!(selected&&this.beans.gridOptionsService.get("suppressRowDeselection"))){var translate=this.beans.localeService.getLocaleTextFunc(),label=translate(selected?"ariaRowDeselect":"ariaRowSelect","Press SPACE to ".concat(selected?"deselect":"select"," this row."));this.beans.ariaAnnouncementService.announceValue(label)}}},RowCtrl2.prototype.isUseAnimationFrameForCreate=function(){return this.useAnimationFrameForCreate},RowCtrl2.prototype.addHoverFunctionality=function(eRow){var _this=this;this.active&&(this.addManagedListener(eRow,"mouseenter",function(){return _this.rowNode.onMouseEnter()}),this.addManagedListener(eRow,"mouseleave",function(){return _this.rowNode.onMouseLeave()}),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_ENTER,function(){!_this.beans.dragService.isDragging()&&!_this.gridOptionsService.get("suppressRowHoverHighlight")&&(eRow.classList.add("ag-row-hover"),_this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,RowNode.EVENT_MOUSE_LEAVE,function(){eRow.classList.remove("ag-row-hover"),_this.rowNode.setHovered(!1)}))},RowCtrl2.prototype.roundRowTopToBounds=function(rowTop){var range=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),minPixel=this.applyPaginationOffset(range.top,!0)-100,maxPixel=this.applyPaginationOffset(range.bottom,!0)+100;return Math.min(Math.max(minPixel,rowTop),maxPixel)},RowCtrl2.prototype.getFrameworkOverrides=function(){return this.beans.frameworkOverrides},RowCtrl2.prototype.forEachGui=function(gui,callback){gui?callback(gui):this.allRowGuis.forEach(callback)},RowCtrl2.prototype.onRowHeightChanged=function(gui){if(this.rowNode.rowHeight!=null){var rowHeight=this.rowNode.rowHeight,defaultRowHeight=this.beans.environment.getDefaultRowHeight(),isHeightFromFunc=this.gridOptionsService.isGetRowHeightFunction(),heightFromFunc=isHeightFromFunc?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,lineHeight=heightFromFunc?"".concat(Math.min(defaultRowHeight,heightFromFunc)-2,"px"):void 0;this.forEachGui(gui,function(gui2){gui2.element.style.height="".concat(rowHeight,"px"),lineHeight&&gui2.element.style.setProperty("--ag-line-height",lineHeight)})}},RowCtrl2.prototype.addEventListener=function(eventType,listener){_super.prototype.addEventListener.call(this,eventType,listener)},RowCtrl2.prototype.removeEventListener=function(eventType,listener){_super.prototype.removeEventListener.call(this,eventType,listener)},RowCtrl2.prototype.destroyFirstPass=function(suppressAnimation){if(suppressAnimation===void 0&&(suppressAnimation=!1),this.active=!1,!suppressAnimation&&this.gridOptionsService.isAnimateRows()&&!this.isSticky()){var rowStillVisibleJustNotInViewport=this.rowNode.rowTop!=null;if(rowStillVisibleJustNotInViewport){var rowTop=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(rowTop)}else this.allRowGuis.forEach(function(gui){return gui.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0)})}this.rowNode.setHovered(!1);var event=this.createRowEvent(Events.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(event),this.beans.eventService.dispatchEvent(event),_super.prototype.destroy.call(this)},RowCtrl2.prototype.destroySecondPass=function(){this.allRowGuis.length=0,this.stopEditing();var destroyCellCtrls=__name(function(ctrls){return ctrls.list.forEach(function(c){return c.destroy()}),{list:[],map:{}}},"destroyCellCtrls");this.centerCellCtrls=destroyCellCtrls(this.centerCellCtrls),this.leftCellCtrls=destroyCellCtrls(this.leftCellCtrls),this.rightCellCtrls=destroyCellCtrls(this.rightCellCtrls)},RowCtrl2.prototype.setFocusedClasses=function(gui){var _this=this;this.forEachGui(gui,function(gui2){gui2.rowComp.addOrRemoveCssClass("ag-row-focus",_this.rowFocused),gui2.rowComp.addOrRemoveCssClass("ag-row-no-focus",!_this.rowFocused)})},RowCtrl2.prototype.onCellFocusChanged=function(){var rowFocused=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);rowFocused!==this.rowFocused&&(this.rowFocused=rowFocused,this.setFocusedClasses()),!rowFocused&&this.editingRow&&this.stopEditing(!1)},RowCtrl2.prototype.onPaginationChanged=function(){var currentPage=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==currentPage&&(this.paginationPage=currentPage,this.onTopChanged()),this.refreshFirstAndLastRowStyles()},RowCtrl2.prototype.onTopChanged=function(){this.setRowTop(this.rowNode.rowTop)},RowCtrl2.prototype.onPaginationPixelOffsetChanged=function(){this.onTopChanged()},RowCtrl2.prototype.applyPaginationOffset=function(topPx,reverse){if(reverse===void 0&&(reverse=!1),this.rowNode.isRowPinned()||this.rowNode.sticky)return topPx;var pixelOffset=this.beans.paginationProxy.getPixelOffset(),multiplier=reverse?1:-1;return topPx+pixelOffset*multiplier},RowCtrl2.prototype.setRowTop=function(pixels){if(!this.printLayout&&exists(pixels)){var afterPaginationPixels=this.applyPaginationOffset(pixels),skipScaling=this.rowNode.isRowPinned()||this.rowNode.sticky,afterScalingPixels=skipScaling?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels),topPx="".concat(afterScalingPixels,"px");this.setRowTopStyle(topPx)}},RowCtrl2.prototype.getInitialRowTop=function(rowContainerType){return this.suppressRowTransform?this.getInitialRowTopShared(rowContainerType):void 0},RowCtrl2.prototype.getInitialTransform=function(rowContainerType){return this.suppressRowTransform?void 0:"translateY(".concat(this.getInitialRowTopShared(rowContainerType),")")},RowCtrl2.prototype.getInitialRowTopShared=function(rowContainerType){if(this.printLayout)return"";var rowTop;if(this.isSticky())rowTop=this.rowNode.stickyRowTop;else{var pixels=this.slideInAnimation[rowContainerType]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,afterPaginationPixels=this.applyPaginationOffset(pixels);rowTop=this.rowNode.isRowPinned()?afterPaginationPixels:this.beans.rowContainerHeightService.getRealPixelPosition(afterPaginationPixels)}return rowTop+"px"},RowCtrl2.prototype.setRowTopStyle=function(topPx){var _this=this;this.allRowGuis.forEach(function(gui){return _this.suppressRowTransform?gui.rowComp.setTop(topPx):gui.rowComp.setTransform("translateY(".concat(topPx,")"))})},RowCtrl2.prototype.getRowNode=function(){return this.rowNode},RowCtrl2.prototype.getCellCtrl=function(column){var res=null;return this.getAllCellCtrls().forEach(function(cellCtrl){cellCtrl.getColumn()==column&&(res=cellCtrl)}),res!=null||this.getAllCellCtrls().forEach(function(cellCtrl){cellCtrl.getColSpanningList().indexOf(column)>=0&&(res=cellCtrl)}),res},RowCtrl2.prototype.onRowIndexChanged=function(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())},RowCtrl2.prototype.getRowIndex=function(){return this.rowNode.getRowIndexString()},RowCtrl2.prototype.updateRowIndexes=function(gui){var rowIndexStr=this.rowNode.getRowIndexString(),headerRowCount=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),rowIsEven=this.rowNode.rowIndex%2===0,ariaRowIndex=headerRowCount+this.rowNode.rowIndex+1;this.forEachGui(gui,function(c){c.rowComp.setRowIndex(rowIndexStr),c.rowComp.addOrRemoveCssClass("ag-row-even",rowIsEven),c.rowComp.addOrRemoveCssClass("ag-row-odd",!rowIsEven),setAriaRowIndex(c.element,ariaRowIndex)})},RowCtrl2.DOM_DATA_KEY_ROW_CTRL="renderedRow",RowCtrl2}(BeanStub),__extends$22=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1W=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1W"),__read$p=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$p"),RowContainerEventsFeature=function(_super){__extends$22(RowContainerEventsFeature2,_super);function RowContainerEventsFeature2(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __name(RowContainerEventsFeature2,"RowContainerEventsFeature"),RowContainerEventsFeature2.prototype.postConstruct=function(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()},RowContainerEventsFeature2.prototype.addKeyboardListeners=function(){var eventName="keydown",listener=this.processKeyboardEvent.bind(this,eventName);this.addManagedListener(this.element,eventName,listener)},RowContainerEventsFeature2.prototype.addMouseListeners=function(){var _this=this,mouseDownEvent=isEventSupported("touchstart")?"touchstart":"mousedown",eventNames=["dblclick","contextmenu","mouseover","mouseout","click",mouseDownEvent];eventNames.forEach(function(eventName){var listener=_this.processMouseEvent.bind(_this,eventName);_this.addManagedListener(_this.element,eventName,listener)})},RowContainerEventsFeature2.prototype.processMouseEvent=function(eventName,mouseEvent){if(!(!this.mouseEventService.isEventFromThisGrid(mouseEvent)||isStopPropagationForAgGrid(mouseEvent))){var rowComp=this.getRowForEvent(mouseEvent),cellCtrl=this.mouseEventService.getRenderedCellForEvent(mouseEvent);eventName==="contextmenu"?this.handleContextMenuMouseEvent(mouseEvent,void 0,rowComp,cellCtrl):(cellCtrl&&cellCtrl.onMouseEvent(eventName,mouseEvent),rowComp&&rowComp.onMouseEvent(eventName,mouseEvent))}},RowContainerEventsFeature2.prototype.mockContextMenuForIPad=function(){var _this=this;if(isIOSUserAgent()){var touchListener=new TouchListener(this.element),longTapListener=__name(function(event){var rowComp=_this.getRowForEvent(event.touchEvent),cellComp=_this.mouseEventService.getRenderedCellForEvent(event.touchEvent);_this.handleContextMenuMouseEvent(void 0,event.touchEvent,rowComp,cellComp)},"longTapListener");this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,longTapListener),this.addDestroyFunc(function(){return touchListener.destroy()})}},RowContainerEventsFeature2.prototype.getRowForEvent=function(event){for(var sourceElement=event.target;sourceElement;){var rowCon=this.gridOptionsService.getDomData(sourceElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL);if(rowCon)return rowCon;sourceElement=sourceElement.parentElement}return null},RowContainerEventsFeature2.prototype.handleContextMenuMouseEvent=function(mouseEvent,touchEvent,rowComp,cellCtrl){var rowNode=rowComp?rowComp.getRowNode():null,column=cellCtrl?cellCtrl.getColumn():null,value=null;if(column){var event_1=mouseEvent||touchEvent;cellCtrl.dispatchCellContextMenuEvent(event_1??null),value=this.valueService.getValue(column,rowNode)}var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),anchorToElement=cellCtrl?cellCtrl.getGui():gridBodyCon.getGridBodyElement();this.menuService.showContextMenu({mouseEvent,touchEvent,rowNode,column,value,anchorToElement})},RowContainerEventsFeature2.prototype.getControlsForEventTarget=function(target){return{cellCtrl:getCtrlForEventTarget(this.gridOptionsService,target,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowCtrl:getCtrlForEventTarget(this.gridOptionsService,target,RowCtrl.DOM_DATA_KEY_ROW_CTRL)}},RowContainerEventsFeature2.prototype.processKeyboardEvent=function(eventName,keyboardEvent){var _a=this.getControlsForEventTarget(keyboardEvent.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;keyboardEvent.defaultPrevented||(cellCtrl?this.processCellKeyboardEvent(cellCtrl,eventName,keyboardEvent):rowCtrl&&rowCtrl.isFullWidth()&&this.processFullWidthRowKeyboardEvent(rowCtrl,eventName,keyboardEvent))},RowContainerEventsFeature2.prototype.processCellKeyboardEvent=function(cellCtrl,eventName,keyboardEvent){var rowNode=cellCtrl.getRowNode(),column=cellCtrl.getColumn(),editing=cellCtrl.isEditing(),gridProcessingAllowed=!isUserSuppressingKeyboardEvent(this.gridOptionsService,keyboardEvent,rowNode,column,editing);if(gridProcessingAllowed&&eventName==="keydown"){var wasScrollKey=!editing&&this.navigationService.handlePageScrollingKey(keyboardEvent);wasScrollKey||cellCtrl.onKeyDown(keyboardEvent),this.doGridOperations(keyboardEvent,cellCtrl.isEditing()),isEventFromPrintableCharacter(keyboardEvent)&&cellCtrl.processCharacter(keyboardEvent)}if(eventName==="keydown"){var cellKeyDownEvent=cellCtrl.createEvent(keyboardEvent,Events.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(cellKeyDownEvent)}},RowContainerEventsFeature2.prototype.processFullWidthRowKeyboardEvent=function(rowComp,eventName,keyboardEvent){var rowNode=rowComp.getRowNode(),focusedCell=this.focusService.getFocusedCell(),column=focusedCell&&focusedCell.column,gridProcessingAllowed=!isUserSuppressingKeyboardEvent(this.gridOptionsService,keyboardEvent,rowNode,column,!1);if(gridProcessingAllowed){var key=keyboardEvent.key;if(eventName==="keydown")switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:this.navigationService.handlePageScrollingKey(keyboardEvent,!0);break;case KeyCode.UP:case KeyCode.DOWN:rowComp.onKeyboardNavigate(keyboardEvent);break;case KeyCode.TAB:rowComp.onTabKeyDown(keyboardEvent);break}}if(eventName==="keydown"){var cellKeyDownEvent=rowComp.createRowEvent(Events.EVENT_CELL_KEY_DOWN,keyboardEvent);this.eventService.dispatchEvent(cellKeyDownEvent)}},RowContainerEventsFeature2.prototype.doGridOperations=function(keyboardEvent,editing){if(!(!keyboardEvent.ctrlKey&&!keyboardEvent.metaKey)&&!editing&&this.mouseEventService.isEventFromThisGrid(keyboardEvent)){var keyCode=normaliseQwertyAzerty(keyboardEvent);if(keyCode===KeyCode.A)return this.onCtrlAndA(keyboardEvent);if(keyCode===KeyCode.C)return this.onCtrlAndC(keyboardEvent);if(keyCode===KeyCode.D)return this.onCtrlAndD(keyboardEvent);if(keyCode===KeyCode.V)return this.onCtrlAndV(keyboardEvent);if(keyCode===KeyCode.X)return this.onCtrlAndX(keyboardEvent);if(keyCode===KeyCode.Y)return this.onCtrlAndY();if(keyCode===KeyCode.Z)return this.onCtrlAndZ(keyboardEvent)}},RowContainerEventsFeature2.prototype.onCtrlAndA=function(event){var _a=this,pinnedRowModel=_a.pinnedRowModel,paginationProxy=_a.paginationProxy,rangeService=_a.rangeService;if(rangeService&&paginationProxy.isRowsToRender()){var _b=__read$p([pinnedRowModel.isEmpty("top"),pinnedRowModel.isEmpty("bottom")],2),isEmptyPinnedTop=_b[0],isEmptyPinnedBottom=_b[1],floatingStart=isEmptyPinnedTop?null:"top",floatingEnd=void 0,rowEnd=void 0;isEmptyPinnedBottom?(floatingEnd=null,rowEnd=this.paginationProxy.getRowCount()-1):(floatingEnd="bottom",rowEnd=pinnedRowModel.getPinnedBottomRowData().length-1);var allDisplayedColumns=this.columnModel.getAllDisplayedColumns();if(missingOrEmpty(allDisplayedColumns))return;rangeService.setCellRange({rowStartIndex:0,rowStartPinned:floatingStart,rowEndIndex:rowEnd,rowEndPinned:floatingEnd,columnStart:allDisplayedColumns[0],columnEnd:last(allDisplayedColumns)})}event.preventDefault()},RowContainerEventsFeature2.prototype.onCtrlAndC=function(event){if(!(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection"))){var _a=this.getControlsForEventTarget(event.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;cellCtrl!=null&&cellCtrl.isEditing()||rowCtrl!=null&&rowCtrl.isEditing()||(event.preventDefault(),this.clipboardService.copyToClipboard())}},RowContainerEventsFeature2.prototype.onCtrlAndX=function(event){if(!(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection")||this.gridOptionsService.get("suppressCutToClipboard"))){var _a=this.getControlsForEventTarget(event.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;cellCtrl!=null&&cellCtrl.isEditing()||rowCtrl!=null&&rowCtrl.isEditing()||(event.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}},RowContainerEventsFeature2.prototype.onCtrlAndV=function(event){var _a=this.getControlsForEventTarget(event.target),cellCtrl=_a.cellCtrl,rowCtrl=_a.rowCtrl;cellCtrl!=null&&cellCtrl.isEditing()||rowCtrl!=null&&rowCtrl.isEditing()||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()},RowContainerEventsFeature2.prototype.onCtrlAndD=function(event){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),event.preventDefault()},RowContainerEventsFeature2.prototype.onCtrlAndZ=function(event){this.gridOptionsService.get("undoRedoCellEditing")&&(event.preventDefault(),event.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))},RowContainerEventsFeature2.prototype.onCtrlAndY=function(){this.undoRedoService.redo("ui")},__decorate$1W([Autowired("mouseEventService")],RowContainerEventsFeature2.prototype,"mouseEventService",void 0),__decorate$1W([Autowired("valueService")],RowContainerEventsFeature2.prototype,"valueService",void 0),__decorate$1W([Autowired("menuService")],RowContainerEventsFeature2.prototype,"menuService",void 0),__decorate$1W([Autowired("ctrlsService")],RowContainerEventsFeature2.prototype,"ctrlsService",void 0),__decorate$1W([Autowired("navigationService")],RowContainerEventsFeature2.prototype,"navigationService",void 0),__decorate$1W([Autowired("focusService")],RowContainerEventsFeature2.prototype,"focusService",void 0),__decorate$1W([Autowired("undoRedoService")],RowContainerEventsFeature2.prototype,"undoRedoService",void 0),__decorate$1W([Autowired("columnModel")],RowContainerEventsFeature2.prototype,"columnModel",void 0),__decorate$1W([Autowired("paginationProxy")],RowContainerEventsFeature2.prototype,"paginationProxy",void 0),__decorate$1W([Autowired("pinnedRowModel")],RowContainerEventsFeature2.prototype,"pinnedRowModel",void 0),__decorate$1W([Optional("rangeService")],RowContainerEventsFeature2.prototype,"rangeService",void 0),__decorate$1W([Optional("clipboardService")],RowContainerEventsFeature2.prototype,"clipboardService",void 0),__decorate$1W([PostConstruct],RowContainerEventsFeature2.prototype,"postConstruct",null),RowContainerEventsFeature2}(BeanStub),__extends$21=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1V=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1V"),__read$o=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$o"),__spreadArray$k=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$k"),ViewportSizeFeature=function(_super){__extends$21(ViewportSizeFeature2,_super);function ViewportSizeFeature2(centerContainerCtrl){var _this=_super.call(this)||this;return _this.centerContainerCtrl=centerContainerCtrl,_this}return __name(ViewportSizeFeature2,"ViewportSizeFeature"),ViewportSizeFeature2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.listenForResize()}),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],function(){_this.checkViewportAndScrolls()})},ViewportSizeFeature2.prototype.listenForResize=function(){var _this=this,listener=__name(function(){return _this.onCenterViewportResized()},"listener");this.centerContainerCtrl.registerViewportResizeListener(listener),this.gridBodyCtrl.registerBodyViewportResizeListener(listener)},ViewportSizeFeature2.prototype.onScrollbarWidthChanged=function(){this.checkViewportAndScrolls()},ViewportSizeFeature2.prototype.onCenterViewportResized=function(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();var newWidth=this.centerContainerCtrl.getCenterWidth();newWidth!==this.centerWidth&&(this.centerWidth=newWidth,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0},ViewportSizeFeature2.prototype.keepPinnedColumnsNarrowerThanViewport=function(){var eBodyViewport=this.gridBodyCtrl.getBodyViewportElement(),bodyWidth=getInnerWidth(eBodyViewport);if(!(bodyWidth<=50)){var columnsToRemove=this.getPinnedColumnsOverflowingViewport(bodyWidth-50),processUnpinnedColumns=this.gridOptionsService.getCallback("processUnpinnedColumns");if(columnsToRemove.length){if(processUnpinnedColumns){var params={columns:columnsToRemove,viewportWidth:bodyWidth};columnsToRemove=processUnpinnedColumns(params)}this.columnModel.setColumnsPinned(columnsToRemove,null,"viewportSizeFeature")}}},ViewportSizeFeature2.prototype.getPinnedColumnsOverflowingViewport=function(viewportWidth){var pinnedRightWidth=this.pinnedWidthService.getPinnedRightWidth(),pinnedLeftWidth=this.pinnedWidthService.getPinnedLeftWidth(),totalPinnedWidth=pinnedRightWidth+pinnedLeftWidth;if(totalPinnedWidth<viewportWidth)return[];for(var pinnedLeftColumns=__spreadArray$k([],__read$o(this.columnModel.getDisplayedLeftColumns()),!1),pinnedRightColumns=__spreadArray$k([],__read$o(this.columnModel.getDisplayedRightColumns()),!1),indexRight=0,indexLeft=0,totalWidthRemoved=0,columnsToRemove=[],spaceNecessary=totalPinnedWidth-totalWidthRemoved-viewportWidth;(indexLeft<pinnedLeftColumns.length||indexRight<pinnedRightColumns.length)&&spaceNecessary>0;){if(indexRight<pinnedRightColumns.length){var currentColumn=pinnedRightColumns[indexRight++];spaceNecessary-=currentColumn.getActualWidth(),columnsToRemove.push(currentColumn)}if(indexLeft<pinnedLeftColumns.length&&spaceNecessary>0){var currentColumn=pinnedLeftColumns[indexLeft++];spaceNecessary-=currentColumn.getActualWidth(),columnsToRemove.push(currentColumn)}}return columnsToRemove},ViewportSizeFeature2.prototype.checkViewportAndScrolls=function(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()},ViewportSizeFeature2.prototype.getBodyHeight=function(){return this.bodyHeight},ViewportSizeFeature2.prototype.checkBodyHeight=function(){var eBodyViewport=this.gridBodyCtrl.getBodyViewportElement(),bodyHeight=getInnerHeight(eBodyViewport);if(this.bodyHeight!==bodyHeight){this.bodyHeight=bodyHeight;var event_1={type:Events.EVENT_BODY_HEIGHT_CHANGED};this.eventService.dispatchEvent(event_1)}},ViewportSizeFeature2.prototype.updateScrollVisibleService=function(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)},ViewportSizeFeature2.prototype.updateScrollVisibleServiceImpl=function(){var params={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(params)},ViewportSizeFeature2.prototype.isHorizontalScrollShowing=function(){return this.centerContainerCtrl.isHorizontalScrollShowing()},ViewportSizeFeature2.prototype.onHorizontalViewportChanged=function(){var scrollWidth=this.centerContainerCtrl.getCenterWidth(),scrollPosition=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition)},__decorate$1V([Autowired("ctrlsService")],ViewportSizeFeature2.prototype,"ctrlsService",void 0),__decorate$1V([Autowired("pinnedWidthService")],ViewportSizeFeature2.prototype,"pinnedWidthService",void 0),__decorate$1V([Autowired("columnModel")],ViewportSizeFeature2.prototype,"columnModel",void 0),__decorate$1V([Autowired("scrollVisibleService")],ViewportSizeFeature2.prototype,"scrollVisibleService",void 0),__decorate$1V([PostConstruct],ViewportSizeFeature2.prototype,"postConstruct",null),ViewportSizeFeature2}(BeanStub),__extends$20=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1U=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1U"),SetPinnedLeftWidthFeature=function(_super){__extends$20(SetPinnedLeftWidthFeature2,_super);function SetPinnedLeftWidthFeature2(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __name(SetPinnedLeftWidthFeature2,"SetPinnedLeftWidthFeature"),SetPinnedLeftWidthFeature2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))},SetPinnedLeftWidthFeature2.prototype.onPinnedLeftWidthChanged=function(){var leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),displayed=leftWidth>0;setDisplayed(this.element,displayed),setFixedWidth(this.element,leftWidth)},SetPinnedLeftWidthFeature2.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedLeftWidth()},__decorate$1U([Autowired("pinnedWidthService")],SetPinnedLeftWidthFeature2.prototype,"pinnedWidthService",void 0),__decorate$1U([PostConstruct],SetPinnedLeftWidthFeature2.prototype,"postConstruct",null),SetPinnedLeftWidthFeature2}(BeanStub),__extends$1$=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1T=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1T"),SetPinnedRightWidthFeature=function(_super){__extends$1$(SetPinnedRightWidthFeature2,_super);function SetPinnedRightWidthFeature2(element){var _this=_super.call(this)||this;return _this.element=element,_this}return __name(SetPinnedRightWidthFeature2,"SetPinnedRightWidthFeature"),SetPinnedRightWidthFeature2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))},SetPinnedRightWidthFeature2.prototype.onPinnedRightWidthChanged=function(){var rightWidth=this.pinnedWidthService.getPinnedRightWidth(),displayed=rightWidth>0;setDisplayed(this.element,displayed),setFixedWidth(this.element,rightWidth)},SetPinnedRightWidthFeature2.prototype.getWidth=function(){return this.pinnedWidthService.getPinnedRightWidth()},__decorate$1T([Autowired("pinnedWidthService")],SetPinnedRightWidthFeature2.prototype,"pinnedWidthService",void 0),__decorate$1T([PostConstruct],SetPinnedRightWidthFeature2.prototype,"postConstruct",null),SetPinnedRightWidthFeature2}(BeanStub),__extends$1_=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1S=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1S"),SetHeightFeature=function(_super){__extends$1_(SetHeightFeature2,_super);function SetHeightFeature2(eContainer,eViewport){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this.eViewport=eViewport,_this}return __name(SetHeightFeature2,"SetHeightFeature"),SetHeightFeature2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))},SetHeightFeature2.prototype.onHeightChanged=function(){var height=this.maxDivHeightScaler.getUiContainerHeight(),heightString=height!=null?"".concat(height,"px"):"";this.eContainer.style.height=heightString,this.eViewport&&(this.eViewport.style.height=heightString)},__decorate$1S([Autowired("rowContainerHeightService")],SetHeightFeature2.prototype,"maxDivHeightScaler",void 0),__decorate$1S([PostConstruct],SetHeightFeature2.prototype,"postConstruct",null),SetHeightFeature2}(BeanStub),__extends$1Z=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1R=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1R"),DragListenerFeature=function(_super){__extends$1Z(DragListenerFeature2,_super);function DragListenerFeature2(eContainer){var _this=_super.call(this)||this;return _this.eContainer=eContainer,_this}return __name(DragListenerFeature2,"DragListenerFeature"),DragListenerFeature2.prototype.postConstruct=function(){var _this=this;if(!missing(this.rangeService)){this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",function(props){var isEnabled=props.currentValue;if(isEnabled){_this.enableFeature();return}_this.disableFeature()}),this.addDestroyFunc(function(){return _this.disableFeature()});var isRangeSelection=this.gridOptionsService.get("enableRangeSelection");isRangeSelection&&this.enableFeature()}},DragListenerFeature2.prototype.enableFeature=function(){this.dragService.addDragSource(this.params)},DragListenerFeature2.prototype.disableFeature=function(){this.dragService.removeDragSource(this.params)},__decorate$1R([Optional("rangeService")],DragListenerFeature2.prototype,"rangeService",void 0),__decorate$1R([Autowired("dragService")],DragListenerFeature2.prototype,"dragService",void 0),__decorate$1R([PostConstruct],DragListenerFeature2.prototype,"postConstruct",null),DragListenerFeature2}(BeanStub),__extends$1Y=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1Q=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1Q"),CenterWidthFeature=function(_super){__extends$1Y(CenterWidthFeature2,_super);function CenterWidthFeature2(callback,addSpacer){addSpacer===void 0&&(addSpacer=!1);var _this=_super.call(this)||this;return _this.callback=callback,_this.addSpacer=addSpacer,_this}return __name(CenterWidthFeature2,"CenterWidthFeature"),CenterWidthFeature2.prototype.postConstruct=function(){var listener=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",listener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,listener),this.addSpacer&&(this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,listener)),this.setWidth()},CenterWidthFeature2.prototype.setWidth=function(){var columnModel=this.columnModel,printLayout=this.gridOptionsService.isDomLayout("print"),centerWidth=columnModel.getBodyContainerWidth(),leftWidth=columnModel.getDisplayedColumnsLeftWidth(),rightWidth=columnModel.getDisplayedColumnsRightWidth(),totalWidth;if(printLayout)totalWidth=centerWidth+leftWidth+rightWidth;else if(totalWidth=centerWidth,this.addSpacer){var relevantWidth=this.gridOptionsService.get("enableRtl")?leftWidth:rightWidth;relevantWidth===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(totalWidth+=this.gridOptionsService.getScrollbarWidth())}this.callback(totalWidth)},__decorate$1Q([Autowired("columnModel")],CenterWidthFeature2.prototype,"columnModel",void 0),__decorate$1Q([Autowired("scrollVisibleService")],CenterWidthFeature2.prototype,"scrollVisibleService",void 0),__decorate$1Q([PostConstruct],CenterWidthFeature2.prototype,"postConstruct",null),CenterWidthFeature2}(BeanStub),__extends$1X=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1P=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1P"),__read$n=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$n"),__spreadArray$j=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$j"),RowContainerName;(function(RowContainerName2){RowContainerName2.LEFT="left",RowContainerName2.RIGHT="right",RowContainerName2.CENTER="center",RowContainerName2.FULL_WIDTH="fullWidth",RowContainerName2.TOP_LEFT="topLeft",RowContainerName2.TOP_RIGHT="topRight",RowContainerName2.TOP_CENTER="topCenter",RowContainerName2.TOP_FULL_WIDTH="topFullWidth",RowContainerName2.STICKY_TOP_LEFT="stickyTopLeft",RowContainerName2.STICKY_TOP_RIGHT="stickyTopRight",RowContainerName2.STICKY_TOP_CENTER="stickyTopCenter",RowContainerName2.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",RowContainerName2.BOTTOM_LEFT="bottomLeft",RowContainerName2.BOTTOM_RIGHT="bottomRight",RowContainerName2.BOTTOM_CENTER="bottomCenter",RowContainerName2.BOTTOM_FULL_WIDTH="bottomFullWidth"})(RowContainerName||(RowContainerName={}));var RowContainerType;(function(RowContainerType2){RowContainerType2.LEFT="left",RowContainerType2.RIGHT="right",RowContainerType2.CENTER="center",RowContainerType2.FULL_WIDTH="fullWidth"})(RowContainerType||(RowContainerType={}));function getRowContainerTypeForName(name){switch(name){case RowContainerName.CENTER:case RowContainerName.TOP_CENTER:case RowContainerName.STICKY_TOP_CENTER:case RowContainerName.BOTTOM_CENTER:return RowContainerType.CENTER;case RowContainerName.LEFT:case RowContainerName.TOP_LEFT:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.BOTTOM_LEFT:return RowContainerType.LEFT;case RowContainerName.RIGHT:case RowContainerName.TOP_RIGHT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.BOTTOM_RIGHT:return RowContainerType.RIGHT;case RowContainerName.FULL_WIDTH:case RowContainerName.TOP_FULL_WIDTH:case RowContainerName.STICKY_TOP_FULL_WIDTH:case RowContainerName.BOTTOM_FULL_WIDTH:return RowContainerType.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}__name(getRowContainerTypeForName,"getRowContainerTypeForName");var ContainerCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-container"],[RowContainerName.LEFT,"ag-pinned-left-cols-container"],[RowContainerName.RIGHT,"ag-pinned-right-cols-container"],[RowContainerName.FULL_WIDTH,"ag-full-width-container"],[RowContainerName.TOP_CENTER,"ag-floating-top-container"],[RowContainerName.TOP_LEFT,"ag-pinned-left-floating-top"],[RowContainerName.TOP_RIGHT,"ag-pinned-right-floating-top"],[RowContainerName.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[RowContainerName.STICKY_TOP_CENTER,"ag-sticky-top-container"],[RowContainerName.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[RowContainerName.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[RowContainerName.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-container"],[RowContainerName.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[RowContainerName.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[RowContainerName.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),ViewportCssClasses=convertToMap([[RowContainerName.CENTER,"ag-center-cols-viewport"],[RowContainerName.TOP_CENTER,"ag-floating-top-viewport"],[RowContainerName.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[RowContainerName.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]),RowContainerCtrl=function(_super){__extends$1X(RowContainerCtrl2,_super);function RowContainerCtrl2(name){var _this=_super.call(this)||this;return _this.visible=!0,_this.EMPTY_CTRLS=[],_this.name=name,_this.isFullWithContainer=_this.name===RowContainerName.TOP_FULL_WIDTH||_this.name===RowContainerName.STICKY_TOP_FULL_WIDTH||_this.name===RowContainerName.BOTTOM_FULL_WIDTH||_this.name===RowContainerName.FULL_WIDTH,_this}return __name(RowContainerCtrl2,"RowContainerCtrl"),RowContainerCtrl2.getRowContainerCssClasses=function(name){var containerClass=ContainerCssClasses.get(name),viewportClass=ViewportCssClasses.get(name);return{container:containerClass,viewport:viewportClass}},RowContainerCtrl2.getPinned=function(name){switch(name){case RowContainerName.BOTTOM_LEFT:case RowContainerName.TOP_LEFT:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.LEFT:return"left";case RowContainerName.BOTTOM_RIGHT:case RowContainerName.TOP_RIGHT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.RIGHT:return"right";default:return null}},RowContainerCtrl2.prototype.postConstruct=function(){var _this=this;this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers([RowContainerName.CENTER],function(){return _this.viewportSizeFeature=_this.createManagedBean(new ViewportSizeFeature(_this))})},RowContainerCtrl2.prototype.registerWithCtrlsService=function(){switch(this.name){case RowContainerName.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case RowContainerName.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case RowContainerName.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case RowContainerName.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case RowContainerName.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case RowContainerName.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case RowContainerName.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case RowContainerName.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case RowContainerName.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case RowContainerName.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case RowContainerName.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case RowContainerName.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this);break}},RowContainerCtrl2.prototype.forContainers=function(names,callback){names.indexOf(this.name)>=0&&callback()},RowContainerCtrl2.prototype.getContainerElement=function(){return this.eContainer},RowContainerCtrl2.prototype.getViewportSizeFeature=function(){return this.viewportSizeFeature},RowContainerCtrl2.prototype.setComp=function(view,eContainer,eViewport){var _this=this;this.comp=view,this.eContainer=eContainer,this.eViewport=eViewport,this.createManagedBean(new RowContainerEventsFeature(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();var allTopNoFW=[RowContainerName.TOP_CENTER,RowContainerName.TOP_LEFT,RowContainerName.TOP_RIGHT],allStickyTopNoFW=[RowContainerName.STICKY_TOP_CENTER,RowContainerName.STICKY_TOP_LEFT,RowContainerName.STICKY_TOP_RIGHT],allBottomNoFW=[RowContainerName.BOTTOM_CENTER,RowContainerName.BOTTOM_LEFT,RowContainerName.BOTTOM_RIGHT],allMiddleNoFW=[RowContainerName.CENTER,RowContainerName.LEFT,RowContainerName.RIGHT],allNoFW=__spreadArray$j(__spreadArray$j(__spreadArray$j(__spreadArray$j([],__read$n(allTopNoFW),!1),__read$n(allBottomNoFW),!1),__read$n(allMiddleNoFW),!1),__read$n(allStickyTopNoFW),!1),allMiddle=[RowContainerName.CENTER,RowContainerName.LEFT,RowContainerName.RIGHT,RowContainerName.FULL_WIDTH],allCenter=[RowContainerName.CENTER,RowContainerName.TOP_CENTER,RowContainerName.STICKY_TOP_CENTER,RowContainerName.BOTTOM_CENTER],allLeft=[RowContainerName.LEFT,RowContainerName.BOTTOM_LEFT,RowContainerName.TOP_LEFT,RowContainerName.STICKY_TOP_LEFT],allRight=[RowContainerName.RIGHT,RowContainerName.BOTTOM_RIGHT,RowContainerName.TOP_RIGHT,RowContainerName.STICKY_TOP_RIGHT];this.forContainers(allLeft,function(){_this.pinnedWidthFeature=_this.createManagedBean(new SetPinnedLeftWidthFeature(_this.eContainer)),_this.addManagedListener(_this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,function(){return _this.onPinnedWidthChanged()})}),this.forContainers(allRight,function(){_this.pinnedWidthFeature=_this.createManagedBean(new SetPinnedRightWidthFeature(_this.eContainer)),_this.addManagedListener(_this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,function(){return _this.onPinnedWidthChanged()})}),this.forContainers(allMiddle,function(){return _this.createManagedBean(new SetHeightFeature(_this.eContainer,_this.name===RowContainerName.CENTER?eViewport:void 0))}),this.forContainers(allNoFW,function(){return _this.createManagedBean(new DragListenerFeature(_this.eContainer))}),this.forContainers(allCenter,function(){return _this.createManagedBean(new CenterWidthFeature(function(width){return _this.comp.setContainerWidth("".concat(width,"px"))}))}),this.addListeners(),this.registerWithCtrlsService()},RowContainerCtrl2.prototype.addListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){return _this.onDisplayedColumnsChanged()}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){return _this.onDisplayedColumnsWidthChanged()}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_ROWS_CHANGED,function(params){return _this.onDisplayedRowsChanged(params.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()},RowContainerCtrl2.prototype.listenOnDomOrder=function(){var _this=this,allStickyContainers=[RowContainerName.STICKY_TOP_CENTER,RowContainerName.STICKY_TOP_LEFT,RowContainerName.STICKY_TOP_RIGHT,RowContainerName.STICKY_TOP_FULL_WIDTH],isStickContainer=allStickyContainers.indexOf(this.name)>=0;if(isStickContainer){this.comp.setDomOrder(!0);return}var listener=__name(function(){var isEnsureDomOrder=_this.gridOptionsService.get("ensureDomOrder"),isPrintLayout=_this.gridOptionsService.isDomLayout("print");_this.comp.setDomOrder(isEnsureDomOrder||isPrintLayout)},"listener");this.addManagedPropertyListener("domLayout",listener),listener()},RowContainerCtrl2.prototype.stopHScrollOnPinnedRows=function(){var _this=this;this.forContainers([RowContainerName.TOP_CENTER,RowContainerName.STICKY_TOP_CENTER,RowContainerName.BOTTOM_CENTER],function(){var resetScrollLeft=__name(function(){return _this.eViewport.scrollLeft=0},"resetScrollLeft");_this.addManagedListener(_this.eViewport,"scroll",resetScrollLeft)})},RowContainerCtrl2.prototype.onDisplayedColumnsChanged=function(){var _this=this;this.forContainers([RowContainerName.CENTER],function(){return _this.onHorizontalViewportChanged()})},RowContainerCtrl2.prototype.onDisplayedColumnsWidthChanged=function(){var _this=this;this.forContainers([RowContainerName.CENTER],function(){return _this.onHorizontalViewportChanged()})},RowContainerCtrl2.prototype.addPreventScrollWhileDragging=function(){var _this=this,preventScroll=__name(function(e){_this.dragService.isDragging()&&e.cancelable&&e.preventDefault()},"preventScroll");this.eContainer.addEventListener("touchmove",preventScroll,{passive:!1}),this.addDestroyFunc(function(){return _this.eContainer.removeEventListener("touchmove",preventScroll)})},RowContainerCtrl2.prototype.onHorizontalViewportChanged=function(afterScroll){afterScroll===void 0&&(afterScroll=!1);var scrollWidth=this.getCenterWidth(),scrollPosition=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(scrollWidth,scrollPosition,afterScroll)},RowContainerCtrl2.prototype.getCenterWidth=function(){return getInnerWidth(this.eViewport)},RowContainerCtrl2.prototype.getCenterViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl2.prototype.registerViewportResizeListener=function(listener){var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eViewport,listener);this.addDestroyFunc(function(){return unsubscribeFromResize()})},RowContainerCtrl2.prototype.isViewportInTheDOMTree=function(){return isInDOM(this.eViewport)},RowContainerCtrl2.prototype.getViewportScrollLeft=function(){return getScrollLeft(this.eViewport,this.enableRtl)},RowContainerCtrl2.prototype.isHorizontalScrollShowing=function(){var isAlwaysShowHorizontalScroll=this.gridOptionsService.get("alwaysShowHorizontalScroll");return isAlwaysShowHorizontalScroll||isHorizontalScrollShowing(this.eViewport)},RowContainerCtrl2.prototype.getViewportElement=function(){return this.eViewport},RowContainerCtrl2.prototype.setContainerTranslateX=function(amount){this.eContainer.style.transform="translateX(".concat(amount,"px)")},RowContainerCtrl2.prototype.getHScrollPosition=function(){var res={left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth};return res},RowContainerCtrl2.prototype.setCenterViewportScrollLeft=function(value){setScrollLeft(this.eViewport,value,this.enableRtl)},RowContainerCtrl2.prototype.isContainerVisible=function(){var pinned=RowContainerCtrl2.getPinned(this.name);return!pinned||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0},RowContainerCtrl2.prototype.onPinnedWidthChanged=function(){var visible=this.isContainerVisible();this.visible!=visible&&(this.visible=visible,this.onDisplayedRowsChanged())},RowContainerCtrl2.prototype.onDisplayedRowsChanged=function(afterScroll){var _this=this;if(afterScroll===void 0&&(afterScroll=!1),!this.visible){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}var printLayout=this.gridOptionsService.isDomLayout("print"),embedFullWidthRows=this.gridOptionsService.get("embedFullWidthRows"),embedFW=embedFullWidthRows||printLayout,rowsThisContainer=this.getRowCtrls().filter(function(rowCtrl){var fullWidthRow=rowCtrl.isFullWidth(),match=_this.isFullWithContainer?!embedFW&&fullWidthRow:embedFW||!fullWidthRow;return match});this.comp.setRowCtrls({rowCtrls:rowsThisContainer,useFlushSync:afterScroll})},RowContainerCtrl2.prototype.getRowCtrls=function(){switch(this.name){case RowContainerName.TOP_CENTER:case RowContainerName.TOP_LEFT:case RowContainerName.TOP_RIGHT:case RowContainerName.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case RowContainerName.STICKY_TOP_CENTER:case RowContainerName.STICKY_TOP_LEFT:case RowContainerName.STICKY_TOP_RIGHT:case RowContainerName.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case RowContainerName.BOTTOM_CENTER:case RowContainerName.BOTTOM_LEFT:case RowContainerName.BOTTOM_RIGHT:case RowContainerName.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}},__decorate$1P([Autowired("dragService")],RowContainerCtrl2.prototype,"dragService",void 0),__decorate$1P([Autowired("ctrlsService")],RowContainerCtrl2.prototype,"ctrlsService",void 0),__decorate$1P([Autowired("columnModel")],RowContainerCtrl2.prototype,"columnModel",void 0),__decorate$1P([Autowired("resizeObserverService")],RowContainerCtrl2.prototype,"resizeObserverService",void 0),__decorate$1P([Autowired("rowRenderer")],RowContainerCtrl2.prototype,"rowRenderer",void 0),__decorate$1P([PostConstruct],RowContainerCtrl2.prototype,"postConstruct",null),RowContainerCtrl2}(BeanStub),__extends$1W=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1O=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1O"),GRID_BODY_TEMPLATE=`<div class="ag-root ag-unselectable" role="treegrid">
        <ag-header-root ref="gridHeader"></ag-header-root>
        <div class="ag-floating-top" ref="eTop" role="presentation">
            <ag-row-container ref="topLeftContainer" name="`.concat(RowContainerName.TOP_LEFT,`"></ag-row-container>
            <ag-row-container ref="topCenterContainer" name="`).concat(RowContainerName.TOP_CENTER,`"></ag-row-container>
            <ag-row-container ref="topRightContainer" name="`).concat(RowContainerName.TOP_RIGHT,`"></ag-row-container>
            <ag-row-container ref="topFullWidthContainer" name="`).concat(RowContainerName.TOP_FULL_WIDTH,`"></ag-row-container>
        </div>
        <div class="ag-body" ref="eBody" role="presentation">
            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">
                <ag-row-container ref="leftContainer" name="`).concat(RowContainerName.LEFT,`"></ag-row-container>
                <ag-row-container ref="centerContainer" name="`).concat(RowContainerName.CENTER,`"></ag-row-container>
                <ag-row-container ref="rightContainer" name="`).concat(RowContainerName.RIGHT,`"></ag-row-container>
                <ag-row-container ref="fullWidthContainer" name="`).concat(RowContainerName.FULL_WIDTH,`"></ag-row-container>
            </div>
            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>
        </div>
        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">
            <ag-row-container ref="stickyTopLeftContainer" name="`).concat(RowContainerName.STICKY_TOP_LEFT,`"></ag-row-container>
            <ag-row-container ref="stickyTopCenterContainer" name="`).concat(RowContainerName.STICKY_TOP_CENTER,`"></ag-row-container>
            <ag-row-container ref="stickyTopRightContainer" name="`).concat(RowContainerName.STICKY_TOP_RIGHT,`"></ag-row-container>
            <ag-row-container ref="stickyTopFullWidthContainer" name="`).concat(RowContainerName.STICKY_TOP_FULL_WIDTH,`"></ag-row-container>
        </div>
        <div class="ag-floating-bottom" ref="eBottom" role="presentation">
            <ag-row-container ref="bottomLeftContainer" name="`).concat(RowContainerName.BOTTOM_LEFT,`"></ag-row-container>
            <ag-row-container ref="bottomCenterContainer" name="`).concat(RowContainerName.BOTTOM_CENTER,`"></ag-row-container>
            <ag-row-container ref="bottomRightContainer" name="`).concat(RowContainerName.BOTTOM_RIGHT,`"></ag-row-container>
            <ag-row-container ref="bottomFullWidthContainer" name="`).concat(RowContainerName.BOTTOM_FULL_WIDTH,`"></ag-row-container>
        </div>
        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>
        <ag-overlay-wrapper></ag-overlay-wrapper>
    </div>`),GridBodyComp=function(_super){__extends$1W(GridBodyComp2,_super);function GridBodyComp2(){return _super.call(this,GRID_BODY_TEMPLATE)||this}return __name(GridBodyComp2,"GridBodyComp"),GridBodyComp2.prototype.init=function(){var _this=this,setHeight=__name(function(height,element){var heightString="".concat(height,"px");element.style.minHeight=heightString,element.style.height=heightString},"setHeight"),compProxy={setRowAnimationCssOnBodyViewport:function(cssClass,animate){return _this.setRowAnimationCssOnBodyViewport(cssClass,animate)},setColumnCount:function(count){return setAriaColCount(_this.getGui(),count)},setRowCount:function(count){return setAriaRowCount(_this.getGui(),count)},setTopHeight:function(height){return setHeight(height,_this.eTop)},setBottomHeight:function(height){return setHeight(height,_this.eBottom)},setTopDisplay:function(display){return _this.eTop.style.display=display},setBottomDisplay:function(display){return _this.eBottom.style.display=display},setStickyTopHeight:function(height){return _this.eStickyTop.style.height=height},setStickyTopTop:function(top){return _this.eStickyTop.style.top=top},setStickyTopWidth:function(width){return _this.eStickyTop.style.width=width},setColumnMovingCss:function(cssClass,flag){return _this.addOrRemoveCssClass(cssClass,flag)},updateLayoutClasses:function(cssClass,params){var classLists=[_this.eBodyViewport.classList,_this.eBody.classList];classLists.forEach(function(classList){classList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),classList.toggle(LayoutCssClasses.NORMAL,params.normal),classList.toggle(LayoutCssClasses.PRINT,params.print)}),_this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),_this.addOrRemoveCssClass(LayoutCssClasses.NORMAL,params.normal),_this.addOrRemoveCssClass(LayoutCssClasses.PRINT,params.print)},setAlwaysVerticalScrollClass:function(cssClass,on){return _this.eBodyViewport.classList.toggle(CSS_CLASS_FORCE_VERTICAL_SCROLL,on)},registerBodyViewportResizeListener:function(listener){var unsubscribeFromResize=_this.resizeObserverService.observeResize(_this.eBodyViewport,listener);_this.addDestroyFunc(function(){return unsubscribeFromResize()})},setPinnedTopBottomOverflowY:function(overflow){return _this.eTop.style.overflowY=_this.eBottom.style.overflowY=overflow},setCellSelectableCss:function(cssClass,selectable){[_this.eTop,_this.eBodyViewport,_this.eBottom].forEach(function(ct){return ct.classList.toggle(cssClass,selectable)})},setBodyViewportWidth:function(width){return _this.eBodyViewport.style.width=width}};this.ctrl=this.createManagedBean(new GridBodyCtrl),this.ctrl.setComp(compProxy,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||this.gridOptionsService.get("rowSelection")==="multiple")&&setAriaMultiSelectable(this.getGui(),!0)},GridBodyComp2.prototype.setRowAnimationCssOnBodyViewport=function(cssClass,animateRows){var bodyViewportClassList=this.eBodyViewport.classList;bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_ON,animateRows),bodyViewportClassList.toggle(RowAnimationCssClasses.ANIMATION_OFF,!animateRows)},GridBodyComp2.prototype.getFloatingTopBottom=function(){return[this.eTop,this.eBottom]},__decorate$1O([Autowired("resizeObserverService")],GridBodyComp2.prototype,"resizeObserverService",void 0),__decorate$1O([Optional("rangeService")],GridBodyComp2.prototype,"rangeService",void 0),__decorate$1O([RefSelector("eBodyViewport")],GridBodyComp2.prototype,"eBodyViewport",void 0),__decorate$1O([RefSelector("eStickyTop")],GridBodyComp2.prototype,"eStickyTop",void 0),__decorate$1O([RefSelector("eTop")],GridBodyComp2.prototype,"eTop",void 0),__decorate$1O([RefSelector("eBottom")],GridBodyComp2.prototype,"eBottom",void 0),__decorate$1O([RefSelector("gridHeader")],GridBodyComp2.prototype,"headerRootComp",void 0),__decorate$1O([RefSelector("eBody")],GridBodyComp2.prototype,"eBody",void 0),__decorate$1O([PostConstruct],GridBodyComp2.prototype,"init",null),GridBodyComp2}(Component),__extends$1V=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1N=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1N"),ScrollVisibleService=function(_super){__extends$1V(ScrollVisibleService2,_super);function ScrollVisibleService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ScrollVisibleService2,"ScrollVisibleService"),ScrollVisibleService2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))},ScrollVisibleService2.prototype.onDisplayedColumnsChanged=function(){this.update()},ScrollVisibleService2.prototype.onDisplayedColumnsWidthChanged=function(){this.update()},ScrollVisibleService2.prototype.update=function(){var _this=this;this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(function(){_this.columnAnimationService.executeLaterVMTurn(function(){return _this.updateImpl()})}):this.updateImpl()},ScrollVisibleService2.prototype.updateImpl=function(){var centerRowCtrl=this.ctrlsService.getCenterRowContainerCtrl();if(!(!centerRowCtrl||this.columnAnimationService.isActive())){var params={horizontalScrollShowing:centerRowCtrl.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(params)}},ScrollVisibleService2.prototype.setScrollsVisible=function(params){var atLeastOneDifferent=this.horizontalScrollShowing!==params.horizontalScrollShowing||this.verticalScrollShowing!==params.verticalScrollShowing;if(atLeastOneDifferent){this.horizontalScrollShowing=params.horizontalScrollShowing,this.verticalScrollShowing=params.verticalScrollShowing;var event_1={type:Events.EVENT_SCROLL_VISIBILITY_CHANGED};this.eventService.dispatchEvent(event_1)}},ScrollVisibleService2.prototype.isHorizontalScrollShowing=function(){return this.horizontalScrollShowing},ScrollVisibleService2.prototype.isVerticalScrollShowing=function(){return this.verticalScrollShowing},__decorate$1N([Autowired("ctrlsService")],ScrollVisibleService2.prototype,"ctrlsService",void 0),__decorate$1N([Autowired("columnAnimationService")],ScrollVisibleService2.prototype,"columnAnimationService",void 0),__decorate$1N([PostConstruct],ScrollVisibleService2.prototype,"postConstruct",null),ScrollVisibleService2=__decorate$1N([Bean("scrollVisibleService")],ScrollVisibleService2),ScrollVisibleService2}(BeanStub),__extends$1U=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1M=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1M"),MouseEventService=function(_super){__extends$1U(MouseEventService2,_super);function MouseEventService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.gridInstanceId=MouseEventService_1.gridInstanceSequence.next(),_this}__name(MouseEventService2,"MouseEventService"),MouseEventService_1=MouseEventService2,MouseEventService2.prototype.stampTopLevelGridCompWithGridInstance=function(eGridDiv){eGridDiv[MouseEventService_1.GRID_DOM_KEY]=this.gridInstanceId},MouseEventService2.prototype.getRenderedCellForEvent=function(event){return getCtrlForEventTarget(this.gridOptionsService,event.target,CellCtrl.DOM_DATA_KEY_CELL_CTRL)},MouseEventService2.prototype.isEventFromThisGrid=function(event){var res=this.isElementInThisGrid(event.target);return res},MouseEventService2.prototype.isElementInThisGrid=function(element){for(var pointer=element;pointer;){var instanceId=pointer[MouseEventService_1.GRID_DOM_KEY];if(exists(instanceId)){var eventFromThisGrid=instanceId===this.gridInstanceId;return eventFromThisGrid}pointer=pointer.parentElement}return!1},MouseEventService2.prototype.getCellPositionForEvent=function(event){var cellComp=this.getRenderedCellForEvent(event);return cellComp?cellComp.getCellPosition():null},MouseEventService2.prototype.getNormalisedPosition=function(event){var gridPanelHasScrolls=this.gridOptionsService.isDomLayout("normal"),e=event,x,y;if(e.clientX!=null||e.clientY!=null?(x=e.clientX,y=e.clientY):(x=e.x,y=e.y),gridPanelHasScrolls){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),vRange=gridBodyCon.getScrollFeature().getVScrollPosition(),hRange=gridBodyCon.getScrollFeature().getHScrollPosition();x+=hRange.left,y+=vRange.top}return{x,y}};var MouseEventService_1;return MouseEventService2.gridInstanceSequence=new NumberSequence,MouseEventService2.GRID_DOM_KEY="__ag_grid_instance",__decorate$1M([Autowired("ctrlsService")],MouseEventService2.prototype,"ctrlsService",void 0),MouseEventService2=MouseEventService_1=__decorate$1M([Bean("mouseEventService")],MouseEventService2),MouseEventService2}(BeanStub),__extends$1T=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$c=__name(function(){return __assign$c=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$c.apply(this,arguments)},"__assign$c"),__decorate$1L=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1L"),NavigationService=function(_super){__extends$1T(NavigationService2,_super);function NavigationService2(){var _this=_super.call(this)||this;return _this.onPageDown=throttle(_this.onPageDown,100),_this.onPageUp=throttle(_this.onPageUp,100),_this}return __name(NavigationService2,"NavigationService"),NavigationService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.gridBodyCon=p.gridBodyCtrl})},NavigationService2.prototype.handlePageScrollingKey=function(event,fromFullWidth){fromFullWidth===void 0&&(fromFullWidth=!1);var key=event.key,alt=event.altKey,ctrl=event.ctrlKey||event.metaKey,rangeServiceShouldHandleShift=!!this.rangeService&&event.shiftKey,currentCell=this.mouseEventService.getCellPositionForEvent(event),processed=!1;switch(key){case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:!ctrl&&!alt&&(this.onHomeOrEndKey(key),processed=!0);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.UP:case KeyCode.DOWN:if(!currentCell)return!1;ctrl&&!alt&&!rangeServiceShouldHandleShift&&(this.onCtrlUpDownLeftRight(key,currentCell),processed=!0);break;case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:!ctrl&&!alt&&(processed=this.handlePageUpDown(key,currentCell,fromFullWidth));break}return processed&&event.preventDefault(),processed},NavigationService2.prototype.handlePageUpDown=function(key,currentCell,fromFullWidth){return fromFullWidth&&(currentCell=this.focusService.getFocusedCell()),currentCell?(key===KeyCode.PAGE_UP?this.onPageUp(currentCell):this.onPageDown(currentCell),!0):!1},NavigationService2.prototype.navigateTo=function(navigateParams){var scrollIndex=navigateParams.scrollIndex,scrollType=navigateParams.scrollType,scrollColumn=navigateParams.scrollColumn,focusIndex=navigateParams.focusIndex,focusColumn=navigateParams.focusColumn;if(exists(scrollColumn)&&!scrollColumn.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(scrollColumn),exists(scrollIndex)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(scrollIndex,scrollType),navigateParams.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(focusIndex),this.focusService.setFocusedCell({rowIndex:focusIndex,column:focusColumn,rowPinned:null,forceBrowserFocus:!0}),this.rangeService){var cellPosition={rowIndex:focusIndex,rowPinned:null,column:focusColumn};this.rangeService.setRangeToCell(cellPosition)}},NavigationService2.prototype.onPageDown=function(gridCell){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),scrollPosition=gridBodyCon.getScrollFeature().getVScrollPosition(),pixelsInOnePage=this.getViewportHeight(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageBottomPixel=scrollPosition.top+pixelsInOnePage,currentPageBottomRow=this.paginationProxy.getRowIndexAtPixel(currentPageBottomPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageBottomRow):this.navigateToNextPage(gridCell,currentPageBottomRow)},NavigationService2.prototype.onPageUp=function(gridCell){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),scrollPosition=gridBodyCon.getScrollFeature().getVScrollPosition(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentPageTopPixel=scrollPosition.top,currentPageTopRow=this.paginationProxy.getRowIndexAtPixel(currentPageTopPixel+pagingPixelOffset);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(gridCell,currentPageTopRow,!0):this.navigateToNextPage(gridCell,currentPageTopRow,!0)},NavigationService2.prototype.navigateToNextPage=function(gridCell,scrollIndex,up){up===void 0&&(up=!1);var pixelsInOnePage=this.getViewportHeight(),firstRow=this.paginationProxy.getPageFirstRow(),lastRow=this.paginationProxy.getPageLastRow(),pagingPixelOffset=this.paginationProxy.getPixelOffset(),currentRowNode=this.paginationProxy.getRow(gridCell.rowIndex),rowPixelDiff=up?(currentRowNode==null?void 0:currentRowNode.rowHeight)-pixelsInOnePage-pagingPixelOffset:pixelsInOnePage-pagingPixelOffset,nextCellPixel=(currentRowNode==null?void 0:currentRowNode.rowTop)+rowPixelDiff,focusIndex=this.paginationProxy.getRowIndexAtPixel(nextCellPixel+pagingPixelOffset);if(focusIndex===gridCell.rowIndex){var diff=up?-1:1;scrollIndex=focusIndex=gridCell.rowIndex+diff}var scrollType;up?(scrollType="bottom",focusIndex<firstRow&&(focusIndex=firstRow),scrollIndex<firstRow&&(scrollIndex=firstRow)):(scrollType="top",focusIndex>lastRow&&(focusIndex=lastRow),scrollIndex>lastRow&&(scrollIndex=lastRow)),this.isRowTallerThanView(focusIndex)&&(scrollIndex=focusIndex,scrollType="top"),this.navigateTo({scrollIndex,scrollType,scrollColumn:null,focusIndex,focusColumn:gridCell.column})},NavigationService2.prototype.navigateToNextPageWithAutoHeight=function(gridCell,scrollIndex,up){var _this=this;up===void 0&&(up=!1),this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex:scrollIndex,focusColumn:gridCell.column}),setTimeout(function(){var focusIndex=_this.getNextFocusIndexForAutoHeight(gridCell,up);_this.navigateTo({scrollIndex,scrollType:up?"bottom":"top",scrollColumn:null,focusIndex,focusColumn:gridCell.column,isAsync:!0})},50)},NavigationService2.prototype.getNextFocusIndexForAutoHeight=function(gridCell,up){var _a;up===void 0&&(up=!1);for(var step=up?-1:1,pixelsInOnePage=this.getViewportHeight(),lastRowIndex=this.paginationProxy.getPageLastRow(),pixelSum=0,currentIndex=gridCell.rowIndex;currentIndex>=0&&currentIndex<=lastRowIndex;){var currentCell=this.paginationProxy.getRow(currentIndex);if(currentCell){var currentCellHeight=(_a=currentCell.rowHeight)!==null&&_a!==void 0?_a:0;if(pixelSum+currentCellHeight>pixelsInOnePage)break;pixelSum+=currentCellHeight}currentIndex+=step}return Math.max(0,Math.min(currentIndex,lastRowIndex))},NavigationService2.prototype.getViewportHeight=function(){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),scrollPosition=gridBodyCon.getScrollFeature().getVScrollPosition(),scrollbarWidth=this.gridOptionsService.getScrollbarWidth(),pixelsInOnePage=scrollPosition.bottom-scrollPosition.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(pixelsInOnePage-=scrollbarWidth),pixelsInOnePage},NavigationService2.prototype.isRowTallerThanView=function(rowIndex){var rowNode=this.paginationProxy.getRow(rowIndex);if(!rowNode)return!1;var rowHeight=rowNode.rowHeight;return typeof rowHeight!="number"?!1:rowHeight>this.getViewportHeight()},NavigationService2.prototype.onCtrlUpDownLeftRight=function(key,gridCell){var cellToFocus=this.cellNavigationService.getNextCellToFocus(key,gridCell,!0),rowIndex=cellToFocus.rowIndex,column=cellToFocus.column;this.navigateTo({scrollIndex:rowIndex,scrollType:null,scrollColumn:column,focusIndex:rowIndex,focusColumn:column})},NavigationService2.prototype.onHomeOrEndKey=function(key){var homeKey=key===KeyCode.PAGE_HOME,allColumns=this.columnModel.getAllDisplayedColumns(),columnToSelect=homeKey?allColumns[0]:last(allColumns),scrollIndex=homeKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex,scrollType:null,scrollColumn:columnToSelect,focusIndex:scrollIndex,focusColumn:columnToSelect})},NavigationService2.prototype.onTabKeyDown=function(previous,keyboardEvent){var backwards=keyboardEvent.shiftKey,movedToNextCell=this.tabToNextCellCommon(previous,backwards,keyboardEvent);if(movedToNextCell){keyboardEvent.preventDefault();return}if(backwards){var _a=previous.getRowPosition(),rowIndex=_a.rowIndex,rowPinned=_a.rowPinned,firstRow=rowPinned?rowIndex===0:rowIndex===this.paginationProxy.getPageFirstRow();firstRow&&(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(keyboardEvent.preventDefault(),this.focusService.focusPreviousFromFirstCell(keyboardEvent)))}else previous instanceof CellCtrl&&previous.focusCell(!0),this.focusService.focusNextGridCoreContainer(backwards)&&keyboardEvent.preventDefault()},NavigationService2.prototype.tabToNextCell=function(backwards,event){var focusedCell=this.focusService.getFocusedCell();if(!focusedCell)return!1;var cellOrRow=this.getCellByPosition(focusedCell);return!cellOrRow&&(cellOrRow=this.rowRenderer.getRowByPosition(focusedCell),!cellOrRow||!cellOrRow.isFullWidth())?!1:this.tabToNextCellCommon(cellOrRow,backwards,event)},NavigationService2.prototype.tabToNextCellCommon=function(previous,backwards,event){var editing=previous.isEditing();if(!editing&&previous instanceof CellCtrl){var cell=previous,row=cell.getRowCtrl();row&&(editing=row.isEditing())}var res;return editing?this.gridOptionsService.get("editType")==="fullRow"?res=this.moveToNextEditingRow(previous,backwards,event):res=this.moveToNextEditingCell(previous,backwards,event):res=this.moveToNextCellNotEditing(previous,backwards),res||!!this.focusService.getFocusedHeader()},NavigationService2.prototype.moveToNextEditingCell=function(previousCell,backwards,event){event===void 0&&(event=null);var previousPos=previousCell.getCellPosition();previousCell.getGui().focus(),previousCell.stopEditing();var nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);return nextCell==null?!1:(nextCell.startEditing(null,!0,event),nextCell.focusCell(!1),!0)},NavigationService2.prototype.moveToNextEditingRow=function(previousCell,backwards,event){event===void 0&&(event=null);var previousPos=previousCell.getCellPosition(),nextCell=this.findNextCellToFocusOn(previousPos,backwards,!0);if(nextCell==null)return!1;var nextPos=nextCell.getCellPosition(),previousEditable=this.isCellEditable(previousPos),nextEditable=this.isCellEditable(nextPos),rowsMatch=nextPos&&previousPos.rowIndex===nextPos.rowIndex&&previousPos.rowPinned===nextPos.rowPinned;if(previousEditable&&previousCell.setFocusOutOnEditor(),!rowsMatch){var pRow=previousCell.getRowCtrl();pRow.stopEditing();var nRow=nextCell.getRowCtrl();nRow.startRowEditing(void 0,void 0,event)}return nextEditable?(nextCell.setFocusInOnEditor(),nextCell.focusCell()):nextCell.focusCell(!0),!0},NavigationService2.prototype.moveToNextCellNotEditing=function(previousCell,backwards){var displayedColumns=this.columnModel.getAllDisplayedColumns(),cellPos;previousCell instanceof RowCtrl?cellPos=__assign$c(__assign$c({},previousCell.getRowPosition()),{column:backwards?displayedColumns[0]:last(displayedColumns)}):cellPos=previousCell.getCellPosition();var nextCell=this.findNextCellToFocusOn(cellPos,backwards,!1);if(nextCell instanceof CellCtrl)nextCell.focusCell(!0);else if(nextCell)return this.tryToFocusFullWidthRow(nextCell.getRowPosition(),backwards);return exists(nextCell)},NavigationService2.prototype.findNextCellToFocusOn=function(previousPosition,backwards,startEditing){for(var nextPosition=previousPosition;;){previousPosition!==nextPosition&&(previousPosition=nextPosition),backwards||(nextPosition=this.getLastCellOfColSpan(nextPosition)),nextPosition=this.cellNavigationService.getNextTabbedCell(nextPosition,backwards);var userFunc=this.gridOptionsService.getCallback("tabToNextCell");if(exists(userFunc)){var params={backwards,editing:startEditing,previousCellPosition:previousPosition,nextCellPosition:nextPosition||null},userCell=userFunc(params);exists(userCell)?(userCell.floating&&(warnOnce("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),userCell.rowPinned=userCell.floating),nextPosition={rowIndex:userCell.rowIndex,column:userCell.column,rowPinned:userCell.rowPinned}):nextPosition=null}if(!nextPosition)return null;if(nextPosition.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextPosition.rowIndex,column:nextPosition.column},fromCell:!0}),null}var fullRowEdit=this.gridOptionsService.get("editType")==="fullRow";if(startEditing&&!fullRowEdit){var cellIsEditable=this.isCellEditable(nextPosition);if(!cellIsEditable)continue}this.ensureCellVisible(nextPosition);var nextCell=this.getCellByPosition(nextPosition);if(!nextCell){var row=this.rowRenderer.getRowByPosition(nextPosition);if(!row||!row.isFullWidth()||startEditing)continue;return row}if(!nextCell.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(nextPosition),nextCell}},NavigationService2.prototype.isCellEditable=function(cell){var rowNode=this.lookupRowNodeForCell(cell);return rowNode?cell.column.isCellEditable(rowNode):!1},NavigationService2.prototype.getCellByPosition=function(cellPosition){var rowCtrl=this.rowRenderer.getRowByPosition(cellPosition);return rowCtrl?rowCtrl.getCellCtrl(cellPosition.column):null},NavigationService2.prototype.lookupRowNodeForCell=function(cell){return cell.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(cell.rowIndex):cell.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(cell.rowIndex):this.paginationProxy.getRow(cell.rowIndex)},NavigationService2.prototype.navigateToNextCell=function(event,key,currentCell,allowUserOverride){for(var nextCell=currentCell,hitEdgeOfGrid=!1;nextCell&&(nextCell===currentCell||!this.isValidNavigateCell(nextCell));)this.gridOptionsService.get("enableRtl")?key===KeyCode.LEFT&&(nextCell=this.getLastCellOfColSpan(nextCell)):key===KeyCode.RIGHT&&(nextCell=this.getLastCellOfColSpan(nextCell)),nextCell=this.cellNavigationService.getNextCellToFocus(key,nextCell),hitEdgeOfGrid=missing(nextCell);if(hitEdgeOfGrid&&event&&event.key===KeyCode.UP&&(nextCell={rowIndex:-1,rowPinned:null,column:currentCell.column}),allowUserOverride){var userFunc=this.gridOptionsService.getCallback("navigateToNextCell");if(exists(userFunc)){var params={key,previousCellPosition:currentCell,nextCellPosition:nextCell||null,event},userCell=userFunc(params);exists(userCell)?(userCell.floating&&(warnOnce("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),userCell.rowPinned=userCell.floating),nextCell={rowPinned:userCell.rowPinned,rowIndex:userCell.rowIndex,column:userCell.column}):nextCell=null}}if(nextCell){if(nextCell.rowIndex<0){var headerLen=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:headerLen+nextCell.rowIndex,column:currentCell.column},event:event||void 0,fromCell:!0});return}var normalisedPosition=this.getNormalisedPosition(nextCell);normalisedPosition?this.focusPosition(normalisedPosition):this.tryToFocusFullWidthRow(nextCell)}},NavigationService2.prototype.getNormalisedPosition=function(cellPosition){this.ensureCellVisible(cellPosition);var cellCtrl=this.getCellByPosition(cellPosition);return cellCtrl?(cellPosition=cellCtrl.getCellPosition(),this.ensureCellVisible(cellPosition),cellPosition):null},NavigationService2.prototype.tryToFocusFullWidthRow=function(position,backwards){backwards===void 0&&(backwards=!1);var displayedColumns=this.columnModel.getAllDisplayedColumns(),rowComp=this.rowRenderer.getRowByPosition(position);if(!rowComp||!rowComp.isFullWidth())return!1;var currentCellFocused=this.focusService.getFocusedCell(),cellPosition={rowIndex:position.rowIndex,rowPinned:position.rowPinned,column:position.column||(backwards?last(displayedColumns):displayedColumns[0])};this.focusPosition(cellPosition);var fromBelow=currentCellFocused!=null?this.rowPositionUtils.before(cellPosition,currentCellFocused):!1,focusEvent={type:Events.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:cellPosition.rowIndex,rowPinned:cellPosition.rowPinned,column:cellPosition.column,isFullWidthCell:!0,floating:cellPosition.rowPinned,fromBelow};return this.eventService.dispatchEvent(focusEvent),!0},NavigationService2.prototype.focusPosition=function(cellPosition){this.focusService.setFocusedCell({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(cellPosition)},NavigationService2.prototype.isValidNavigateCell=function(cell){var rowNode=this.rowPositionUtils.getRowNode(cell);return!!rowNode},NavigationService2.prototype.getLastCellOfColSpan=function(cell){var cellCtrl=this.getCellByPosition(cell);if(!cellCtrl)return cell;var colSpanningList=cellCtrl.getColSpanningList();return colSpanningList.length===1?cell:{rowIndex:cell.rowIndex,column:last(colSpanningList),rowPinned:cell.rowPinned}},NavigationService2.prototype.ensureCellVisible=function(gridCell){var isGroupStickyEnabled=this.gridOptionsService.isGroupRowsSticky(),rowNode=this.rowModel.getRow(gridCell.rowIndex),skipScrollToRow=isGroupStickyEnabled&&(rowNode==null?void 0:rowNode.sticky);!skipScrollToRow&&missing(gridCell.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(gridCell.rowIndex),gridCell.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(gridCell.column)},__decorate$1L([Autowired("mouseEventService")],NavigationService2.prototype,"mouseEventService",void 0),__decorate$1L([Autowired("paginationProxy")],NavigationService2.prototype,"paginationProxy",void 0),__decorate$1L([Autowired("focusService")],NavigationService2.prototype,"focusService",void 0),__decorate$1L([Optional("rangeService")],NavigationService2.prototype,"rangeService",void 0),__decorate$1L([Autowired("columnModel")],NavigationService2.prototype,"columnModel",void 0),__decorate$1L([Autowired("rowModel")],NavigationService2.prototype,"rowModel",void 0),__decorate$1L([Autowired("ctrlsService")],NavigationService2.prototype,"ctrlsService",void 0),__decorate$1L([Autowired("rowRenderer")],NavigationService2.prototype,"rowRenderer",void 0),__decorate$1L([Autowired("headerNavigationService")],NavigationService2.prototype,"headerNavigationService",void 0),__decorate$1L([Autowired("rowPositionUtils")],NavigationService2.prototype,"rowPositionUtils",void 0),__decorate$1L([Autowired("cellNavigationService")],NavigationService2.prototype,"cellNavigationService",void 0),__decorate$1L([Autowired("pinnedRowModel")],NavigationService2.prototype,"pinnedRowModel",void 0),__decorate$1L([PostConstruct],NavigationService2.prototype,"postConstruct",null),NavigationService2=__decorate$1L([Bean("navigationService")],NavigationService2),NavigationService2}(BeanStub),__extends$1S=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1K=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1K"),PopupEditorWrapper=function(_super){__extends$1S(PopupEditorWrapper2,_super);function PopupEditorWrapper2(params){var _this=_super.call(this,'<div class="ag-popup-editor" tabindex="-1"/>')||this;return _this.params=params,_this}return __name(PopupEditorWrapper2,"PopupEditorWrapper"),PopupEditorWrapper2.prototype.postConstruct=function(){this.gridOptionsService.setDomData(this.getGui(),PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()},PopupEditorWrapper2.prototype.addKeyDownListener=function(){var _this=this,eGui=this.getGui(),params=this.params,listener=__name(function(event){isUserSuppressingKeyboardEvent(_this.gridOptionsService,event,params.node,params.column,!0)||params.onKeyDown(event)},"listener");this.addManagedListener(eGui,"keydown",listener)},PopupEditorWrapper2.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",__decorate$1K([PostConstruct],PopupEditorWrapper2.prototype,"postConstruct",null),PopupEditorWrapper2}(PopupComponent),__extends$1R=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),CellComp=function(_super){__extends$1R(CellComp2,_super);function CellComp2(beans,cellCtrl,printLayout,eRow,editingRow){var _this=_super.call(this)||this;_this.rendererVersion=0,_this.editorVersion=0,_this.beans=beans,_this.column=cellCtrl.getColumn(),_this.rowNode=cellCtrl.getRowNode(),_this.rowCtrl=cellCtrl.getRowCtrl(),_this.eRow=eRow,_this.cellCtrl=cellCtrl;var cellDiv=document.createElement("div");cellDiv.setAttribute("comp-id","".concat(_this.getCompId())),_this.setTemplateFromElement(cellDiv);var eGui=_this.getGui();_this.forceWrapper=cellCtrl.isForceWrapper(),_this.refreshWrapper(!1);var setAttribute=__name(function(name,value){value!=null&&value!=""?eGui.setAttribute(name,value):eGui.removeAttribute(name)},"setAttribute");setAriaRole(eGui,cellCtrl.getCellAriaRole()),setAttribute("col-id",cellCtrl.getColumnIdSanitised());var tabIndex=cellCtrl.getTabIndex();tabIndex!==void 0&&setAttribute("tabindex",tabIndex.toString());var compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},getFocusableElement:function(){return _this.getFocusableElement()},setIncludeSelection:function(include){return _this.includeSelection=include},setIncludeRowDrag:function(include){return _this.includeRowDrag=include},setIncludeDndSource:function(include){return _this.includeDndSource=include},setRenderDetails:function(compDetails,valueToDisplay,force){return _this.setRenderDetails(compDetails,valueToDisplay,force)},setEditDetails:function(compDetails,popup,position){return _this.setEditDetails(compDetails,popup,position)},getCellEditor:function(){return _this.cellEditor||null},getCellRenderer:function(){return _this.cellRenderer||null},getParentOfValue:function(){return _this.getParentOfValue()}};return cellCtrl.setComp(compProxy,_this.getGui(),_this.eCellWrapper,printLayout,editingRow),_this}return __name(CellComp2,"CellComp"),CellComp2.prototype.getParentOfValue=function(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()},CellComp2.prototype.setRenderDetails=function(compDetails,valueToDisplay,forceNewCellRendererInstance){var isInlineEditing=this.cellEditor&&!this.cellEditorPopupWrapper;if(!isInlineEditing){this.firstRender=this.firstRender==null;var controlWrapperChanged=this.refreshWrapper(!1);if(this.refreshEditStyles(!1),compDetails){var neverRefresh=forceNewCellRendererInstance||controlWrapperChanged,cellRendererRefreshSuccessful=neverRefresh?!1:this.refreshCellRenderer(compDetails);cellRendererRefreshSuccessful||(this.destroyRenderer(),this.createCellRendererInstance(compDetails))}else this.destroyRenderer(),this.insertValueWithoutCellRenderer(valueToDisplay)}},CellComp2.prototype.setEditDetails=function(compDetails,popup,position){compDetails?this.createCellEditorInstance(compDetails,popup,position):this.destroyEditor()},CellComp2.prototype.removeControls=function(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)},CellComp2.prototype.refreshWrapper=function(editing){var providingControls=this.includeRowDrag||this.includeDndSource||this.includeSelection,usingWrapper=providingControls||this.forceWrapper,putWrapperIn=usingWrapper&&this.eCellWrapper==null;if(putWrapperIn){var wrapperDiv=document.createElement("div");wrapperDiv.setAttribute("role","presentation"),wrapperDiv.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=wrapperDiv,this.getGui().appendChild(this.eCellWrapper)}var takeWrapperOut=!usingWrapper&&this.eCellWrapper!=null;takeWrapperOut&&(removeFromParent(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!usingWrapper);var usingCellValue=!editing&&usingWrapper,putCellValueIn=usingCellValue&&this.eCellValue==null;if(putCellValueIn){var cellSpan=document.createElement("span");cellSpan.setAttribute("role","presentation"),cellSpan.setAttribute("class","ag-cell-value"),this.eCellValue=cellSpan,this.eCellWrapper.appendChild(this.eCellValue)}var takeCellValueOut=!usingCellValue&&this.eCellValue!=null;takeCellValueOut&&(removeFromParent(this.eCellValue),this.eCellValue=void 0);var templateChanged=putWrapperIn||takeWrapperOut||putCellValueIn||takeCellValueOut;return templateChanged&&this.removeControls(),editing||providingControls&&this.addControls(),templateChanged},CellComp2.prototype.addControls=function(){this.includeRowDrag&&this.rowDraggingComp==null&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&this.dndSourceComp==null&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&this.checkboxSelectionComp==null&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))},CellComp2.prototype.createCellEditorInstance=function(compDetails,popup,position){var _this=this,versionCopy=this.editorVersion,cellEditorPromise=compDetails.newAgStackInstance();if(cellEditorPromise){var params=compDetails.params;cellEditorPromise.then(function(c){return _this.afterCellEditorCreated(versionCopy,c,params,popup,position)});var cellEditorAsync=missing(this.cellEditor);cellEditorAsync&&params.cellStartedEdit&&this.cellCtrl.focusCell(!0)}},CellComp2.prototype.insertValueWithoutCellRenderer=function(valueToDisplay){var eParent=this.getParentOfValue();clearElement(eParent);var escapedValue=valueToDisplay!=null?escapeString(valueToDisplay,!0):null;escapedValue!=null&&(eParent.textContent=escapedValue)},CellComp2.prototype.destroyEditorAndRenderer=function(){this.destroyRenderer(),this.destroyEditor()},CellComp2.prototype.destroyRenderer=function(){var context=this.beans.context;this.cellRenderer=context.destroyBean(this.cellRenderer),removeFromParent(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++},CellComp2.prototype.destroyEditor=function(){var context=this.beans.context;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=context.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=context.destroyBean(this.cellEditorPopupWrapper),removeFromParent(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++},CellComp2.prototype.refreshCellRenderer=function(compClassAndParams){if(this.cellRenderer==null||this.cellRenderer.refresh==null||this.cellRendererClass!==compClassAndParams.componentClass)return!1;var result=this.cellRenderer.refresh(compClassAndParams.params);return result===!0||result===void 0},CellComp2.prototype.createCellRendererInstance=function(compDetails){var _this=this,suppressAnimationFrame=this.beans.gridOptionsService.get("suppressAnimationFrame"),useTaskService=!suppressAnimationFrame,displayComponentVersionCopy=this.rendererVersion,componentClass=compDetails.componentClass,createCellRendererFunc=__name(function(){var staleTask=_this.rendererVersion!==displayComponentVersionCopy||!_this.isAlive();if(!staleTask){var componentPromise=compDetails.newAgStackInstance(),callback=_this.afterCellRendererCreated.bind(_this,displayComponentVersionCopy,componentClass);componentPromise&&componentPromise.then(callback)}},"createCellRendererFunc");useTaskService&&this.firstRender?this.beans.animationFrameService.createTask(createCellRendererFunc,this.rowNode.rowIndex,"createTasksP2"):createCellRendererFunc()},CellComp2.prototype.getCtrl=function(){return this.cellCtrl},CellComp2.prototype.getRowCtrl=function(){return this.rowCtrl},CellComp2.prototype.getCellRenderer=function(){return this.cellRenderer},CellComp2.prototype.getCellEditor=function(){return this.cellEditor},CellComp2.prototype.afterCellRendererCreated=function(cellRendererVersion,cellRendererClass,cellRenderer){var staleTask=!this.isAlive()||cellRendererVersion!==this.rendererVersion;if(staleTask){this.beans.context.destroyBean(cellRenderer);return}if(this.cellRenderer=cellRenderer,this.cellRendererClass=cellRendererClass,this.cellRendererGui=this.cellRenderer.getGui(),this.cellRendererGui!=null){var eParent=this.getParentOfValue();clearElement(eParent),eParent.appendChild(this.cellRendererGui)}},CellComp2.prototype.afterCellEditorCreated=function(requestVersion,cellEditor,params,popup,position){var staleComp=requestVersion!==this.editorVersion;if(staleComp){this.beans.context.destroyBean(cellEditor);return}var editingCancelledByUserComp=cellEditor.isCancelBeforeStart&&cellEditor.isCancelBeforeStart();if(editingCancelledByUserComp){this.beans.context.destroyBean(cellEditor),this.cellCtrl.stopEditing(!0);return}if(!cellEditor.getGui){console.warn("AG Grid: cellEditor for column ".concat(this.column.getId()," is missing getGui() method")),this.beans.context.destroyBean(cellEditor);return}this.cellEditor=cellEditor,this.cellEditorGui=cellEditor.getGui();var cellEditorInPopup=popup||cellEditor.isPopup!==void 0&&cellEditor.isPopup();cellEditorInPopup?this.addPopupCellEditor(params,position):this.addInCellEditor(),this.refreshEditStyles(!0,cellEditorInPopup),cellEditor.afterGuiAttached&&cellEditor.afterGuiAttached()},CellComp2.prototype.refreshEditStyles=function(editing,isPopup){var _a;this.addOrRemoveCssClass("ag-cell-inline-editing",editing&&!isPopup),this.addOrRemoveCssClass("ag-cell-popup-editing",editing&&!!isPopup),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!editing||!!isPopup),(_a=this.rowCtrl)===null||_a===void 0||_a.setInlineEditingCss(editing)},CellComp2.prototype.addInCellEditor=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsService.getDocument();if(eGui.contains(eDocument.activeElement)&&eGui.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui){var eParent=this.getParentOfValue();eParent.appendChild(this.cellEditorGui)}},CellComp2.prototype.addPopupCellEditor=function(params,position){var _this=this;this.beans.gridOptionsService.get("editType")==="fullRow"&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");var cellEditor=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new PopupEditorWrapper(params));var ePopupGui=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&ePopupGui.appendChild(this.cellEditorGui);var popupService=this.beans.popupService,useModelPopup=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),positionToUse=position??(cellEditor.getPopupPosition?cellEditor.getPopupPosition():"over"),isRtl=this.beans.gridOptionsService.get("enableRtl"),positionParams={ePopup:ePopupGui,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:positionToUse,alignSide:isRtl?"right":"left",keepWithinBounds:!0},positionCallback=popupService.positionPopupByComponent.bind(popupService,positionParams),translate=this.beans.localeService.getLocaleTextFunc(),addPopupRes=popupService.addPopup({modal:useModelPopup,eChild:ePopupGui,closeOnEsc:!0,closedCallback:function(){_this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback,ariaLabel:translate("ariaLabelCellEditor","Cell Editor")});addPopupRes&&(this.hideEditorPopup=addPopupRes.hideFunc)},CellComp2.prototype.detach=function(){this.eRow.removeChild(this.getGui())},CellComp2.prototype.destroy=function(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),_super.prototype.destroy.call(this)},CellComp2.prototype.clearParentOfValue=function(){var eGui=this.getGui(),eDocument=this.beans.gridOptionsService.getDocument();eGui.contains(eDocument.activeElement)&&browserSupportsPreventScroll()&&eGui.focus({preventScroll:!0}),clearElement(this.getParentOfValue())},CellComp2}(Component),__extends$1Q=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowComp=function(_super){__extends$1Q(RowComp2,_super);function RowComp2(ctrl,beans,containerType){var _this=_super.call(this)||this;_this.cellComps={},_this.beans=beans,_this.rowCtrl=ctrl;var rowDiv=document.createElement("div");rowDiv.setAttribute("comp-id","".concat(_this.getCompId())),rowDiv.setAttribute("style",_this.getInitialStyle(containerType)),_this.setTemplateFromElement(rowDiv);var eGui=_this.getGui(),style=eGui.style;_this.domOrder=_this.rowCtrl.getDomOrder(),setAriaRole(eGui,"row");var tabIndex=_this.rowCtrl.getTabIndex();tabIndex!=null&&eGui.setAttribute("tabindex",tabIndex.toString());var compProxy={setDomOrder:function(domOrder){return _this.domOrder=domOrder},setCellCtrls:function(cellCtrls){return _this.setCellCtrls(cellCtrls)},showFullWidth:function(compDetails){return _this.showFullWidth(compDetails)},getFullWidthCellRenderer:function(){return _this.getFullWidthCellRenderer()},addOrRemoveCssClass:function(name,on){return _this.addOrRemoveCssClass(name,on)},setUserStyles:function(styles){return addStylesToElement(eGui,styles)},setTop:function(top){return style.top=top},setTransform:function(transform){return style.transform=transform},setRowIndex:function(rowIndex){return eGui.setAttribute("row-index",rowIndex)},setRowId:function(rowId){return eGui.setAttribute("row-id",rowId)},setRowBusinessKey:function(businessKey){return eGui.setAttribute("row-business-key",businessKey)},refreshFullWidth:function(getUpdatedParams){return _this.refreshFullWidth(getUpdatedParams)}};return ctrl.setComp(compProxy,_this.getGui(),containerType),_this.addDestroyFunc(function(){ctrl.unsetComp(containerType)}),_this}return __name(RowComp2,"RowComp"),RowComp2.prototype.getInitialStyle=function(containerType){var transform=this.rowCtrl.getInitialTransform(containerType);return transform?"transform: ".concat(transform):"top: ".concat(this.rowCtrl.getInitialRowTop(containerType))},RowComp2.prototype.showFullWidth=function(compDetails){var _this=this,callback=__name(function(cellRenderer){if(_this.isAlive()){var eGui=cellRenderer.getGui();_this.getGui().appendChild(eGui),_this.rowCtrl.setupDetailRowAutoHeight(eGui),_this.setFullWidthRowComp(cellRenderer)}else _this.beans.context.destroyBean(cellRenderer)},"callback"),res=compDetails.newAgStackInstance();res&&res.then(callback)},RowComp2.prototype.setCellCtrls=function(cellCtrls){var _this=this,cellsToRemove=Object.assign({},this.cellComps);cellCtrls.forEach(function(cellCtrl){var key=cellCtrl.getInstanceId(),existingCellComp=_this.cellComps[key];existingCellComp==null?_this.newCellComp(cellCtrl):cellsToRemove[key]=null});var cellCompsToRemove=getAllValuesInObject(cellsToRemove).filter(function(cellComp){return cellComp!=null});this.destroyCells(cellCompsToRemove),this.ensureDomOrder(cellCtrls)},RowComp2.prototype.ensureDomOrder=function(cellCtrls){var _this=this;if(this.domOrder){var elementsInOrder=[];cellCtrls.forEach(function(cellCtrl){var cellComp=_this.cellComps[cellCtrl.getInstanceId()];cellComp&&elementsInOrder.push(cellComp.getGui())}),setDomChildOrder(this.getGui(),elementsInOrder)}},RowComp2.prototype.newCellComp=function(cellCtrl){var cellComp=new CellComp(this.beans,cellCtrl,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[cellCtrl.getInstanceId()]=cellComp,this.getGui().appendChild(cellComp.getGui())},RowComp2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.destroyAllCells()},RowComp2.prototype.destroyAllCells=function(){var cellsToDestroy=getAllValuesInObject(this.cellComps).filter(function(cp){return cp!=null});this.destroyCells(cellsToDestroy)},RowComp2.prototype.setFullWidthRowComp=function(fullWidthRowComponent){var _this=this;this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=fullWidthRowComponent,this.addDestroyFunc(function(){_this.fullWidthCellRenderer=_this.beans.context.destroyBean(_this.fullWidthCellRenderer)})},RowComp2.prototype.getFullWidthCellRenderer=function(){return this.fullWidthCellRenderer},RowComp2.prototype.destroyCells=function(cellComps){var _this=this;cellComps.forEach(function(cellComp){if(cellComp){var instanceId=cellComp.getCtrl().getInstanceId();_this.cellComps[instanceId]===cellComp&&(cellComp.detach(),cellComp.destroy(),_this.cellComps[instanceId]=null)}})},RowComp2.prototype.refreshFullWidth=function(getUpdatedParams){var fullWidthCellRenderer=this.fullWidthCellRenderer;if(!fullWidthCellRenderer||!fullWidthCellRenderer.refresh)return!1;var params=getUpdatedParams();return fullWidthCellRenderer.refresh(params)},RowComp2}(Component),__extends$1P=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$b=__name(function(){return __assign$b=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$b.apply(this,arguments)},"__assign$b"),__decorate$1J=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1J");function templateFactory(){var name=Component.elementGettingCreated.getAttribute("name"),cssClasses=RowContainerCtrl.getRowContainerCssClasses(name),res,centerTemplate=name===RowContainerName.CENTER||name===RowContainerName.TOP_CENTER||name===RowContainerName.STICKY_TOP_CENTER||name===RowContainerName.BOTTOM_CENTER;return centerTemplate?res='<div class="'.concat(cssClasses.viewport,`" ref="eViewport" role="presentation">
                <div class="`).concat(cssClasses.container,`" ref="eContainer"></div>
            </div>`):res='<div class="'.concat(cssClasses.container,'" ref="eContainer"></div>'),res}__name(templateFactory,"templateFactory");var RowContainerComp=function(_super){__extends$1P(RowContainerComp2,_super);function RowContainerComp2(){var _this=_super.call(this,templateFactory())||this;return _this.rowComps={},_this.name=Component.elementGettingCreated.getAttribute("name"),_this.type=getRowContainerTypeForName(_this.name),_this}return __name(RowContainerComp2,"RowContainerComp"),RowContainerComp2.prototype.postConstruct=function(){var _this=this,compProxy={setViewportHeight:function(height){return _this.eViewport.style.height=height},setRowCtrls:function(_a){var rowCtrls=_a.rowCtrls;return _this.setRowCtrls(rowCtrls)},setDomOrder:function(domOrder){_this.domOrder=domOrder},setContainerWidth:function(width){return _this.eContainer.style.width=width}},ctrl=this.createManagedBean(new RowContainerCtrl(this.name));ctrl.setComp(compProxy,this.eContainer,this.eViewport)},RowContainerComp2.prototype.preDestroy=function(){this.setRowCtrls([])},RowContainerComp2.prototype.setRowCtrls=function(rowCtrls){var _this=this,oldRows=__assign$b({},this.rowComps);this.rowComps={},this.lastPlacedElement=null;var processRow=__name(function(rowCon){var instanceId=rowCon.getInstanceId(),existingRowComp=oldRows[instanceId];if(existingRowComp)_this.rowComps[instanceId]=existingRowComp,delete oldRows[instanceId],_this.ensureDomOrder(existingRowComp.getGui());else{if(!rowCon.getRowNode().displayed)return;var rowComp=new RowComp(rowCon,_this.beans,_this.type);_this.rowComps[instanceId]=rowComp,_this.appendRow(rowComp.getGui())}},"processRow");rowCtrls.forEach(processRow),getAllValuesInObject(oldRows).forEach(function(oldRowComp){_this.eContainer.removeChild(oldRowComp.getGui()),oldRowComp.destroy()}),setAriaRole(this.eContainer,"rowgroup")},RowContainerComp2.prototype.appendRow=function(element){this.domOrder?insertWithDomOrder(this.eContainer,element,this.lastPlacedElement):this.eContainer.appendChild(element),this.lastPlacedElement=element},RowContainerComp2.prototype.ensureDomOrder=function(eRow){this.domOrder&&(ensureDomOrder(this.eContainer,eRow,this.lastPlacedElement),this.lastPlacedElement=eRow)},__decorate$1J([Autowired("beans")],RowContainerComp2.prototype,"beans",void 0),__decorate$1J([RefSelector("eViewport")],RowContainerComp2.prototype,"eViewport",void 0),__decorate$1J([RefSelector("eContainer")],RowContainerComp2.prototype,"eContainer",void 0),__decorate$1J([PostConstruct],RowContainerComp2.prototype,"postConstruct",null),__decorate$1J([PreDestroy],RowContainerComp2.prototype,"preDestroy",null),RowContainerComp2}(Component),__decorate$1I=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1I"),BodyDropPivotTarget=function(){function BodyDropPivotTarget2(pinned){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=pinned}return __name(BodyDropPivotTarget2,"BodyDropPivotTarget"),BodyDropPivotTarget2.prototype.onDragEnter=function(draggingEvent){var _this=this;if(this.clearColumnsList(),!this.gridOptionsService.get("functionsReadOnly")){var dragColumns=draggingEvent.dragItem.columns;dragColumns&&dragColumns.forEach(function(column){column.isPrimary()&&(column.isAnyFunctionActive()||(column.isAllowValue()?_this.columnsToAggregate.push(column):column.isAllowRowGroup()?_this.columnsToGroup.push(column):column.isAllowPivot()&&_this.columnsToPivot.push(column)))})}},BodyDropPivotTarget2.prototype.getIconName=function(){var totalColumns=this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length;return totalColumns>0?this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE:null},BodyDropPivotTarget2.prototype.onDragLeave=function(draggingEvent){this.clearColumnsList()},BodyDropPivotTarget2.prototype.clearColumnsList=function(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0},BodyDropPivotTarget2.prototype.onDragging=function(draggingEvent){},BodyDropPivotTarget2.prototype.onDragStop=function(draggingEvent){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")},__decorate$1I([Autowired("columnModel")],BodyDropPivotTarget2.prototype,"columnModel",void 0),__decorate$1I([Autowired("gridOptionsService")],BodyDropPivotTarget2.prototype,"gridOptionsService",void 0),BodyDropPivotTarget2}(),__read$m=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$m"),ColumnMoveHelper=function(){function ColumnMoveHelper2(){}return __name(ColumnMoveHelper2,"ColumnMoveHelper"),ColumnMoveHelper2.attemptMoveColumns=function(params){var isFromHeader=params.isFromHeader,hDirection=params.hDirection,xPosition=params.xPosition,fromEnter=params.fromEnter,fakeEvent=params.fakeEvent,pinned=params.pinned,gridOptionsService=params.gridOptionsService,columnModel=params.columnModel,draggingLeft=hDirection===HorizontalDirection.Left,draggingRight=hDirection===HorizontalDirection.Right,allMovingColumns=params.allMovingColumns;if(isFromHeader){var newCols_1=[];allMovingColumns.forEach(function(col){for(var _a,movingGroup=null,parent=col.getParent();parent!=null&&parent.getDisplayedLeafColumns().length===1;)movingGroup=parent,parent=parent.getParent();if(movingGroup!=null){var isMarryChildren=!!(!((_a=movingGroup.getColGroupDef())===null||_a===void 0)&&_a.marryChildren),columnsToMove=isMarryChildren?movingGroup.getProvidedColumnGroup().getLeafColumns():movingGroup.getLeafColumns();columnsToMove.forEach(function(newCol){newCols_1.includes(newCol)||newCols_1.push(newCol)})}else newCols_1.includes(col)||newCols_1.push(col)}),allMovingColumns=newCols_1}var allMovingColumnsOrdered=allMovingColumns.slice();columnModel.sortColumnsLikeGridColumns(allMovingColumnsOrdered);var validMoves=this.calculateValidMoves({movingCols:allMovingColumnsOrdered,draggingRight,xPosition,pinned,gridOptionsService,columnModel}),oldIndex=this.calculateOldIndex(allMovingColumnsOrdered,columnModel);if(validMoves.length!==0){var firstValidMove=validMoves[0],constrainDirection=oldIndex!==null&&!fromEnter;if(isFromHeader&&(constrainDirection=oldIndex!==null),!(constrainDirection&&!fakeEvent&&(draggingLeft&&firstValidMove>=oldIndex||draggingRight&&firstValidMove<=oldIndex))){for(var displayedCols=columnModel.getAllDisplayedColumns(),potentialMoves=[],targetOrder=null,i=0;i<validMoves.length;i++){var move=validMoves[i],order=columnModel.getProposedColumnOrder(allMovingColumnsOrdered,move);if(columnModel.doesOrderPassRules(order)){var displayedOrder=order.filter(function(col){return displayedCols.includes(col)});if(targetOrder===null)targetOrder=displayedOrder;else if(!areEqual(displayedOrder,targetOrder))break;var fragCount=this.groupFragCount(order);potentialMoves.push({move,fragCount})}}if(potentialMoves.length!==0)return potentialMoves.sort(function(a,b){return a.fragCount-b.fragCount}),this.moveColumns(allMovingColumns,potentialMoves[0].move,"uiColumnMoved",!1,columnModel)}}},ColumnMoveHelper2.moveColumns=function(columns,toIndex,source,finished,columnModel){return columnModel.moveColumns(columns,toIndex,source,finished),finished?null:{columns,toIndex}},ColumnMoveHelper2.calculateOldIndex=function(movingCols,columnModel){var gridCols=columnModel.getAllGridColumns(),indexes=sortNumerically(movingCols.map(function(col){return gridCols.indexOf(col)})),firstIndex=indexes[0],lastIndex=last(indexes),spread=lastIndex-firstIndex,gapsExist=spread!==indexes.length-1;return gapsExist?null:firstIndex},ColumnMoveHelper2.groupFragCount=function(columns){function parents(col){for(var result=[],parent=col.getOriginalParent();parent!=null;)result.push(parent),parent=parent.getOriginalParent();return result}__name(parents,"parents");for(var count=0,_loop_1=__name(function(i2){var _a,a=parents(columns[i2]),b=parents(columns[i2+1]);_a=__read$m(a.length>b.length?[a,b]:[b,a],2),a=_a[0],b=_a[1],a.forEach(function(parent){b.indexOf(parent)===-1&&count++})},"_loop_1"),i=0;i<columns.length-1;i++)_loop_1(i);return count},ColumnMoveHelper2.calculateValidMoves=function(params){var movingCols=params.movingCols,draggingRight=params.draggingRight,xPosition=params.xPosition,pinned=params.pinned,gridOptionsService=params.gridOptionsService,columnModel=params.columnModel,isMoveBlocked=gridOptionsService.get("suppressMovableColumns")||movingCols.some(function(col2){return col2.getColDef().suppressMovable});if(isMoveBlocked)return[];var allDisplayedCols=columnModel.getDisplayedColumns(pinned),allGridCols=columnModel.getAllGridColumns(),movingDisplayedCols=allDisplayedCols.filter(function(col2){return includes(movingCols,col2)}),otherDisplayedCols=allDisplayedCols.filter(function(col2){return!includes(movingCols,col2)}),otherGridCols=allGridCols.filter(function(col2){return!includes(movingCols,col2)}),displayIndex=0,availableWidth=xPosition;if(draggingRight){var widthOfMovingDisplayedCols_1=0;movingDisplayedCols.forEach(function(col2){return widthOfMovingDisplayedCols_1+=col2.getActualWidth()}),availableWidth-=widthOfMovingDisplayedCols_1}if(availableWidth>0){for(var i=0;i<otherDisplayedCols.length;i++){var col=otherDisplayedCols[i];if(availableWidth-=col.getActualWidth(),availableWidth<0)break;displayIndex++}draggingRight&&displayIndex++}var firstValidMove;if(displayIndex>0){var leftColumn=otherDisplayedCols[displayIndex-1];firstValidMove=otherGridCols.indexOf(leftColumn)+1}else firstValidMove=otherGridCols.indexOf(otherDisplayedCols[0]),firstValidMove===-1&&(firstValidMove=0);var validMoves=[firstValidMove],numberComparator=__name(function(a,b){return a-b},"numberComparator");if(draggingRight){for(var pointer=firstValidMove+1,lastIndex=allGridCols.length-1;pointer<=lastIndex;)validMoves.push(pointer),pointer++;validMoves.sort(numberComparator)}else{for(var pointer=firstValidMove,lastIndex=allGridCols.length-1,displacedCol=allGridCols[pointer];pointer<=lastIndex&&allDisplayedCols.indexOf(displacedCol)<0;)pointer++,validMoves.push(pointer),displacedCol=allGridCols[pointer];pointer=firstValidMove-1;for(var firstDisplayIndex=0;pointer>=firstDisplayIndex;)validMoves.push(pointer),pointer--;validMoves.sort(numberComparator).reverse()}return validMoves},ColumnMoveHelper2.normaliseX=function(x,pinned,fromKeyboard,gridOptionsService,ctrlsService){var eViewport=ctrlsService.getHeaderRowContainerCtrl(pinned).getViewport();if(fromKeyboard&&(x-=eViewport.getBoundingClientRect().left),gridOptionsService.get("enableRtl")){var clientWidth=eViewport.clientWidth;x=clientWidth-x}return pinned==null&&(x+=ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),x},ColumnMoveHelper2}(),__decorate$1H=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1H"),MoveColumnFeature=function(){function MoveColumnFeature2(pinned,eContainer){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=pinned,this.eContainer=eContainer,this.centerContainer=!exists(pinned)}return __name(MoveColumnFeature2,"MoveColumnFeature"),MoveColumnFeature2.prototype.init=function(){var _this=this;this.ctrlsService.whenReady(function(){_this.gridBodyCon=_this.ctrlsService.getGridBodyCtrl()})},MoveColumnFeature2.prototype.getIconName=function(){return this.pinned?DragAndDropService.ICON_PINNED:DragAndDropService.ICON_MOVE},MoveColumnFeature2.prototype.onDragEnter=function(draggingEvent){var columns=draggingEvent.dragItem.columns,dragCameFromToolPanel=draggingEvent.dragSource.type===DragSourceType.ToolPanel;if(dragCameFromToolPanel)this.setColumnsVisible(columns,!0,"uiColumnDragged");else{var visibleState_1=draggingEvent.dragItem.visibleState,visibleColumns=(columns||[]).filter(function(column){return visibleState_1[column.getId()]});this.setColumnsVisible(visibleColumns,!0,"uiColumnDragged")}this.setColumnsPinned(columns,this.pinned,"uiColumnDragged"),this.onDragging(draggingEvent,!0,!0)},MoveColumnFeature2.prototype.onDragLeave=function(){this.ensureIntervalCleared(),this.lastMovedInfo=null},MoveColumnFeature2.prototype.setColumnsVisible=function(columns,visible,source){if(columns){var allowedCols=columns.filter(function(c){return!c.getColDef().lockVisible});this.columnModel.setColumnsVisible(allowedCols,visible,source)}},MoveColumnFeature2.prototype.setColumnsPinned=function(columns,pinned,source){if(columns){var allowedCols=columns.filter(function(c){return!c.getColDef().lockPinned});this.columnModel.setColumnsPinned(allowedCols,pinned,source)}},MoveColumnFeature2.prototype.onDragStop=function(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null},MoveColumnFeature2.prototype.checkCenterForScrolling=function(xAdjustedForScroll){if(this.centerContainer){var firstVisiblePixel=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),lastVisiblePixel=firstVisiblePixel+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveLeft=xAdjustedForScroll>lastVisiblePixel-50):(this.needToMoveLeft=xAdjustedForScroll<firstVisiblePixel+50,this.needToMoveRight=xAdjustedForScroll>lastVisiblePixel-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}},MoveColumnFeature2.prototype.onDragging=function(draggingEvent,fromEnter,fakeEvent,finished){var _this=this,_a;if(draggingEvent===void 0&&(draggingEvent=this.lastDraggingEvent),fromEnter===void 0&&(fromEnter=!1),fakeEvent===void 0&&(fakeEvent=!1),finished===void 0&&(finished=!1),finished){if(this.lastMovedInfo){var _b=this.lastMovedInfo,columns=_b.columns,toIndex=_b.toIndex;ColumnMoveHelper.moveColumns(columns,toIndex,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=draggingEvent,!missing(draggingEvent.hDirection)){var mouseX=ColumnMoveHelper.normaliseX(draggingEvent.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);fromEnter||this.checkCenterForScrolling(mouseX);var hDirection=this.normaliseDirection(draggingEvent.hDirection),dragSourceType=draggingEvent.dragSource.type,allMovingColumns=((_a=draggingEvent.dragSource.getDragItem().columns)===null||_a===void 0?void 0:_a.filter(function(col){return col.getColDef().lockPinned?col.getPinned()==_this.pinned:!0}))||[],lastMovedInfo=ColumnMoveHelper.attemptMoveColumns({allMovingColumns,isFromHeader:dragSourceType===DragSourceType.HeaderCell,hDirection,xPosition:mouseX,pinned:this.pinned,fromEnter,fakeEvent,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});lastMovedInfo&&(this.lastMovedInfo=lastMovedInfo)}},MoveColumnFeature2.prototype.normaliseDirection=function(hDirection){if(this.gridOptionsService.get("enableRtl"))switch(hDirection){case HorizontalDirection.Left:return HorizontalDirection.Right;case HorizontalDirection.Right:return HorizontalDirection.Left;default:console.error("AG Grid: Unknown direction ".concat(hDirection))}else return hDirection},MoveColumnFeature2.prototype.ensureIntervalStarted=function(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.needToMoveLeft?this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_LEFT,!0):this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_RIGHT,!0))},MoveColumnFeature2.prototype.ensureIntervalCleared=function(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_MOVE))},MoveColumnFeature2.prototype.moveInterval=function(){var pixelsToMove;this.intervalCount++,pixelsToMove=10+this.intervalCount*5,pixelsToMove>100&&(pixelsToMove=100);var pixelsMoved=null,scrollFeature=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?pixelsMoved=scrollFeature.scrollHorizontally(-pixelsToMove):this.needToMoveRight&&(pixelsMoved=scrollFeature.scrollHorizontally(pixelsToMove)),pixelsMoved!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;var columns=this.lastDraggingEvent.dragItem.columns,columnsThatCanPin=columns.filter(function(c){return!c.getColDef().lockPinned});if(columnsThatCanPin.length>0&&(this.dragAndDropService.setGhostIcon(DragAndDropService.ICON_PINNED),this.failedMoveAttempts>7)){var pinType=this.needToMoveLeft?"left":"right";this.setColumnsPinned(columnsThatCanPin,pinType,"uiColumnDragged"),this.dragAndDropService.nudge()}}},__decorate$1H([Autowired("columnModel")],MoveColumnFeature2.prototype,"columnModel",void 0),__decorate$1H([Autowired("dragAndDropService")],MoveColumnFeature2.prototype,"dragAndDropService",void 0),__decorate$1H([Autowired("gridOptionsService")],MoveColumnFeature2.prototype,"gridOptionsService",void 0),__decorate$1H([Autowired("ctrlsService")],MoveColumnFeature2.prototype,"ctrlsService",void 0),__decorate$1H([PostConstruct],MoveColumnFeature2.prototype,"init",null),MoveColumnFeature2}(),__extends$1O=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1G=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1G"),BodyDropTarget=function(_super){__extends$1O(BodyDropTarget2,_super);function BodyDropTarget2(pinned,eContainer){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.eContainer=eContainer,_this}return __name(BodyDropTarget2,"BodyDropTarget"),BodyDropTarget2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){switch(_this.pinned){case"left":_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.leftRowContainerCtrl.getContainerElement()],[p.bottomLeftRowContainerCtrl.getContainerElement()],[p.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.rightRowContainerCtrl.getContainerElement()],[p.bottomRightRowContainerCtrl.getContainerElement()],[p.topRightRowContainerCtrl.getContainerElement()]];break;default:_this.eSecondaryContainers=[[p.gridBodyCtrl.getBodyViewportElement(),p.centerRowContainerCtrl.getViewportElement()],[p.bottomCenterRowContainerCtrl.getViewportElement()],[p.topCenterRowContainerCtrl.getViewportElement()]];break}})},BodyDropTarget2.prototype.isInterestedIn=function(type){return type===DragSourceType.HeaderCell||type===DragSourceType.ToolPanel&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")},BodyDropTarget2.prototype.getSecondaryContainers=function(){return this.eSecondaryContainers},BodyDropTarget2.prototype.getContainer=function(){return this.eContainer},BodyDropTarget2.prototype.init=function(){this.moveColumnFeature=this.createManagedBean(new MoveColumnFeature(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new BodyDropPivotTarget(this.pinned)),this.dragAndDropService.addDropTarget(this)},BodyDropTarget2.prototype.getIconName=function(){return this.currentDropListener.getIconName()},BodyDropTarget2.prototype.isDropColumnInPivotMode=function(draggingEvent){return this.columnModel.isPivotMode()&&draggingEvent.dragSource.type===DragSourceType.ToolPanel},BodyDropTarget2.prototype.onDragEnter=function(draggingEvent){this.currentDropListener=this.isDropColumnInPivotMode(draggingEvent)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(draggingEvent)},BodyDropTarget2.prototype.onDragLeave=function(params){this.currentDropListener.onDragLeave(params)},BodyDropTarget2.prototype.onDragging=function(params){this.currentDropListener.onDragging(params)},BodyDropTarget2.prototype.onDragStop=function(params){this.currentDropListener.onDragStop(params)},__decorate$1G([Autowired("dragAndDropService")],BodyDropTarget2.prototype,"dragAndDropService",void 0),__decorate$1G([Autowired("columnModel")],BodyDropTarget2.prototype,"columnModel",void 0),__decorate$1G([Autowired("ctrlsService")],BodyDropTarget2.prototype,"ctrlsService",void 0),__decorate$1G([PostConstruct],BodyDropTarget2.prototype,"postConstruct",null),__decorate$1G([PostConstruct],BodyDropTarget2.prototype,"init",null),BodyDropTarget2}(BeanStub),__extends$1N=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1F=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1F"),HeaderCellComp=function(_super){__extends$1N(HeaderCellComp2,_super);function HeaderCellComp2(ctrl){var _this=_super.call(this,HeaderCellComp2.TEMPLATE,ctrl)||this;return _this.headerCompVersion=0,_this.column=ctrl.getColumnGroupChild(),_this.pinned=ctrl.getPinned(),_this}return __name(HeaderCellComp2,"HeaderCellComp"),HeaderCellComp2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),setAttribute=__name(function(name,value){value!=null&&value!=""?eGui.setAttribute(name,value):eGui.removeAttribute(name)},"setAttribute");setAttribute("col-id",this.column.getColId());var compProxy={setWidth:function(width){return eGui.style.width=width},addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setAriaSort:function(sort){return sort?setAriaSort(eGui,sort):removeAriaSort(eGui)},setUserCompDetails:function(compDetails){return _this.setUserCompDetails(compDetails)},getUserCompInstance:function(){return _this.headerComp}};this.ctrl.setComp(compProxy,this.getGui(),this.eResize,this.eHeaderCompWrapper);var selectAllGui=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",selectAllGui)},HeaderCellComp2.prototype.destroyHeaderComp=function(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)},HeaderCellComp2.prototype.setUserCompDetails=function(compDetails){var _this=this;this.headerCompVersion++;var versionCopy=this.headerCompVersion;compDetails.newAgStackInstance().then(function(comp){return _this.afterCompCreated(versionCopy,comp)})},HeaderCellComp2.prototype.afterCompCreated=function(version,headerComp){if(version!=this.headerCompVersion||!this.isAlive()){this.destroyBean(headerComp);return}this.destroyHeaderComp(),this.headerComp=headerComp,this.headerCompGui=headerComp.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())},HeaderCellComp2.TEMPLATE=`<div class="ag-header-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>
        </div>`,__decorate$1F([RefSelector("eResize")],HeaderCellComp2.prototype,"eResize",void 0),__decorate$1F([RefSelector("eHeaderCompWrapper")],HeaderCellComp2.prototype,"eHeaderCompWrapper",void 0),__decorate$1F([PostConstruct],HeaderCellComp2.prototype,"postConstruct",null),__decorate$1F([PreDestroy],HeaderCellComp2.prototype,"destroyHeaderComp",null),HeaderCellComp2}(AbstractHeaderCellComp),__extends$1M=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1E=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1E"),HeaderGroupCellComp=function(_super){__extends$1M(HeaderGroupCellComp2,_super);function HeaderGroupCellComp2(ctrl){return _super.call(this,HeaderGroupCellComp2.TEMPLATE,ctrl)||this}return __name(HeaderGroupCellComp2,"HeaderGroupCellComp"),HeaderGroupCellComp2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),setAttribute=__name(function(key,value){return value!=null?eGui.setAttribute(key,value):eGui.removeAttribute(key)},"setAttribute");eGui.setAttribute("col-id",this.ctrl.getColId());var compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setResizableDisplayed:function(displayed){return setDisplayed(_this.eResize,displayed)},setWidth:function(width){return eGui.style.width=width},setAriaExpanded:function(expanded){return setAttribute("aria-expanded",expanded)},setUserCompDetails:function(details){return _this.setUserCompDetails(details)},getUserCompInstance:function(){return _this.headerGroupComp}};this.ctrl.setComp(compProxy,eGui,this.eResize)},HeaderGroupCellComp2.prototype.setUserCompDetails=function(details){var _this=this;details.newAgStackInstance().then(function(comp){return _this.afterHeaderCompCreated(comp)})},HeaderGroupCellComp2.prototype.afterHeaderCompCreated=function(headerGroupComp){var _this=this,destroyFunc=__name(function(){return _this.destroyBean(headerGroupComp)},"destroyFunc");if(!this.isAlive()){destroyFunc();return}var eGui=this.getGui(),eHeaderGroupGui=headerGroupComp.getGui();eGui.appendChild(eHeaderGroupGui),this.addDestroyFunc(destroyFunc),this.headerGroupComp=headerGroupComp,this.ctrl.setDragSource(eGui)},HeaderGroupCellComp2.TEMPLATE=`<div class="ag-header-group-cell" role="columnheader">
            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>
        </div>`,__decorate$1E([RefSelector("eResize")],HeaderGroupCellComp2.prototype,"eResize",void 0),__decorate$1E([PostConstruct],HeaderGroupCellComp2.prototype,"postConstruct",null),HeaderGroupCellComp2}(AbstractHeaderCellComp),__extends$1L=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1D=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1D"),HeaderRowType;(function(HeaderRowType2){HeaderRowType2.COLUMN_GROUP="group",HeaderRowType2.COLUMN="column",HeaderRowType2.FLOATING_FILTER="filter"})(HeaderRowType||(HeaderRowType={}));var HeaderRowComp=function(_super){__extends$1L(HeaderRowComp2,_super);function HeaderRowComp2(ctrl){var _this=_super.call(this)||this;return _this.headerComps={},_this.ctrl=ctrl,_this.setTemplate('<div class="'.concat(_this.ctrl.getHeaderRowClass(),'" role="row"></div>')),_this}return __name(HeaderRowComp2,"HeaderRowComp"),HeaderRowComp2.prototype.init=function(){var _this=this;setAriaRowIndex(this.getGui(),this.ctrl.getAriaRowIndex());var compProxy={setHeight:function(height){return _this.getGui().style.height=height},setTop:function(top){return _this.getGui().style.top=top},setHeaderCtrls:function(ctrls,forceOrder){return _this.setHeaderCtrls(ctrls,forceOrder)},setWidth:function(width){return _this.getGui().style.width=width}};this.ctrl.setComp(compProxy)},HeaderRowComp2.prototype.destroyHeaderCtrls=function(){this.setHeaderCtrls([],!1)},HeaderRowComp2.prototype.setHeaderCtrls=function(ctrls,forceOrder){var _this=this;if(this.isAlive()){var oldComps=this.headerComps;if(this.headerComps={},ctrls.forEach(function(ctrl){var id=ctrl.getInstanceId(),comp=oldComps[id];delete oldComps[id],comp==null&&(comp=_this.createHeaderComp(ctrl),_this.getGui().appendChild(comp.getGui())),_this.headerComps[id]=comp}),iterateObject(oldComps,function(id,comp){_this.getGui().removeChild(comp.getGui()),_this.destroyBean(comp)}),forceOrder){var comps=getAllValuesInObject(this.headerComps);comps.sort(function(a,b){var leftA=a.getCtrl().getColumnGroupChild().getLeft(),leftB=b.getCtrl().getColumnGroupChild().getLeft();return leftA-leftB});var elementsInOrder=comps.map(function(c){return c.getGui()});setDomChildOrder(this.getGui(),elementsInOrder)}}},HeaderRowComp2.prototype.createHeaderComp=function(headerCtrl){var result;switch(this.ctrl.getType()){case HeaderRowType.COLUMN_GROUP:result=new HeaderGroupCellComp(headerCtrl);break;case HeaderRowType.FLOATING_FILTER:result=new HeaderFilterCellComp(headerCtrl);break;default:result=new HeaderCellComp(headerCtrl);break}return this.createBean(result),result.setParentComponent(this),result},__decorate$1D([PostConstruct],HeaderRowComp2.prototype,"init",null),__decorate$1D([PreDestroy],HeaderRowComp2.prototype,"destroyHeaderCtrls",null),HeaderRowComp2}(Component),__extends$1K=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1C=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1C"),instanceIdSequence$1=0,AbstractHeaderCellCtrl=function(_super){__extends$1K(AbstractHeaderCellCtrl2,_super);function AbstractHeaderCellCtrl2(columnGroupChild,beans,parentRowCtrl){var _this=_super.call(this)||this;return _this.resizeToggleTimeout=0,_this.resizeMultiplier=1,_this.resizeFeature=null,_this.lastFocusEvent=null,_this.dragSource=null,_this.columnGroupChild=columnGroupChild,_this.parentRowCtrl=parentRowCtrl,_this.beans=beans,_this.instanceId=columnGroupChild.getUniqueId()+"-"+instanceIdSequence$1++,_this}return __name(AbstractHeaderCellCtrl2,"AbstractHeaderCellCtrl"),AbstractHeaderCellCtrl2.prototype.postConstruct=function(){var _this=this;this.addManagedPropertyListeners(["suppressHeaderFocus"],function(){return _this.refreshTabIndex()})},AbstractHeaderCellCtrl2.prototype.shouldStopEventPropagation=function(e){var _a=this.focusService.getFocusedHeader(),headerRowIndex=_a.headerRowIndex,column=_a.column;return isUserSuppressingHeaderKeyboardEvent(this.gridOptionsService,e,headerRowIndex,column)},AbstractHeaderCellCtrl2.prototype.getWrapperHasFocus=function(){var eDocument=this.gridOptionsService.getDocument(),activeEl=eDocument.activeElement;return activeEl===this.eGui},AbstractHeaderCellCtrl2.prototype.setGui=function(eGui){this.eGui=eGui,this.addDomData(),this.addManagedListener(this.beans.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()},AbstractHeaderCellCtrl2.prototype.onDisplayedColumnsChanged=function(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())},AbstractHeaderCellCtrl2.prototype.refreshFirstAndLastStyles=function(){var _a=this,comp=_a.comp,column=_a.column,beans=_a.beans;CssClassApplier.refreshFirstAndLastStyles(comp,column,beans.columnModel)},AbstractHeaderCellCtrl2.prototype.refreshAriaColIndex=function(){var _a=this,beans=_a.beans,column=_a.column,colIdx=beans.columnModel.getAriaColumnIndex(column);setAriaColIndex(this.eGui,colIdx)},AbstractHeaderCellCtrl2.prototype.addResizeAndMoveKeyboardListeners=function(){this.resizeFeature&&(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))},AbstractHeaderCellCtrl2.prototype.refreshTabIndex=function(){var suppressHeaderFocus=this.gridOptionsService.get("suppressHeaderFocus");suppressHeaderFocus?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")},AbstractHeaderCellCtrl2.prototype.onGuiKeyDown=function(e){var _a,eDocument=this.gridOptionsService.getDocument(),activeEl=eDocument.activeElement,isLeftOrRight=e.key===KeyCode.LEFT||e.key===KeyCode.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),!(activeEl!==this.eGui||!e.shiftKey&&!e.altKey)&&((this.isResizing||isLeftOrRight)&&(e.preventDefault(),e.stopImmediatePropagation()),!!isLeftOrRight)){var isLeft=e.key===KeyCode.LEFT!==this.gridOptionsService.get("enableRtl"),direction=HorizontalDirection[isLeft?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;var diff=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(diff,e.shiftKey),(_a=this.resizeFeature)===null||_a===void 0||_a.toggleColumnResizing(!0)}else this.moveHeader(direction)}},AbstractHeaderCellCtrl2.prototype.getViewportAdjustedResizeDiff=function(e){var diff=this.getResizeDiff(e),pinned=this.column.getPinned();if(pinned){var leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),rightWidth=this.pinnedWidthService.getPinnedRightWidth(),bodyWidth=getInnerWidth(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(leftWidth+rightWidth+diff>bodyWidth)if(bodyWidth>leftWidth+rightWidth)diff=bodyWidth-leftWidth-rightWidth;else return 0}return diff},AbstractHeaderCellCtrl2.prototype.getResizeDiff=function(e){var isLeft=e.key===KeyCode.LEFT!==this.gridOptionsService.get("enableRtl"),pinned=this.column.getPinned(),isRtl=this.gridOptionsService.get("enableRtl");return pinned&&isRtl!==(pinned==="right")&&(isLeft=!isLeft),(isLeft?-1:1)*this.resizeMultiplier},AbstractHeaderCellCtrl2.prototype.onGuiKeyUp=function(){var _this=this;this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(function(){var _a;(_a=_this.resizeFeature)===null||_a===void 0||_a.toggleColumnResizing(!1)},150))},AbstractHeaderCellCtrl2.prototype.handleKeyDown=function(e){var wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:wrapperHasFocus&&e.preventDefault()}},AbstractHeaderCellCtrl2.prototype.addDomData=function(){var _this=this,key=AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,key,this),this.addDestroyFunc(function(){return _this.gridOptionsService.setDomData(_this.eGui,key,null)})},AbstractHeaderCellCtrl2.prototype.getGui=function(){return this.eGui},AbstractHeaderCellCtrl2.prototype.focus=function(event){return this.eGui?(this.lastFocusEvent=event||null,this.eGui.focus(),!0):!1},AbstractHeaderCellCtrl2.prototype.getRowIndex=function(){return this.parentRowCtrl.getRowIndex()},AbstractHeaderCellCtrl2.prototype.getParentRowCtrl=function(){return this.parentRowCtrl},AbstractHeaderCellCtrl2.prototype.getPinned=function(){return this.parentRowCtrl.getPinned()},AbstractHeaderCellCtrl2.prototype.getInstanceId=function(){return this.instanceId},AbstractHeaderCellCtrl2.prototype.getColumnGroupChild=function(){return this.columnGroupChild},AbstractHeaderCellCtrl2.prototype.removeDragSource=function(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)},AbstractHeaderCellCtrl2.prototype.handleContextMenuMouseEvent=function(mouseEvent,touchEvent,column){var event=mouseEvent??touchEvent;this.gridOptionsService.get("preventDefaultOnContextMenu")&&event.preventDefault();var columnToUse=column instanceof Column?column:void 0;this.menuService.isHeaderContextMenuEnabled(columnToUse)&&this.menuService.showHeaderContextMenu(columnToUse,mouseEvent,touchEvent),this.dispatchColumnMouseEvent(Events.EVENT_COLUMN_HEADER_CONTEXT_MENU,column)},AbstractHeaderCellCtrl2.prototype.dispatchColumnMouseEvent=function(eventType,column){var event={type:eventType,column};this.eventService.dispatchEvent(event)},AbstractHeaderCellCtrl2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null},AbstractHeaderCellCtrl2.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",__decorate$1C([Autowired("pinnedWidthService")],AbstractHeaderCellCtrl2.prototype,"pinnedWidthService",void 0),__decorate$1C([Autowired("focusService")],AbstractHeaderCellCtrl2.prototype,"focusService",void 0),__decorate$1C([Autowired("userComponentFactory")],AbstractHeaderCellCtrl2.prototype,"userComponentFactory",void 0),__decorate$1C([Autowired("ctrlsService")],AbstractHeaderCellCtrl2.prototype,"ctrlsService",void 0),__decorate$1C([Autowired("dragAndDropService")],AbstractHeaderCellCtrl2.prototype,"dragAndDropService",void 0),__decorate$1C([Autowired("menuService")],AbstractHeaderCellCtrl2.prototype,"menuService",void 0),__decorate$1C([PostConstruct],AbstractHeaderCellCtrl2.prototype,"postConstruct",null),AbstractHeaderCellCtrl2}(BeanStub),__extends$1J=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1B=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1B"),SetLeftFeature=function(_super){__extends$1J(SetLeftFeature2,_super);function SetLeftFeature2(columnOrGroup,eCell,beans,colsSpanning){var _this=_super.call(this)||this;return _this.columnOrGroup=columnOrGroup,_this.eCell=eCell,_this.ariaEl=_this.eCell.querySelector("[role=columnheader]")||_this.eCell,_this.colsSpanning=colsSpanning,_this.beans=beans,_this}return __name(SetLeftFeature2,"SetLeftFeature"),SetLeftFeature2.prototype.setColsSpanning=function(colsSpanning){this.colsSpanning=colsSpanning,this.onLeftChanged()},SetLeftFeature2.prototype.getColumnOrGroup=function(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?last(this.colsSpanning):this.columnOrGroup},SetLeftFeature2.prototype.postConstruct=function(){this.addManagedListener(this.columnOrGroup,Column.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))},SetLeftFeature2.prototype.setLeftFirstTime=function(){var suppressMoveAnimation=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),oldLeftExists=exists(this.columnOrGroup.getOldLeft()),animateColumnMove=this.beans.columnAnimationService.isActive()&&oldLeftExists&&!suppressMoveAnimation;animateColumnMove?this.animateInLeft():this.onLeftChanged()},SetLeftFeature2.prototype.animateInLeft=function(){var _this=this,colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft(),oldLeft=colOrGroup.getOldLeft(),oldActualLeft=this.modifyLeftForPrintLayout(colOrGroup,oldLeft),actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left);this.setLeft(oldActualLeft),this.actualLeft=actualLeft,this.beans.columnAnimationService.executeNextVMTurn(function(){_this.actualLeft===actualLeft&&_this.setLeft(actualLeft)})},SetLeftFeature2.prototype.onLeftChanged=function(){var colOrGroup=this.getColumnOrGroup(),left=colOrGroup.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(colOrGroup,left),this.setLeft(this.actualLeft)},SetLeftFeature2.prototype.modifyLeftForPrintLayout=function(colOrGroup,leftPosition){var printLayout=this.beans.gridOptionsService.isDomLayout("print");if(!printLayout||colOrGroup.getPinned()==="left")return leftPosition;var leftWidth=this.beans.columnModel.getDisplayedColumnsLeftWidth();if(colOrGroup.getPinned()==="right"){var bodyWidth=this.beans.columnModel.getBodyContainerWidth();return leftWidth+bodyWidth+leftPosition}return leftWidth+leftPosition},SetLeftFeature2.prototype.setLeft=function(value){if(exists(value)&&(this.eCell.style.left="".concat(value,"px")),this.columnOrGroup instanceof Column)this.columnOrGroup;else{var columnGroup=this.columnOrGroup,children=columnGroup.getLeafColumns();if(!children.length)return;children.length>1&&setAriaColSpan(this.ariaEl,children.length),children[0]}},__decorate$1B([PostConstruct],SetLeftFeature2.prototype,"postConstruct",null),SetLeftFeature2}(BeanStub),__extends$1I=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1A=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1A"),HoverFeature=function(_super){__extends$1I(HoverFeature2,_super);function HoverFeature2(columns,element){var _this=_super.call(this)||this;return _this.columns=columns,_this.element=element,_this}return __name(HoverFeature2,"HoverFeature"),HoverFeature2.prototype.postConstruct=function(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()},HoverFeature2.prototype.addMouseHoverListeners=function(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))},HoverFeature2.prototype.onMouseOut=function(){this.columnHoverService.clearMouseOver()},HoverFeature2.prototype.onMouseOver=function(){this.columnHoverService.setMouseOver(this.columns)},__decorate$1A([Autowired("columnHoverService")],HoverFeature2.prototype,"columnHoverService",void 0),__decorate$1A([PostConstruct],HoverFeature2.prototype,"postConstruct",null),HoverFeature2}(BeanStub),__extends$1H=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),HeaderFilterCellCtrl=function(_super){__extends$1H(HeaderFilterCellCtrl2,_super);function HeaderFilterCellCtrl2(column,beans,parentRowCtrl){var _this=_super.call(this,column,beans,parentRowCtrl)||this;return _this.iconCreated=!1,_this.column=column,_this}return __name(HeaderFilterCellCtrl2,"HeaderFilterCellCtrl"),HeaderFilterCellCtrl2.prototype.setComp=function(comp,eGui,eButtonShowMainFilter,eFloatingFilterBody){this.comp=comp,this.eButtonShowMainFilter=eButtonShowMainFilter,this.eFloatingFilterBody=eFloatingFilterBody,this.setGui(eGui),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,Column.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))},HeaderFilterCellCtrl2.prototype.resizeHeader=function(){},HeaderFilterCellCtrl2.prototype.moveHeader=function(){},HeaderFilterCellCtrl2.prototype.setupActive=function(){var colDef=this.column.getColDef(),filterExists=!!colDef.filter,floatingFilterExists=!!colDef.floatingFilter;this.active=filterExists&&floatingFilterExists},HeaderFilterCellCtrl2.prototype.setupUi=function(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!(!this.active||this.iconCreated)){var eMenuIcon=createIconNoSpan("filter",this.gridOptionsService,this.column);eMenuIcon&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(eMenuIcon))}},HeaderFilterCellCtrl2.prototype.setupFocus=function(){this.createManagedBean(new ManagedFocusFeature(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))},HeaderFilterCellCtrl2.prototype.setupAria=function(){var localeTextFunc=this.localeService.getLocaleTextFunc();setAriaLabel(this.eButtonShowMainFilter,localeTextFunc("ariaFilterMenuOpen","Open Filter Menu"))},HeaderFilterCellCtrl2.prototype.onTabKeyDown=function(e){var eDocument=this.gridOptionsService.getDocument(),activeEl=eDocument.activeElement,wrapperHasFocus=activeEl===this.eGui;if(!wrapperHasFocus){var nextFocusableEl=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(nextFocusableEl){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),nextFocusableEl.focus();return}var nextFocusableColumn=this.findNextColumnWithFloatingFilter(e.shiftKey);nextFocusableColumn&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:nextFocusableColumn},event:e})&&e.preventDefault()}},HeaderFilterCellCtrl2.prototype.findNextColumnWithFloatingFilter=function(backwards){var columnModel=this.beans.columnModel,nextCol=this.column;do if(nextCol=backwards?columnModel.getDisplayedColBefore(nextCol):columnModel.getDisplayedColAfter(nextCol),!nextCol)break;while(!nextCol.getColDef().filter||!nextCol.getColDef().floatingFilter);return nextCol},HeaderFilterCellCtrl2.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e);var wrapperHasFocus=this.getWrapperHasFocus();switch(e.key){case KeyCode.UP:case KeyCode.DOWN:wrapperHasFocus||e.preventDefault();case KeyCode.LEFT:case KeyCode.RIGHT:if(wrapperHasFocus)return;e.stopPropagation();case KeyCode.ENTER:wrapperHasFocus&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case KeyCode.ESCAPE:wrapperHasFocus||this.eGui.focus()}},HeaderFilterCellCtrl2.prototype.onFocusIn=function(e){var isRelatedWithin=this.eGui.contains(e.relatedTarget);if(!isRelatedWithin){var notFromHeaderWrapper=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),fromWithinHeader=!!e.relatedTarget&&isElementChildOfClass(e.relatedTarget,"ag-floating-filter");if(notFromHeaderWrapper&&fromWithinHeader&&e.target===this.eGui){var lastFocusEvent=this.lastFocusEvent,fromTab=!!(lastFocusEvent&&lastFocusEvent.key===KeyCode.TAB);if(lastFocusEvent&&fromTab){var shouldFocusLast=lastFocusEvent.shiftKey;this.focusService.focusInto(this.eGui,shouldFocusLast)}}var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}},HeaderFilterCellCtrl2.prototype.setupHover=function(){var _this=this;this.createManagedBean(new HoverFeature([this.column],this.eGui));var listener=__name(function(){if(_this.gridOptionsService.get("columnHoverHighlight")){var hovered=_this.beans.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",hovered)}},"listener");this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderFilterCellCtrl2.prototype.setupLeft=function(){var setLeftFeature=new SetLeftFeature(this.column,this.eGui,this.beans);this.createManagedBean(setLeftFeature)},HeaderFilterCellCtrl2.prototype.setupFilterButton=function(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()},HeaderFilterCellCtrl2.prototype.setupUserComp=function(){var _this=this;if(this.active){var compDetails=this.beans.filterManager.getFloatingFilterCompDetails(this.column,function(){return _this.showParentFilter()});compDetails&&this.setCompDetails(compDetails)}},HeaderFilterCellCtrl2.prototype.setCompDetails=function(compDetails){this.userCompDetails=compDetails,this.comp.setCompDetails(compDetails)},HeaderFilterCellCtrl2.prototype.showParentFilter=function(){var eventSource=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:eventSource,containerType:"floatingFilter",positionBy:"button"})},HeaderFilterCellCtrl2.prototype.setupSyncWithFilter=function(){var _this=this;if(this.active){var filterManager=this.beans.filterManager,syncWithFilter=__name(function(filterChangedEvent){var compPromise=_this.comp.getFloatingFilterComp();compPromise&&compPromise.then(function(comp){if(comp){var parentModel=filterManager.getCurrentFloatingFilterParentModel(_this.column);comp.onParentModelChanged(parentModel,filterChangedEvent)}})},"syncWithFilter");this.destroySyncListener=this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,syncWithFilter),filterManager.isFilterActive(this.column)&&syncWithFilter(null)}},HeaderFilterCellCtrl2.prototype.setupWidth=function(){var _this=this,listener=__name(function(){var width="".concat(_this.column.getActualWidth(),"px");_this.comp.setWidth(width)},"listener");this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderFilterCellCtrl2.prototype.setupFilterChangedListener=function(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,Column.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())},HeaderFilterCellCtrl2.prototype.updateFilterButton=function(){if(!this.suppressFilterButton&&this.comp){var isFilterAllowed=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(isFilterAllowed),this.highlightFilterButtonWhenActive&&isFilterAllowed&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}},HeaderFilterCellCtrl2.prototype.onColDefChanged=function(){var _this=this,_a,_b,wasActive=this.active;this.setupActive();var becomeActive=!wasActive&&this.active;wasActive&&!this.active&&((_a=this.destroySyncListener)===null||_a===void 0||_a.call(this),(_b=this.destroyFilterChangedListener)===null||_b===void 0||_b.call(this));var newCompDetails=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,function(){return _this.showParentFilter()}):null,compPromise=this.comp.getFloatingFilterComp();!compPromise||!newCompDetails?this.updateCompDetails(newCompDetails,becomeActive):compPromise.then(function(compInstance){var _a2;!compInstance||_this.beans.filterManager.areFilterCompsDifferent((_a2=_this.userCompDetails)!==null&&_a2!==void 0?_a2:null,newCompDetails)?_this.updateCompDetails(newCompDetails,becomeActive):_this.updateFloatingFilterParams(newCompDetails)})},HeaderFilterCellCtrl2.prototype.updateCompDetails=function(compDetails,becomeActive){this.isAlive()&&(this.setCompDetails(compDetails),this.setupFilterButton(),this.setupUi(),becomeActive&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))},HeaderFilterCellCtrl2.prototype.updateFloatingFilterParams=function(userCompDetails){var _a;if(userCompDetails){var params=userCompDetails.params;(_a=this.comp.getFloatingFilterComp())===null||_a===void 0||_a.then(function(floatingFilter){var hasRefreshed=!1;if(floatingFilter!=null&&floatingFilter.refresh&&typeof floatingFilter.refresh=="function"){var result=floatingFilter.refresh(params);result!==null&&(hasRefreshed=!0)}if(!hasRefreshed&&(floatingFilter!=null&&floatingFilter.onParamsUpdated)&&typeof floatingFilter.onParamsUpdated=="function"){var result=floatingFilter.onParamsUpdated(params);result!==null&&warnOnce("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}})}},HeaderFilterCellCtrl2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null},HeaderFilterCellCtrl2}(AbstractHeaderCellCtrl),__extends$1G=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1z=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1z"),ResizeFeature=function(_super){__extends$1G(ResizeFeature2,_super);function ResizeFeature2(pinned,column,eResize,comp,ctrl){var _this=_super.call(this)||this;return _this.pinned=pinned,_this.column=column,_this.eResize=eResize,_this.comp=comp,_this.ctrl=ctrl,_this}return __name(ResizeFeature2,"ResizeFeature"),ResizeFeature2.prototype.postConstruct=function(){var _this=this,destroyResizeFuncs=[],canResize,canAutosize,addResize=__name(function(){if(setDisplayed(_this.eResize,canResize),!!canResize){var finishedWithResizeFunc=_this.horizontalResizeService.addResizeBar({eResizeBar:_this.eResize,onResizeStart:_this.onResizeStart.bind(_this),onResizing:_this.onResizing.bind(_this,!1),onResizeEnd:_this.onResizing.bind(_this,!0)});if(destroyResizeFuncs.push(finishedWithResizeFunc),canAutosize){var skipHeaderOnAutoSize_1=_this.gridOptionsService.get("skipHeaderOnAutoSize"),autoSizeColListener_1=__name(function(){_this.columnModel.autoSizeColumn(_this.column,"uiColumnResized",skipHeaderOnAutoSize_1)},"autoSizeColListener_1");_this.eResize.addEventListener("dblclick",autoSizeColListener_1);var touchListener_1=new TouchListener(_this.eResize);touchListener_1.addEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),destroyResizeFuncs.push(function(){_this.eResize.removeEventListener("dblclick",autoSizeColListener_1),touchListener_1.removeEventListener(TouchListener.EVENT_DOUBLE_TAP,autoSizeColListener_1),touchListener_1.destroy()})}}},"addResize"),removeResize=__name(function(){destroyResizeFuncs.forEach(function(f){return f()}),destroyResizeFuncs.length=0},"removeResize"),refresh=__name(function(){var resize=_this.column.isResizable(),autoSize=!_this.gridOptionsService.get("suppressAutoSize")&&!_this.column.getColDef().suppressAutoSize,propertyChange=resize!==canResize||autoSize!==canAutosize;propertyChange&&(canResize=resize,canAutosize=autoSize,removeResize(),addResize())},"refresh");refresh(),this.addDestroyFunc(removeResize),this.ctrl.addRefreshFunction(refresh)},ResizeFeature2.prototype.onResizing=function(finished,resizeAmount){var _a=this,key=_a.column,lastResizeAmount=_a.lastResizeAmount,resizeStartWidth=_a.resizeStartWidth,resizeAmountNormalised=this.normaliseResizeAmount(resizeAmount),newWidth=resizeStartWidth+resizeAmountNormalised,columnWidths=[{key,newWidth}];if(this.column.getPinned()){var leftWidth=this.pinnedWidthService.getPinnedLeftWidth(),rightWidth=this.pinnedWidthService.getPinnedRightWidth(),bodyWidth=getInnerWidth(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(leftWidth+rightWidth+(resizeAmountNormalised-lastResizeAmount)>bodyWidth)return}this.lastResizeAmount=resizeAmountNormalised,this.columnModel.setColumnWidths(columnWidths,this.resizeWithShiftKey,finished,"uiColumnResized"),finished&&this.toggleColumnResizing(!1)},ResizeFeature2.prototype.onResizeStart=function(shiftKey){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=shiftKey,this.toggleColumnResizing(!0)},ResizeFeature2.prototype.toggleColumnResizing=function(resizing){this.comp.addOrRemoveCssClass("ag-column-resizing",resizing)},ResizeFeature2.prototype.normaliseResizeAmount=function(dragChange){var result=dragChange,notPinningLeft=this.pinned!=="left",pinningRight=this.pinned==="right";return this.gridOptionsService.get("enableRtl")?notPinningLeft&&(result*=-1):pinningRight&&(result*=-1),result},__decorate$1z([Autowired("horizontalResizeService")],ResizeFeature2.prototype,"horizontalResizeService",void 0),__decorate$1z([Autowired("pinnedWidthService")],ResizeFeature2.prototype,"pinnedWidthService",void 0),__decorate$1z([Autowired("ctrlsService")],ResizeFeature2.prototype,"ctrlsService",void 0),__decorate$1z([Autowired("columnModel")],ResizeFeature2.prototype,"columnModel",void 0),__decorate$1z([PostConstruct],ResizeFeature2.prototype,"postConstruct",null),ResizeFeature2}(BeanStub),__extends$1F=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1y=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1y"),SelectAllFeature=function(_super){__extends$1F(SelectAllFeature2,_super);function SelectAllFeature2(column){var _this=_super.call(this)||this;return _this.cbSelectAllVisible=!1,_this.processingEventFromCheckbox=!1,_this.column=column,_this}return __name(SelectAllFeature2,"SelectAllFeature"),SelectAllFeature2.prototype.onSpaceKeyDown=function(e){var checkbox=this.cbSelectAll,eDocument=this.gridOptionsService.getDocument();checkbox.isDisplayed()&&!checkbox.getGui().contains(eDocument.activeElement)&&(e.preventDefault(),checkbox.setValue(!checkbox.getValue()))},SelectAllFeature2.prototype.getCheckboxGui=function(){return this.cbSelectAll.getGui()},SelectAllFeature2.prototype.setComp=function(ctrl){this.headerCellCtrl=ctrl,this.cbSelectAll=this.createManagedBean(new AgCheckbox),this.cbSelectAll.addCssClass("ag-header-select-all"),setAriaRole(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,Events.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),setAriaHidden(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()},SelectAllFeature2.prototype.onNewColumnsLoaded=function(){this.showOrHideSelectAll()},SelectAllFeature2.prototype.onDisplayedColumnsChanged=function(){this.isAlive()&&this.showOrHideSelectAll()},SelectAllFeature2.prototype.showOrHideSelectAll=function(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()},SelectAllFeature2.prototype.onModelChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature2.prototype.onSelectionChanged=function(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()},SelectAllFeature2.prototype.updateStateOfCheckbox=function(){if(!this.processingEventFromCheckbox){this.processingEventFromCheckbox=!0;var allSelected=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(allSelected);var hasNodesToSelect=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!hasNodesToSelect),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}},SelectAllFeature2.prototype.refreshSelectAllLabel=function(){var translate=this.localeService.getLocaleTextFunc(),checked=this.cbSelectAll.getValue(),ariaStatus=checked?translate("ariaChecked","checked"):translate("ariaUnchecked","unchecked"),ariaLabel=translate("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll","".concat(ariaLabel," (").concat(ariaStatus,")")):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel("".concat(ariaLabel," (").concat(ariaStatus,")")),this.headerCellCtrl.announceAriaDescription()},SelectAllFeature2.prototype.checkSelectionType=function(feature){var isMultiSelect=this.gridOptionsService.get("rowSelection")==="multiple";return isMultiSelect?!0:(console.warn("AG Grid: ".concat(feature," is only available if using 'multiple' rowSelection.")),!1)},SelectAllFeature2.prototype.checkRightRowModelType=function(feature){var rowModelType=this.rowModel.getType(),rowModelMatches=rowModelType==="clientSide"||rowModelType==="serverSide";return rowModelMatches?!0:(console.warn("AG Grid: ".concat(feature," is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ").concat(rowModelType,".")),!1)},SelectAllFeature2.prototype.onCbSelectAll=function(){if(!this.processingEventFromCheckbox&&this.cbSelectAllVisible){var value=this.cbSelectAll.getValue(),justFiltered=this.isFilteredOnly(),justCurrentPage=this.isCurrentPageOnly(),source="uiSelectAll";justCurrentPage?source="uiSelectAllCurrentPage":justFiltered&&(source="uiSelectAllFiltered");var params={source,justFiltered,justCurrentPage};value?this.selectionService.selectAllRowNodes(params):this.selectionService.deselectAllRowNodes(params)}},SelectAllFeature2.prototype.isCheckboxSelection=function(){var result=this.column.getColDef().headerCheckboxSelection;if(typeof result=="function"){var func=result,params=this.gridOptionsService.addGridCommonParams({column:this.column,colDef:this.column.getColDef()});result=func(params)}return result?this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection"):!1},SelectAllFeature2.prototype.isFilteredOnly=function(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly},SelectAllFeature2.prototype.isCurrentPageOnly=function(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly},__decorate$1y([Autowired("rowModel")],SelectAllFeature2.prototype,"rowModel",void 0),__decorate$1y([Autowired("selectionService")],SelectAllFeature2.prototype,"selectionService",void 0),SelectAllFeature2}(BeanStub),__extends$1E=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),HeaderCellCtrl=function(_super){__extends$1E(HeaderCellCtrl2,_super);function HeaderCellCtrl2(column,beans,parentRowCtrl){var _this=_super.call(this,column,beans,parentRowCtrl)||this;return _this.refreshFunctions=[],_this.userHeaderClasses=new Set,_this.ariaDescriptionProperties=new Map,_this.column=column,_this}return __name(HeaderCellCtrl2,"HeaderCellCtrl"),HeaderCellCtrl2.prototype.setComp=function(comp,eGui,eResize,eHeaderCompWrapper){var _this=this;this.comp=comp,this.setGui(eGui),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(eHeaderCompWrapper),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new ResizeFeature(this.getPinned(),this.column,eResize,comp,this)),this.createManagedBean(new HoverFeature([this.column],eGui)),this.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:function(e){return _this.shouldStopEventPropagation(e)},onTabKeyDown:function(){return null},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,Column.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))},HeaderCellCtrl2.prototype.resizeHeader=function(delta,shiftKey){var _a,_b;if(this.column.isResizable()){var actualWidth=this.column.getActualWidth(),minWidth=(_a=this.column.getMinWidth())!==null&&_a!==void 0?_a:0,maxWidth=(_b=this.column.getMaxWidth())!==null&&_b!==void 0?_b:Number.MAX_SAFE_INTEGER,newWidth=Math.min(Math.max(actualWidth+delta,minWidth),maxWidth);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth}],shiftKey,!0,"uiColumnResized")}},HeaderCellCtrl2.prototype.moveHeader=function(hDirection){var _a=this,eGui=_a.eGui,column=_a.column,gridOptionsService=_a.gridOptionsService,ctrlsService=_a.ctrlsService,pinned=this.getPinned(),left=eGui.getBoundingClientRect().left,width=column.getActualWidth(),isRtl=gridOptionsService.get("enableRtl"),isLeft=hDirection===HorizontalDirection.Left!==isRtl,xPosition=ColumnMoveHelper.normaliseX(isLeft?left-20:left+width+20,pinned,!0,gridOptionsService,ctrlsService);ColumnMoveHelper.attemptMoveColumns({allMovingColumns:[column],isFromHeader:!0,hDirection,xPosition,pinned,fromEnter:!1,fakeEvent:!1,gridOptionsService,columnModel:this.beans.columnModel}),ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(column,"auto")},HeaderCellCtrl2.prototype.setupUserComp=function(){var compDetails=this.lookupUserCompDetails();this.setCompDetails(compDetails)},HeaderCellCtrl2.prototype.setCompDetails=function(compDetails){this.userCompDetails=compDetails,this.comp.setUserCompDetails(compDetails)},HeaderCellCtrl2.prototype.lookupUserCompDetails=function(){var params=this.createParams(),colDef=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(colDef,params)},HeaderCellCtrl2.prototype.createParams=function(){var _this=this,params=this.gridOptionsService.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:function(buttonElement){_this.menuService.showColumnMenu({column:_this.column,buttonElement,positionBy:"button"})},showColumnMenuAfterMouseClick:function(mouseEvent){_this.menuService.showColumnMenu({column:_this.column,mouseEvent,positionBy:"mouse"})},showFilter:function(buttonElement){_this.menuService.showFilterMenu({column:_this.column,buttonElement,containerType:"columnFilter",positionBy:"button"})},progressSort:function(multiSort){_this.beans.sortController.progressSort(_this.column,!!multiSort,"uiColumnSorted")},setSort:function(sort,multiSort){_this.beans.sortController.setSortForColumn(_this.column,sort,!!multiSort,"uiColumnSorted")},eGridHeader:this.getGui()});return params},HeaderCellCtrl2.prototype.setupSelectAll=function(){this.selectAllFeature=this.createManagedBean(new SelectAllFeature(this.column)),this.selectAllFeature.setComp(this)},HeaderCellCtrl2.prototype.getSelectAllGui=function(){return this.selectAllFeature.getCheckboxGui()},HeaderCellCtrl2.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e),e.key===KeyCode.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===KeyCode.ENTER&&this.onEnterKeyDown(e),e.key===KeyCode.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)},HeaderCellCtrl2.prototype.onEnterKeyDown=function(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){var multiSort=e.shiftKey;this.beans.sortController.progressSort(this.column,multiSort,"uiColumnSorted")}},HeaderCellCtrl2.prototype.showMenuOnKeyPress=function(e,isFilterShortcut){var headerComp=this.comp.getUserCompInstance();!headerComp||!(headerComp instanceof HeaderComp)||headerComp.onMenuKeyboardShortcut(isFilterShortcut)&&e.preventDefault()},HeaderCellCtrl2.prototype.onFocusIn=function(e){if(!this.getGui().contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.focusService.setFocusedHeader(rowIndex,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)},HeaderCellCtrl2.prototype.onFocusOut=function(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)},HeaderCellCtrl2.prototype.setupTooltip=function(){var _this=this,tooltipCtrl={getColumn:function(){return _this.column},getColDef:function(){return _this.column.getColDef()},getGui:function(){return _this.eGui},getLocation:function(){return"header"},getTooltipValue:function(){var res=_this.column.getColDef().headerTooltip;return res}},tooltipFeature=this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans));tooltipFeature.setComp(this.eGui),this.refreshFunctions.push(function(){return tooltipFeature.refreshToolTip()})},HeaderCellCtrl2.prototype.setupClassesFromColDef=function(){var _this=this,refreshHeaderClasses=__name(function(){var colDef=_this.column.getColDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colDef,_this.gridOptionsService,_this.column,null),oldClasses=_this.userHeaderClasses;_this.userHeaderClasses=new Set(classes),classes.forEach(function(c){oldClasses.has(c)?oldClasses.delete(c):_this.comp.addOrRemoveCssClass(c,!0)}),oldClasses.forEach(function(c){return _this.comp.addOrRemoveCssClass(c,!1)})},"refreshHeaderClasses");this.refreshFunctions.push(refreshHeaderClasses),refreshHeaderClasses()},HeaderCellCtrl2.prototype.setDragSource=function(eSource){var _this=this;if(this.dragSourceElement=eSource,this.removeDragSource(),!(!eSource||!this.draggable)){var _a=this,column=_a.column,beans=_a.beans,displayName=_a.displayName,dragAndDropService=_a.dragAndDropService,gridOptionsService=_a.gridOptionsService,columnModel=beans.columnModel,hideColumnOnExit=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),dragSource=this.dragSource={type:DragSourceType.HeaderCell,eElement:eSource,getDefaultIconName:function(){return hideColumnOnExit?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED},getDragItem:function(){return _this.createDragItem(column)},dragItemName:displayName,onDragStarted:function(){hideColumnOnExit=!gridOptionsService.get("suppressDragLeaveHidesColumns"),column.setMoving(!0,"uiColumnMoved")},onDragStopped:function(){return column.setMoving(!1,"uiColumnMoved")},onGridEnter:function(dragItem){var _a2;if(hideColumnOnExit){var unlockedColumns=((_a2=dragItem==null?void 0:dragItem.columns)===null||_a2===void 0?void 0:_a2.filter(function(col){return!col.getColDef().lockVisible}))||[];columnModel.setColumnsVisible(unlockedColumns,!0,"uiColumnMoved")}},onGridExit:function(dragItem){var _a2;if(hideColumnOnExit){var unlockedColumns=((_a2=dragItem==null?void 0:dragItem.columns)===null||_a2===void 0?void 0:_a2.filter(function(col){return!col.getColDef().lockVisible}))||[];columnModel.setColumnsVisible(unlockedColumns,!1,"uiColumnMoved")}}};dragAndDropService.addDragSource(dragSource,!0)}},HeaderCellCtrl2.prototype.createDragItem=function(column){var visibleState={};return visibleState[column.getId()]=column.isVisible(),{columns:[column],visibleState}},HeaderCellCtrl2.prototype.updateState=function(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()},HeaderCellCtrl2.prototype.addRefreshFunction=function(func){this.refreshFunctions.push(func)},HeaderCellCtrl2.prototype.refresh=function(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(function(f){return f()})},HeaderCellCtrl2.prototype.refreshHeaderComp=function(){var newCompDetails=this.lookupUserCompDetails(),compInstance=this.comp.getUserCompInstance(),attemptRefresh=compInstance!=null&&this.userCompDetails.componentClass==newCompDetails.componentClass,headerCompRefreshed=attemptRefresh?this.attemptHeaderCompRefresh(newCompDetails.params):!1;headerCompRefreshed?this.setDragSource(this.dragSourceElement):this.setCompDetails(newCompDetails)},HeaderCellCtrl2.prototype.attemptHeaderCompRefresh=function(params){var headerComp=this.comp.getUserCompInstance();if(!headerComp||!headerComp.refresh)return!1;var res=headerComp.refresh(params);return res},HeaderCellCtrl2.prototype.calculateDisplayName=function(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)},HeaderCellCtrl2.prototype.checkDisplayName=function(){this.displayName!==this.calculateDisplayName()&&this.refresh()},HeaderCellCtrl2.prototype.workOutDraggable=function(){var colDef=this.column.getColDef(),isSuppressMovableColumns=this.gridOptionsService.get("suppressMovableColumns"),colCanMove=!isSuppressMovableColumns&&!colDef.suppressMovable&&!colDef.lockPosition;return!!colCanMove||!!colDef.enableRowGroup||!!colDef.enablePivot},HeaderCellCtrl2.prototype.onColumnRowGroupChanged=function(){this.checkDisplayName()},HeaderCellCtrl2.prototype.onColumnPivotChanged=function(){this.checkDisplayName()},HeaderCellCtrl2.prototype.onColumnValueChanged=function(){this.checkDisplayName()},HeaderCellCtrl2.prototype.setupWidth=function(){var _this=this,listener=__name(function(){var columnWidth=_this.column.getActualWidth();_this.comp.setWidth("".concat(columnWidth,"px"))},"listener");this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupMovingCss=function(){var _this=this,listener=__name(function(){_this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.column.isMoving())},"listener");this.addManagedListener(this.column,Column.EVENT_MOVING_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupMenuClass=function(){var _this=this,listener=__name(function(){_this.comp.addOrRemoveCssClass("ag-column-menu-visible",_this.column.isMenuVisible())},"listener");this.addManagedListener(this.column,Column.EVENT_MENU_VISIBLE_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupSortableClass=function(){var _this=this,updateSortableCssClass=__name(function(){_this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!_this.sortable)},"updateSortableCssClass");updateSortableCssClass(),this.addRefreshFunction(updateSortableCssClass),this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))},HeaderCellCtrl2.prototype.setupFilterClass=function(){var _this=this,listener=__name(function(){var isFilterActive=_this.column.isFilterActive();_this.comp.addOrRemoveCssClass("ag-header-cell-filtered",isFilterActive),_this.refreshAria()},"listener");this.addManagedListener(this.column,Column.EVENT_FILTER_ACTIVE_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.setupWrapTextClass=function(){var _this=this,listener=__name(function(){var wrapText=!!_this.column.getColDef().wrapHeaderText;_this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",wrapText)},"listener");listener(),this.addRefreshFunction(listener)},HeaderCellCtrl2.prototype.onDisplayedColumnsChanged=function(){_super.prototype.onDisplayedColumnsChanged.call(this),this.isAlive()&&this.onHeaderHeightChanged()},HeaderCellCtrl2.prototype.onHeaderHeightChanged=function(){this.refreshSpanHeaderHeight()},HeaderCellCtrl2.prototype.refreshSpanHeaderHeight=function(){var _a=this,eGui=_a.eGui,column=_a.column,comp=_a.comp,beans=_a.beans;if(!column.isSpanHeaderHeight()){eGui.style.removeProperty("top"),eGui.style.removeProperty("height"),comp.addOrRemoveCssClass("ag-header-span-height",!1),comp.addOrRemoveCssClass("ag-header-span-total",!1);return}var _b=this.column.getColumnGroupPaddingInfo(),numberOfParents=_b.numberOfParents,isSpanningTotal=_b.isSpanningTotal;comp.addOrRemoveCssClass("ag-header-span-height",numberOfParents>0);var columnModel=beans.columnModel,headerHeight=columnModel.getColumnHeaderRowHeight();if(numberOfParents===0){comp.addOrRemoveCssClass("ag-header-span-total",!1),eGui.style.setProperty("top","0px"),eGui.style.setProperty("height","".concat(headerHeight,"px"));return}comp.addOrRemoveCssClass("ag-header-span-total",isSpanningTotal);var pivotMode=columnModel.isPivotMode(),groupHeaderHeight=pivotMode?columnModel.getPivotGroupHeaderHeight():columnModel.getGroupHeaderHeight(),extraHeight=numberOfParents*groupHeaderHeight;eGui.style.setProperty("top","".concat(-extraHeight,"px")),eGui.style.setProperty("height","".concat(headerHeight+extraHeight,"px"))},HeaderCellCtrl2.prototype.setupAutoHeight=function(wrapperElement){var _this=this,_a=this.beans,columnModel=_a.columnModel,resizeObserverService=_a.resizeObserverService,measureHeight=__name(function(timesCalled){if(_this.isAlive()){var _a2=getElementSize(_this.getGui()),paddingTop=_a2.paddingTop,paddingBottom=_a2.paddingBottom,borderBottomWidth=_a2.borderBottomWidth,borderTopWidth=_a2.borderTopWidth,extraHeight=paddingTop+paddingBottom+borderBottomWidth+borderTopWidth,wrapperHeight=wrapperElement.offsetHeight,autoHeight=wrapperHeight+extraHeight;if(timesCalled<5){var doc=_this.beans.gridOptionsService.getDocument(),notYetInDom=!doc||!doc.contains(wrapperElement),possiblyNoContentYet=autoHeight==0;if(notYetInDom||possiblyNoContentYet){window.setTimeout(function(){return measureHeight(timesCalled+1)},0);return}}columnModel.setColumnHeaderHeight(_this.column,autoHeight)}},"measureHeight"),isMeasuring=!1,stopResizeObserver,checkMeasuring=__name(function(){var newValue=_this.column.isAutoHeaderHeight();newValue&&!isMeasuring&&startMeasuring(),!newValue&&isMeasuring&&stopMeasuring()},"checkMeasuring"),startMeasuring=__name(function(){isMeasuring=!0,measureHeight(0),_this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),stopResizeObserver=resizeObserverService.observeResize(wrapperElement,function(){return measureHeight(0)})},"startMeasuring"),stopMeasuring=__name(function(){isMeasuring=!1,stopResizeObserver&&stopResizeObserver(),_this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),stopResizeObserver=void 0},"stopMeasuring");checkMeasuring(),this.addDestroyFunc(function(){return stopMeasuring()}),this.addManagedListener(this.column,Column.EVENT_WIDTH_CHANGED,function(){return isMeasuring&&measureHeight(0)}),this.addManagedListener(this.eventService,Column.EVENT_SORT_CHANGED,function(){isMeasuring&&window.setTimeout(function(){return measureHeight(0)})}),this.addRefreshFunction(checkMeasuring)},HeaderCellCtrl2.prototype.refreshAriaSort=function(){if(this.sortable){var translate=this.localeService.getLocaleTextFunc(),sort=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(getAriaSortState(sort)),this.setAriaDescriptionProperty("sort",translate("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)},HeaderCellCtrl2.prototype.refreshAriaMenu=function(){if(this.menuEnabled){var translate=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",translate("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)},HeaderCellCtrl2.prototype.refreshAriaFilterButton=function(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){var translate=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",translate("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)},HeaderCellCtrl2.prototype.refreshAriaFiltered=function(){var translate=this.localeService.getLocaleTextFunc(),isFilterActive=this.column.isFilterActive();isFilterActive?this.setAriaDescriptionProperty("filter",translate("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)},HeaderCellCtrl2.prototype.setAriaDescriptionProperty=function(property,value){value!=null?this.ariaDescriptionProperties.set(property,value):this.ariaDescriptionProperties.delete(property)},HeaderCellCtrl2.prototype.announceAriaDescription=function(){var _this=this,eDocument=this.beans.gridOptionsService.getDocument();if(this.eGui.contains(eDocument.activeElement)){var ariaDescription=Array.from(this.ariaDescriptionProperties.keys()).sort(function(a,b){return a==="filter"?-1:b.charCodeAt(0)-a.charCodeAt(0)}).map(function(key){return _this.ariaDescriptionProperties.get(key)}).join(". ");this.beans.ariaAnnouncementService.announceValue(ariaDescription)}},HeaderCellCtrl2.prototype.refreshAria=function(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()},HeaderCellCtrl2.prototype.addColumnHoverListener=function(){var _this=this,listener=__name(function(){if(_this.gridOptionsService.get("columnHoverHighlight")){var isHovered=_this.beans.columnHoverService.isHovered(_this.column);_this.comp.addOrRemoveCssClass("ag-column-hover",isHovered)}},"listener");this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,listener),listener()},HeaderCellCtrl2.prototype.getColId=function(){return this.column.getColId()},HeaderCellCtrl2.prototype.addActiveHeaderMouseListeners=function(){var _this=this,listener=__name(function(e){return _this.handleMouseOverChange(e.type==="mouseenter")},"listener"),clickListener=__name(function(){return _this.dispatchColumnMouseEvent(Events.EVENT_COLUMN_HEADER_CLICKED,_this.column)},"clickListener"),contextMenuListener=__name(function(event){return _this.handleContextMenuMouseEvent(event,void 0,_this.column)},"contextMenuListener");this.addManagedListener(this.getGui(),"mouseenter",listener),this.addManagedListener(this.getGui(),"mouseleave",listener),this.addManagedListener(this.getGui(),"click",clickListener),this.addManagedListener(this.getGui(),"contextmenu",contextMenuListener)},HeaderCellCtrl2.prototype.handleMouseOverChange=function(isMouseOver){this.setActiveHeader(isMouseOver);var eventType=isMouseOver?Events.EVENT_COLUMN_HEADER_MOUSE_OVER:Events.EVENT_COLUMN_HEADER_MOUSE_LEAVE,event={type:eventType,column:this.column};this.eventService.dispatchEvent(event)},HeaderCellCtrl2.prototype.setActiveHeader=function(active){this.comp.addOrRemoveCssClass("ag-header-active",active)},HeaderCellCtrl2.prototype.getAnchorElementForMenu=function(isFilter){var headerComp=this.comp.getUserCompInstance();return headerComp instanceof HeaderComp?headerComp.getAnchorElementForMenu(isFilter):this.getGui()},HeaderCellCtrl2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null},HeaderCellCtrl2}(AbstractHeaderCellCtrl),__extends$1D=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1x=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1x"),GroupResizeFeature=function(_super){__extends$1D(GroupResizeFeature2,_super);function GroupResizeFeature2(comp,eResize,pinned,columnGroup){var _this=_super.call(this)||this;return _this.eResize=eResize,_this.comp=comp,_this.pinned=pinned,_this.columnGroup=columnGroup,_this}return __name(GroupResizeFeature2,"GroupResizeFeature"),GroupResizeFeature2.prototype.postConstruct=function(){var _this=this;if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}var finishedWithResizeFunc=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(finishedWithResizeFunc),!this.gridOptionsService.get("suppressAutoSize")){var skipHeaderOnAutoSize_1=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",function(){var keys2=[],leafCols=_this.columnGroup.getDisplayedLeafColumns();leafCols.forEach(function(column){column.getColDef().suppressAutoSize||keys2.push(column.getColId())}),keys2.length>0&&_this.columnModel.autoSizeColumns({columns:keys2,skipHeader:skipHeaderOnAutoSize_1,stopAtGroup:_this.columnGroup,source:"uiColumnResized"}),_this.resizeLeafColumnsToFit("uiColumnResized")})}},GroupResizeFeature2.prototype.onResizeStart=function(shiftKey){var initialValues=this.getInitialValues(shiftKey);this.storeLocalValues(initialValues),this.toggleColumnResizing(!0)},GroupResizeFeature2.prototype.onResizing=function(finished,resizeAmount,source){source===void 0&&(source="uiColumnResized");var resizeAmountNormalised=this.normaliseDragChange(resizeAmount),width=this.resizeStartWidth+resizeAmountNormalised;this.resizeColumnsFromLocalValues(width,source,finished)},GroupResizeFeature2.prototype.getInitialValues=function(shiftKey){var columnsToResize=this.getColumnsToResize(),resizeStartWidth=this.getInitialSizeOfColumns(columnsToResize),resizeRatios=this.getSizeRatiosOfColumns(columnsToResize,resizeStartWidth),columnSizeAndRatios={columnsToResize,resizeStartWidth,resizeRatios},groupAfter=null;if(shiftKey&&(groupAfter=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),groupAfter){var takeFromLeafCols=groupAfter.getDisplayedLeafColumns(),groupAfterColumns=columnSizeAndRatios.groupAfterColumns=takeFromLeafCols.filter(function(col){return col.isResizable()}),groupAfterStartWidth=columnSizeAndRatios.groupAfterStartWidth=this.getInitialSizeOfColumns(groupAfterColumns);columnSizeAndRatios.groupAfterRatios=this.getSizeRatiosOfColumns(groupAfterColumns,groupAfterStartWidth)}else columnSizeAndRatios.groupAfterColumns=void 0,columnSizeAndRatios.groupAfterStartWidth=void 0,columnSizeAndRatios.groupAfterRatios=void 0;return columnSizeAndRatios},GroupResizeFeature2.prototype.storeLocalValues=function(initialValues){var columnsToResize=initialValues.columnsToResize,resizeStartWidth=initialValues.resizeStartWidth,resizeRatios=initialValues.resizeRatios,groupAfterColumns=initialValues.groupAfterColumns,groupAfterStartWidth=initialValues.groupAfterStartWidth,groupAfterRatios=initialValues.groupAfterRatios;this.resizeCols=columnsToResize,this.resizeStartWidth=resizeStartWidth,this.resizeRatios=resizeRatios,this.resizeTakeFromCols=groupAfterColumns,this.resizeTakeFromStartWidth=groupAfterStartWidth,this.resizeTakeFromRatios=groupAfterRatios},GroupResizeFeature2.prototype.clearLocalValues=function(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0},GroupResizeFeature2.prototype.resizeLeafColumnsToFit=function(source){var preferredSize=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),initialValues=this.getInitialValues();preferredSize>initialValues.resizeStartWidth&&this.resizeColumns(initialValues,preferredSize,source,!0)},GroupResizeFeature2.prototype.resizeColumnsFromLocalValues=function(totalWidth,source,finished){var _a,_b,_c;if(finished===void 0&&(finished=!0),!(!this.resizeCols||!this.resizeRatios)){var initialValues={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:(_a=this.resizeTakeFromCols)!==null&&_a!==void 0?_a:void 0,groupAfterStartWidth:(_b=this.resizeTakeFromStartWidth)!==null&&_b!==void 0?_b:void 0,groupAfterRatios:(_c=this.resizeTakeFromRatios)!==null&&_c!==void 0?_c:void 0};this.resizeColumns(initialValues,totalWidth,source,finished)}},GroupResizeFeature2.prototype.resizeColumns=function(initialValues,totalWidth,source,finished){finished===void 0&&(finished=!0);var columnsToResize=initialValues.columnsToResize,resizeStartWidth=initialValues.resizeStartWidth,resizeRatios=initialValues.resizeRatios,groupAfterColumns=initialValues.groupAfterColumns,groupAfterStartWidth=initialValues.groupAfterStartWidth,groupAfterRatios=initialValues.groupAfterRatios,resizeSets=[];if(resizeSets.push({columns:columnsToResize,ratios:resizeRatios,width:totalWidth}),groupAfterColumns){var diff=totalWidth-resizeStartWidth;resizeSets.push({columns:groupAfterColumns,ratios:groupAfterRatios,width:groupAfterStartWidth-diff})}this.columnModel.resizeColumnSets({resizeSets,finished,source}),finished&&this.toggleColumnResizing(!1)},GroupResizeFeature2.prototype.toggleColumnResizing=function(resizing){this.comp.addOrRemoveCssClass("ag-column-resizing",resizing)},GroupResizeFeature2.prototype.getColumnsToResize=function(){var leafCols=this.columnGroup.getDisplayedLeafColumns();return leafCols.filter(function(col){return col.isResizable()})},GroupResizeFeature2.prototype.getInitialSizeOfColumns=function(columns){return columns.reduce(function(totalWidth,column){return totalWidth+column.getActualWidth()},0)},GroupResizeFeature2.prototype.getSizeRatiosOfColumns=function(columns,initialSizeOfColumns){return columns.map(function(column){return column.getActualWidth()/initialSizeOfColumns})},GroupResizeFeature2.prototype.normaliseDragChange=function(dragChange){var result=dragChange;return this.gridOptionsService.get("enableRtl")?this.pinned!=="left"&&(result*=-1):this.pinned==="right"&&(result*=-1),result},GroupResizeFeature2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.clearLocalValues()},__decorate$1x([Autowired("horizontalResizeService")],GroupResizeFeature2.prototype,"horizontalResizeService",void 0),__decorate$1x([Autowired("autoWidthCalculator")],GroupResizeFeature2.prototype,"autoWidthCalculator",void 0),__decorate$1x([Autowired("columnModel")],GroupResizeFeature2.prototype,"columnModel",void 0),__decorate$1x([PostConstruct],GroupResizeFeature2.prototype,"postConstruct",null),GroupResizeFeature2}(BeanStub),__extends$1C=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1w=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1w"),GroupWidthFeature=function(_super){__extends$1C(GroupWidthFeature2,_super);function GroupWidthFeature2(comp,columnGroup){var _this=_super.call(this)||this;return _this.removeChildListenersFuncs=[],_this.columnGroup=columnGroup,_this.comp=comp,_this}return __name(GroupWidthFeature2,"GroupWidthFeature"),GroupWidthFeature2.prototype.postConstruct=function(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,ColumnGroup.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))},GroupWidthFeature2.prototype.addListenersToChildrenColumns=function(){var _this=this;this.removeListenersOnChildrenColumns();var widthChangedListener=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(function(column){column.addEventListener("widthChanged",widthChangedListener),column.addEventListener("visibleChanged",widthChangedListener),_this.removeChildListenersFuncs.push(function(){column.removeEventListener("widthChanged",widthChangedListener),column.removeEventListener("visibleChanged",widthChangedListener)})})},GroupWidthFeature2.prototype.removeListenersOnChildrenColumns=function(){this.removeChildListenersFuncs.forEach(function(func){return func()}),this.removeChildListenersFuncs=[]},GroupWidthFeature2.prototype.onDisplayedChildrenChanged=function(){this.addListenersToChildrenColumns(),this.onWidthChanged()},GroupWidthFeature2.prototype.onWidthChanged=function(){var columnWidth=this.columnGroup.getActualWidth();this.comp.setWidth("".concat(columnWidth,"px")),this.comp.addOrRemoveCssClass("ag-hidden",columnWidth===0)},__decorate$1w([PostConstruct],GroupWidthFeature2.prototype,"postConstruct",null),GroupWidthFeature2}(BeanStub),__extends$1B=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$a=__name(function(){return __assign$a=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$a.apply(this,arguments)},"__assign$a"),HeaderGroupCellCtrl=function(_super){__extends$1B(HeaderGroupCellCtrl2,_super);function HeaderGroupCellCtrl2(columnGroup,beans,parentRowCtrl){var _this=_super.call(this,columnGroup,beans,parentRowCtrl)||this;return _this.onSuppressColMoveChange=function(){if(!_this.isAlive()||_this.isSuppressMoving())_this.removeDragSource();else if(!_this.dragSource){var eGui=_this.getGui();_this.setDragSource(eGui)}},_this.column=columnGroup,_this}return __name(HeaderGroupCellCtrl2,"HeaderGroupCellCtrl"),HeaderGroupCellCtrl2.prototype.setComp=function(comp,eGui,eResize){this.comp=comp,this.setGui(eGui),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp(),this.addHeaderMouseListeners();var pinned=this.getParentRowCtrl().getPinned(),leafCols=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new HoverFeature(leafCols,eGui)),this.createManagedBean(new SetLeftFeature(this.column,eGui,this.beans)),this.createManagedBean(new GroupWidthFeature(comp,this.column)),this.resizeFeature=this.createManagedBean(new GroupResizeFeature(comp,eResize,pinned,this.column)),this.createManagedBean(new ManagedFocusFeature(eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:function(){},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(Events.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()},HeaderGroupCellCtrl2.prototype.resizeHeader=function(delta,shiftKey){if(this.resizeFeature){var initialValues=this.resizeFeature.getInitialValues(shiftKey);this.resizeFeature.resizeColumns(initialValues,initialValues.resizeStartWidth+delta,"uiColumnResized",!0)}},HeaderGroupCellCtrl2.prototype.moveHeader=function(hDirection){var _a=this,beans=_a.beans,eGui=_a.eGui,column=_a.column,gridOptionsService=_a.gridOptionsService,ctrlsService=_a.ctrlsService,isRtl=gridOptionsService.get("enableRtl"),isLeft=hDirection===HorizontalDirection.Left,pinned=this.getPinned(),rect=eGui.getBoundingClientRect(),left=rect.left,width=rect.width,xPosition=ColumnMoveHelper.normaliseX(isLeft!==isRtl?left-20:left+width+20,pinned,!0,gridOptionsService,ctrlsService),id=column.getGroupId(),headerPosition=this.focusService.getFocusedHeader();ColumnMoveHelper.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection,xPosition,pinned,fromEnter:!1,fakeEvent:!1,gridOptionsService,columnModel:beans.columnModel});var displayedLeafColumns=column.getDisplayedLeafColumns(),targetColumn=isLeft?displayedLeafColumns[0]:last(displayedLeafColumns);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(targetColumn,"auto"),!this.isAlive()&&headerPosition&&this.restoreFocus(id,column,headerPosition)},HeaderGroupCellCtrl2.prototype.restoreFocus=function(groupId,previousColumnGroup,previousPosition){var leafCols=previousColumnGroup.getLeafColumns();if(leafCols.length){var parent=leafCols[0].getParent();if(parent){var newColumnGroup=this.findGroupWidthId(parent,groupId);newColumnGroup&&this.focusService.focusHeaderPosition({headerPosition:__assign$a(__assign$a({},previousPosition),{column:newColumnGroup})})}}},HeaderGroupCellCtrl2.prototype.findGroupWidthId=function(columnGroup,id){for(;columnGroup;){if(columnGroup.getGroupId()===id)return columnGroup;columnGroup=columnGroup.getParent()}return null},HeaderGroupCellCtrl2.prototype.resizeLeafColumnsToFit=function(source){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(source)},HeaderGroupCellCtrl2.prototype.setupUserComp=function(){var _this=this,params=this.gridOptionsService.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:function(expanded){_this.beans.columnModel.setColumnGroupOpened(_this.column.getProvidedColumnGroup(),expanded,"gridInitializing")}}),compDetails=this.userComponentFactory.getHeaderGroupCompDetails(params);this.comp.setUserCompDetails(compDetails)},HeaderGroupCellCtrl2.prototype.addHeaderMouseListeners=function(){var _this=this,listener=__name(function(e){return _this.handleMouseOverChange(e.type==="mouseenter")},"listener"),clickListener=__name(function(){return _this.dispatchColumnMouseEvent(Events.EVENT_COLUMN_HEADER_CLICKED,_this.column.getProvidedColumnGroup())},"clickListener"),contextMenuListener=__name(function(event){return _this.handleContextMenuMouseEvent(event,void 0,_this.column.getProvidedColumnGroup())},"contextMenuListener");this.addManagedListener(this.getGui(),"mouseenter",listener),this.addManagedListener(this.getGui(),"mouseleave",listener),this.addManagedListener(this.getGui(),"click",clickListener),this.addManagedListener(this.getGui(),"contextmenu",contextMenuListener)},HeaderGroupCellCtrl2.prototype.handleMouseOverChange=function(isMouseOver){var eventType=isMouseOver?Events.EVENT_COLUMN_HEADER_MOUSE_OVER:Events.EVENT_COLUMN_HEADER_MOUSE_LEAVE,event={type:eventType,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(event)},HeaderGroupCellCtrl2.prototype.setupTooltip=function(){var _this=this,colGroupDef=this.column.getColGroupDef(),tooltipCtrl={getColumn:function(){return _this.column},getGui:function(){return _this.eGui},getLocation:function(){return"headerGroup"},getTooltipValue:function(){return colGroupDef&&colGroupDef.headerTooltip}};colGroupDef&&(tooltipCtrl.getColDef=function(){return colGroupDef});var tooltipFeature=this.createManagedBean(new TooltipFeature(tooltipCtrl,this.beans));tooltipFeature.setComp(this.eGui)},HeaderGroupCellCtrl2.prototype.setupExpandable=function(){var providedColGroup=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(providedColGroup,ProvidedColumnGroup.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))},HeaderGroupCellCtrl2.prototype.refreshExpanded=function(){var column=this.column;this.expandable=column.isExpandable();var expanded=column.isExpanded();this.expandable?this.comp.setAriaExpanded(expanded?"true":"false"):this.comp.setAriaExpanded(void 0)},HeaderGroupCellCtrl2.prototype.getColId=function(){return this.column.getUniqueId()},HeaderGroupCellCtrl2.prototype.addClasses=function(){var _this=this,colGroupDef=this.column.getColGroupDef(),classes=CssClassApplier.getHeaderClassesFromColDef(colGroupDef,this.gridOptionsService,null,this.column);if(this.column.isPadding()){classes.push("ag-header-group-cell-no-group");var leafCols=this.column.getLeafColumns();leafCols.every(function(col){return col.isSpanHeaderHeight()})&&classes.push("ag-header-span-height")}else classes.push("ag-header-group-cell-with-group");classes.forEach(function(c){return _this.comp.addOrRemoveCssClass(c,!0)})},HeaderGroupCellCtrl2.prototype.setupMovingCss=function(){var _this=this,providedColumnGroup=this.column.getProvidedColumnGroup(),leafColumns=providedColumnGroup.getLeafColumns(),listener=__name(function(){return _this.comp.addOrRemoveCssClass("ag-header-cell-moving",_this.column.isMoving())},"listener");leafColumns.forEach(function(col){_this.addManagedListener(col,Column.EVENT_MOVING_CHANGED,listener)}),listener()},HeaderGroupCellCtrl2.prototype.onFocusIn=function(e){if(!this.eGui.contains(e.relatedTarget)){var rowIndex=this.getRowIndex();this.beans.focusService.setFocusedHeader(rowIndex,this.column)}},HeaderGroupCellCtrl2.prototype.handleKeyDown=function(e){_super.prototype.handleKeyDown.call(this,e);var wrapperHasFocus=this.getWrapperHasFocus();if(!(!this.expandable||!wrapperHasFocus)&&e.key===KeyCode.ENTER){var column=this.column,newExpandedValue=!column.isExpanded();this.beans.columnModel.setColumnGroupOpened(column.getProvidedColumnGroup(),newExpandedValue,"uiColumnExpanded")}},HeaderGroupCellCtrl2.prototype.setDragSource=function(eHeaderGroup){var _this=this;if(!(!this.isAlive()||this.isSuppressMoving())&&(this.removeDragSource(),!!eHeaderGroup)){var _a=this,beans=_a.beans,column=_a.column,displayName=_a.displayName,gridOptionsService=_a.gridOptionsService,dragAndDropService=_a.dragAndDropService,columnModel=beans.columnModel,allLeafColumns=column.getProvidedColumnGroup().getLeafColumns(),hideColumnOnExit=!gridOptionsService.get("suppressDragLeaveHidesColumns"),dragSource=this.dragSource={type:DragSourceType.HeaderCell,eElement:eHeaderGroup,getDefaultIconName:function(){return hideColumnOnExit?DragAndDropService.ICON_HIDE:DragAndDropService.ICON_NOT_ALLOWED},dragItemName:displayName,getDragItem:function(){return _this.getDragItemForGroup(column)},onDragStarted:function(){hideColumnOnExit=!gridOptionsService.get("suppressDragLeaveHidesColumns"),allLeafColumns.forEach(function(col){return col.setMoving(!0,"uiColumnDragged")})},onDragStopped:function(){return allLeafColumns.forEach(function(col){return col.setMoving(!1,"uiColumnDragged")})},onGridEnter:function(dragItem){var _a2;if(hideColumnOnExit){var unlockedColumns=((_a2=dragItem==null?void 0:dragItem.columns)===null||_a2===void 0?void 0:_a2.filter(function(col){return!col.getColDef().lockVisible}))||[];columnModel.setColumnsVisible(unlockedColumns,!0,"uiColumnMoved")}},onGridExit:function(dragItem){var _a2;if(hideColumnOnExit){var unlockedColumns=((_a2=dragItem==null?void 0:dragItem.columns)===null||_a2===void 0?void 0:_a2.filter(function(col){return!col.getColDef().lockVisible}))||[];columnModel.setColumnsVisible(unlockedColumns,!1,"uiColumnMoved")}}};dragAndDropService.addDragSource(dragSource,!0)}},HeaderGroupCellCtrl2.prototype.getDragItemForGroup=function(columnGroup){var allColumnsOriginalOrder=columnGroup.getProvidedColumnGroup().getLeafColumns(),visibleState={};allColumnsOriginalOrder.forEach(function(column){return visibleState[column.getId()]=column.isVisible()});var allColumnsCurrentOrder=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(function(column){allColumnsOriginalOrder.indexOf(column)>=0&&(allColumnsCurrentOrder.push(column),removeFromArray(allColumnsOriginalOrder,column))}),allColumnsOriginalOrder.forEach(function(column){return allColumnsCurrentOrder.push(column)}),{columns:allColumnsCurrentOrder,visibleState}},HeaderGroupCellCtrl2.prototype.isSuppressMoving=function(){var childSuppressesMoving=!1;this.column.getLeafColumns().forEach(function(column){(column.getColDef().suppressMovable||column.getColDef().lockPosition)&&(childSuppressesMoving=!0)});var result=childSuppressesMoving||this.gridOptionsService.get("suppressMovableColumns");return result},HeaderGroupCellCtrl2}(AbstractHeaderCellCtrl),__extends$1A=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1v=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1v"),__values$5=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$5"),__read$l=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$l"),instanceIdSequence=0,HeaderRowCtrl=function(_super){__extends$1A(HeaderRowCtrl2,_super);function HeaderRowCtrl2(rowIndex,pinned,type){var _this=_super.call(this)||this;_this.instanceId=instanceIdSequence++,_this.rowIndex=rowIndex,_this.pinned=pinned,_this.type=type;var typeClass=type==HeaderRowType.COLUMN_GROUP?"ag-header-row-column-group":type==HeaderRowType.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column";return _this.headerRowClass="ag-header-row ".concat(typeClass),_this}return __name(HeaderRowCtrl2,"HeaderRowCtrl"),HeaderRowCtrl2.prototype.postConstruct=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")},HeaderRowCtrl2.prototype.getInstanceId=function(){return this.instanceId},HeaderRowCtrl2.prototype.setComp=function(comp,initCompState){initCompState===void 0&&(initCompState=!0),this.comp=comp,initCompState&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()},HeaderRowCtrl2.prototype.getHeaderRowClass=function(){return this.headerRowClass},HeaderRowCtrl2.prototype.getAriaRowIndex=function(){return this.rowIndex+1},HeaderRowCtrl2.prototype.addEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_VIRTUAL_COLUMNS_CHANGED,function(params){return _this.onVirtualColumnsChanged(params.afterScroll)}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",function(e){return _this.isEnsureDomOrder=e.currentValue}),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))},HeaderRowCtrl2.prototype.getHeaderCellCtrl=function(column){if(this.headerCellCtrls)return values(this.headerCellCtrls).find(function(cellCtrl){return cellCtrl.getColumnGroupChild()===column})},HeaderRowCtrl2.prototype.onDisplayedColumnsChanged=function(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()},HeaderRowCtrl2.prototype.getType=function(){return this.type},HeaderRowCtrl2.prototype.onColumnResized=function(){this.setWidth()},HeaderRowCtrl2.prototype.setWidth=function(){var width=this.getWidthForRow();this.comp.setWidth("".concat(width,"px"))},HeaderRowCtrl2.prototype.getWidthForRow=function(){var columnModel=this.beans.columnModel;if(this.isPrintLayout){var pinned=this.pinned!=null;return pinned?0:columnModel.getContainerWidth("right")+columnModel.getContainerWidth("left")+columnModel.getContainerWidth(null)}return columnModel.getContainerWidth(this.pinned)},HeaderRowCtrl2.prototype.onRowHeightChanged=function(){var _a=this.getTopAndHeight(),topOffset=_a.topOffset,rowHeight=_a.rowHeight;this.comp.setTop(topOffset+"px"),this.comp.setHeight(rowHeight+"px")},HeaderRowCtrl2.prototype.getTopAndHeight=function(){var _a=this.beans,columnModel=_a.columnModel,filterManager=_a.filterManager,headerRowCount=columnModel.getHeaderRowCount(),sizes=[],numberOfFloating=0;filterManager.hasFloatingFilters()&&(headerRowCount++,numberOfFloating=1);for(var groupHeight=columnModel.getColumnGroupHeaderRowHeight(),headerHeight=columnModel.getColumnHeaderRowHeight(),numberOfNonGroups=1+numberOfFloating,numberOfGroups=headerRowCount-numberOfNonGroups,i=0;i<numberOfGroups;i++)sizes.push(groupHeight);sizes.push(headerHeight);for(var i=0;i<numberOfFloating;i++)sizes.push(columnModel.getFloatingFiltersHeight());for(var topOffset=0,i=0;i<this.rowIndex;i++)topOffset+=sizes[i];var rowHeight=sizes[this.rowIndex];return{topOffset,rowHeight}},HeaderRowCtrl2.prototype.getPinned=function(){return this.pinned},HeaderRowCtrl2.prototype.getRowIndex=function(){return this.rowIndex},HeaderRowCtrl2.prototype.onVirtualColumnsChanged=function(afterScroll){afterScroll===void 0&&(afterScroll=!1);var ctrlsToDisplay=this.getHeaderCtrls(),forceOrder=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(ctrlsToDisplay,forceOrder,afterScroll)},HeaderRowCtrl2.prototype.getHeaderCtrls=function(){var e_1,_a,e_2,_b,_this=this,oldCtrls=this.headerCellCtrls;this.headerCellCtrls=new Map;var columns=this.getColumnsInViewport();try{for(var columns_1=__values$5(columns),columns_1_1=columns_1.next();!columns_1_1.done;columns_1_1=columns_1.next()){var child=columns_1_1.value;this.recycleAndCreateHeaderCtrls(child,oldCtrls)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{columns_1_1&&!columns_1_1.done&&(_a=columns_1.return)&&_a.call(columns_1)}finally{if(e_1)throw e_1.error}}var isFocusedAndDisplayed=__name(function(ctrl){var _a2=_this.beans,focusService=_a2.focusService,columnModel=_a2.columnModel,isFocused=focusService.isHeaderWrapperFocused(ctrl);if(!isFocused)return!1;var isDisplayed=columnModel.isDisplayed(ctrl.getColumnGroupChild());return isDisplayed},"isFocusedAndDisplayed");if(oldCtrls)try{for(var oldCtrls_1=__values$5(oldCtrls),oldCtrls_1_1=oldCtrls_1.next();!oldCtrls_1_1.done;oldCtrls_1_1=oldCtrls_1.next()){var _c=__read$l(oldCtrls_1_1.value,2),id=_c[0],oldCtrl=_c[1],keepCtrl=isFocusedAndDisplayed(oldCtrl);keepCtrl?this.headerCellCtrls.set(id,oldCtrl):this.destroyBean(oldCtrl)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{oldCtrls_1_1&&!oldCtrls_1_1.done&&(_b=oldCtrls_1.return)&&_b.call(oldCtrls_1)}finally{if(e_2)throw e_2.error}}var ctrlsToDisplay=Array.from(this.headerCellCtrls.values());return ctrlsToDisplay},HeaderRowCtrl2.prototype.recycleAndCreateHeaderCtrls=function(headerColumn,oldCtrls){if(this.headerCellCtrls&&!headerColumn.isEmptyGroup()){var idOfChild=headerColumn.getUniqueId(),headerCtrl;oldCtrls&&(headerCtrl=oldCtrls.get(idOfChild),oldCtrls.delete(idOfChild));var forOldColumn=headerCtrl&&headerCtrl.getColumnGroupChild()!=headerColumn;if(forOldColumn&&(this.destroyBean(headerCtrl),headerCtrl=void 0),headerCtrl==null)switch(this.type){case HeaderRowType.FLOATING_FILTER:headerCtrl=this.createBean(new HeaderFilterCellCtrl(headerColumn,this.beans,this));break;case HeaderRowType.COLUMN_GROUP:headerCtrl=this.createBean(new HeaderGroupCellCtrl(headerColumn,this.beans,this));break;default:headerCtrl=this.createBean(new HeaderCellCtrl(headerColumn,this.beans,this));break}this.headerCellCtrls.set(idOfChild,headerCtrl)}},HeaderRowCtrl2.prototype.getColumnsInViewport=function(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()},HeaderRowCtrl2.prototype.getColumnsInViewportPrintLayout=function(){if(this.pinned!=null)return[];var viewportColumns=[],actualDepth=this.getActualDepth(),columnModel=this.beans.columnModel;return["left",null,"right"].forEach(function(pinned){var items=columnModel.getVirtualHeaderGroupRow(pinned,actualDepth);viewportColumns=viewportColumns.concat(items)}),viewportColumns},HeaderRowCtrl2.prototype.getActualDepth=function(){return this.type==HeaderRowType.FLOATING_FILTER?this.rowIndex-1:this.rowIndex},HeaderRowCtrl2.prototype.getColumnsInViewportNormalLayout=function(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())},HeaderRowCtrl2.prototype.focusHeader=function(column,event){if(!this.headerCellCtrls)return!1;var allCtrls=Array.from(this.headerCellCtrls.values()),ctrl=allCtrls.find(function(ctrl2){return ctrl2.getColumnGroupChild()==column});return ctrl?ctrl.focus(event):!1},HeaderRowCtrl2.prototype.destroy=function(){var _this=this;this.headerCellCtrls&&this.headerCellCtrls.forEach(function(ctrl){_this.destroyBean(ctrl)}),this.headerCellCtrls=void 0,_super.prototype.destroy.call(this)},__decorate$1v([Autowired("beans")],HeaderRowCtrl2.prototype,"beans",void 0),__decorate$1v([PostConstruct],HeaderRowCtrl2.prototype,"postConstruct",null),HeaderRowCtrl2}(BeanStub),__extends$1z=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1u=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1u"),__read$k=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$k"),__spreadArray$i=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$i"),HeaderRowContainerCtrl=function(_super){__extends$1z(HeaderRowContainerCtrl2,_super);function HeaderRowContainerCtrl2(pinned){var _this=_super.call(this)||this;return _this.hidden=!1,_this.includeFloatingFilter=!1,_this.groupsRowCtrls=[],_this.pinned=pinned,_this}return __name(HeaderRowContainerCtrl2,"HeaderRowContainerCtrl"),HeaderRowContainerCtrl2.prototype.setComp=function(comp,eGui){this.comp=comp,this.eViewport=eGui,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()},HeaderRowContainerCtrl2.prototype.setupDragAndDrop=function(dropContainer){var bodyDropTarget=new BodyDropTarget(this.pinned,dropContainer);this.createManagedBean(bodyDropTarget)},HeaderRowContainerCtrl2.prototype.refresh=function(keepColumns){var _this=this;keepColumns===void 0&&(keepColumns=!1);var sequence=new NumberSequence,focusedHeaderPosition=this.focusService.getFocusHeaderToUseAfterRefresh(),refreshColumnGroups=__name(function(){var groupRowCount=_this.columnModel.getHeaderRowCount()-1;_this.groupsRowCtrls=_this.destroyBeans(_this.groupsRowCtrls);for(var i=0;i<groupRowCount;i++){var ctrl=_this.createBean(new HeaderRowCtrl(sequence.next(),_this.pinned,HeaderRowType.COLUMN_GROUP));_this.groupsRowCtrls.push(ctrl)}},"refreshColumnGroups"),refreshColumns=__name(function(){var rowIndex=sequence.next(),needNewInstance=!_this.hidden&&(_this.columnsRowCtrl==null||!keepColumns||_this.columnsRowCtrl.getRowIndex()!==rowIndex),shouldDestroyInstance=needNewInstance||_this.hidden;shouldDestroyInstance&&(_this.columnsRowCtrl=_this.destroyBean(_this.columnsRowCtrl)),needNewInstance&&(_this.columnsRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,HeaderRowType.COLUMN)))},"refreshColumns"),refreshFilters=__name(function(){_this.includeFloatingFilter=_this.filterManager.hasFloatingFilters()&&!_this.hidden;var destroyPreviousComp=__name(function(){_this.filtersRowCtrl=_this.destroyBean(_this.filtersRowCtrl)},"destroyPreviousComp");if(!_this.includeFloatingFilter){destroyPreviousComp();return}var rowIndex=sequence.next();if(_this.filtersRowCtrl){var rowIndexMismatch=_this.filtersRowCtrl.getRowIndex()!==rowIndex;(!keepColumns||rowIndexMismatch)&&destroyPreviousComp()}_this.filtersRowCtrl||(_this.filtersRowCtrl=_this.createBean(new HeaderRowCtrl(rowIndex,_this.pinned,HeaderRowType.FLOATING_FILTER)))},"refreshFilters");refreshColumnGroups(),refreshColumns(),refreshFilters();var allCtrls=this.getAllCtrls();this.comp.setCtrls(allCtrls),this.restoreFocusOnHeader(focusedHeaderPosition)},HeaderRowContainerCtrl2.prototype.restoreFocusOnHeader=function(position){position==null||position.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:position})},HeaderRowContainerCtrl2.prototype.getAllCtrls=function(){var res=__spreadArray$i([],__read$k(this.groupsRowCtrls),!1);return this.columnsRowCtrl&&res.push(this.columnsRowCtrl),this.filtersRowCtrl&&res.push(this.filtersRowCtrl),res},HeaderRowContainerCtrl2.prototype.onGridColumnsChanged=function(){this.refresh(!0)},HeaderRowContainerCtrl2.prototype.onDisplayedColumnsChanged=function(){var includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==includeFloatingFilter&&this.refresh(!0)},HeaderRowContainerCtrl2.prototype.setupCenterWidth=function(){var _this=this;this.pinned==null&&this.createManagedBean(new CenterWidthFeature(function(width){return _this.comp.setCenterWidth("".concat(width,"px"))},!0))},HeaderRowContainerCtrl2.prototype.setHorizontalScroll=function(offset){this.comp.setViewportScrollLeft(offset)},HeaderRowContainerCtrl2.prototype.setupPinnedWidth=function(){var _this=this;if(this.pinned!=null){var pinningLeft=this.pinned==="left",pinningRight=this.pinned==="right";this.hidden=!0;var listener=__name(function(){var width=pinningLeft?_this.pinnedWidthService.getPinnedLeftWidth():_this.pinnedWidthService.getPinnedRightWidth();if(width!=null){var hidden=width==0,hiddenChanged=_this.hidden!==hidden,isRtl=_this.gridOptionsService.get("enableRtl"),scrollbarWidth=_this.gridOptionsService.getScrollbarWidth(),addPaddingForScrollbar=_this.scrollVisibleService.isVerticalScrollShowing()&&(isRtl&&pinningLeft||!isRtl&&pinningRight),widthWithPadding=addPaddingForScrollbar?width+scrollbarWidth:width;_this.comp.setPinnedContainerWidth("".concat(widthWithPadding,"px")),_this.comp.setDisplayed(!hidden),hiddenChanged&&(_this.hidden=hidden,_this.refresh())}},"listener");this.addManagedListener(this.eventService,Events.EVENT_LEFT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_SCROLLBAR_WIDTH_CHANGED,listener)}},HeaderRowContainerCtrl2.prototype.getHeaderCtrlForColumn=function(column){if(column instanceof Column)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(column):void 0;if(this.groupsRowCtrls.length!==0)for(var i=0;i<this.groupsRowCtrls.length;i++){var ctrl=this.groupsRowCtrls[i].getHeaderCellCtrl(column);if(ctrl)return ctrl}},HeaderRowContainerCtrl2.prototype.getHtmlElementForColumnHeader=function(column){var cellCtrl=this.getHeaderCtrlForColumn(column);return cellCtrl?cellCtrl.getGui():null},HeaderRowContainerCtrl2.prototype.getRowType=function(rowIndex){var allCtrls=this.getAllCtrls(),ctrl=allCtrls[rowIndex];return ctrl?ctrl.getType():void 0},HeaderRowContainerCtrl2.prototype.focusHeader=function(rowIndex,column,event){var allCtrls=this.getAllCtrls(),ctrl=allCtrls[rowIndex];return ctrl?ctrl.focusHeader(column,event):!1},HeaderRowContainerCtrl2.prototype.getViewport=function(){return this.eViewport},HeaderRowContainerCtrl2.prototype.getRowCount=function(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)},HeaderRowContainerCtrl2.prototype.destroy=function(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),_super.prototype.destroy.call(this)},__decorate$1u([Autowired("ctrlsService")],HeaderRowContainerCtrl2.prototype,"ctrlsService",void 0),__decorate$1u([Autowired("scrollVisibleService")],HeaderRowContainerCtrl2.prototype,"scrollVisibleService",void 0),__decorate$1u([Autowired("pinnedWidthService")],HeaderRowContainerCtrl2.prototype,"pinnedWidthService",void 0),__decorate$1u([Autowired("columnModel")],HeaderRowContainerCtrl2.prototype,"columnModel",void 0),__decorate$1u([Autowired("focusService")],HeaderRowContainerCtrl2.prototype,"focusService",void 0),__decorate$1u([Autowired("filterManager")],HeaderRowContainerCtrl2.prototype,"filterManager",void 0),HeaderRowContainerCtrl2}(BeanStub),__extends$1y=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1t=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1t"),HeaderRowContainerComp=function(_super){__extends$1y(HeaderRowContainerComp2,_super);function HeaderRowContainerComp2(pinned){var _this=_super.call(this)||this;return _this.headerRowComps={},_this.rowCompsList=[],_this.pinned=pinned,_this}return __name(HeaderRowContainerComp2,"HeaderRowContainerComp"),HeaderRowContainerComp2.prototype.init=function(){var _this=this;this.selectAndSetTemplate();var compProxy={setDisplayed:function(displayed){return _this.setDisplayed(displayed)},setCtrls:function(ctrls){return _this.setCtrls(ctrls)},setCenterWidth:function(width){return _this.eCenterContainer.style.width=width},setViewportScrollLeft:function(left){return _this.getGui().scrollLeft=left},setPinnedContainerWidth:function(width){var eGui=_this.getGui();eGui.style.width=width,eGui.style.maxWidth=width,eGui.style.minWidth=width}},ctrl=this.createManagedBean(new HeaderRowContainerCtrl(this.pinned));ctrl.setComp(compProxy,this.getGui())},HeaderRowContainerComp2.prototype.selectAndSetTemplate=function(){var pinnedLeft=this.pinned=="left",pinnedRight=this.pinned=="right",template=pinnedLeft?HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE:pinnedRight?HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE:HeaderRowContainerComp2.CENTER_TEMPLATE;this.setTemplate(template),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()},HeaderRowContainerComp2.prototype.destroyRowComps=function(){this.setCtrls([])},HeaderRowContainerComp2.prototype.destroyRowComp=function(rowComp){this.destroyBean(rowComp),this.eRowContainer.removeChild(rowComp.getGui())},HeaderRowContainerComp2.prototype.setCtrls=function(ctrls){var _this=this,oldRowComps=this.headerRowComps;this.headerRowComps={},this.rowCompsList=[];var prevGui,appendEnsuringDomOrder=__name(function(rowComp){var eGui=rowComp.getGui(),notAlreadyIn=eGui.parentElement!=_this.eRowContainer;notAlreadyIn&&_this.eRowContainer.appendChild(eGui),prevGui&&ensureDomOrder(_this.eRowContainer,eGui,prevGui),prevGui=eGui},"appendEnsuringDomOrder");ctrls.forEach(function(ctrl){var ctrlId=ctrl.getInstanceId(),existingComp=oldRowComps[ctrlId];delete oldRowComps[ctrlId];var rowComp=existingComp||_this.createBean(new HeaderRowComp(ctrl));_this.headerRowComps[ctrlId]=rowComp,_this.rowCompsList.push(rowComp),appendEnsuringDomOrder(rowComp)}),getAllValuesInObject(oldRowComps).forEach(function(c){return _this.destroyRowComp(c)})},HeaderRowContainerComp2.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>',HeaderRowContainerComp2.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>',HeaderRowContainerComp2.CENTER_TEMPLATE=`<div class="ag-header-viewport" role="presentation">
            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>
        </div>`,__decorate$1t([RefSelector("eCenterContainer")],HeaderRowContainerComp2.prototype,"eCenterContainer",void 0),__decorate$1t([PostConstruct],HeaderRowContainerComp2.prototype,"init",null),__decorate$1t([PreDestroy],HeaderRowContainerComp2.prototype,"destroyRowComps",null),HeaderRowContainerComp2}(Component),__extends$1x=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1s=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1s"),HeaderNavigationDirection;(function(HeaderNavigationDirection2){HeaderNavigationDirection2[HeaderNavigationDirection2.UP=0]="UP",HeaderNavigationDirection2[HeaderNavigationDirection2.DOWN=1]="DOWN",HeaderNavigationDirection2[HeaderNavigationDirection2.LEFT=2]="LEFT",HeaderNavigationDirection2[HeaderNavigationDirection2.RIGHT=3]="RIGHT"})(HeaderNavigationDirection||(HeaderNavigationDirection={}));var HeaderNavigationService=function(_super){__extends$1x(HeaderNavigationService2,_super);function HeaderNavigationService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.currentHeaderRowWithoutSpan=-1,_this}return __name(HeaderNavigationService2,"HeaderNavigationService"),HeaderNavigationService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.gridBodyCon=p.gridBodyCtrl});var eDocument=this.gridOptionsService.getDocument();this.addManagedListener(eDocument,"mousedown",function(){return _this.setCurrentHeaderRowWithoutSpan(-1)})},HeaderNavigationService2.prototype.getHeaderRowCount=function(){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();return centerHeaderContainer?centerHeaderContainer.getRowCount():0},HeaderNavigationService2.prototype.navigateVertically=function(direction,fromHeader,event){if(fromHeader||(fromHeader=this.focusService.getFocusedHeader()),!fromHeader)return!1;var headerRowIndex=fromHeader.headerRowIndex,column=fromHeader.column,rowLen=this.getHeaderRowCount(),isUp=direction===HeaderNavigationDirection.UP,_a=isUp?this.headerPositionUtils.getColumnVisibleParent(column,headerRowIndex):this.headerPositionUtils.getColumnVisibleChild(column,headerRowIndex),nextRow=_a.headerRowIndex,nextFocusColumn=_a.column,headerRowIndexWithoutSpan=_a.headerRowIndexWithoutSpan,skipColumn=!1;return nextRow<0&&(nextRow=0,nextFocusColumn=column,skipColumn=!0),nextRow>=rowLen?(nextRow=-1,this.setCurrentHeaderRowWithoutSpan(-1)):headerRowIndexWithoutSpan!==void 0&&(this.currentHeaderRowWithoutSpan=headerRowIndexWithoutSpan),!skipColumn&&!nextFocusColumn?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:nextRow,column:nextFocusColumn},allowUserOverride:!0,event})},HeaderNavigationService2.prototype.setCurrentHeaderRowWithoutSpan=function(row){this.currentHeaderRowWithoutSpan=row},HeaderNavigationService2.prototype.navigateHorizontally=function(direction,fromTab,event){fromTab===void 0&&(fromTab=!1);var focusedHeader=this.focusService.getFocusedHeader(),isLeft=direction===HeaderNavigationDirection.LEFT,isRtl=this.gridOptionsService.get("enableRtl"),nextHeader,normalisedDirection;return this.currentHeaderRowWithoutSpan!==-1?focusedHeader.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=focusedHeader.headerRowIndex,isLeft!==isRtl?(normalisedDirection="Before",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)):(normalisedDirection="After",nextHeader=this.headerPositionUtils.findHeader(focusedHeader,normalisedDirection)),nextHeader||!fromTab?this.focusService.focusHeaderPosition({headerPosition:nextHeader,direction:normalisedDirection,fromTab,allowUserOverride:!0,event}):this.focusNextHeaderRow(focusedHeader,normalisedDirection,event)},HeaderNavigationService2.prototype.focusNextHeaderRow=function(focusedHeader,direction,event){var currentIndex=focusedHeader.headerRowIndex,nextPosition=null,nextRowIndex;if(direction==="Before"?currentIndex>0&&(nextRowIndex=currentIndex-1,this.currentHeaderRowWithoutSpan-=1,nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"end")):(nextRowIndex=currentIndex+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),nextPosition=this.headerPositionUtils.findColAtEdgeForHeaderRow(nextRowIndex,"start")),!nextPosition)return!1;var _a=this.headerPositionUtils.getHeaderIndexToFocus(nextPosition.column,nextPosition==null?void 0:nextPosition.headerRowIndex),column=_a.column,headerRowIndex=_a.headerRowIndex;return this.focusService.focusHeaderPosition({headerPosition:{column,headerRowIndex},direction,fromTab:!0,allowUserOverride:!0,event})},HeaderNavigationService2.prototype.scrollToColumn=function(column,direction){if(direction===void 0&&(direction="After"),!column.getPinned()){var columnToScrollTo;if(column instanceof ColumnGroup){var columns=column.getDisplayedLeafColumns();columnToScrollTo=direction==="Before"?last(columns):columns[0]}else columnToScrollTo=column;this.gridBodyCon.getScrollFeature().ensureColumnVisible(columnToScrollTo)}},__decorate$1s([Autowired("focusService")],HeaderNavigationService2.prototype,"focusService",void 0),__decorate$1s([Autowired("headerPositionUtils")],HeaderNavigationService2.prototype,"headerPositionUtils",void 0),__decorate$1s([Autowired("ctrlsService")],HeaderNavigationService2.prototype,"ctrlsService",void 0),__decorate$1s([PostConstruct],HeaderNavigationService2.prototype,"postConstruct",null),HeaderNavigationService2=__decorate$1s([Bean("headerNavigationService")],HeaderNavigationService2),HeaderNavigationService2}(BeanStub),__extends$1w=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1r=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1r"),GridHeaderCtrl=function(_super){__extends$1w(GridHeaderCtrl2,_super);function GridHeaderCtrl2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(GridHeaderCtrl2,"GridHeaderCtrl"),GridHeaderCtrl2.prototype.setComp=function(comp,eGui,eFocusableElement){this.comp=comp,this.eGui=eGui,this.createManagedBean(new ManagedFocusFeature(eFocusableElement,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();var listener=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",listener),this.mockContextMenuForIPad(listener),this.ctrlsService.registerGridHeaderCtrl(this)},GridHeaderCtrl2.prototype.setupHeaderHeight=function(){var listener=this.setHeaderHeight.bind(this);listener(),this.addManagedPropertyListener("headerHeight",listener),this.addManagedPropertyListener("pivotHeaderHeight",listener),this.addManagedPropertyListener("groupHeaderHeight",listener),this.addManagedPropertyListener("pivotGroupHeaderHeight",listener),this.addManagedPropertyListener("floatingFiltersHeight",listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,listener)},GridHeaderCtrl2.prototype.getHeaderHeight=function(){return this.headerHeight},GridHeaderCtrl2.prototype.setHeaderHeight=function(){var columnModel=this.columnModel,numberOfFloating=0,headerRowCount=columnModel.getHeaderRowCount(),totalHeaderHeight,hasFloatingFilters=this.filterManager.hasFloatingFilters();hasFloatingFilters&&(headerRowCount++,numberOfFloating=1);var groupHeight=this.columnModel.getColumnGroupHeaderRowHeight(),headerHeight=this.columnModel.getColumnHeaderRowHeight(),numberOfNonGroups=1+numberOfFloating,numberOfGroups=headerRowCount-numberOfNonGroups;if(totalHeaderHeight=numberOfFloating*columnModel.getFloatingFiltersHeight(),totalHeaderHeight+=numberOfGroups*groupHeight,totalHeaderHeight+=headerHeight,this.headerHeight!==totalHeaderHeight){this.headerHeight=totalHeaderHeight;var px="".concat(totalHeaderHeight+1,"px");this.comp.setHeightAndMinHeight(px),this.eventService.dispatchEvent({type:Events.EVENT_HEADER_HEIGHT_CHANGED})}},GridHeaderCtrl2.prototype.onPivotModeChanged=function(){var pivotMode=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",pivotMode),this.comp.addOrRemoveCssClass("ag-pivot-off",!pivotMode)},GridHeaderCtrl2.prototype.onDisplayedColumnsChanged=function(){var columns=this.columnModel.getAllDisplayedColumns(),shouldAllowOverflow=columns.some(function(col){return col.isSpanHeaderHeight()});this.comp.addOrRemoveCssClass("ag-header-allow-overflow",shouldAllowOverflow)},GridHeaderCtrl2.prototype.onTabKeyDown=function(e){var isRtl=this.gridOptionsService.get("enableRtl"),direction=e.shiftKey!==isRtl?HeaderNavigationDirection.LEFT:HeaderNavigationDirection.RIGHT;(this.headerNavigationService.navigateHorizontally(direction,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()},GridHeaderCtrl2.prototype.handleKeyDown=function(e){var direction=null;switch(e.key){case KeyCode.LEFT:direction=HeaderNavigationDirection.LEFT;case KeyCode.RIGHT:exists(direction)||(direction=HeaderNavigationDirection.RIGHT),this.headerNavigationService.navigateHorizontally(direction,!1,e);break;case KeyCode.UP:direction=HeaderNavigationDirection.UP;case KeyCode.DOWN:exists(direction)||(direction=HeaderNavigationDirection.DOWN),this.headerNavigationService.navigateVertically(direction,null,e)&&e.preventDefault();break;default:return}},GridHeaderCtrl2.prototype.onFocusOut=function(e){var eDocument=this.gridOptionsService.getDocument(),relatedTarget=e.relatedTarget;!relatedTarget&&this.eGui.contains(eDocument.activeElement)||this.eGui.contains(relatedTarget)||this.focusService.clearFocusedHeader()},GridHeaderCtrl2.prototype.onHeaderContextMenu=function(mouseEvent,touch,touchEvent){if(!(!mouseEvent&&!touchEvent||!this.menuService.isHeaderContextMenuEnabled())){var target=(mouseEvent??touch).target;(target===this.eGui||target===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,mouseEvent,touchEvent)}},GridHeaderCtrl2.prototype.mockContextMenuForIPad=function(listener){if(isIOSUserAgent()){var touchListener=new TouchListener(this.eGui),longTapListener=__name(function(event){listener(void 0,event.touchStart,event.touchEvent)},"longTapListener");this.addManagedListener(touchListener,TouchListener.EVENT_LONG_TAP,longTapListener),this.addDestroyFunc(function(){return touchListener.destroy()})}},__decorate$1r([Autowired("headerNavigationService")],GridHeaderCtrl2.prototype,"headerNavigationService",void 0),__decorate$1r([Autowired("focusService")],GridHeaderCtrl2.prototype,"focusService",void 0),__decorate$1r([Autowired("columnModel")],GridHeaderCtrl2.prototype,"columnModel",void 0),__decorate$1r([Autowired("ctrlsService")],GridHeaderCtrl2.prototype,"ctrlsService",void 0),__decorate$1r([Autowired("filterManager")],GridHeaderCtrl2.prototype,"filterManager",void 0),__decorate$1r([Autowired("menuService")],GridHeaderCtrl2.prototype,"menuService",void 0),GridHeaderCtrl2}(BeanStub),__extends$1v=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1q=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1q"),GridHeaderComp=function(_super){__extends$1v(GridHeaderComp2,_super);function GridHeaderComp2(){return _super.call(this,GridHeaderComp2.TEMPLATE)||this}return __name(GridHeaderComp2,"GridHeaderComp"),GridHeaderComp2.prototype.postConstruct=function(){var _this=this,compProxy={addOrRemoveCssClass:function(cssClassName,on){return _this.addOrRemoveCssClass(cssClassName,on)},setHeightAndMinHeight:function(height){_this.getGui().style.height=height,_this.getGui().style.minHeight=height}},ctrl=this.createManagedBean(new GridHeaderCtrl);ctrl.setComp(compProxy,this.getGui(),this.getFocusableElement());var addContainer=__name(function(container){_this.createManagedBean(container),_this.appendChild(container)},"addContainer");addContainer(new HeaderRowContainerComp("left")),addContainer(new HeaderRowContainerComp(null)),addContainer(new HeaderRowContainerComp("right"))},GridHeaderComp2.TEMPLATE='<div class="ag-header" role="presentation"/>',__decorate$1q([PostConstruct],GridHeaderComp2.prototype,"postConstruct",null),GridHeaderComp2}(Component),__extends$1u=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1p=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1p"),HorizontalResizeService=function(_super){__extends$1u(HorizontalResizeService2,_super);function HorizontalResizeService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(HorizontalResizeService2,"HorizontalResizeService"),HorizontalResizeService2.prototype.addResizeBar=function(params){var _this=this,dragSource={dragStartPixels:params.dragStartPixels||0,eElement:params.eResizeBar,onDragStart:this.onDragStart.bind(this,params),onDragStop:this.onDragStop.bind(this,params),onDragging:this.onDragging.bind(this,params),includeTouch:!0,stopPropagationForTouch:!0};this.dragService.addDragSource(dragSource);var finishedWithResizeFunc=__name(function(){return _this.dragService.removeDragSource(dragSource)},"finishedWithResizeFunc");return finishedWithResizeFunc},HorizontalResizeService2.prototype.onDragStart=function(params,mouseEvent){this.dragStartX=mouseEvent.clientX,this.setResizeIcons();var shiftKey=mouseEvent instanceof MouseEvent&&mouseEvent.shiftKey===!0;params.onResizeStart(shiftKey)},HorizontalResizeService2.prototype.setResizeIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!0),ctrl.disableUserSelect(!0)},HorizontalResizeService2.prototype.onDragStop=function(params,mouseEvent){params.onResizeEnd(this.resizeAmount),this.resetIcons()},HorizontalResizeService2.prototype.resetIcons=function(){var ctrl=this.ctrlsService.getGridCtrl();ctrl.setResizeCursor(!1),ctrl.disableUserSelect(!1)},HorizontalResizeService2.prototype.onDragging=function(params,mouseEvent){this.resizeAmount=mouseEvent.clientX-this.dragStartX,params.onResizing(this.resizeAmount)},__decorate$1p([Autowired("dragService")],HorizontalResizeService2.prototype,"dragService",void 0),__decorate$1p([Autowired("ctrlsService")],HorizontalResizeService2.prototype,"ctrlsService",void 0),HorizontalResizeService2=__decorate$1p([Bean("horizontalResizeService")],HorizontalResizeService2),HorizontalResizeService2}(BeanStub),__extends$1t=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1o=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1o"),StandardMenuFactory=function(_super){__extends$1t(StandardMenuFactory2,_super);function StandardMenuFactory2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(StandardMenuFactory2,"StandardMenuFactory"),StandardMenuFactory2.prototype.hideActiveMenu=function(){this.hidePopup&&this.hidePopup()},StandardMenuFactory2.prototype.showMenuAfterMouseEvent=function(column,mouseEvent,containerType){var _this=this;this.showPopup(column,function(eMenu){_this.popupService.positionPopupUnderMouseEvent({column,type:containerType,mouseEvent,ePopup:eMenu})},containerType,mouseEvent.target,this.menuService.isLegacyMenuEnabled())},StandardMenuFactory2.prototype.showMenuAfterButtonClick=function(column,eventSource,containerType){var _this=this,multiplier=-1,alignSide="left",isLegacyMenuEnabled=this.menuService.isLegacyMenuEnabled();!isLegacyMenuEnabled&&this.gridOptionsService.get("enableRtl")&&(multiplier=1,alignSide="right");var nudgeX=isLegacyMenuEnabled?void 0:4*multiplier,nudgeY=isLegacyMenuEnabled?void 0:4;this.showPopup(column,function(eMenu){_this.popupService.positionPopupByComponent({type:containerType,eventSource,ePopup:eMenu,nudgeX,nudgeY,alignSide,keepWithinBounds:!0,position:"under",column})},containerType,eventSource,isLegacyMenuEnabled)},StandardMenuFactory2.prototype.showPopup=function(column,positionCallback,containerType,eventSource,isLegacyMenuEnabled){var _this=this,filterWrapper=column?this.filterManager.getOrCreateFilterWrapper(column,"COLUMN_MENU"):void 0;if(!filterWrapper||!column)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");var eMenu=document.createElement("div");setAriaRole(eMenu,"presentation"),eMenu.classList.add("ag-menu"),isLegacyMenuEnabled||eMenu.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(eMenu,"keydown",function(e){return _this.trapFocusWithin(e,eMenu)}),filterWrapper.guiPromise.then(function(gui){return eMenu.appendChild(gui)});var hidePopup,afterGuiDetached=__name(function(){var _a;return(_a=filterWrapper.filterPromise)===null||_a===void 0?void 0:_a.then(function(filter){var _a2;return(_a2=filter==null?void 0:filter.afterGuiDetached)===null||_a2===void 0?void 0:_a2.call(filter)})},"afterGuiDetached"),anchorToElement=this.menuService.isColumnMenuAnchoringEnabled()?eventSource??this.ctrlsService.getGridBodyCtrl().getGui():void 0,closedCallback=__name(function(e){column.setMenuVisible(!1,"contextMenu");var isKeyboardEvent=e instanceof KeyboardEvent;if(_this.tabListener&&(_this.tabListener=_this.tabListener()),isKeyboardEvent&&eventSource&&isVisible(eventSource)){var focusableEl=_this.focusService.findTabbableParent(eventSource);focusableEl&&focusableEl.focus()}afterGuiDetached(),_this.dispatchVisibleChangedEvent(!1,containerType,column)},"closedCallback"),translate=this.localeService.getLocaleTextFunc(),ariaLabel=isLegacyMenuEnabled&&containerType!=="columnFilter"?translate("ariaLabelColumnMenu","Column Menu"):translate("ariaLabelColumnFilter","Column Filter"),addPopupRes=this.popupService.addPopup({modal:!0,eChild:eMenu,closeOnEsc:!0,closedCallback,positionCallback:function(){return positionCallback(eMenu)},anchorToElement,ariaLabel});addPopupRes&&(this.hidePopup=hidePopup=addPopupRes.hideFunc),filterWrapper.filterPromise.then(function(filter){positionCallback(eMenu),filter.afterGuiAttached&&filter.afterGuiAttached({container:containerType,hidePopup})}),column.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,containerType,column)},StandardMenuFactory2.prototype.trapFocusWithin=function(e,menu){e.key!==KeyCode.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(menu,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(menu,e.shiftKey))},StandardMenuFactory2.prototype.dispatchVisibleChangedEvent=function(visible,containerType,column){var displayedEvent={type:Events.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible,switchingTab:!1,key:containerType,column:column??null};this.eventService.dispatchEvent(displayedEvent)},StandardMenuFactory2.prototype.isMenuEnabled=function(column){var _a;return column.isFilterAllowed()&&((_a=column.getColDef().menuTabs)!==null&&_a!==void 0?_a:["filterMenuTab"]).includes("filterMenuTab")},StandardMenuFactory2.prototype.showMenuAfterContextMenuEvent=function(){},__decorate$1o([Autowired("filterManager")],StandardMenuFactory2.prototype,"filterManager",void 0),__decorate$1o([Autowired("popupService")],StandardMenuFactory2.prototype,"popupService",void 0),__decorate$1o([Autowired("focusService")],StandardMenuFactory2.prototype,"focusService",void 0),__decorate$1o([Autowired("ctrlsService")],StandardMenuFactory2.prototype,"ctrlsService",void 0),__decorate$1o([Autowired("menuService")],StandardMenuFactory2.prototype,"menuService",void 0),StandardMenuFactory2=__decorate$1o([Bean("filterMenuFactory")],StandardMenuFactory2),StandardMenuFactory2}(BeanStub),__extends$1s=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1n=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1n"),TabGuardClassNames;(function(TabGuardClassNames2){TabGuardClassNames2.TAB_GUARD="ag-tab-guard",TabGuardClassNames2.TAB_GUARD_TOP="ag-tab-guard-top",TabGuardClassNames2.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"})(TabGuardClassNames||(TabGuardClassNames={}));var TabGuardCtrl=function(_super){__extends$1s(TabGuardCtrl2,_super);function TabGuardCtrl2(params){var _this=_super.call(this)||this;_this.skipTabGuardFocus=!1,_this.forcingFocusOut=!1;var comp=params.comp,eTopGuard=params.eTopGuard,eBottomGuard=params.eBottomGuard,focusTrapActive=params.focusTrapActive,forceFocusOutWhenTabGuardsAreEmpty=params.forceFocusOutWhenTabGuardsAreEmpty,focusInnerElement=params.focusInnerElement,onFocusIn=params.onFocusIn,onFocusOut=params.onFocusOut,shouldStopEventPropagation=params.shouldStopEventPropagation,onTabKeyDown=params.onTabKeyDown,handleKeyDown=params.handleKeyDown,eFocusableElement=params.eFocusableElement;return _this.comp=comp,_this.eTopGuard=eTopGuard,_this.eBottomGuard=eBottomGuard,_this.providedFocusInnerElement=focusInnerElement,_this.eFocusableElement=eFocusableElement,_this.focusTrapActive=!!focusTrapActive,_this.forceFocusOutWhenTabGuardsAreEmpty=!!forceFocusOutWhenTabGuardsAreEmpty,_this.providedFocusIn=onFocusIn,_this.providedFocusOut=onFocusOut,_this.providedShouldStopEventPropagation=shouldStopEventPropagation,_this.providedOnTabKeyDown=onTabKeyDown,_this.providedHandleKeyDown=handleKeyDown,_this}return __name(TabGuardCtrl2,"TabGuardCtrl"),TabGuardCtrl2.prototype.postConstruct=function(){var _this=this;this.createManagedBean(new ManagedFocusFeature(this.eFocusableElement,{shouldStopEventPropagation:function(){return _this.shouldStopEventPropagation()},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)},onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)}})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(function(guard){return _this.addManagedListener(guard,"focus",_this.onFocus.bind(_this))})},TabGuardCtrl2.prototype.handleKeyDown=function(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)},TabGuardCtrl2.prototype.tabGuardsAreActive=function(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")},TabGuardCtrl2.prototype.shouldStopEventPropagation=function(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1},TabGuardCtrl2.prototype.activateTabGuards=function(){if(!this.forcingFocusOut){var tabIndex=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(tabIndex.toString())}},TabGuardCtrl2.prototype.deactivateTabGuards=function(){this.comp.setTabIndex()},TabGuardCtrl2.prototype.onFocus=function(e){if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty){var isEmpty=this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0;if(isEmpty){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}}var fromBottom=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(fromBottom):this.focusInnerElement(fromBottom)},TabGuardCtrl2.prototype.findNextElementOutsideAndFocus=function(up){var eDocument=this.gridOptionsService.getDocument(),focusableEls=this.focusService.findFocusableElements(eDocument.body,null,!0),index=focusableEls.indexOf(up?this.eTopGuard:this.eBottomGuard);if(index!==-1){var start,end;up?(start=0,end=index):(start=index+1,end=focusableEls.length);var focusableRange=focusableEls.slice(start,end),targetTabIndex=this.gridOptionsService.get("tabIndex");focusableRange.sort(function(a,b){var indexA=parseInt(a.getAttribute("tabindex")||"0"),indexB=parseInt(b.getAttribute("tabindex")||"0");return indexB===targetTabIndex?1:indexA===targetTabIndex?-1:indexA===0?1:indexB===0?-1:indexA-indexB}),focusableRange[up?focusableRange.length-1:0].focus()}},TabGuardCtrl2.prototype.onFocusIn=function(e){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(e),this.deactivateTabGuards())},TabGuardCtrl2.prototype.onFocusOut=function(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())},TabGuardCtrl2.prototype.onTabKeyDown=function(e){var _this=this;if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(!this.focusTrapActive&&!e.defaultPrevented){var tabGuardsAreActive=this.tabGuardsAreActive();tabGuardsAreActive&&this.deactivateTabGuards();var nextRoot=this.getNextFocusableElement(e.shiftKey);tabGuardsAreActive&&setTimeout(function(){return _this.activateTabGuards()},0),nextRoot&&(nextRoot.focus(),e.preventDefault())}},TabGuardCtrl2.prototype.focusInnerElement=function(fromBottom){fromBottom===void 0&&(fromBottom=!1);var focusable=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(focusable.splice(0,1),focusable.splice(focusable.length-1,1)),focusable.length&&focusable[fromBottom?focusable.length-1:0].focus({preventScroll:!0})},TabGuardCtrl2.prototype.getNextFocusableElement=function(backwards){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,backwards)},TabGuardCtrl2.prototype.forceFocusOutOfContainer=function(up){var _this=this;if(up===void 0&&(up=!1),!this.forcingFocusOut){var tabGuardToFocus=up?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,tabGuardToFocus.focus(),window.setTimeout(function(){_this.forcingFocusOut=!1,_this.activateTabGuards()})}},TabGuardCtrl2.prototype.isTabGuard=function(element){return element===this.eTopGuard||element===this.eBottomGuard},__decorate$1n([Autowired("focusService")],TabGuardCtrl2.prototype,"focusService",void 0),__decorate$1n([PostConstruct],TabGuardCtrl2.prototype,"postConstruct",null),TabGuardCtrl2}(BeanStub),__extends$1r=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__read$j=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$j"),__spreadArray$h=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$h"),TabGuardComp=function(_super){__extends$1r(TabGuardComp2,_super);function TabGuardComp2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(TabGuardComp2,"TabGuardComp"),TabGuardComp2.prototype.initialiseTabGuard=function(params){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();var tabGuards=[this.eTopGuard,this.eBottomGuard],compProxy={setTabIndex:function(tabIndex){tabGuards.forEach(function(tabGuard){return tabIndex!=null?tabGuard.setAttribute("tabindex",tabIndex):tabGuard.removeAttribute("tabindex")})}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new TabGuardCtrl({comp:compProxy,focusTrapActive:!!params.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:params.onFocusIn,onFocusOut:params.onFocusOut,focusInnerElement:params.focusInnerElement,handleKeyDown:params.handleKeyDown,onTabKeyDown:params.onTabKeyDown,shouldStopEventPropagation:params.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:params.forceFocusOutWhenTabGuardsAreEmpty}))},TabGuardComp2.prototype.createTabGuard=function(side){var tabGuard=document.createElement("div"),cls=side==="top"?TabGuardClassNames.TAB_GUARD_TOP:TabGuardClassNames.TAB_GUARD_BOTTOM;return tabGuard.classList.add(TabGuardClassNames.TAB_GUARD,cls),setAriaRole(tabGuard,"presentation"),tabGuard},TabGuardComp2.prototype.addTabGuards=function(topTabGuard,bottomTabGuard){this.eFocusableElement.insertAdjacentElement("afterbegin",topTabGuard),this.eFocusableElement.insertAdjacentElement("beforeend",bottomTabGuard)},TabGuardComp2.prototype.removeAllChildrenExceptTabGuards=function(){var tabGuards=[this.eTopGuard,this.eBottomGuard];clearElement(this.getFocusableElement()),this.addTabGuards.apply(this,__spreadArray$h([],__read$j(tabGuards),!1))},TabGuardComp2.prototype.forceFocusOutOfContainer=function(up){up===void 0&&(up=!1),this.tabGuardCtrl.forceFocusOutOfContainer(up)},TabGuardComp2.prototype.appendChild=function(newChild,container){isNodeOrElement(newChild)||(newChild=newChild.getGui());var bottomTabGuard=this.eBottomGuard;bottomTabGuard?bottomTabGuard.insertAdjacentElement("beforebegin",newChild):_super.prototype.appendChild.call(this,newChild,container)},TabGuardComp2}(Component),__extends$1q=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1m=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1m"),TabbedLayout=function(_super){__extends$1q(TabbedLayout2,_super);function TabbedLayout2(params){var _this=_super.call(this,TabbedLayout2.getTemplate(params.cssClass))||this;return _this.items=[],_this.tabbedItemScrollMap=new Map,_this.params=params,params.items&&params.items.forEach(function(item){return _this.addItem(item)}),_this}return __name(TabbedLayout2,"TabbedLayout"),TabbedLayout2.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(function(){var _a,_b,_c;return(_c=(_b=(_a=_this.activeItem)===null||_a===void 0?void 0:_a.tabbedItem)===null||_b===void 0?void 0:_b.afterDetachedCallback)===null||_c===void 0?void 0:_c.call(_b)})},TabbedLayout2.getTemplate=function(cssClass){return'<div class="ag-tabs '.concat(cssClass,`">
            <div ref="eHeader" role="tablist" class="ag-tabs-header `).concat(cssClass?"".concat(cssClass,"-header"):"",`"></div>
            <div ref="eBody" role="presentation" class="ag-tabs-body `).concat(cssClass?"".concat(cssClass,"-body"):"",`"></div>
        </div>`)},TabbedLayout2.prototype.handleKeyDown=function(e){var eDocument=this.gridOptionsService.getDocument();switch(e.key){case KeyCode.RIGHT:case KeyCode.LEFT:if(!this.eHeader.contains(eDocument.activeElement))return;var isRightKey=e.key===KeyCode.RIGHT,isRtl=this.gridOptionsService.get("enableRtl"),currentPosition=this.items.indexOf(this.activeItem),nextPosition=isRightKey!==isRtl?Math.min(currentPosition+1,this.items.length-1):Math.max(currentPosition-1,0);if(currentPosition===nextPosition)return;e.preventDefault();var nextItem=this.items[nextPosition];this.showItemWrapper(nextItem),nextItem.eHeaderButton.focus();break;case KeyCode.UP:case KeyCode.DOWN:e.stopPropagation();break}},TabbedLayout2.prototype.onTabKeyDown=function(e){if(!e.defaultPrevented){var _a=this,focusService=_a.focusService,eHeader=_a.eHeader,eBody=_a.eBody,activeItem=_a.activeItem,eDocument=this.gridOptionsService.getDocument(),activeElement=eDocument.activeElement,target=e.target;if(e.preventDefault(),eHeader.contains(activeElement)){this.focusBody(e.shiftKey);return}var nextEl=null;focusService.isTargetUnderManagedComponent(eBody,target)&&(e.shiftKey&&(nextEl=this.focusService.findFocusableElementBeforeTabGuard(eBody,target)),nextEl||(nextEl=activeItem.eHeaderButton)),!nextEl&&eBody.contains(activeElement)&&(nextEl=focusService.findNextFocusableElement(eBody,!1,e.shiftKey),nextEl||this.focusHeader()),nextEl&&nextEl.focus()}},TabbedLayout2.prototype.focusInnerElement=function(fromBottom){fromBottom?this.focusHeader():this.focusBody(!0)},TabbedLayout2.prototype.focusHeader=function(){this.activeItem.eHeaderButton.focus()},TabbedLayout2.prototype.focusBody=function(fromBottom){this.focusService.focusInto(this.eBody,fromBottom)},TabbedLayout2.prototype.setAfterAttachedParams=function(params){this.afterAttachedParams=params},TabbedLayout2.prototype.showFirstItem=function(){this.items.length>0&&this.showItemWrapper(this.items[0])},TabbedLayout2.prototype.addItem=function(item){var eHeaderButton=document.createElement("span");setAriaRole(eHeaderButton,"tab"),eHeaderButton.setAttribute("tabindex","-1"),eHeaderButton.appendChild(item.title),eHeaderButton.classList.add("ag-tab"),this.eHeader.appendChild(eHeaderButton),setAriaLabel(eHeaderButton,item.titleLabel);var wrapper={tabbedItem:item,eHeaderButton};this.items.push(wrapper),eHeaderButton.addEventListener("click",this.showItemWrapper.bind(this,wrapper))},TabbedLayout2.prototype.showItem=function(tabbedItem){var itemWrapper=this.items.find(function(wrapper){return wrapper.tabbedItem===tabbedItem});itemWrapper&&this.showItemWrapper(itemWrapper)},TabbedLayout2.prototype.showItemWrapper=function(wrapper){var _this=this,_a,_b,_c,_d,_e,_f,tabbedItem=wrapper.tabbedItem,eHeaderButton=wrapper.eHeaderButton;if((_b=(_a=this.params).onItemClicked)===null||_b===void 0||_b.call(_a,{item:tabbedItem}),this.activeItem===wrapper){(_d=(_c=this.params).onActiveItemClicked)===null||_d===void 0||_d.call(_c);return}this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),clearElement(this.eBody),tabbedItem.bodyPromise.then(function(body){_this.eBody.appendChild(body);var onlyUnmanaged=!_this.focusService.isKeyboardMode();if(_this.focusService.focusInto(_this.eBody,!1,onlyUnmanaged),tabbedItem.afterAttachedCallback&&tabbedItem.afterAttachedCallback(_this.afterAttachedParams),_this.params.keepScrollPosition){var scrollableContainer_1=tabbedItem.getScrollableContainer&&tabbedItem.getScrollableContainer()||body;_this.lastScrollListener=_this.addManagedListener(scrollableContainer_1,"scroll",function(){_this.tabbedItemScrollMap.set(tabbedItem.name,scrollableContainer_1.scrollTop)});var scrollPosition_1=_this.tabbedItemScrollMap.get(tabbedItem.name);scrollPosition_1!==void 0&&setTimeout(function(){scrollableContainer_1.scrollTop=scrollPosition_1},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),(_f=(_e=this.activeItem.tabbedItem).afterDetachedCallback)===null||_f===void 0||_f.call(_e)),eHeaderButton.classList.add("ag-tab-selected"),this.activeItem=wrapper},__decorate$1m([Autowired("focusService")],TabbedLayout2.prototype,"focusService",void 0),__decorate$1m([RefSelector("eHeader")],TabbedLayout2.prototype,"eHeader",void 0),__decorate$1m([RefSelector("eBody")],TabbedLayout2.prototype,"eBody",void 0),__decorate$1m([PostConstruct],TabbedLayout2.prototype,"postConstruct",null),TabbedLayout2}(TabGuardComp),__extends$1p=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1l=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1l"),DEBOUNCE_DELAY=50,ResizeObserverService=function(_super){__extends$1p(ResizeObserverService2,_super);function ResizeObserverService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.polyfillFunctions=[],_this}return __name(ResizeObserverService2,"ResizeObserverService"),ResizeObserverService2.prototype.observeResize=function(element,callback){var _this=this,win=this.gridOptionsService.getWindow(),useBrowserResizeObserver=__name(function(){var resizeObserver=new win.ResizeObserver(callback);return resizeObserver.observe(element),function(){return resizeObserver.disconnect()}},"useBrowserResizeObserver"),usePolyfill=__name(function(){var _a,_b,widthLastTime=(_a=element==null?void 0:element.clientWidth)!==null&&_a!==void 0?_a:0,heightLastTime=(_b=element==null?void 0:element.clientHeight)!==null&&_b!==void 0?_b:0,running=!0,periodicallyCheckWidthAndHeight=__name(function(){var _a2,_b2;if(running){var newWidth=(_a2=element==null?void 0:element.clientWidth)!==null&&_a2!==void 0?_a2:0,newHeight=(_b2=element==null?void 0:element.clientHeight)!==null&&_b2!==void 0?_b2:0,changed=newWidth!==widthLastTime||newHeight!==heightLastTime;changed&&(widthLastTime=newWidth,heightLastTime=newHeight,callback()),_this.doNextPolyfillTurn(periodicallyCheckWidthAndHeight)}},"periodicallyCheckWidthAndHeight");return periodicallyCheckWidthAndHeight(),function(){return running=!1}},"usePolyfill"),suppressResize=this.gridOptionsService.get("suppressBrowserResizeObserver"),resizeObserverExists=!!win.ResizeObserver;return resizeObserverExists&&!suppressResize?useBrowserResizeObserver():this.getFrameworkOverrides().wrapIncoming(function(){return usePolyfill()},"resize-observer")},ResizeObserverService2.prototype.doNextPolyfillTurn=function(func){this.polyfillFunctions.push(func),this.schedulePolyfill()},ResizeObserverService2.prototype.schedulePolyfill=function(){var _this=this;if(!this.polyfillScheduled){var executeAllFuncs=__name(function(){var funcs=_this.polyfillFunctions;_this.polyfillScheduled=!1,_this.polyfillFunctions=[],funcs.forEach(function(f){return f()})},"executeAllFuncs");this.polyfillScheduled=!0,window.setTimeout(executeAllFuncs,DEBOUNCE_DELAY)}},ResizeObserverService2=__decorate$1l([Bean("resizeObserverService")],ResizeObserverService2),ResizeObserverService2}(BeanStub),__extends$1o=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1k=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1k"),AnimationFrameService=function(_super){__extends$1o(AnimationFrameService2,_super);function AnimationFrameService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.createTasksP1={list:[],sorted:!1},_this.createTasksP2={list:[],sorted:!1},_this.destroyTasks=[],_this.ticking=!1,_this.scrollGoingDown=!0,_this.lastPage=0,_this.lastScrollTop=0,_this.taskCount=0,_this.cancelledTasks=new Set,_this}return __name(AnimationFrameService2,"AnimationFrameService"),AnimationFrameService2.prototype.setScrollTop=function(scrollTop){var isPaginationActive=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=scrollTop>=this.lastScrollTop,isPaginationActive&&scrollTop===0){var currentPage=this.paginationProxy.getCurrentPage();currentPage!==this.lastPage&&(this.lastPage=currentPage,this.scrollGoingDown=!0)}this.lastScrollTop=scrollTop},AnimationFrameService2.prototype.init=function(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")},AnimationFrameService2.prototype.isOn=function(){return this.useAnimationFrame},AnimationFrameService2.prototype.verifyAnimationFrameOn=function(methodName){this.useAnimationFrame===!1&&console.warn("AG Grid: AnimationFrameService.".concat(methodName," called but animation frames are off"))},AnimationFrameService2.prototype.createTask=function(task,index,list){this.verifyAnimationFrameOn(list);var taskItem={task,index,createOrder:++this.taskCount};this.addTaskToList(this[list],taskItem),this.schedule()},AnimationFrameService2.prototype.cancelTask=function(task){this.cancelledTasks.add(task)},AnimationFrameService2.prototype.addTaskToList=function(taskList,task){taskList.list.push(task),taskList.sorted=!1},AnimationFrameService2.prototype.sortTaskList=function(taskList){if(!taskList.sorted){var sortDirection=this.scrollGoingDown?1:-1;taskList.list.sort(function(a,b){return a.index!==b.index?sortDirection*(b.index-a.index):b.createOrder-a.createOrder}),taskList.sorted=!0}},AnimationFrameService2.prototype.addDestroyTask=function(task){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(task),this.schedule()},AnimationFrameService2.prototype.executeFrame=function(millis){this.verifyAnimationFrameOn("executeFrame");for(var p1TaskList=this.createTasksP1,p1Tasks=p1TaskList.list,p2TaskList=this.createTasksP2,p2Tasks=p2TaskList.list,destroyTasks=this.destroyTasks,frameStart=new Date().getTime(),duration=new Date().getTime()-frameStart,noMaxMillis=millis<=0,gridBodyCon=this.ctrlsService.getGridBodyCtrl();noMaxMillis||duration<millis;){var gridBodyDidSomething=gridBodyCon.getScrollFeature().scrollGridIfNeeded();if(!gridBodyDidSomething){var task=void 0;if(p1Tasks.length)this.sortTaskList(p1TaskList),task=p1Tasks.pop().task;else if(p2Tasks.length)this.sortTaskList(p2TaskList),task=p2Tasks.pop().task;else if(destroyTasks.length)task=destroyTasks.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(task)||task()}duration=new Date().getTime()-frameStart}p1Tasks.length||p2Tasks.length||destroyTasks.length?this.requestFrame():this.stopTicking()},AnimationFrameService2.prototype.stopTicking=function(){this.ticking=!1},AnimationFrameService2.prototype.flushAllFrames=function(){this.useAnimationFrame&&this.executeFrame(-1)},AnimationFrameService2.prototype.schedule=function(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))},AnimationFrameService2.prototype.requestFrame=function(){var callback=this.executeFrame.bind(this,60);this.requestAnimationFrame(callback)},AnimationFrameService2.prototype.requestAnimationFrame=function(callback){var win=this.gridOptionsService.getWindow();win.requestAnimationFrame?win.requestAnimationFrame(callback):win.webkitRequestAnimationFrame?win.webkitRequestAnimationFrame(callback):win.setTimeout(callback,0)},AnimationFrameService2.prototype.isQueueEmpty=function(){return!this.ticking},AnimationFrameService2.prototype.debounce=function(func){var _this=this,pending=!1;return function(){if(!_this.isOn()){window.setTimeout(func,0);return}pending||(pending=!0,_this.addDestroyTask(function(){pending=!1,func()}))}},__decorate$1k([Autowired("ctrlsService")],AnimationFrameService2.prototype,"ctrlsService",void 0),__decorate$1k([Autowired("paginationProxy")],AnimationFrameService2.prototype,"paginationProxy",void 0),__decorate$1k([PostConstruct],AnimationFrameService2.prototype,"init",null),AnimationFrameService2=__decorate$1k([Bean("animationFrameService")],AnimationFrameService2),AnimationFrameService2}(BeanStub),ClientSideRowModelSteps;(function(ClientSideRowModelSteps2){ClientSideRowModelSteps2.EVERYTHING="group",ClientSideRowModelSteps2.FILTER="filter",ClientSideRowModelSteps2.SORT="sort",ClientSideRowModelSteps2.MAP="map",ClientSideRowModelSteps2.AGGREGATE="aggregate",ClientSideRowModelSteps2.FILTER_AGGREGATES="filter_aggregates",ClientSideRowModelSteps2.PIVOT="pivot",ClientSideRowModelSteps2.NOTHING="nothing"})(ClientSideRowModelSteps||(ClientSideRowModelSteps={}));var __extends$1n=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1j=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1j"),ExpansionService=function(_super){__extends$1n(ExpansionService2,_super);function ExpansionService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ExpansionService2,"ExpansionService"),ExpansionService2.prototype.postConstruct=function(){this.isClientSideRowModel=this.rowModel.getType()==="clientSide"},ExpansionService2.prototype.expandRows=function(rowIds){if(this.isClientSideRowModel){var rowIdSet=new Set(rowIds);this.rowModel.forEachNode(function(node){node.id&&rowIdSet.has(node.id)&&(node.expanded=!0)}),this.onGroupExpandedOrCollapsed()}},ExpansionService2.prototype.getExpandedRows=function(){var expandedRows=[];return this.rowModel.forEachNode(function(_a){var expanded=_a.expanded,id=_a.id;expanded&&id&&expandedRows.push(id)}),expandedRows},ExpansionService2.prototype.expandAll=function(value){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(value)},ExpansionService2.prototype.setRowNodeExpanded=function(rowNode,expanded,expandParents){rowNode&&(expandParents&&rowNode.parent&&rowNode.parent.level!==-1&&this.setRowNodeExpanded(rowNode.parent,expanded,expandParents),rowNode.setExpanded(expanded))},ExpansionService2.prototype.onGroupExpandedOrCollapsed=function(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:ClientSideRowModelSteps.MAP})},__decorate$1j([Autowired("rowModel")],ExpansionService2.prototype,"rowModel",void 0),__decorate$1j([PostConstruct],ExpansionService2.prototype,"postConstruct",null),ExpansionService2=__decorate$1j([Bean("expansionService")],ExpansionService2),ExpansionService2}(BeanStub),__extends$1m=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1i=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1i"),MenuService=function(_super){__extends$1m(MenuService2,_super);function MenuService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(MenuService2,"MenuService"),MenuService2.prototype.postConstruct=function(){var _a;this.activeMenuFactory=(_a=this.enterpriseMenuFactory)!==null&&_a!==void 0?_a:this.filterMenuFactory},MenuService2.prototype.showColumnMenu=function(params){this.showColumnMenuCommon(this.activeMenuFactory,params,"columnMenu")},MenuService2.prototype.showFilterMenu=function(params){var menuFactory=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(menuFactory,params,params.containerType,!0)},MenuService2.prototype.showHeaderContextMenu=function(column,mouseEvent,touchEvent){this.activeMenuFactory.showMenuAfterContextMenuEvent(column,mouseEvent,touchEvent)},MenuService2.prototype.showContextMenu=function(params){var _a,_b,_c,column=params.column,anchorToElement=params.anchorToElement,rowNode=params.rowNode,value=params.value;(_a=this.contextMenuFactory)===null||_a===void 0||_a.onContextMenu((_b=params.mouseEvent)!==null&&_b!==void 0?_b:null,(_c=params.touchEvent)!==null&&_c!==void 0?_c:null,rowNode??null,column??null,value,anchorToElement)},MenuService2.prototype.showColumnChooser=function(params){var _a;(_a=this.columnChooserFactory)===null||_a===void 0||_a.showColumnChooser(params)},MenuService2.prototype.hidePopupMenu=function(){var _a;(_a=this.contextMenuFactory)===null||_a===void 0||_a.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()},MenuService2.prototype.hideColumnChooser=function(){var _a;(_a=this.columnChooserFactory)===null||_a===void 0||_a.hideActiveColumnChooser()},MenuService2.prototype.isColumnMenuInHeaderEnabled=function(column){var _a=column.getColDef(),suppressMenu=_a.suppressMenu,suppressHeaderMenuButton=_a.suppressHeaderMenuButton,isSuppressMenuButton=suppressHeaderMenuButton??suppressMenu;return!isSuppressMenuButton&&this.activeMenuFactory.isMenuEnabled(column)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)},MenuService2.prototype.isFilterMenuInHeaderEnabled=function(column){return!column.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(column)},MenuService2.prototype.isHeaderContextMenuEnabled=function(column){return!(column!=null&&column.getColDef().suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"},MenuService2.prototype.isHeaderMenuButtonAlwaysShowEnabled=function(){return this.isSuppressMenuHide()},MenuService2.prototype.isHeaderMenuButtonEnabled=function(){var menuHides=!this.isSuppressMenuHide(),onIpadAndMenuHides=isIOSUserAgent()&&menuHides;return!onIpadAndMenuHides},MenuService2.prototype.isHeaderFilterButtonEnabled=function(column){return this.isFilterMenuInHeaderEnabled(column)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(column)},MenuService2.prototype.isFilterMenuItemEnabled=function(column){return this.filterManager.isFilterAllowed(column)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(column)&&!this.isFloatingFilterButtonDisplayed(column)},MenuService2.prototype.isColumnMenuAnchoringEnabled=function(){return!this.isLegacyMenuEnabled()},MenuService2.prototype.areAdditionalColumnMenuItemsEnabled=function(){return this.getColumnMenuType()==="new"},MenuService2.prototype.isLegacyMenuEnabled=function(){return this.getColumnMenuType()==="legacy"},MenuService2.prototype.isFloatingFilterButtonEnabled=function(column){var _a,colDef=column.getColDef(),legacySuppressFilterButton=(_a=colDef.floatingFilterComponentParams)===null||_a===void 0?void 0:_a.suppressFilterButton;return legacySuppressFilterButton!=null&&warnOnce("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),colDef.suppressFloatingFilterButton==null?!legacySuppressFilterButton:!colDef.suppressFloatingFilterButton},MenuService2.prototype.getColumnMenuType=function(){var _a;return(_a=this.gridOptionsService.get("columnMenu"))!==null&&_a!==void 0?_a:"legacy"},MenuService2.prototype.isFloatingFilterButtonDisplayed=function(column){return!!column.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(column)},MenuService2.prototype.isSuppressMenuHide=function(){var suppressMenuHide=this.gridOptionsService.get("suppressMenuHide");return this.isLegacyMenuEnabled()||this.gridOptionsService.exists("suppressMenuHide")?suppressMenuHide:!0},MenuService2.prototype.showColumnMenuCommon=function(menuFactory,params,containerType,filtersOnly){var _this=this,column=params.column,positionBy=params.positionBy;if(positionBy==="button"){var buttonElement=params.buttonElement;menuFactory.showMenuAfterButtonClick(column,buttonElement,containerType,filtersOnly)}else if(positionBy==="mouse"){var mouseEvent=params.mouseEvent;menuFactory.showMenuAfterMouseEvent(column,mouseEvent,containerType,filtersOnly)}else column&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(column,"auto"),this.animationFrameService.requestAnimationFrame(function(){var headerCellCtrl=_this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()).getHeaderCtrlForColumn(column);menuFactory.showMenuAfterButtonClick(column,headerCellCtrl.getAnchorElementForMenu(filtersOnly),containerType,!0)}))},__decorate$1i([Optional("enterpriseMenuFactory")],MenuService2.prototype,"enterpriseMenuFactory",void 0),__decorate$1i([Autowired("filterMenuFactory")],MenuService2.prototype,"filterMenuFactory",void 0),__decorate$1i([Optional("contextMenuFactory")],MenuService2.prototype,"contextMenuFactory",void 0),__decorate$1i([Autowired("ctrlsService")],MenuService2.prototype,"ctrlsService",void 0),__decorate$1i([Autowired("animationFrameService")],MenuService2.prototype,"animationFrameService",void 0),__decorate$1i([Optional("columnChooserFactory")],MenuService2.prototype,"columnChooserFactory",void 0),__decorate$1i([Autowired("filterManager")],MenuService2.prototype,"filterManager",void 0),__decorate$1i([PostConstruct],MenuService2.prototype,"postConstruct",null),MenuService2=__decorate$1i([Bean("menuService")],MenuService2),MenuService2}(BeanStub),__extends$1l=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1h=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1h"),AutoWidthCalculator=function(_super){__extends$1l(AutoWidthCalculator2,_super);function AutoWidthCalculator2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(AutoWidthCalculator2,"AutoWidthCalculator"),AutoWidthCalculator2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.centerRowContainerCtrl=p.centerRowContainerCtrl})},AutoWidthCalculator2.prototype.getPreferredWidthForColumn=function(column,skipHeader){var eHeaderCell=this.getHeaderCellForColumn(column);if(!eHeaderCell)return-1;var elements=this.rowRenderer.getAllCellsForColumn(column);return skipHeader||elements.push(eHeaderCell),this.addElementsToContainerAndGetWidth(elements)},AutoWidthCalculator2.prototype.getPreferredWidthForColumnGroup=function(columnGroup){var eHeaderCell=this.getHeaderCellForColumn(columnGroup);return eHeaderCell?this.addElementsToContainerAndGetWidth([eHeaderCell]):-1},AutoWidthCalculator2.prototype.addElementsToContainerAndGetWidth=function(elements){var _this=this,eDummyContainer=document.createElement("form");eDummyContainer.style.position="fixed";var eBodyContainer=this.centerRowContainerCtrl.getContainerElement();elements.forEach(function(el){return _this.cloneItemIntoDummy(el,eDummyContainer)}),eBodyContainer.appendChild(eDummyContainer);var dummyContainerWidth=eDummyContainer.offsetWidth;eBodyContainer.removeChild(eDummyContainer);var autoSizePadding=this.getAutoSizePadding();return dummyContainerWidth+autoSizePadding},AutoWidthCalculator2.prototype.getAutoSizePadding=function(){return this.gridOptionsService.get("autoSizePadding")},AutoWidthCalculator2.prototype.getHeaderCellForColumn=function(column){var element=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(function(container){var res=container.getHtmlElementForColumnHeader(column);res!=null&&(element=res)}),element},AutoWidthCalculator2.prototype.cloneItemIntoDummy=function(eCell,eDummyContainer){var eCellClone=eCell.cloneNode(!0);eCellClone.style.width="",eCellClone.style.position="static",eCellClone.style.left="";var eCloneParent=document.createElement("div"),eCloneParentClassList=eCloneParent.classList,isHeader=["ag-header-cell","ag-header-group-cell"].some(function(cls){return eCellClone.classList.contains(cls)});isHeader?(eCloneParentClassList.add("ag-header","ag-header-row"),eCloneParent.style.position="static"):eCloneParentClassList.add("ag-row");for(var pointer=eCell.parentElement;pointer;){var isRow=["ag-header-row","ag-row"].some(function(cls){return pointer.classList.contains(cls)});if(isRow){for(var i=0;i<pointer.classList.length;i++){var item=pointer.classList[i];item!="ag-row-position-absolute"&&eCloneParentClassList.add(item)}break}pointer=pointer.parentElement}eCloneParent.appendChild(eCellClone),eDummyContainer.appendChild(eCloneParent)},__decorate$1h([Autowired("rowRenderer")],AutoWidthCalculator2.prototype,"rowRenderer",void 0),__decorate$1h([Autowired("ctrlsService")],AutoWidthCalculator2.prototype,"ctrlsService",void 0),__decorate$1h([Autowired("rowCssClassCalculator")],AutoWidthCalculator2.prototype,"rowCssClassCalculator",void 0),__decorate$1h([PostConstruct],AutoWidthCalculator2.prototype,"postConstruct",null),AutoWidthCalculator2=__decorate$1h([Bean("autoWidthCalculator")],AutoWidthCalculator2),AutoWidthCalculator2}(BeanStub),__extends$1k=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1g=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1g"),__values$4=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$4"),__read$i=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$i"),__spreadArray$g=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$g"),StickyRowFeature=function(_super){__extends$1k(StickyRowFeature2,_super);function StickyRowFeature2(createRowCon,destroyRowCtrls){var _this=_super.call(this)||this;return _this.createRowCon=createRowCon,_this.destroyRowCtrls=destroyRowCtrls,_this.stickyRowCtrls=[],_this.containerHeight=0,_this}return __name(StickyRowFeature2,"StickyRowFeature"),StickyRowFeature2.prototype.postConstruct=function(){var _this=this;this.isClientSide=this.rowModel.getType()==="clientSide",this.ctrlsService.whenReady(function(params){_this.gridBodyCtrl=params.gridBodyCtrl})},StickyRowFeature2.prototype.getStickyRowCtrls=function(){return this.stickyRowCtrls},StickyRowFeature2.prototype.checkStickyRows=function(){var _this=this,height=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],height);for(var stickyRows=[],firstPixel=this.rowRenderer.getFirstVisibleVerticalPixel(),addStickyRow=__name(function(stickyRow){var _a,_b,_c;stickyRows.push(stickyRow);var lastChildBottom;if(_this.isClientSide){for(var lastAncestor=stickyRow;lastAncestor.isExpandable()&&lastAncestor.expanded;)if(lastAncestor.master)lastAncestor=lastAncestor.detailNode;else if(lastAncestor.childrenAfterSort){if(lastAncestor.childrenAfterSort.length===0)break;lastAncestor=last(lastAncestor.childrenAfterSort)}lastChildBottom=lastAncestor.rowTop+lastAncestor.rowHeight}else if(stickyRow.master)lastChildBottom=stickyRow.detailNode.rowTop+stickyRow.detailNode.rowHeight;else{var storeBounds=(_a=stickyRow.childStore)===null||_a===void 0?void 0:_a.getStoreBounds();lastChildBottom=((_b=storeBounds==null?void 0:storeBounds.heightPx)!==null&&_b!==void 0?_b:0)+((_c=storeBounds==null?void 0:storeBounds.topPx)!==null&&_c!==void 0?_c:0)}var stickRowBottom=firstPixel+height+stickyRow.rowHeight;lastChildBottom<stickRowBottom?stickyRow.stickyRowTop=height+(lastChildBottom-stickRowBottom):stickyRow.stickyRowTop=height,height=0,stickyRows.forEach(function(rowNode){var thisRowLastPx=rowNode.stickyRowTop+rowNode.rowHeight;height<thisRowLastPx&&(height=thisRowLastPx)})},"addStickyRow"),counter=0;;){var firstPixelAfterStickyRows=firstPixel+height,firstIndex=this.rowModel.getRowIndexAtPixel(firstPixelAfterStickyRows),firstRow=this.rowModel.getRow(firstIndex);if(firstRow==null||firstRow.level<0||counter++===100)break;for(var parents=[],p=firstRow.parent;p.level>=0;)parents.push(p),p=p.parent;var firstMissingParent=parents.reverse().find(function(parent){return stickyRows.indexOf(parent)<0&&parent.displayed});if(firstMissingParent){addStickyRow(firstMissingParent);continue}if(firstRow.isExpandable()&&firstRow.expanded&&firstRow.rowTop<firstPixelAfterStickyRows){addStickyRow(firstRow);continue}break}return this.refreshNodesAndContainerHeight(stickyRows,height)},StickyRowFeature2.prototype.refreshStickyNode=function(stickRowNode){for(var allStickyNodes=[],i=0;i<this.stickyRowCtrls.length;i++){var currentNode=this.stickyRowCtrls[i].getRowNode();currentNode!==stickRowNode&&allStickyNodes.push(currentNode)}this.refreshNodesAndContainerHeight(allStickyNodes,this.containerHeight)&&this.checkStickyRows()},StickyRowFeature2.prototype.refreshNodesAndContainerHeight=function(allStickyNodes,height){var e_1,_a,_b,_this=this,stickyRowsChanged=!1,removedCtrls=this.stickyRowCtrls.filter(function(ctrl2){return allStickyNodes.indexOf(ctrl2.getRowNode())===-1}),addedNodes=allStickyNodes.filter(function(rowNode){return _this.stickyRowCtrls.findIndex(function(ctrl2){return ctrl2.getRowNode()===rowNode})===-1});(removedCtrls.length||addedNodes.length)&&(stickyRowsChanged=!0);var ctrlsToDestroy={};removedCtrls.forEach(function(removedCtrl){ctrlsToDestroy[removedCtrl.getRowNode().id]=removedCtrl,_this.stickyRowCtrls=_this.stickyRowCtrls.filter(function(ctrl2){return ctrl2!==removedCtrl})});try{for(var _c=__values$4(Object.values(ctrlsToDestroy)),_d=_c.next();!_d.done;_d=_c.next()){var ctrl=_d.value;ctrl.getRowNode().sticky=!1}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_d&&!_d.done&&(_a=_c.return)&&_a.call(_c)}finally{if(e_1)throw e_1.error}}this.destroyRowCtrls(ctrlsToDestroy,!1);var newCtrls=addedNodes.map(function(rowNode){return rowNode.sticky=!0,_this.createRowCon(rowNode,!1,!1)});return(_b=this.stickyRowCtrls).push.apply(_b,__spreadArray$g([],__read$i(newCtrls),!1)),this.stickyRowCtrls.forEach(function(ctrl2){return ctrl2.setRowTop(ctrl2.getRowNode().stickyRowTop)}),this.stickyRowCtrls.sort(function(a,b){return b.getRowNode().rowIndex-a.getRowNode().rowIndex}),this.containerHeight!==height&&(this.containerHeight=height,this.gridBodyCtrl.setStickyTopHeight(height),stickyRowsChanged=!0),stickyRowsChanged},__decorate$1g([Autowired("rowModel")],StickyRowFeature2.prototype,"rowModel",void 0),__decorate$1g([Autowired("rowRenderer")],StickyRowFeature2.prototype,"rowRenderer",void 0),__decorate$1g([Autowired("ctrlsService")],StickyRowFeature2.prototype,"ctrlsService",void 0),__decorate$1g([PostConstruct],StickyRowFeature2.prototype,"postConstruct",null),StickyRowFeature2}(BeanStub),__extends$1j=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1f=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1f"),__read$h=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$h"),__spreadArray$f=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$f"),__values$3=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$3"),RowRenderer=function(_super){__extends$1j(RowRenderer2,_super);function RowRenderer2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.destroyFuncsForColumnListeners=[],_this.rowCtrlsByRowIndex={},_this.zombieRowCtrls={},_this.allRowCtrls=[],_this.topRowCtrls=[],_this.bottomRowCtrls=[],_this.refreshInProgress=!1,_this.dataFirstRenderedFired=!1,_this.setupRangeSelectionListeners=function(){var onRangeSelectionChanged=__name(function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onRangeSelectionChanged()})},"onRangeSelectionChanged"),onColumnMovedPinnedVisible=__name(function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.updateRangeBordersIfRangeCount()})},"onColumnMovedPinnedVisible"),addRangeSelectionListeners=__name(function(){_this.eventService.addEventListener(Events.EVENT_RANGE_SELECTION_CHANGED,onRangeSelectionChanged),_this.eventService.addEventListener(Events.EVENT_COLUMN_MOVED,onColumnMovedPinnedVisible),_this.eventService.addEventListener(Events.EVENT_COLUMN_PINNED,onColumnMovedPinnedVisible),_this.eventService.addEventListener(Events.EVENT_COLUMN_VISIBLE,onColumnMovedPinnedVisible)},"addRangeSelectionListeners"),removeRangeSelectionListeners=__name(function(){_this.eventService.removeEventListener(Events.EVENT_RANGE_SELECTION_CHANGED,onRangeSelectionChanged),_this.eventService.removeEventListener(Events.EVENT_COLUMN_MOVED,onColumnMovedPinnedVisible),_this.eventService.removeEventListener(Events.EVENT_COLUMN_PINNED,onColumnMovedPinnedVisible),_this.eventService.removeEventListener(Events.EVENT_COLUMN_VISIBLE,onColumnMovedPinnedVisible)},"removeRangeSelectionListeners");_this.addDestroyFunc(function(){return removeRangeSelectionListeners()}),_this.addManagedPropertyListener("enableRangeSelection",function(params){var isEnabled=params.currentValue;isEnabled?addRangeSelectionListeners():removeRangeSelectionListeners()});var rangeSelectionEnabled=_this.gridOptionsService.get("enableRangeSelection");rangeSelectionEnabled&&addRangeSelectionListeners()},_this}return __name(RowRenderer2,"RowRenderer"),RowRenderer2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl(),_this.initialise()})},RowRenderer2.prototype.initialise=function(){var _this=this;if(this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],function(){return _this.onDomLayoutChanged()}),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],function(){return _this.redraw()}),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],function(){return _this.redrawRows()}),this.gridOptionsService.isGroupRowsSticky()){var rowModelType=this.rowModel.getType();(rowModelType==="clientSide"||rowModelType==="serverSide")&&(this.stickyRowFeature=this.createManagedBean(new StickyRowFeature(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()},RowRenderer2.prototype.initialiseCache=function(){if(this.gridOptionsService.get("keepDetailRows")){var countProp=this.getKeepDetailRowsCount(),count=countProp??3;this.cachedRowCtrls=new RowCtrlCache(count)}},RowRenderer2.prototype.getKeepDetailRowsCount=function(){return this.gridOptionsService.get("keepDetailRowsCount")},RowRenderer2.prototype.getStickyTopRowCtrls=function(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]},RowRenderer2.prototype.updateAllRowCtrls=function(){var liveList=getAllValuesInObject(this.rowCtrlsByRowIndex),zombieList=getAllValuesInObject(this.zombieRowCtrls),cachedList=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];zombieList.length>0||cachedList.length>0?this.allRowCtrls=__spreadArray$f(__spreadArray$f(__spreadArray$f([],__read$h(liveList),!1),__read$h(zombieList),!1),__read$h(cachedList),!1):this.allRowCtrls=liveList},RowRenderer2.prototype.onCellFocusChanged=function(event){this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onCellFocused(event)}),this.getFullWidthRowCtrls().forEach(function(rowCtrl){return rowCtrl.onFullWidthRowFocused(event)})},RowRenderer2.prototype.registerCellEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUSED,function(event){_this.onCellFocusChanged(event)}),this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUS_CLEARED,function(){_this.onCellFocusChanged()}),this.addManagedListener(this.eventService,Events.EVENT_FLASH_CELLS,function(event){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onFlashCells(event)})}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_HOVER_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onColumnHover()})}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,function(){_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onDisplayedColumnsChanged()})}),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,function(){_this.printLayout&&_this.getAllCellCtrls().forEach(function(cellCtrl){return cellCtrl.onLeftChanged()})}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,Events.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))},RowRenderer2.prototype.removeGridColumnListeners=function(){this.destroyFuncsForColumnListeners.forEach(function(func){return func()}),this.destroyFuncsForColumnListeners.length=0},RowRenderer2.prototype.refreshListenersToColumnsForCellComps=function(){var _this=this;this.removeGridColumnListeners();var cols=this.columnModel.getAllGridColumns();cols.forEach(function(col){var forEachCellWithThisCol=__name(function(callback){_this.getAllCellCtrls().forEach(function(cellCtrl){cellCtrl.getColumn()===col&&callback(cellCtrl)})},"forEachCellWithThisCol"),leftChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onLeftChanged()})},"leftChangedListener"),widthChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onWidthChanged()})},"widthChangedListener"),firstRightPinnedChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onFirstRightPinnedChanged()})},"firstRightPinnedChangedListener"),lastLeftPinnedChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onLastLeftPinnedChanged()})},"lastLeftPinnedChangedListener"),colDefChangedListener=__name(function(){forEachCellWithThisCol(function(cellCtrl){return cellCtrl.onColDefChanged()})},"colDefChangedListener");col.addEventListener("leftChanged",leftChangedListener),col.addEventListener("widthChanged",widthChangedListener),col.addEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.addEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.addEventListener("colDefChanged",colDefChangedListener),_this.destroyFuncsForColumnListeners.push(function(){col.removeEventListener("leftChanged",leftChangedListener),col.removeEventListener("widthChanged",widthChangedListener),col.removeEventListener("firstRightPinnedChanged",firstRightPinnedChangedListener),col.removeEventListener("lastLeftPinnedChanged",lastLeftPinnedChangedListener),col.removeEventListener("colDefChanged",colDefChangedListener)})})},RowRenderer2.prototype.onDomLayoutChanged=function(){var printLayout=this.gridOptionsService.isDomLayout("print"),embedFullWidthRows=printLayout||this.gridOptionsService.get("embedFullWidthRows"),destroyRows=embedFullWidthRows!==this.embedFullWidthRows||this.printLayout!==printLayout;this.printLayout=printLayout,this.embedFullWidthRows=embedFullWidthRows,destroyRows&&this.redrawAfterModelUpdate({domLayoutChanged:!0})},RowRenderer2.prototype.datasourceChanged=function(){this.firstRenderedRow=0,this.lastRenderedRow=-1;var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer2.prototype.onPageLoaded=function(event){var params={recycleRows:event.keepRenderedRows,animate:event.animate,newData:event.newData,newPage:event.newPage,onlyBody:!0};this.redrawAfterModelUpdate(params)},RowRenderer2.prototype.getAllCellsForColumn=function(column){var res=[];return this.getAllRowCtrls().forEach(function(rowCtrl){var eCell=rowCtrl.getCellElement(column);eCell&&res.push(eCell)}),res},RowRenderer2.prototype.refreshFloatingRowComps=function(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())},RowRenderer2.prototype.getTopRowCtrls=function(){return this.topRowCtrls},RowRenderer2.prototype.getCentreRowCtrls=function(){return this.allRowCtrls},RowRenderer2.prototype.getBottomRowCtrls=function(){return this.bottomRowCtrls},RowRenderer2.prototype.refreshFloatingRows=function(rowComps,rowNodes){var _this=this;rowComps.forEach(function(row){row.destroyFirstPass(),row.destroySecondPass()}),rowComps.length=0,rowNodes&&rowNodes.forEach(function(rowNode){var rowCtrl=new RowCtrl(rowNode,_this.beans,!1,!1,_this.printLayout);rowComps.push(rowCtrl)})},RowRenderer2.prototype.onPinnedRowDataChanged=function(){var params={recycleRows:!0};this.redrawAfterModelUpdate(params)},RowRenderer2.prototype.redrawRow=function(rowNode,suppressEvent){var _this=this,_a;if(suppressEvent===void 0&&(suppressEvent=!1),rowNode.sticky)this.stickyRowFeature.refreshStickyNode(rowNode);else if(!((_a=this.cachedRowCtrls)===null||_a===void 0)&&_a.has(rowNode)){this.cachedRowCtrls.removeRow(rowNode);return}else{var destroyAndRecreateCtrl=__name(function(dataStruct){var ctrl=dataStruct[rowNode.rowIndex];ctrl&&ctrl.getRowNode()===rowNode&&(ctrl.destroyFirstPass(),ctrl.destroySecondPass(),dataStruct[rowNode.rowIndex]=_this.createRowCon(rowNode,!1,!1))},"destroyAndRecreateCtrl");switch(rowNode.rowPinned){case"top":destroyAndRecreateCtrl(this.topRowCtrls);break;case"bottom":destroyAndRecreateCtrl(this.bottomRowCtrls);break;default:destroyAndRecreateCtrl(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}suppressEvent||this.dispatchDisplayedRowsChanged(!1)},RowRenderer2.prototype.redrawRows=function(rowNodes){var _this=this,partialRefresh=rowNodes!=null;if(partialRefresh){rowNodes==null||rowNodes.forEach(function(node){return _this.redrawRow(node,!0)}),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()},RowRenderer2.prototype.getCellToRestoreFocusToAfterRefresh=function(params){var focusedCell=params!=null&&params.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(focusedCell==null)return null;var eDocument=this.gridOptionsService.getDocument(),activeElement=eDocument.activeElement,cellDomData=this.gridOptionsService.getDomData(activeElement,CellCtrl.DOM_DATA_KEY_CELL_CTRL),rowDomData=this.gridOptionsService.getDomData(activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL),gridElementFocused=cellDomData||rowDomData;return gridElementFocused?focusedCell:null},RowRenderer2.prototype.redrawAfterModelUpdate=function(params){params===void 0&&(params={}),this.getLockOnRefresh();var focusedCell=this.getCellToRestoreFocusToAfterRefresh(params);this.updateContainerHeights(),this.scrollToTopIfNewData(params);var recycleRows=!params.domLayoutChanged&&!!params.recycleRows,animate=params.animate&&this.gridOptionsService.isAnimateRows(),rowsToRecycle=recycleRows?this.getRowsToRecycle():null;recycleRows||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(rowsToRecycle,animate),this.gridBodyCtrl.updateRowCount(),params.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),focusedCell!=null&&this.restoreFocusedCell(focusedCell),this.releaseLockOnRefresh()},RowRenderer2.prototype.scrollToTopIfNewData=function(params){var scrollToTop=params.newData||params.newPage,suppressScrollToTop=this.gridOptionsService.get("suppressScrollOnNewData");scrollToTop&&!suppressScrollToTop&&this.gridBodyCtrl.getScrollFeature().scrollToTop()},RowRenderer2.prototype.updateContainerHeights=function(){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}var containerHeight=this.paginationProxy.getCurrentPageHeight();containerHeight===0&&(containerHeight=1),this.rowContainerHeightService.setModelHeight(containerHeight)},RowRenderer2.prototype.getLockOnRefresh=function(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0},RowRenderer2.prototype.releaseLockOnRefresh=function(){this.refreshInProgress=!1},RowRenderer2.prototype.isRefreshInProgress=function(){return this.refreshInProgress},RowRenderer2.prototype.restoreFocusedCell=function(cellPosition){cellPosition&&(this.focusService.setRestoreFocusedCell(cellPosition),this.onCellFocusChanged(this.beans.gridOptionsService.addGridCommonParams({rowIndex:cellPosition.rowIndex,column:cellPosition.column,rowPinned:cellPosition.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))},RowRenderer2.prototype.stopEditing=function(cancel){cancel===void 0&&(cancel=!1),this.getAllRowCtrls().forEach(function(rowCtrl){rowCtrl.stopEditing(cancel)})},RowRenderer2.prototype.getAllCellCtrls=function(){for(var res=[],rowCtrls=this.getAllRowCtrls(),rowCtrlsLength=rowCtrls.length,i=0;i<rowCtrlsLength;i++)for(var cellCtrls=rowCtrls[i].getAllCellCtrls(),cellCtrlsLength=cellCtrls.length,j=0;j<cellCtrlsLength;j++)res.push(cellCtrls[j]);return res},RowRenderer2.prototype.getAllRowCtrls=function(){var e_1,_a,stickyRowCtrls=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],res=__spreadArray$f(__spreadArray$f(__spreadArray$f([],__read$h(this.topRowCtrls),!1),__read$h(this.bottomRowCtrls),!1),__read$h(stickyRowCtrls),!1);try{for(var _b=__values$3(Object.keys(this.rowCtrlsByRowIndex)),_c=_b.next();!_c.done;_c=_b.next()){var key=_c.value;res.push(this.rowCtrlsByRowIndex[key])}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}return res},RowRenderer2.prototype.addRenderedRowListener=function(eventName,rowIndex,callback){var rowComp=this.rowCtrlsByRowIndex[rowIndex];rowComp&&rowComp.addEventListener(eventName,callback)},RowRenderer2.prototype.flashCells=function(params){params===void 0&&(params={}),this.getCellCtrls(params.rowNodes,params.columns).forEach(function(cellCtrl){return cellCtrl.flashCell(params)})},RowRenderer2.prototype.refreshCells=function(params){var _this=this;params===void 0&&(params={});var refreshCellParams={forceRefresh:params.force,newData:!1,suppressFlash:params.suppressFlash};this.getCellCtrls(params.rowNodes,params.columns).forEach(function(cellCtrl){return cellCtrl.refreshOrDestroyCell(refreshCellParams)}),params.rowNodes&&(this.getRowCtrls(params.rowNodes).forEach(function(rowCtrl){if(rowCtrl.isFullWidth()){var refreshed=rowCtrl.refreshFullWidth();refreshed||_this.redrawRow(rowCtrl.getRowNode(),!0)}}),this.dispatchDisplayedRowsChanged(!1))},RowRenderer2.prototype.getCellRendererInstances=function(params){var _this=this,_a,cellRenderers=this.getCellCtrls(params.rowNodes,params.columns).map(function(cellCtrl){return cellCtrl.getCellRenderer()}).filter(function(renderer){return renderer!=null});if(!((_a=params.columns)===null||_a===void 0)&&_a.length)return cellRenderers;var fullWidthRenderers=[],rowIdMap=this.mapRowNodes(params.rowNodes);return this.getAllRowCtrls().forEach(function(rowCtrl){if(!(rowIdMap&&!_this.isRowInMap(rowCtrl.getRowNode(),rowIdMap))&&rowCtrl.isFullWidth())for(var renderers=rowCtrl.getFullWidthCellRenderers(),i=0;i<renderers.length;i++){var renderer=renderers[i];renderer!=null&&fullWidthRenderers.push(renderer)}}),__spreadArray$f(__spreadArray$f([],__read$h(fullWidthRenderers),!1),__read$h(cellRenderers),!1)},RowRenderer2.prototype.getCellEditorInstances=function(params){var res=[];return this.getCellCtrls(params.rowNodes,params.columns).forEach(function(cellCtrl){var cellEditor=cellCtrl.getCellEditor();cellEditor&&res.push(cellEditor)}),res},RowRenderer2.prototype.getEditingCells=function(){var res=[];return this.getAllCellCtrls().forEach(function(cellCtrl){if(cellCtrl.isEditing()){var cellPosition=cellCtrl.getCellPosition();res.push(cellPosition)}}),res},RowRenderer2.prototype.mapRowNodes=function(rowNodes){if(rowNodes){var res={top:{},bottom:{},normal:{}};return rowNodes.forEach(function(rowNode){var id=rowNode.id;rowNode.rowPinned==="top"?res.top[id]=rowNode:rowNode.rowPinned==="bottom"?res.bottom[id]=rowNode:res.normal[id]=rowNode}),res}},RowRenderer2.prototype.isRowInMap=function(rowNode,rowIdsMap){var id=rowNode.id,floating=rowNode.rowPinned;return floating==="bottom"?rowIdsMap.bottom[id]!=null:floating==="top"?rowIdsMap.top[id]!=null:rowIdsMap.normal[id]!=null},RowRenderer2.prototype.getRowCtrls=function(rowNodes){var _this=this,rowIdsMap=this.mapRowNodes(rowNodes),allRowCtrls=this.getAllRowCtrls();return!rowNodes||!rowIdsMap?allRowCtrls:allRowCtrls.filter(function(rowCtrl){var rowNode=rowCtrl.getRowNode();return _this.isRowInMap(rowNode,rowIdsMap)})},RowRenderer2.prototype.getCellCtrls=function(rowNodes,columns){var _this=this,colIdsMap;exists(columns)&&(colIdsMap={},columns.forEach(function(colKey){var column=_this.columnModel.getGridColumn(colKey);exists(column)&&(colIdsMap[column.getId()]=!0)}));var res=[];return this.getRowCtrls(rowNodes).forEach(function(rowCtrl){rowCtrl.getAllCellCtrls().forEach(function(cellCtrl){var colId=cellCtrl.getColumn().getId(),excludeColFromRefresh=colIdsMap&&!colIdsMap[colId];excludeColFromRefresh||res.push(cellCtrl)})}),res},RowRenderer2.prototype.destroy=function(){this.removeAllRowComps(),_super.prototype.destroy.call(this)},RowRenderer2.prototype.removeAllRowComps=function(){var rowIndexesToRemove=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(rowIndexesToRemove)},RowRenderer2.prototype.getRowsToRecycle=function(){var stubNodeIndexes=[];iterateObject(this.rowCtrlsByRowIndex,function(index,rowComp){var stubNode=rowComp.getRowNode().id==null;stubNode&&stubNodeIndexes.push(index)}),this.removeRowCtrls(stubNodeIndexes);var ctrlsByIdMap={};return iterateObject(this.rowCtrlsByRowIndex,function(index,rowComp){var rowNode=rowComp.getRowNode();ctrlsByIdMap[rowNode.id]=rowComp}),this.rowCtrlsByRowIndex={},ctrlsByIdMap},RowRenderer2.prototype.removeRowCtrls=function(rowsToRemove,suppressAnimation){var _this=this;suppressAnimation===void 0&&(suppressAnimation=!1),rowsToRemove.forEach(function(indexToRemove){var rowCtrl=_this.rowCtrlsByRowIndex[indexToRemove];rowCtrl&&(rowCtrl.destroyFirstPass(suppressAnimation),rowCtrl.destroySecondPass()),delete _this.rowCtrlsByRowIndex[indexToRemove]})},RowRenderer2.prototype.onBodyScroll=function(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})},RowRenderer2.prototype.redraw=function(params){params===void 0&&(params={});var afterScroll=params.afterScroll,cellFocused;this.stickyRowFeature&&browserSupportsPreventScroll()&&(cellFocused=this.getCellToRestoreFocusToAfterRefresh()||void 0);var oldFirstRow=this.firstRenderedRow,oldLastRow=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();var hasStickyRowChanges=!1;this.stickyRowFeature&&(hasStickyRowChanges=this.stickyRowFeature.checkStickyRows());var rangeChanged=this.firstRenderedRow!==oldFirstRow||this.lastRenderedRow!==oldLastRow;if(!(afterScroll&&!hasStickyRowChanges&&!rangeChanged)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,afterScroll),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(afterScroll&&!hasStickyRowChanges),cellFocused!=null)){var newFocusedCell=this.getCellToRestoreFocusToAfterRefresh();cellFocused!=null&&newFocusedCell==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(cellFocused))}},RowRenderer2.prototype.removeRowCompsNotToDraw=function(indexesToDraw,suppressAnimation){var indexesToDrawMap={};indexesToDraw.forEach(function(index){return indexesToDrawMap[index]=!0});var existingIndexes=Object.keys(this.rowCtrlsByRowIndex),indexesNotToDraw=existingIndexes.filter(function(index){return!indexesToDrawMap[index]});this.removeRowCtrls(indexesNotToDraw,suppressAnimation)},RowRenderer2.prototype.calculateIndexesToDraw=function(rowsToRecycle){var _this=this,indexesToDraw=createArrayOfNumbers(this.firstRenderedRow,this.lastRenderedRow),checkRowToDraw=__name(function(indexStr,rowComp){var index=rowComp.getRowNode().rowIndex;index!=null&&(index<_this.firstRenderedRow||index>_this.lastRenderedRow)&&_this.doNotUnVirtualiseRow(rowComp)&&indexesToDraw.push(index)},"checkRowToDraw");iterateObject(this.rowCtrlsByRowIndex,checkRowToDraw),iterateObject(rowsToRecycle,checkRowToDraw),indexesToDraw.sort(function(a,b){return a-b});for(var ret=[],i=0;i<indexesToDraw.length;i++){var currRow=indexesToDraw[i],rowNode=this.paginationProxy.getRow(currRow);rowNode&&!rowNode.sticky&&ret.push(currRow)}return ret},RowRenderer2.prototype.recycleRows=function(rowsToRecycle,animate,afterScroll){var _this=this;animate===void 0&&(animate=!1),afterScroll===void 0&&(afterScroll=!1);var indexesToDraw=this.calculateIndexesToDraw(rowsToRecycle);if((this.printLayout||afterScroll)&&(animate=!1),this.removeRowCompsNotToDraw(indexesToDraw,!animate),indexesToDraw.forEach(function(rowIndex){var rowCtrl=_this.createOrUpdateRowCtrl(rowIndex,rowsToRecycle,animate,afterScroll);exists(rowCtrl)}),rowsToRecycle){var useAnimationFrame=afterScroll&&!this.gridOptionsService.get("suppressAnimationFrame")&&!this.printLayout;useAnimationFrame?this.beans.animationFrameService.addDestroyTask(function(){_this.destroyRowCtrls(rowsToRecycle,animate),_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(rowsToRecycle,animate)}this.updateAllRowCtrls()},RowRenderer2.prototype.dispatchDisplayedRowsChanged=function(afterScroll){afterScroll===void 0&&(afterScroll=!1);var event={type:Events.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll};this.eventService.dispatchEvent(event)},RowRenderer2.prototype.onDisplayedColumnsChanged=function(){var pinningLeft=this.columnModel.isPinningLeft(),pinningRight=this.columnModel.isPinningRight(),atLeastOneChanged=this.pinningLeft!==pinningLeft||pinningRight!==this.pinningRight;atLeastOneChanged&&(this.pinningLeft=pinningLeft,this.pinningRight=pinningRight,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())},RowRenderer2.prototype.redrawFullWidthEmbeddedRows=function(){var rowsToRemove=[];this.getFullWidthRowCtrls().forEach(function(fullWidthCtrl){var rowIndex=fullWidthCtrl.getRowNode().rowIndex;rowsToRemove.push(rowIndex.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(rowsToRemove),this.redraw({afterScroll:!0})},RowRenderer2.prototype.getFullWidthRowCtrls=function(rowNodes){var _this=this,rowNodesMap=this.mapRowNodes(rowNodes);return this.getAllRowCtrls().filter(function(rowCtrl){if(!rowCtrl.isFullWidth())return!1;var rowNode=rowCtrl.getRowNode();return!(rowNodesMap!=null&&!_this.isRowInMap(rowNode,rowNodesMap))})},RowRenderer2.prototype.createOrUpdateRowCtrl=function(rowIndex,rowsToRecycle,animate,afterScroll){var rowNode,rowCtrl=this.rowCtrlsByRowIndex[rowIndex];rowCtrl||(rowNode=this.paginationProxy.getRow(rowIndex),exists(rowNode)&&exists(rowsToRecycle)&&rowsToRecycle[rowNode.id]&&rowNode.alreadyRendered&&(rowCtrl=rowsToRecycle[rowNode.id],rowsToRecycle[rowNode.id]=null));var creatingNewRowCtrl=!rowCtrl;if(creatingNewRowCtrl)if(rowNode||(rowNode=this.paginationProxy.getRow(rowIndex)),exists(rowNode))rowCtrl=this.createRowCon(rowNode,animate,afterScroll);else return;return rowNode&&(rowNode.alreadyRendered=!0),this.rowCtrlsByRowIndex[rowIndex]=rowCtrl,rowCtrl},RowRenderer2.prototype.destroyRowCtrls=function(rowCtrlsMap,animate){var _this=this,executeInAWhileFuncs=[];iterateObject(rowCtrlsMap,function(nodeId,rowCtrl){if(rowCtrl){if(_this.cachedRowCtrls&&rowCtrl.isCacheable()){_this.cachedRowCtrls.addRow(rowCtrl);return}rowCtrl.destroyFirstPass(!animate),animate?(_this.zombieRowCtrls[rowCtrl.getInstanceId()]=rowCtrl,executeInAWhileFuncs.push(function(){rowCtrl.destroySecondPass(),delete _this.zombieRowCtrls[rowCtrl.getInstanceId()]})):rowCtrl.destroySecondPass()}}),animate&&(executeInAWhileFuncs.push(function(){_this.updateAllRowCtrls(),_this.dispatchDisplayedRowsChanged()}),executeInAWhile(executeInAWhileFuncs))},RowRenderer2.prototype.getRowBuffer=function(){return this.gridOptionsService.get("rowBuffer")},RowRenderer2.prototype.getRowBufferInPixels=function(){var rowsToBuffer=this.getRowBuffer(),defaultRowHeight=this.gridOptionsService.getRowHeightAsNumber();return rowsToBuffer*defaultRowHeight},RowRenderer2.prototype.workOutFirstAndLastRowsToRender=function(){this.rowContainerHeightService.updateOffset();var newFirst,newLast;if(!this.paginationProxy.isRowsToRender())newFirst=0,newLast=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),newFirst=this.paginationProxy.getPageFirstRow(),newLast=this.paginationProxy.getPageLastRow();else{var bufferPixels=this.getRowBufferInPixels(),gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),suppressRowVirtualisation=this.gridOptionsService.get("suppressRowVirtualisation"),rowHeightsChanged=!1,firstPixel=void 0,lastPixel=void 0;do{var paginationOffset=this.paginationProxy.getPixelOffset(),_a=this.paginationProxy.getCurrentPagePixelRange(),pageFirstPixel=_a.pageFirstPixel,pageLastPixel=_a.pageLastPixel,divStretchOffset=this.rowContainerHeightService.getDivStretchOffset(),bodyVRange=gridBodyCtrl.getScrollFeature().getVScrollPosition(),bodyTopPixel=bodyVRange.top,bodyBottomPixel=bodyVRange.bottom;suppressRowVirtualisation?(firstPixel=pageFirstPixel+divStretchOffset,lastPixel=pageLastPixel+divStretchOffset):(firstPixel=Math.max(bodyTopPixel+paginationOffset-bufferPixels,pageFirstPixel)+divStretchOffset,lastPixel=Math.min(bodyBottomPixel+paginationOffset+bufferPixels,pageLastPixel)+divStretchOffset),this.firstVisibleVPixel=Math.max(bodyTopPixel+paginationOffset,pageFirstPixel)+divStretchOffset,rowHeightsChanged=this.ensureAllRowsInRangeHaveHeightsCalculated(firstPixel,lastPixel)}while(rowHeightsChanged);var firstRowIndex=this.paginationProxy.getRowIndexAtPixel(firstPixel),lastRowIndex=this.paginationProxy.getRowIndexAtPixel(lastPixel),pageFirstRow=this.paginationProxy.getPageFirstRow(),pageLastRow=this.paginationProxy.getPageLastRow();firstRowIndex<pageFirstRow&&(firstRowIndex=pageFirstRow),lastRowIndex>pageLastRow&&(lastRowIndex=pageLastRow),newFirst=firstRowIndex,newLast=lastRowIndex}var rowLayoutNormal=this.gridOptionsService.isDomLayout("normal"),suppressRowCountRestriction=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),rowBufferMaxSize=Math.max(this.getRowBuffer(),500);rowLayoutNormal&&!suppressRowCountRestriction&&newLast-newFirst>rowBufferMaxSize&&(newLast=newFirst+rowBufferMaxSize);var firstDiffers=newFirst!==this.firstRenderedRow,lastDiffers=newLast!==this.lastRenderedRow;if(firstDiffers||lastDiffers){this.firstRenderedRow=newFirst,this.lastRenderedRow=newLast;var event_1={type:Events.EVENT_VIEWPORT_CHANGED,firstRow:newFirst,lastRow:newLast};this.eventService.dispatchEvent(event_1)}},RowRenderer2.prototype.dispatchFirstDataRenderedEvent=function(){var _this=this;if(!this.dataFirstRenderedFired){this.dataFirstRenderedFired=!0;var event={type:Events.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(function(){_this.beans.eventService.dispatchEvent(event)})}},RowRenderer2.prototype.ensureAllRowsInRangeHaveHeightsCalculated=function(topPixel,bottomPixel){var res=this.paginationProxy.ensureRowHeightsValid(topPixel,bottomPixel,-1,-1);return res&&this.updateContainerHeights(),res},RowRenderer2.prototype.getFirstVisibleVerticalPixel=function(){return this.firstVisibleVPixel},RowRenderer2.prototype.getFirstVirtualRenderedRow=function(){return this.firstRenderedRow},RowRenderer2.prototype.getLastVirtualRenderedRow=function(){return this.lastRenderedRow},RowRenderer2.prototype.doNotUnVirtualiseRow=function(rowComp){var REMOVE_ROW=!1,KEEP_ROW=!0,rowNode=rowComp.getRowNode(),rowHasFocus=this.focusService.isRowNodeFocused(rowNode),rowIsEditing=rowComp.isEditing(),rowIsDetail=rowNode.detail,mightWantToKeepRow=rowHasFocus||rowIsEditing||rowIsDetail;if(!mightWantToKeepRow)return REMOVE_ROW;var rowNodePresent=this.paginationProxy.isRowPresent(rowNode);return rowNodePresent?KEEP_ROW:REMOVE_ROW},RowRenderer2.prototype.createRowCon=function(rowNode,animate,afterScroll){var rowCtrlFromCache=this.cachedRowCtrls?this.cachedRowCtrls.getRow(rowNode):null;if(rowCtrlFromCache)return rowCtrlFromCache;var suppressAnimationFrame=this.gridOptionsService.get("suppressAnimationFrame"),useAnimationFrameForCreate=afterScroll&&!suppressAnimationFrame&&!this.printLayout,res=new RowCtrl(rowNode,this.beans,animate,useAnimationFrameForCreate,this.printLayout);return res},RowRenderer2.prototype.getRenderedNodes=function(){var renderedRows=this.rowCtrlsByRowIndex;return Object.keys(renderedRows).map(function(key){return renderedRows[key].getRowNode()})},RowRenderer2.prototype.getRowByPosition=function(rowPosition){var rowCtrl,rowIndex=rowPosition.rowIndex;switch(rowPosition.rowPinned){case"top":rowCtrl=this.topRowCtrls[rowIndex];break;case"bottom":rowCtrl=this.bottomRowCtrls[rowIndex];break;default:rowCtrl=this.rowCtrlsByRowIndex[rowIndex],rowCtrl||(rowCtrl=this.getStickyTopRowCtrls().find(function(ctrl){return ctrl.getRowNode().rowIndex===rowIndex})||null);break}return rowCtrl},RowRenderer2.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowRenderer2.prototype.isRangeInRenderedViewport=function(startIndex,endIndex){var parentClosed=startIndex==null||endIndex==null;if(parentClosed)return!1;var blockAfterViewport=startIndex>this.lastRenderedRow,blockBeforeViewport=endIndex<this.firstRenderedRow,blockInsideViewport=!blockBeforeViewport&&!blockAfterViewport;return blockInsideViewport},__decorate$1f([Autowired("animationFrameService")],RowRenderer2.prototype,"animationFrameService",void 0),__decorate$1f([Autowired("paginationProxy")],RowRenderer2.prototype,"paginationProxy",void 0),__decorate$1f([Autowired("columnModel")],RowRenderer2.prototype,"columnModel",void 0),__decorate$1f([Autowired("pinnedRowModel")],RowRenderer2.prototype,"pinnedRowModel",void 0),__decorate$1f([Autowired("rowModel")],RowRenderer2.prototype,"rowModel",void 0),__decorate$1f([Autowired("focusService")],RowRenderer2.prototype,"focusService",void 0),__decorate$1f([Autowired("beans")],RowRenderer2.prototype,"beans",void 0),__decorate$1f([Autowired("rowContainerHeightService")],RowRenderer2.prototype,"rowContainerHeightService",void 0),__decorate$1f([Autowired("ctrlsService")],RowRenderer2.prototype,"ctrlsService",void 0),__decorate$1f([PostConstruct],RowRenderer2.prototype,"postConstruct",null),RowRenderer2=__decorate$1f([Bean("rowRenderer")],RowRenderer2),RowRenderer2}(BeanStub),RowCtrlCache=function(){function RowCtrlCache2(maxCount){this.entriesMap={},this.entriesList=[],this.maxCount=maxCount}return __name(RowCtrlCache2,"RowCtrlCache"),RowCtrlCache2.prototype.addRow=function(rowCtrl){if(this.entriesMap[rowCtrl.getRowNode().id]=rowCtrl,this.entriesList.push(rowCtrl),rowCtrl.setCached(!0),this.entriesList.length>this.maxCount){var rowCtrlToDestroy=this.entriesList[0];rowCtrlToDestroy.destroyFirstPass(),rowCtrlToDestroy.destroySecondPass(),this.removeFromCache(rowCtrlToDestroy)}},RowCtrlCache2.prototype.getRow=function(rowNode){if(rowNode==null||rowNode.id==null)return null;var res=this.entriesMap[rowNode.id];if(!res)return null;this.removeFromCache(res),res.setCached(!1);var rowNodeMismatch=res.getRowNode()!=rowNode;return rowNodeMismatch?null:res},RowCtrlCache2.prototype.has=function(rowNode){return this.entriesMap[rowNode.id]!=null},RowCtrlCache2.prototype.removeRow=function(rowNode){var rowNodeId=rowNode.id,ctrl=this.entriesMap[rowNodeId];delete this.entriesMap[rowNodeId],removeFromArray(this.entriesList,ctrl)},RowCtrlCache2.prototype.removeFromCache=function(rowCtrl){var rowNodeId=rowCtrl.getRowNode().id;delete this.entriesMap[rowNodeId],removeFromArray(this.entriesList,rowCtrl)},RowCtrlCache2.prototype.getEntries=function(){return this.entriesList},RowCtrlCache2}(),__extends$1i=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1e=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1e"),ValueFormatterService=function(_super){__extends$1i(ValueFormatterService2,_super);function ValueFormatterService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ValueFormatterService2,"ValueFormatterService"),ValueFormatterService2.prototype.formatValue=function(column,node,value,suppliedFormatter,useFormatterFromColumn){useFormatterFromColumn===void 0&&(useFormatterFromColumn=!0);var result=null,formatter,colDef=column.getColDef();if(suppliedFormatter?formatter=suppliedFormatter:useFormatterFromColumn&&(formatter=colDef.valueFormatter),formatter){var params=this.gridOptionsService.addGridCommonParams({value,node,data:node?node.data:null,colDef,column});typeof formatter=="function"?result=formatter(params):result=this.expressionService.evaluate(formatter,params)}else if(colDef.refData)return colDef.refData[value]||"";return result==null&&Array.isArray(value)&&(result=value.join(", ")),result},__decorate$1e([Autowired("expressionService")],ValueFormatterService2.prototype,"expressionService",void 0),ValueFormatterService2=__decorate$1e([Bean("valueFormatterService")],ValueFormatterService2),ValueFormatterService2}(BeanStub),__extends$1h=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1d=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1d"),PinnedRowModel=function(_super){__extends$1h(PinnedRowModel2,_super);function PinnedRowModel2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(PinnedRowModel2,"PinnedRowModel"),PinnedRowModel2.prototype.init=function(){var _this=this;this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",function(){return _this.setPinnedTopRowData()}),this.addManagedPropertyListener("pinnedBottomRowData",function(){return _this.setPinnedBottomRowData()})},PinnedRowModel2.prototype.isEmpty=function(floating){var rows=floating==="top"?this.pinnedTopRows:this.pinnedBottomRows;return missingOrEmpty(rows)},PinnedRowModel2.prototype.isRowsToRender=function(floating){return!this.isEmpty(floating)},PinnedRowModel2.prototype.getRowAtPixel=function(pixel,floating){var rows=floating==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(missingOrEmpty(rows))return 0;for(var i=0;i<rows.length;i++){var rowNode=rows[i],rowTopPixel=rowNode.rowTop+rowNode.rowHeight-1;if(rowTopPixel>=pixel)return i}return rows.length-1},PinnedRowModel2.prototype.setPinnedTopRowData=function(){var rowData=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(rowData,!0);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(event)},PinnedRowModel2.prototype.setPinnedBottomRowData=function(){var rowData=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(rowData,!1);var event={type:Events.EVENT_PINNED_ROW_DATA_CHANGED};this.eventService.dispatchEvent(event)},PinnedRowModel2.prototype.createNodesFromData=function(allData,isTop){var _this=this,rowNodes=[];if(allData){var nextRowTop_1=0;allData.forEach(function(dataItem,index){var rowNode=new RowNode(_this.beans);rowNode.data=dataItem;var idPrefix=isTop?RowNode.ID_PREFIX_TOP_PINNED:RowNode.ID_PREFIX_BOTTOM_PINNED;rowNode.id=idPrefix+index,rowNode.rowPinned=isTop?"top":"bottom",rowNode.setRowTop(nextRowTop_1),rowNode.setRowHeight(_this.gridOptionsService.getRowHeightForNode(rowNode).height),rowNode.setRowIndex(index),nextRowTop_1+=rowNode.rowHeight,rowNodes.push(rowNode)})}return rowNodes},PinnedRowModel2.prototype.getPinnedTopRowData=function(){return this.pinnedTopRows},PinnedRowModel2.prototype.getPinnedBottomRowData=function(){return this.pinnedBottomRows},PinnedRowModel2.prototype.getPinnedTopTotalHeight=function(){return this.getTotalHeight(this.pinnedTopRows)},PinnedRowModel2.prototype.getPinnedTopRowCount=function(){return this.pinnedTopRows?this.pinnedTopRows.length:0},PinnedRowModel2.prototype.getPinnedBottomRowCount=function(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0},PinnedRowModel2.prototype.getPinnedTopRow=function(index){return this.pinnedTopRows[index]},PinnedRowModel2.prototype.getPinnedBottomRow=function(index){return this.pinnedBottomRows[index]},PinnedRowModel2.prototype.forEachPinnedTopRow=function(callback){missingOrEmpty(this.pinnedTopRows)||this.pinnedTopRows.forEach(callback)},PinnedRowModel2.prototype.forEachPinnedBottomRow=function(callback){missingOrEmpty(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(callback)},PinnedRowModel2.prototype.getPinnedBottomTotalHeight=function(){return this.getTotalHeight(this.pinnedBottomRows)},PinnedRowModel2.prototype.getTotalHeight=function(rowNodes){if(!rowNodes||rowNodes.length===0)return 0;var lastNode=last(rowNodes);return lastNode.rowTop+lastNode.rowHeight},__decorate$1d([Autowired("beans")],PinnedRowModel2.prototype,"beans",void 0),__decorate$1d([PostConstruct],PinnedRowModel2.prototype,"init",null),PinnedRowModel2=__decorate$1d([Bean("pinnedRowModel")],PinnedRowModel2),PinnedRowModel2}(BeanStub),ServerSideTransactionResultStatus;(function(ServerSideTransactionResultStatus2){ServerSideTransactionResultStatus2.Applied="Applied",ServerSideTransactionResultStatus2.StoreNotFound="StoreNotFound",ServerSideTransactionResultStatus2.StoreLoading="StoreLoading",ServerSideTransactionResultStatus2.StoreWaitingToLoad="StoreWaitingToLoad",ServerSideTransactionResultStatus2.StoreLoadingFailed="StoreLoadingFailed",ServerSideTransactionResultStatus2.StoreWrongType="StoreWrongType",ServerSideTransactionResultStatus2.Cancelled="Cancelled",ServerSideTransactionResultStatus2.StoreNotStarted="StoreNotStarted"})(ServerSideTransactionResultStatus||(ServerSideTransactionResultStatus={}));var ChangedPath=function(){function ChangedPath2(keepingColumns,rootNode){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=keepingColumns,this.pathRoot={rowNode:rootNode,children:null},this.mapToItems[rootNode.id]=this.pathRoot}return __name(ChangedPath2,"ChangedPath"),ChangedPath2.prototype.setInactive=function(){this.active=!1},ChangedPath2.prototype.isActive=function(){return this.active},ChangedPath2.prototype.depthFirstSearchChangedPath=function(pathItem,callback){if(pathItem.children)for(var i=0;i<pathItem.children.length;i++)this.depthFirstSearchChangedPath(pathItem.children[i],callback);callback(pathItem.rowNode)},ChangedPath2.prototype.depthFirstSearchEverything=function(rowNode,callback,traverseEverything){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i];childNode.childrenAfterGroup?this.depthFirstSearchEverything(rowNode.childrenAfterGroup[i],callback,traverseEverything):traverseEverything&&callback(childNode)}callback(rowNode)},ChangedPath2.prototype.forEachChangedNodeDepthFirst=function(callback,traverseLeafNodes,includeUnchangedNodes){traverseLeafNodes===void 0&&(traverseLeafNodes=!1),includeUnchangedNodes===void 0&&(includeUnchangedNodes=!1),this.active&&!includeUnchangedNodes?this.depthFirstSearchChangedPath(this.pathRoot,callback):this.depthFirstSearchEverything(this.pathRoot.rowNode,callback,traverseLeafNodes)},ChangedPath2.prototype.executeFromRootNode=function(callback){callback(this.pathRoot.rowNode)},ChangedPath2.prototype.createPathItems=function(rowNode){for(var pointer=rowNode,newEntryCount=0;!this.mapToItems[pointer.id];){var newEntry={rowNode:pointer,children:null};this.mapToItems[pointer.id]=newEntry,newEntryCount++,pointer=pointer.parent}return newEntryCount},ChangedPath2.prototype.populateColumnsMap=function(rowNode,columns){var _this=this;if(!(!this.keepingColumns||!columns))for(var pointer=rowNode;pointer;)this.nodeIdsToColumns[pointer.id]||(this.nodeIdsToColumns[pointer.id]={}),columns.forEach(function(col){return _this.nodeIdsToColumns[pointer.id][col.getId()]=!0}),pointer=pointer.parent},ChangedPath2.prototype.linkPathItems=function(rowNode,newEntryCount){for(var pointer=rowNode,i=0;i<newEntryCount;i++){var thisItem=this.mapToItems[pointer.id],parentItem=this.mapToItems[pointer.parent.id];parentItem.children||(parentItem.children=[]),parentItem.children.push(thisItem),pointer=pointer.parent}},ChangedPath2.prototype.addParentNode=function(rowNode,columns){if(!(!rowNode||rowNode.isRowPinned())){var newEntryCount=this.createPathItems(rowNode);this.linkPathItems(rowNode,newEntryCount),this.populateColumnsMap(rowNode,columns)}},ChangedPath2.prototype.canSkip=function(rowNode){return this.active&&!this.mapToItems[rowNode.id]},ChangedPath2.prototype.getValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return valueColumns;var colsForThisNode=this.nodeIdsToColumns[rowNode.id],result=valueColumns.filter(function(col){return colsForThisNode[col.getId()]});return result},ChangedPath2.prototype.getNotValueColumnsForNode=function(rowNode,valueColumns){if(!this.keepingColumns)return null;var colsForThisNode=this.nodeIdsToColumns[rowNode.id],result=valueColumns.filter(function(col){return!colsForThisNode[col.getId()]});return result},ChangedPath2}(),__extends$1g=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),RowNodeBlock=function(_super){__extends$1g(RowNodeBlock2,_super);function RowNodeBlock2(id){var _this=_super.call(this)||this;return _this.state=RowNodeBlock2.STATE_WAITING_TO_LOAD,_this.version=0,_this.id=id,_this}return __name(RowNodeBlock2,"RowNodeBlock"),RowNodeBlock2.prototype.getId=function(){return this.id},RowNodeBlock2.prototype.load=function(){this.state=RowNodeBlock2.STATE_LOADING,this.loadFromDatasource()},RowNodeBlock2.prototype.getVersion=function(){return this.version},RowNodeBlock2.prototype.setStateWaitingToLoad=function(){this.version++,this.state=RowNodeBlock2.STATE_WAITING_TO_LOAD},RowNodeBlock2.prototype.getState=function(){return this.state},RowNodeBlock2.prototype.pageLoadFailed=function(version){var requestMostRecentAndLive=this.isRequestMostRecentAndLive(version);requestMostRecentAndLive&&(this.state=RowNodeBlock2.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)},RowNodeBlock2.prototype.success=function(version,params){this.successCommon(version,params)},RowNodeBlock2.prototype.pageLoaded=function(version,rows,lastRow){this.successCommon(version,{rowData:rows,rowCount:lastRow})},RowNodeBlock2.prototype.isRequestMostRecentAndLive=function(version){var thisIsMostRecentRequest=version===this.version,weAreNotDestroyed=this.isAlive();return thisIsMostRecentRequest&&weAreNotDestroyed},RowNodeBlock2.prototype.successCommon=function(version,params){this.dispatchLoadCompleted();var requestMostRecentAndLive=this.isRequestMostRecentAndLive(version);requestMostRecentAndLive&&(this.state=RowNodeBlock2.STATE_LOADED,this.processServerResult(params))},RowNodeBlock2.prototype.dispatchLoadCompleted=function(success){success===void 0&&(success=!0);var event={type:RowNodeBlock2.EVENT_LOAD_COMPLETE,success,block:this};this.dispatchEvent(event)},RowNodeBlock2.EVENT_LOAD_COMPLETE="loadComplete",RowNodeBlock2.STATE_WAITING_TO_LOAD="needsLoading",RowNodeBlock2.STATE_LOADING="loading",RowNodeBlock2.STATE_LOADED="loaded",RowNodeBlock2.STATE_FAILED="failed",RowNodeBlock2}(BeanStub),__extends$1f=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1c=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1c"),__param$5=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$5"),RowNodeBlockLoader=function(_super){__extends$1f(RowNodeBlockLoader2,_super);function RowNodeBlockLoader2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.activeBlockLoadsCount=0,_this.blocks=[],_this.active=!0,_this}__name(RowNodeBlockLoader2,"RowNodeBlockLoader"),RowNodeBlockLoader_1=RowNodeBlockLoader2,RowNodeBlockLoader2.prototype.postConstruct=function(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();var blockLoadDebounceMillis=this.gridOptionsService.get("blockLoadDebounceMillis");blockLoadDebounceMillis&&blockLoadDebounceMillis>0&&(this.checkBlockToLoadDebounce=_.debounce(this.performCheckBlocksToLoad.bind(this),blockLoadDebounceMillis))},RowNodeBlockLoader2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("RowNodeBlockLoader")},RowNodeBlockLoader2.prototype.getMaxConcurrentDatasourceRequests=function(){var res=this.gridOptionsService.get("maxConcurrentDatasourceRequests");if(res==null)return 2;if(!(res<=0))return res},RowNodeBlockLoader2.prototype.addBlock=function(block){this.blocks.push(block),block.addEventListener(RowNodeBlock.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()},RowNodeBlockLoader2.prototype.removeBlock=function(block){_.removeFromArray(this.blocks,block)},RowNodeBlockLoader2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.active=!1},RowNodeBlockLoader2.prototype.loadComplete=function(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADED_EVENT}),this.activeBlockLoadsCount==0&&this.dispatchEvent({type:RowNodeBlockLoader_1.BLOCK_LOADER_FINISHED_EVENT})},RowNodeBlockLoader2.prototype.checkBlockToLoad=function(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()},RowNodeBlockLoader2.prototype.performCheckBlocksToLoad=function(){if(this.active){if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.logger.log("checkBlockToLoad: max loads exceeded");return}var loadAvailability=this.getAvailableLoadingCount(),blocksToLoad=this.blocks.filter(function(block){return block.getState()===RowNodeBlock.STATE_WAITING_TO_LOAD}).slice(0,loadAvailability);this.registerLoads(blocksToLoad.length),blocksToLoad.forEach(function(block){return block.load()}),this.printCacheStatus()}},RowNodeBlockLoader2.prototype.getBlockState=function(){if(this.gridOptionsService.isRowModelType("serverSide")){var ssrm=this.rowModel;return ssrm.getBlockStates()}var result={};return this.blocks.forEach(function(block){var _a=block.getBlockStateJson(),id=_a.id,state=_a.state;result[id]=state}),result},RowNodeBlockLoader2.prototype.printCacheStatus=function(){this.logger.isLogging()&&this.logger.log("printCacheStatus: activePageLoadsCount = ".concat(this.activeBlockLoadsCount,",")+" blocks = ".concat(JSON.stringify(this.getBlockState())))},RowNodeBlockLoader2.prototype.isLoading=function(){return this.activeBlockLoadsCount>0},RowNodeBlockLoader2.prototype.registerLoads=function(count){this.activeBlockLoadsCount+=count},RowNodeBlockLoader2.prototype.getAvailableLoadingCount=function(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0};var RowNodeBlockLoader_1;return RowNodeBlockLoader2.BLOCK_LOADED_EVENT="blockLoaded",RowNodeBlockLoader2.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",__decorate$1c([Autowired("rowModel")],RowNodeBlockLoader2.prototype,"rowModel",void 0),__decorate$1c([PostConstruct],RowNodeBlockLoader2.prototype,"postConstruct",null),__decorate$1c([__param$5(0,Qualifier("loggerFactory"))],RowNodeBlockLoader2.prototype,"setBeans",null),RowNodeBlockLoader2=RowNodeBlockLoader_1=__decorate$1c([Bean("rowNodeBlockLoader")],RowNodeBlockLoader2),RowNodeBlockLoader2}(BeanStub),__extends$1e=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1b=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1b"),PaginationProxy=function(_super){__extends$1e(PaginationProxy2,_super);function PaginationProxy2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.currentPage=0,_this.topDisplayedRowIndex=0,_this.bottomDisplayedRowIndex=0,_this.pixelOffset=0,_this.masterRowCount=0,_this}return __name(PaginationProxy2,"PaginationProxy"),PaginationProxy2.prototype.postConstruct=function(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()},PaginationProxy2.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var res=this.rowModel.ensureRowHeightsValid(startPixel,endPixel,this.getPageFirstRow(),this.getPageLastRow());return res&&this.calculatePages(),res},PaginationProxy2.prototype.isPaginateChildRows=function(){var shouldPaginate=this.gridOptionsService.get("groupRemoveSingleChildren")||this.gridOptionsService.get("groupRemoveLowestSingleChildren");return shouldPaginate?!0:this.gridOptionsService.get("paginateChildRows")},PaginationProxy2.prototype.onModelUpdated=function(modelUpdatedEvent){this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:modelUpdatedEvent?modelUpdatedEvent.animate:!1,newData:modelUpdatedEvent?modelUpdatedEvent.newData:!1,newPage:modelUpdatedEvent?modelUpdatedEvent.newPage:!1,newPageSize:modelUpdatedEvent?modelUpdatedEvent.newPageSize:!1,keepRenderedRows:modelUpdatedEvent?modelUpdatedEvent.keepRenderedRows:!1};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy2.prototype.onPaginationGridOptionChanged=function(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages();var paginationChangedEvent={type:Events.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0};this.eventService.dispatchEvent(paginationChangedEvent)},PaginationProxy2.prototype.onPageSizeGridOptionChanged=function(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")},PaginationProxy2.prototype.goToPage=function(page){if(!(!this.active||this.currentPage===page||typeof this.currentPage!="number")){this.currentPage=page;var event={type:Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1};this.onModelUpdated(event)}},PaginationProxy2.prototype.getPixelOffset=function(){return this.pixelOffset},PaginationProxy2.prototype.getRow=function(index){return this.rowModel.getRow(index)},PaginationProxy2.prototype.getRowNode=function(id){return this.rowModel.getRowNode(id)},PaginationProxy2.prototype.getRowIndexAtPixel=function(pixel){return this.rowModel.getRowIndexAtPixel(pixel)},PaginationProxy2.prototype.getCurrentPageHeight=function(){return missing(this.topRowBounds)||missing(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)},PaginationProxy2.prototype.getCurrentPagePixelRange=function(){var pageFirstPixel=this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel,pageLastPixel}},PaginationProxy2.prototype.isRowPresent=function(rowNode){if(!this.rowModel.isRowPresent(rowNode))return!1;var nodeIsInPage=rowNode.rowIndex>=this.topDisplayedRowIndex&&rowNode.rowIndex<=this.bottomDisplayedRowIndex;return nodeIsInPage},PaginationProxy2.prototype.isEmpty=function(){return this.rowModel.isEmpty()},PaginationProxy2.prototype.isRowsToRender=function(){return this.rowModel.isRowsToRender()},PaginationProxy2.prototype.forEachNode=function(callback){return this.rowModel.forEachNode(callback)},PaginationProxy2.prototype.forEachNodeOnPage=function(callback){for(var firstRow=this.getPageFirstRow(),lastRow=this.getPageLastRow(),i=firstRow;i<=lastRow;i++){var node=this.getRow(i);node&&callback(node)}},PaginationProxy2.prototype.getType=function(){return this.rowModel.getType()},PaginationProxy2.prototype.getRowBounds=function(index){var res=this.rowModel.getRowBounds(index);return res.rowIndex=index,res},PaginationProxy2.prototype.getPageFirstRow=function(){return this.topRowBounds?this.topRowBounds.rowIndex:-1},PaginationProxy2.prototype.getPageLastRow=function(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1},PaginationProxy2.prototype.getRowCount=function(){return this.rowModel.getRowCount()},PaginationProxy2.prototype.getPageForIndex=function(index){return Math.floor(index/this.pageSize)},PaginationProxy2.prototype.goToPageWithIndex=function(index){if(this.active){var pageNumber=this.getPageForIndex(index);this.goToPage(pageNumber)}},PaginationProxy2.prototype.isRowInPage=function(row){if(!this.active)return!0;var rowPage=this.getPageForIndex(row.rowIndex);return rowPage===this.currentPage},PaginationProxy2.prototype.isLastPageFound=function(){return this.rowModel.isLastRowIndexKnown()},PaginationProxy2.prototype.getCurrentPage=function(){return this.currentPage},PaginationProxy2.prototype.goToNextPage=function(){this.goToPage(this.currentPage+1)},PaginationProxy2.prototype.goToPreviousPage=function(){this.goToPage(this.currentPage-1)},PaginationProxy2.prototype.goToFirstPage=function(){this.goToPage(0)},PaginationProxy2.prototype.goToLastPage=function(){var rowCount=this.rowModel.getRowCount(),lastPage=Math.floor(rowCount/this.pageSize);this.goToPage(lastPage)},PaginationProxy2.prototype.getPageSize=function(){return this.pageSize},PaginationProxy2.prototype.getTotalPages=function(){return this.totalPages},PaginationProxy2.prototype.setPage=function(page){this.currentPage=page},Object.defineProperty(PaginationProxy2.prototype,"pageSize",{get:function(){return exists(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:exists(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:exists(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:exists(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize},enumerable:!1,configurable:!0}),PaginationProxy2.prototype.unsetAutoCalculatedPageSize=function(){if(this.pageSizeAutoCalculated!==void 0){var oldPageSize=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==oldPageSize&&this.onModelUpdated({type:Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}},PaginationProxy2.prototype.setPageSize=function(size,source){var currentSize=this.pageSize;switch(source){case"autoCalculated":this.pageSizeAutoCalculated=size;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=size,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=size;break;case"gridOptions":this.pageSizeFromGridOptions=size,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}if(currentSize!==this.pageSize){var event_1={type:Events.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0};this.onModelUpdated(event_1)}},PaginationProxy2.prototype.calculatePages=function(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(exists(this.topRowBounds)?this.topRowBounds.rowTop:0)},PaginationProxy2.prototype.setPixelOffset=function(value){this.pixelOffset!==value&&(this.pixelOffset=value,this.eventService.dispatchEvent({type:Events.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))},PaginationProxy2.prototype.setZeroRows=function(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0},PaginationProxy2.prototype.adjustCurrentPageIfInvalid=function(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)},PaginationProxy2.prototype.calculatePagesMasterRowsOnly=function(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}var masterLastRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(masterLastRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid();var masterPageStartIndex=this.pageSize*this.currentPage,masterPageEndIndex=this.pageSize*(this.currentPage+1)-1;if(masterPageEndIndex>masterLastRowIndex&&(masterPageEndIndex=masterLastRowIndex),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(masterPageStartIndex),masterPageEndIndex===masterLastRowIndex)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{var firstIndexNotToShow=this.rowModel.getTopLevelRowDisplayedIndex(masterPageEndIndex+1);this.bottomDisplayedRowIndex=firstIndexNotToShow-1}},PaginationProxy2.prototype.getMasterRowCount=function(){return this.masterRowCount},PaginationProxy2.prototype.calculatePagesAllRows=function(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}var maxRowIndex=this.masterRowCount-1;this.totalPages=Math.floor(maxRowIndex/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>maxRowIndex&&(this.bottomDisplayedRowIndex=maxRowIndex)},PaginationProxy2.prototype.calculatedPagesNotActive=function(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1},__decorate$1b([Autowired("rowModel")],PaginationProxy2.prototype,"rowModel",void 0),__decorate$1b([PostConstruct],PaginationProxy2.prototype,"postConstruct",null),PaginationProxy2=__decorate$1b([Bean("paginationProxy")],PaginationProxy2),PaginationProxy2}(BeanStub),__extends$1d=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1a=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1a"),StylingService=function(_super){__extends$1d(StylingService2,_super);function StylingService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(StylingService2,"StylingService"),StylingService2.prototype.processAllCellClasses=function(colDef,params,onApplicableClass,onNotApplicableClass){this.processClassRules(void 0,colDef.cellClassRules,params,onApplicableClass,onNotApplicableClass),this.processStaticCellClasses(colDef,params,onApplicableClass)},StylingService2.prototype.processClassRules=function(previousClassRules,classRules,params,onApplicableClass,onNotApplicableClass){if(!(classRules==null&&previousClassRules==null)){var classesToApply={},classesToRemove={},forEachSingleClass=__name(function(className,callback){className.split(" ").forEach(function(singleClass){singleClass.trim()!=""&&callback(singleClass)})},"forEachSingleClass");if(classRules)for(var classNames=Object.keys(classRules),_loop_1=__name(function(i2){var className=classNames[i2],rule=classRules[className],resultOfRule;typeof rule=="string"?resultOfRule=this_1.expressionService.evaluate(rule,params):typeof rule=="function"&&(resultOfRule=rule(params)),forEachSingleClass(className,function(singleClass){resultOfRule?classesToApply[singleClass]=!0:classesToRemove[singleClass]=!0})},"_loop_1"),this_1=this,i=0;i<classNames.length;i++)_loop_1(i);previousClassRules&&onNotApplicableClass&&Object.keys(previousClassRules).forEach(function(className){return forEachSingleClass(className,function(singleClass){classesToApply[singleClass]||(classesToRemove[singleClass]=!0)})}),onNotApplicableClass&&Object.keys(classesToRemove).forEach(onNotApplicableClass),Object.keys(classesToApply).forEach(onApplicableClass)}},StylingService2.prototype.getStaticCellClasses=function(colDef,params){var cellClass=colDef.cellClass;if(!cellClass)return[];var classOrClasses;if(typeof cellClass=="function"){var cellClassFunc=cellClass;classOrClasses=cellClassFunc(params)}else classOrClasses=cellClass;return typeof classOrClasses=="string"&&(classOrClasses=[classOrClasses]),classOrClasses||[]},StylingService2.prototype.processStaticCellClasses=function(colDef,params,onApplicableClass){var classOrClasses=this.getStaticCellClasses(colDef,params);classOrClasses.forEach(function(cssClassItem){onApplicableClass(cssClassItem)})},__decorate$1a([Autowired("expressionService")],StylingService2.prototype,"expressionService",void 0),StylingService2=__decorate$1a([Bean("stylingService")],StylingService2),StylingService2}(BeanStub),__extends$1c=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgToggleButton=function(_super){__extends$1c(AgToggleButton2,_super);function AgToggleButton2(config){return _super.call(this,config,"ag-toggle-button")||this}return __name(AgToggleButton2,"AgToggleButton"),AgToggleButton2.prototype.setValue=function(value,silent){return _super.prototype.setValue.call(this,value,silent),this.addOrRemoveCssClass("ag-selected",this.getValue()),this},AgToggleButton2}(AgCheckbox),__extends$1b=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputTextArea=function(_super){__extends$1b(AgInputTextArea2,_super);function AgInputTextArea2(config){return _super.call(this,config,"ag-text-area",null,"textarea")||this}return __name(AgInputTextArea2,"AgInputTextArea"),AgInputTextArea2.prototype.setValue=function(value,silent){var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputTextArea2.prototype.setCols=function(cols){return this.eInput.cols=cols,this},AgInputTextArea2.prototype.setRows=function(rows){return this.eInput.rows=rows,this},AgInputTextArea2}(AgAbstractInputField),__extends$1a=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputDateField=function(_super){__extends$1a(AgInputDateField2,_super);function AgInputDateField2(config){return _super.call(this,config,"ag-date-field","date")||this}return __name(AgInputDateField2,"AgInputDateField"),AgInputDateField2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));var usingSafari=isBrowserSafari();this.addManagedListener(this.eInput,"mousedown",function(){_this.isDisabled()||usingSafari||_this.eInput.focus()}),this.eInput.step="any"},AgInputDateField2.prototype.onWheel=function(e){document.activeElement===this.eInput&&e.preventDefault()},AgInputDateField2.prototype.setMin=function(minDate){var _a,min=minDate instanceof Date?(_a=serialiseDate(minDate??null,!1))!==null&&_a!==void 0?_a:void 0:minDate;return this.min===min?this:(this.min=min,addOrRemoveAttribute(this.eInput,"min",min),this)},AgInputDateField2.prototype.setMax=function(maxDate){var _a,max=maxDate instanceof Date?(_a=serialiseDate(maxDate??null,!1))!==null&&_a!==void 0?_a:void 0:maxDate;return this.max===max?this:(this.max=max,addOrRemoveAttribute(this.eInput,"max",max),this)},AgInputDateField2.prototype.setStep=function(step){return this.step===step?this:(this.step=step,addOrRemoveAttribute(this.eInput,"step",step),this)},AgInputDateField2.prototype.getDate=function(){var _a;if(this.eInput.validity.valid)return(_a=parseDateTimeFromString(this.getValue()))!==null&&_a!==void 0?_a:void 0},AgInputDateField2.prototype.setDate=function(date,silent){this.setValue(serialiseDate(date??null,!1),silent)},AgInputDateField2}(AgInputTextField),__extends$19=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgInputRange=function(_super){__extends$19(AgInputRange2,_super);function AgInputRange2(config){return _super.call(this,config,"ag-range-field","range")||this}return __name(AgInputRange2,"AgInputRange"),AgInputRange2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this);var _a=this.config,min=_a.min,max=_a.max,step=_a.step;min!=null&&this.setMinValue(min),max!=null&&this.setMaxValue(max),this.setStep(step||1)},AgInputRange2.prototype.addInputListeners=function(){var _this=this;this.addManagedListener(this.eInput,"input",function(e){var value=e.target.value;_this.setValue(value)})},AgInputRange2.prototype.setMinValue=function(value){return this.min=value,this.eInput.setAttribute("min",value.toString()),this},AgInputRange2.prototype.setMaxValue=function(value){return this.max=value,this.eInput.setAttribute("max",value.toString()),this},AgInputRange2.prototype.setStep=function(value){return this.eInput.setAttribute("step",value.toString()),this},AgInputRange2.prototype.setValue=function(value,silent){this.min!=null&&(value=Math.max(parseFloat(value),this.min).toString()),this.max!=null&&(value=Math.min(parseFloat(value),this.max).toString());var ret=_super.prototype.setValue.call(this,value,silent);return this.eInput.value=value,ret},AgInputRange2}(AgAbstractInputField),__extends$18=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$19=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$19"),RichSelectRow=function(_super){__extends$18(RichSelectRow2,_super);function RichSelectRow2(params,wrapperEl){var _this=_super.call(this,'<div class="ag-rich-select-row" role="presentation"></div>')||this;return _this.params=params,_this.wrapperEl=wrapperEl,_this}return __name(RichSelectRow2,"RichSelectRow"),RichSelectRow2.prototype.postConstruct=function(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))},RichSelectRow2.prototype.setState=function(value){var formattedValue="";this.params.valueFormatter&&(formattedValue=this.params.valueFormatter(value));var rendererSuccessful=this.populateWithRenderer(value,formattedValue);rendererSuccessful||this.populateWithoutRenderer(value,formattedValue),this.value=value},RichSelectRow2.prototype.highlightString=function(matchString){var parsedValue=this.parsedValue;if(!(this.params.cellRenderer||!exists(parsedValue))){var hasMatch=exists(matchString);if(hasMatch){var index=parsedValue==null?void 0:parsedValue.toLocaleLowerCase().indexOf(matchString.toLocaleLowerCase());if(index>=0){var highlightEndIndex=index+matchString.length,startPart=escapeString(parsedValue.slice(0,index),!0),highlightedPart=escapeString(parsedValue.slice(index,highlightEndIndex),!0),endPart=escapeString(parsedValue.slice(highlightEndIndex));this.renderValueWithoutRenderer("".concat(startPart,'<span class="ag-rich-select-row-text-highlight">').concat(highlightedPart,"</span>").concat(endPart))}else hasMatch=!1}hasMatch||this.renderValueWithoutRenderer(parsedValue)}},RichSelectRow2.prototype.updateHighlighted=function(highlighted){var _a,eGui=this.getGui(),parentId="ag-rich-select-row-".concat(this.getCompId());if((_a=eGui.parentElement)===null||_a===void 0||_a.setAttribute("id",parentId),highlighted){var parentAriaEl=this.getParentComponent().getAriaElement();setAriaActiveDescendant(parentAriaEl,parentId),this.wrapperEl.setAttribute("data-active-option",parentId)}setAriaSelected(eGui.parentElement,highlighted),this.addOrRemoveCssClass("ag-rich-select-row-selected",highlighted)},RichSelectRow2.prototype.populateWithoutRenderer=function(value,valueFormatted){var eDocument=this.gridOptionsService.getDocument(),eGui=this.getGui(),span=eDocument.createElement("span");span.style.overflow="hidden",span.style.textOverflow="ellipsis";var parsedValue=escapeString(exists(valueFormatted)?valueFormatted:value,!0);this.parsedValue=exists(parsedValue)?parsedValue:null,eGui.appendChild(span),this.renderValueWithoutRenderer(parsedValue)},RichSelectRow2.prototype.renderValueWithoutRenderer=function(value){var span=this.getGui().querySelector("span");span&&(span.innerHTML=exists(value)?value:"&nbsp;")},RichSelectRow2.prototype.populateWithRenderer=function(value,valueFormatted){var _this=this,cellRendererPromise,userCompDetails;return this.params.cellRenderer&&(userCompDetails=this.userComponentFactory.getCellRendererDetails(this.params,{value,valueFormatted})),userCompDetails&&(cellRendererPromise=userCompDetails.newAgStackInstance()),cellRendererPromise&&bindCellRendererToHtmlElement(cellRendererPromise,this.getGui()),cellRendererPromise?(cellRendererPromise.then(function(childComponent){_this.addDestroyFunc(function(){_this.getContext().destroyBean(childComponent)})}),!0):!1},RichSelectRow2.prototype.onClick=function(){var parent=this.getParentComponent(),event={type:Events.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value};parent==null||parent.dispatchEvent(event)},__decorate$19([Autowired("userComponentFactory")],RichSelectRow2.prototype,"userComponentFactory",void 0),__decorate$19([PostConstruct],RichSelectRow2.prototype,"postConstruct",null),RichSelectRow2}(Component),__extends$17=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$18=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$18"),VirtualList=function(_super){__extends$17(VirtualList2,_super);function VirtualList2(params){var _this=_super.call(this,VirtualList2.getTemplate((params==null?void 0:params.cssIdentifier)||"default"))||this;_this.renderedRows=new Map,_this.rowHeight=20;var _a=params||{},_b=_a.cssIdentifier,cssIdentifier=_b===void 0?"default":_b,_c=_a.ariaRole,ariaRole=_c===void 0?"listbox":_c,listName=_a.listName;return _this.cssIdentifier=cssIdentifier,_this.ariaRole=ariaRole,_this.listName=listName,_this}return __name(VirtualList2,"VirtualList"),VirtualList2.prototype.postConstruct=function(){var _this=this;this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:function(e){return _this.onFocusIn(e)},onFocusOut:function(e){return _this.onFocusOut(e)},focusInnerElement:function(fromBottom){return _this.focusInnerElement(fromBottom)},onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}}),this.setAriaProperties(),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))},VirtualList2.prototype.onGridStylesChanged=function(){this.rowHeight=this.getItemHeight(),this.refresh()},VirtualList2.prototype.setAriaProperties=function(){var translate=this.localeService.getLocaleTextFunc(),listName=translate("ariaDefaultListName",this.listName||"List"),ariaEl=this.eContainer;setAriaRole(ariaEl,this.ariaRole),setAriaLabel(ariaEl,listName)},VirtualList2.prototype.addResizeObserver=function(){var _this=this,listener=__name(function(){return _this.animationFrameService.requestAnimationFrame(function(){return _this.drawVirtualRows()})},"listener"),destroyObserver=this.resizeObserverService.observeResize(this.getGui(),listener);this.addDestroyFunc(destroyObserver)},VirtualList2.prototype.focusInnerElement=function(fromBottom){this.focusRow(fromBottom?this.model.getRowCount()-1:0)},VirtualList2.prototype.onFocusIn=function(e){var target=e.target;target.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=getAriaPosInSet(target)-1)},VirtualList2.prototype.onFocusOut=function(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)},VirtualList2.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.DOWN:this.navigate(e.key===KeyCode.UP)&&e.preventDefault();break}},VirtualList2.prototype.onTabKeyDown=function(e){this.navigate(e.shiftKey)?e.preventDefault():(stopPropagationForAgGrid(e),this.forceFocusOutOfContainer(e.shiftKey))},VirtualList2.prototype.navigate=function(up){if(this.lastFocusedRowIndex==null)return!1;var nextRow=this.lastFocusedRowIndex+(up?-1:1);return nextRow<0||nextRow>=this.model.getRowCount()?!1:(this.focusRow(nextRow),!0)},VirtualList2.prototype.getLastFocusedRow=function(){return this.lastFocusedRowIndex},VirtualList2.prototype.focusRow=function(rowNumber){var _this=this;this.ensureIndexVisible(rowNumber),window.setTimeout(function(){if(_this.isAlive()){var renderedRow=_this.renderedRows.get(rowNumber);renderedRow&&renderedRow.eDiv.focus()}},10)},VirtualList2.prototype.getComponentAt=function(rowIndex){var comp=this.renderedRows.get(rowIndex);return comp&&comp.rowComponent},VirtualList2.prototype.forEachRenderedRow=function(func){this.renderedRows.forEach(function(value,key){return func(value.rowComponent,key)})},VirtualList2.getTemplate=function(cssIdentifier){return'<div class="ag-virtual-list-viewport ag-'.concat(cssIdentifier,`-virtual-list-viewport" role="presentation">
                <div class="ag-virtual-list-container ag-`).concat(cssIdentifier,`-virtual-list-container" ref="eContainer"></div>
            </div>`)},VirtualList2.prototype.getItemHeight=function(){return this.environment.getListItemHeight()},VirtualList2.prototype.ensureIndexVisible=function(index,scrollPartialIntoView){scrollPartialIntoView===void 0&&(scrollPartialIntoView=!0);var lastRow=this.model.getRowCount();if(typeof index!="number"||index<0||index>=lastRow)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+index),!1;var rowTopPixel=index*this.rowHeight,rowBottomPixel=rowTopPixel+this.rowHeight,eGui=this.getGui(),viewportTopPixel=eGui.scrollTop,viewportHeight=eGui.offsetHeight,viewportBottomPixel=viewportTopPixel+viewportHeight,diff=scrollPartialIntoView?0:this.rowHeight,viewportScrolledPastRow=viewportTopPixel>rowTopPixel+diff,viewportScrolledBeforeRow=viewportBottomPixel<rowBottomPixel-diff;if(viewportScrolledPastRow)return eGui.scrollTop=rowTopPixel,!0;if(viewportScrolledBeforeRow){var newScrollPosition=rowBottomPixel-viewportHeight;return eGui.scrollTop=newScrollPosition,!0}return!1},VirtualList2.prototype.setComponentCreator=function(componentCreator){this.componentCreator=componentCreator},VirtualList2.prototype.setComponentUpdater=function(componentUpdater){this.componentUpdater=componentUpdater},VirtualList2.prototype.getRowHeight=function(){return this.rowHeight},VirtualList2.prototype.getScrollTop=function(){return this.getGui().scrollTop},VirtualList2.prototype.setRowHeight=function(rowHeight){this.rowHeight=rowHeight,this.refresh()},VirtualList2.prototype.refresh=function(softRefresh){var _this=this;if(!(this.model==null||!this.isAlive())){var rowCount=this.model.getRowCount();this.eContainer.style.height="".concat(rowCount*this.rowHeight,"px"),waitUntil(function(){return _this.eContainer.clientHeight>=rowCount*_this.rowHeight},function(){_this.isAlive()&&(_this.canSoftRefresh(softRefresh)?_this.drawVirtualRows(!0):(_this.clearVirtualRows(),_this.drawVirtualRows()))})}},VirtualList2.prototype.canSoftRefresh=function(softRefresh){return!!(softRefresh&&this.renderedRows.size&&typeof this.model.areRowsEqual=="function"&&this.componentUpdater)},VirtualList2.prototype.clearVirtualRows=function(){var _this=this;this.renderedRows.forEach(function(_2,rowIndex){return _this.removeRow(rowIndex)})},VirtualList2.prototype.drawVirtualRows=function(softRefresh){if(!(!this.isAlive()||!this.model)){var gui=this.getGui(),topPixel=gui.scrollTop,bottomPixel=topPixel+gui.offsetHeight,firstRow=Math.floor(topPixel/this.rowHeight),lastRow=Math.floor(bottomPixel/this.rowHeight);this.ensureRowsRendered(firstRow,lastRow,softRefresh)}},VirtualList2.prototype.ensureRowsRendered=function(start,finish,softRefresh){var _this=this;this.renderedRows.forEach(function(_2,rowIndex2){(rowIndex2<start||rowIndex2>finish)&&rowIndex2!==_this.lastFocusedRowIndex&&_this.removeRow(rowIndex2)}),softRefresh&&this.refreshRows();for(var rowIndex=start;rowIndex<=finish;rowIndex++)this.renderedRows.has(rowIndex)||rowIndex<this.model.getRowCount()&&this.insertRow(rowIndex)},VirtualList2.prototype.insertRow=function(rowIndex){var _this=this,value=this.model.getRow(rowIndex),eDiv=document.createElement("div");eDiv.classList.add("ag-virtual-list-item","ag-".concat(this.cssIdentifier,"-virtual-list-item")),setAriaRole(eDiv,this.ariaRole==="tree"?"treeitem":"option"),setAriaSetSize(eDiv,this.model.getRowCount()),setAriaPosInSet(eDiv,rowIndex+1),eDiv.setAttribute("tabindex","-1"),eDiv.style.height="".concat(this.rowHeight,"px"),eDiv.style.top="".concat(this.rowHeight*rowIndex,"px");var rowComponent=this.componentCreator(value,eDiv);rowComponent.addGuiEventListener("focusin",function(){return _this.lastFocusedRowIndex=rowIndex}),eDiv.appendChild(rowComponent.getGui()),this.renderedRows.has(rowIndex-1)?this.renderedRows.get(rowIndex-1).eDiv.insertAdjacentElement("afterend",eDiv):this.renderedRows.has(rowIndex+1)?this.renderedRows.get(rowIndex+1).eDiv.insertAdjacentElement("beforebegin",eDiv):this.eContainer.appendChild(eDiv),this.renderedRows.set(rowIndex,{rowComponent,eDiv,value})},VirtualList2.prototype.removeRow=function(rowIndex){var component=this.renderedRows.get(rowIndex);this.eContainer.removeChild(component.eDiv),this.destroyBean(component.rowComponent),this.renderedRows.delete(rowIndex)},VirtualList2.prototype.refreshRows=function(){var _this=this,rowCount=this.model.getRowCount();this.renderedRows.forEach(function(row,rowIndex){var _a,_b;if(rowIndex>=rowCount)_this.removeRow(rowIndex);else{var newValue=_this.model.getRow(rowIndex);!((_b=(_a=_this.model).areRowsEqual)===null||_b===void 0)&&_b.call(_a,row.value,newValue)?_this.componentUpdater(newValue,row.rowComponent):_this.removeRow(rowIndex)}})},VirtualList2.prototype.addScrollListener=function(){var _this=this;this.addGuiEventListener("scroll",function(){return _this.drawVirtualRows()},{passive:!0})},VirtualList2.prototype.setModel=function(model){this.model=model},VirtualList2.prototype.getAriaElement=function(){return this.eContainer},VirtualList2.prototype.destroy=function(){this.isAlive()&&(this.clearVirtualRows(),_super.prototype.destroy.call(this))},__decorate$18([Autowired("resizeObserverService")],VirtualList2.prototype,"resizeObserverService",void 0),__decorate$18([Autowired("animationFrameService")],VirtualList2.prototype,"animationFrameService",void 0),__decorate$18([RefSelector("eContainer")],VirtualList2.prototype,"eContainer",void 0),__decorate$18([PostConstruct],VirtualList2.prototype,"postConstruct",null),VirtualList2}(TabGuardComp),__extends$16=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$9=__name(function(){return __assign$9=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$9.apply(this,arguments)},"__assign$9"),__decorate$17=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$17"),TEMPLATE=`
    <div class="ag-picker-field" role="presentation">
        <div ref="eLabel"></div>
            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">
            <div ref="eDisplayField" class="ag-picker-field-display"></div>
            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>
            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
        </div>
    </div>`,AgRichSelect=function(_super){__extends$16(AgRichSelect2,_super);function AgRichSelect2(config){var _this=this,_a,_b;_this=_super.call(this,__assign$9(__assign$9({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:(_a=config==null?void 0:config.template)!==null&&_a!==void 0?_a:TEMPLATE,modalPicker:!1},config),{maxPickerHeight:(_b=config==null?void 0:config.maxPickerHeight)!==null&&_b!==void 0?_b:"calc(var(--ag-row-height) * 6.5)"}))||this,_this.searchString="",_this.highlightedItem=-1,_this.lastRowHovered=-1,_this.searchStringCreator=null;var _c=config||{},cellRowHeight=_c.cellRowHeight,value=_c.value,valueList=_c.valueList,searchStringCreator=_c.searchStringCreator;return cellRowHeight!=null&&(_this.cellRowHeight=cellRowHeight),value!==void 0&&(_this.value=value),valueList!=null&&(_this.values=valueList),searchStringCreator&&(_this.searchStringCreator=searchStringCreator),_this}return __name(AgRichSelect2,"AgRichSelect"),AgRichSelect2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this),this.createLoadingElement(),this.createListComponent();var _a=this.config,allowTyping=_a.allowTyping,placeholder=_a.placeholder;allowTyping?(this.eInput.setAutoComplete(!1).setInputPlaceholder(placeholder),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");var _b=this.config.searchDebounceDelay,searchDebounceDelay=_b===void 0?300:_b;this.clearSearchString=debounce(this.clearSearchString,searchDebounceDelay),this.renderSelectedValue(),allowTyping&&(this.eInput.onValueChange(function(value){return _this.searchTextFromString(value)}),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))},AgRichSelect2.prototype.createLoadingElement=function(){var eDocument=this.gridOptionsService.getDocument(),translate=this.localeService.getLocaleTextFunc(),el=eDocument.createElement("div");el.classList.add("ag-loading-text"),el.innerText=translate("loadingOoo","Loading..."),this.eLoading=el},AgRichSelect2.prototype.createListComponent=function(){var _this=this;this.listComponent=this.createBean(new VirtualList({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this));var componentUpdater=__name(function(item,component){},"componentUpdater");this.listComponent.setComponentUpdater(componentUpdater),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,Events.EVENT_FIELD_PICKER_VALUE_SELECTED,function(e){_this.onListValueSelected(e.value,e.fromEnterKey)});var cellRowHeight=this.cellRowHeight;cellRowHeight&&this.listComponent.setRowHeight(cellRowHeight);var eListGui=this.listComponent.getGui(),eListAriaEl=this.listComponent.getAriaElement();this.addManagedListener(eListGui,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(eListGui,"mousedown",function(e){return e.preventDefault()}),eListGui.classList.add("ag-rich-select-list");var listId="ag-rich-select-list-".concat(this.listComponent.getCompId());eListAriaEl.setAttribute("id",listId);var translate=this.localeService.getLocaleTextFunc(),ariaLabel=translate(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue);setAriaLabel(eListAriaEl,ariaLabel),setAriaControls(this.eWrapper,eListAriaEl)},AgRichSelect2.prototype.renderSelectedValue=function(){var _this=this,_a=this,value=_a.value,eDisplayField=_a.eDisplayField,config=_a.config,_b=this.config,allowTyping=_b.allowTyping,initialInputValue=_b.initialInputValue,valueFormatted=this.config.valueFormatter?this.config.valueFormatter(value):value;if(allowTyping){this.eInput.setValue(initialInputValue??valueFormatted);return}var userCompDetails;config.cellRenderer&&(userCompDetails=this.userComponentFactory.getCellRendererDetails(this.config,{value,valueFormatted}));var userCompDetailsPromise;if(userCompDetails&&(userCompDetailsPromise=userCompDetails.newAgStackInstance()),userCompDetailsPromise)clearElement(eDisplayField),bindCellRendererToHtmlElement(userCompDetailsPromise,eDisplayField),userCompDetailsPromise.then(function(renderer){_this.addDestroyFunc(function(){return _this.getContext().destroyBean(renderer)})});else if(exists(this.value))eDisplayField.innerText=valueFormatted,eDisplayField.classList.remove("ag-display-as-placeholder");else{var placeholder=config.placeholder;exists(placeholder)?(eDisplayField.innerHTML="".concat(escapeString(placeholder)),eDisplayField.classList.add("ag-display-as-placeholder")):clearElement(eDisplayField)}},AgRichSelect2.prototype.getCurrentValueIndex=function(){var _a=this,currentList=_a.currentList,value=_a.value;if(value==null||!currentList)return-1;for(var i=0;i<currentList.length;i++)if(currentList[i]===value)return i;return-1},AgRichSelect2.prototype.highlightFilterMatch=function(){var _this=this,_a;(_a=this.listComponent)===null||_a===void 0||_a.forEachRenderedRow(function(cmp,idx){cmp.highlightString(_this.searchString)})},AgRichSelect2.prototype.highlightSelectedValue=function(index){var _this=this,_a;index==null&&(index=this.getCurrentValueIndex()),this.highlightedItem=index,(_a=this.listComponent)===null||_a===void 0||_a.forEachRenderedRow(function(cmp,idx){var highlighted=index===-1?!1:_this.highlightedItem===idx;cmp.updateHighlighted(highlighted)})},AgRichSelect2.prototype.setRowHeight=function(height){height!==this.cellRowHeight&&(this.cellRowHeight=height),this.listComponent&&this.listComponent.setRowHeight(height)},AgRichSelect2.prototype.createPickerComponent=function(){var values2=this.values;return values2&&this.setValueList({valueList:values2}),this.listComponent},AgRichSelect2.prototype.setSearchStringCreator=function(searchStringFn){this.searchStringCreator=searchStringFn},AgRichSelect2.prototype.setValueList=function(params){var valueList=params.valueList,refresh=params.refresh;this.listComponent&&this.currentList!==valueList&&(this.currentList=valueList,this.listComponent.setModel({getRowCount:function(){return valueList.length},getRow:function(index){return valueList[index]},areRowsEqual:function(oldRow,newRow){return oldRow===newRow}}),refresh&&(this.values?this.listComponent.refresh(!0):(this.values=valueList,this.isPickerDisplayed&&this.showCurrentValueInPicker())))},AgRichSelect2.prototype.showPicker=function(){_super.prototype.showPicker.call(this),this.showCurrentValueInPicker(),this.displayOrHidePicker()},AgRichSelect2.prototype.showCurrentValueInPicker=function(){var _a,_b;if(this.listComponent){if(!this.currentList){this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading);return}!((_a=this.eLoading)===null||_a===void 0)&&_a.offsetParent&&((_b=this.eLoading.parentElement)===null||_b===void 0||_b.removeChild(this.eLoading));var currentValueIndex=this.getCurrentValueIndex();currentValueIndex!==-1?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(currentValueIndex),this.listComponent.refresh(!0),this.highlightSelectedValue(currentValueIndex)):this.listComponent.refresh()}},AgRichSelect2.prototype.beforeHidePicker=function(){this.highlightedItem=-1,_super.prototype.beforeHidePicker.call(this)},AgRichSelect2.prototype.onWrapperFocus=function(){if(this.eInput){var focusableEl=this.eInput.getFocusableElement();focusableEl.focus(),focusableEl.select()}},AgRichSelect2.prototype.onWrapperFocusOut=function(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()},AgRichSelect2.prototype.buildSearchStringFromKeyboardEvent=function(searchKey){var key=searchKey.key;if(key===KeyCode.BACKSPACE)this.searchString=this.searchString.slice(0,-1),key="";else if(!isEventFromPrintableCharacter(searchKey))return;searchKey.preventDefault(),this.searchTextFromCharacter(key)},AgRichSelect2.prototype.searchTextFromCharacter=function(char){this.searchString+=char,this.runSearch(),this.clearSearchString()},AgRichSelect2.prototype.searchTextFromString=function(str){str==null&&(str=""),this.searchString=str,this.runSearch()},AgRichSelect2.prototype.buildSearchStrings=function(values2){var _a=this.config.valueFormatter,valueFormatter=_a===void 0?function(value){return value}:_a,searchStrings;return typeof values2[0]=="number"||typeof values2[0]=="string"?searchStrings=values2.map(function(v){return valueFormatter(v)}):typeof values2[0]=="object"&&this.searchStringCreator&&(searchStrings=this.searchStringCreator(values2)),searchStrings},AgRichSelect2.prototype.getSuggestionsAndFilteredValues=function(searchValue,valueList){var _this=this,suggestions=[],filteredValues=[];if(!searchValue.length)return{suggestions,filteredValues};var _a=this.config,_b=_a.searchType,searchType=_b===void 0?"fuzzy":_b,filterList=_a.filterList;if(searchType==="fuzzy"){var fuzzySearchResult=fuzzySuggestions(this.searchString,valueList,!0);suggestions=fuzzySearchResult.values;var indices=fuzzySearchResult.indices;if(filterList&&indices.length)for(var i=0;i<indices.length;i++)filteredValues.push(this.values[indices[i]])}else suggestions=valueList.filter(function(val,idx){var currentValue=val.toLocaleLowerCase(),valueToMatch=_this.searchString.toLocaleLowerCase(),isMatch=searchType==="match"?currentValue.startsWith(valueToMatch):currentValue.indexOf(valueToMatch)!==-1;return filterList&&isMatch&&filteredValues.push(_this.values[idx]),isMatch});return{suggestions,filteredValues}},AgRichSelect2.prototype.filterListModel=function(filteredValues){var filterList=this.config.filterList;filterList&&(this.setValueList({valueList:filteredValues,refresh:!0}),this.alignPickerToComponent())},AgRichSelect2.prototype.runSearch=function(){var _a,_b,values2=this.values,searchStrings=this.buildSearchStrings(values2);if(!searchStrings){this.highlightSelectedValue(-1);return}var _c=this.getSuggestionsAndFilteredValues(this.searchString,searchStrings),suggestions=_c.suggestions,filteredValues=_c.filteredValues,_d=this.config,filterList=_d.filterList,highlightMatch=_d.highlightMatch,_e=_d.searchType,searchType=_e===void 0?"fuzzy":_e,filterValueLen=filteredValues.length,shouldFilter=!!(filterList&&this.searchString!=="");if(this.filterListModel(shouldFilter?filteredValues:values2),suggestions.length){var topSuggestionIndex=shouldFilter?0:searchStrings.indexOf(suggestions[0]);this.selectListItem(topSuggestionIndex)}else if(this.highlightSelectedValue(-1),!shouldFilter||filterValueLen)(_a=this.listComponent)===null||_a===void 0||_a.ensureIndexVisible(0);else if(shouldFilter){this.getAriaElement().removeAttribute("data-active-option");var eListAriaEl=(_b=this.listComponent)===null||_b===void 0?void 0:_b.getAriaElement();eListAriaEl&&setAriaActiveDescendant(eListAriaEl,null)}highlightMatch&&searchType!=="fuzzy"&&this.highlightFilterMatch(),this.displayOrHidePicker()},AgRichSelect2.prototype.displayOrHidePicker=function(){var _a,eListGui=(_a=this.listComponent)===null||_a===void 0?void 0:_a.getGui(),toggleValue=this.currentList?this.currentList.length===0:!1;eListGui==null||eListGui.classList.toggle("ag-hidden",toggleValue)},AgRichSelect2.prototype.clearSearchString=function(){this.searchString=""},AgRichSelect2.prototype.selectListItem=function(index,preventUnnecessaryScroll){if(!(!this.isPickerDisplayed||!this.currentList||!this.listComponent||index<0||index>=this.currentList.length)){var wasScrolled=this.listComponent.ensureIndexVisible(index,!preventUnnecessaryScroll);wasScrolled&&!preventUnnecessaryScroll&&this.listComponent.refresh(!0),this.highlightSelectedValue(index)}},AgRichSelect2.prototype.setValue=function(value,silent,fromPicker){var index=this.currentList?this.currentList.indexOf(value):-1;return index===-1?this:(this.value=value,fromPicker||this.selectListItem(index),this.renderSelectedValue(),_super.prototype.setValue.call(this,value,silent))},AgRichSelect2.prototype.createRowComponent=function(value){var row=new RichSelectRow(this.config,this.eWrapper);row.setParentComponent(this.listComponent),this.getContext().createBean(row),row.setState(value);var _a=this.config,highlightMatch=_a.highlightMatch,_b=_a.searchType,searchType=_b===void 0?"fuzzy":_b;return highlightMatch&&searchType!=="fuzzy"&&row.highlightString(this.searchString),row},AgRichSelect2.prototype.getRowForMouseEvent=function(e){var listComponent=this.listComponent;if(!listComponent)return-1;var eGui=listComponent==null?void 0:listComponent.getGui(),rect=eGui.getBoundingClientRect(),scrollTop=listComponent.getScrollTop(),mouseY=e.clientY-rect.top+scrollTop;return Math.floor(mouseY/listComponent.getRowHeight())},AgRichSelect2.prototype.onPickerMouseMove=function(e){if(this.listComponent){var row=this.getRowForMouseEvent(e);row!==-1&&row!=this.lastRowHovered&&(this.lastRowHovered=row,this.selectListItem(row,!0))}},AgRichSelect2.prototype.onNavigationKeyDown=function(event,key){event.preventDefault();var isDown=key===KeyCode.DOWN;if(!this.isPickerDisplayed&&isDown){this.showPicker();return}var oldIndex=this.highlightedItem,diff=isDown?1:-1,newIndex=oldIndex===-1?0:oldIndex+diff;this.selectListItem(newIndex)},AgRichSelect2.prototype.onEnterKeyDown=function(e){this.isPickerDisplayed&&(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))},AgRichSelect2.prototype.onTabKeyDown=function(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)},AgRichSelect2.prototype.onListValueSelected=function(value,fromEnterKey){this.setValue(value,!1,!0),this.dispatchPickerEvent(value,fromEnterKey),this.hidePicker()},AgRichSelect2.prototype.dispatchPickerEvent=function(value,fromEnterKey){var event={type:Events.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey,value};this.dispatchEvent(event)},AgRichSelect2.prototype.getFocusableElement=function(){var allowTyping=this.config.allowTyping;return allowTyping?this.eInput.getFocusableElement():_super.prototype.getFocusableElement.call(this)},AgRichSelect2.prototype.onKeyDown=function(event){var key=event.key,allowTyping=this.config.allowTyping;switch(key){case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:allowTyping||event.preventDefault();break;case KeyCode.PAGE_UP:case KeyCode.PAGE_DOWN:event.preventDefault();break;case KeyCode.DOWN:case KeyCode.UP:this.onNavigationKeyDown(event,key);break;case KeyCode.ESCAPE:this.isPickerDisplayed&&(isVisible(this.listComponent.getGui())&&(event.preventDefault(),stopPropagationForAgGrid(event)),this.hidePicker());break;case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown();break;default:allowTyping||this.buildSearchStringFromKeyboardEvent(event)}},AgRichSelect2.prototype.destroy=function(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,_super.prototype.destroy.call(this)},__decorate$17([Autowired("userComponentFactory")],AgRichSelect2.prototype,"userComponentFactory",void 0),__decorate$17([RefSelector("eInput")],AgRichSelect2.prototype,"eInput",void 0),AgRichSelect2}(AgPickerField),__extends$15=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$16=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$16"),AgSlider=function(_super){__extends$15(AgSlider2,_super);function AgSlider2(config){var _this=_super.call(this,config,AgSlider2.TEMPLATE)||this;return _this.labelAlignment="top",_this}return __name(AgSlider2,"AgSlider"),AgSlider2.prototype.init=function(){this.eSlider.addCssClass("ag-slider-field")},AgSlider2.prototype.onValueChange=function(callbackFn){var _this=this,eventChanged=Events.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,eventChanged,function(){var textValue=parseFloat(_this.eText.getValue());_this.eSlider.setValue(textValue.toString(),!0),callbackFn(textValue||0)}),this.addManagedListener(this.eSlider,eventChanged,function(){var sliderValue=_this.eSlider.getValue();_this.eText.setValue(sliderValue,!0),callbackFn(parseFloat(sliderValue))}),this},AgSlider2.prototype.setSliderWidth=function(width){return this.eSlider.setWidth(width),this},AgSlider2.prototype.setTextFieldWidth=function(width){return this.eText.setWidth(width),this},AgSlider2.prototype.setMinValue=function(minValue){return this.eSlider.setMinValue(minValue),this.eText.setMin(minValue),this},AgSlider2.prototype.setMaxValue=function(maxValue){return this.eSlider.setMaxValue(maxValue),this.eText.setMax(maxValue),this},AgSlider2.prototype.getValue=function(){return this.eText.getValue()},AgSlider2.prototype.setValue=function(value){return this.getValue()===value?this:(this.eText.setValue(value,!0),this.eSlider.setValue(value,!0),this.dispatchEvent({type:Events.EVENT_FIELD_VALUE_CHANGED}),this)},AgSlider2.prototype.setStep=function(step){return this.eSlider.setStep(step),this.eText.setStep(step),this},AgSlider2.TEMPLATE=`<div class="ag-slider">
            <label ref="eLabel"></label>
            <div class="ag-wrapper ag-slider-wrapper">
                <ag-input-range ref="eSlider"></ag-input-range>
                <ag-input-number-field ref="eText"></ag-input-number-field>
            </div>
        </div>`,__decorate$16([RefSelector("eLabel")],AgSlider2.prototype,"eLabel",void 0),__decorate$16([RefSelector("eSlider")],AgSlider2.prototype,"eSlider",void 0),__decorate$16([RefSelector("eText")],AgSlider2.prototype,"eText",void 0),__decorate$16([PostConstruct],AgSlider2.prototype,"init",null),AgSlider2}(AgAbstractLabel),__extends$14=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$15=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$15"),AgGroupComponent=function(_super){__extends$14(AgGroupComponent2,_super);function AgGroupComponent2(params){params===void 0&&(params={});var _this=_super.call(this,AgGroupComponent2.getTemplate(params))||this;_this.suppressEnabledCheckbox=!0,_this.suppressOpenCloseIcons=!1;var title=params.title,enabled=params.enabled,items=params.items,suppressEnabledCheckbox=params.suppressEnabledCheckbox,suppressOpenCloseIcons=params.suppressOpenCloseIcons;return _this.title=title,_this.cssIdentifier=params.cssIdentifier||"default",_this.enabled=enabled??!0,_this.items=items||[],_this.alignItems=params.alignItems||"center",suppressEnabledCheckbox!=null&&(_this.suppressEnabledCheckbox=suppressEnabledCheckbox),suppressOpenCloseIcons!=null&&(_this.suppressOpenCloseIcons=suppressOpenCloseIcons),_this}return __name(AgGroupComponent2,"AgGroupComponent"),AgGroupComponent2.getTemplate=function(params){var cssIdentifier=params.cssIdentifier||"default",direction=params.direction||"vertical";return'<div class="ag-group ag-'.concat(cssIdentifier,`-group" role="presentation">
            <div class="ag-group-title-bar ag-`).concat(cssIdentifier,`-group-title-bar ag-unselectable" ref="eTitleBar" role="button">
                <span class="ag-group-title-bar-icon ag-`).concat(cssIdentifier,`-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>
                <span class="ag-group-title-bar-icon ag-`).concat(cssIdentifier,`-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>
                <span ref="eTitle" class="ag-group-title ag-`).concat(cssIdentifier,`-group-title"></span>
            </div>
            <div ref="eToolbar" class="ag-group-toolbar ag-`).concat(cssIdentifier,`-group-toolbar">
                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>
            </div>
            <div ref="eContainer" class="ag-group-container ag-group-container-`).concat(direction," ag-").concat(cssIdentifier,`-group-container"></div>
        </div>`)},AgGroupComponent2.prototype.postConstruct=function(){if(this.items.length){var initialItems=this.items;this.items=[],this.addItems(initialItems)}var localeTextFunc=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(localeTextFunc("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()},AgGroupComponent2.prototype.setupExpandContract=function(){var _this=this;this.eGroupClosedIcon.appendChild(createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",function(){return _this.toggleGroupExpand()}),this.addManagedListener(this.eTitleBar,"keydown",function(e){switch(e.key){case KeyCode.ENTER:case KeyCode.SPACE:e.preventDefault(),_this.toggleGroupExpand();break;case KeyCode.RIGHT:case KeyCode.LEFT:e.preventDefault(),_this.toggleGroupExpand(e.key===KeyCode.RIGHT);break}})},AgGroupComponent2.prototype.refreshAriaStatus=function(){this.suppressOpenCloseIcons||setAriaExpanded(this.eTitleBar,this.expanded)},AgGroupComponent2.prototype.refreshChildDisplay=function(){var showIcon=!this.suppressOpenCloseIcons;setDisplayed(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),setDisplayed(this.eGroupOpenedIcon,showIcon&&this.expanded),setDisplayed(this.eGroupClosedIcon,showIcon&&!this.expanded)},AgGroupComponent2.prototype.isExpanded=function(){return this.expanded},AgGroupComponent2.prototype.setAlignItems=function(alignment){this.alignItems!==alignment&&this.removeCssClass("ag-group-item-alignment-".concat(this.alignItems)),this.alignItems=alignment;var newCls="ag-group-item-alignment-".concat(this.alignItems);return this.addCssClass(newCls),this},AgGroupComponent2.prototype.toggleGroupExpand=function(expanded){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),setDisplayed(this.eContainer,!0),this):(expanded=expanded??!this.expanded,this.expanded===expanded?this:(this.expanded=expanded,this.refreshAriaStatus(),this.refreshChildDisplay(),setDisplayed(this.eContainer,expanded),this.dispatchEvent({type:this.expanded?AgGroupComponent2.EVENT_EXPANDED:AgGroupComponent2.EVENT_COLLAPSED}),this))},AgGroupComponent2.prototype.addItems=function(items){var _this=this;items.forEach(function(item){return _this.addItem(item)})},AgGroupComponent2.prototype.prependItem=function(item){this.insertItem(item,this.eContainer.firstChild)},AgGroupComponent2.prototype.addItem=function(item){this.insertItem(item,null)},AgGroupComponent2.prototype.insertItem=function(item,before){var container=this.eContainer,el=item instanceof Component?item.getGui():item;el.classList.add("ag-group-item","ag-".concat(this.cssIdentifier,"-group-item")),container.insertBefore(el,before),this.items.push(el)},AgGroupComponent2.prototype.hideItem=function(hide,index){var itemToHide=this.items[index];setDisplayed(itemToHide,!hide)},AgGroupComponent2.prototype.setTitle=function(title){return this.eTitle.innerText=title,this},AgGroupComponent2.prototype.addCssClassToTitleBar=function(cssClass){this.eTitleBar.classList.add(cssClass)},AgGroupComponent2.prototype.setEnabled=function(enabled,skipToggle){return this.enabled=enabled,this.refreshDisabledStyles(),this.toggleGroupExpand(enabled),skipToggle||this.cbGroupEnabled.setValue(enabled),this},AgGroupComponent2.prototype.isEnabled=function(){return this.enabled},AgGroupComponent2.prototype.onEnableChange=function(callbackFn){var _this=this;return this.cbGroupEnabled.onValueChange(function(newSelection){_this.setEnabled(newSelection,!0),callbackFn(newSelection)}),this},AgGroupComponent2.prototype.hideEnabledCheckbox=function(hide){return this.suppressEnabledCheckbox=hide,this.refreshChildDisplay(),this.refreshDisabledStyles(),this},AgGroupComponent2.prototype.hideOpenCloseIcons=function(hide){return this.suppressOpenCloseIcons=hide,hide&&this.toggleGroupExpand(!0),this},AgGroupComponent2.prototype.refreshDisabledStyles=function(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)},AgGroupComponent2.EVENT_EXPANDED="expanded",AgGroupComponent2.EVENT_COLLAPSED="collapsed",__decorate$15([RefSelector("eTitleBar")],AgGroupComponent2.prototype,"eTitleBar",void 0),__decorate$15([RefSelector("eGroupOpenedIcon")],AgGroupComponent2.prototype,"eGroupOpenedIcon",void 0),__decorate$15([RefSelector("eGroupClosedIcon")],AgGroupComponent2.prototype,"eGroupClosedIcon",void 0),__decorate$15([RefSelector("eToolbar")],AgGroupComponent2.prototype,"eToolbar",void 0),__decorate$15([RefSelector("cbGroupEnabled")],AgGroupComponent2.prototype,"cbGroupEnabled",void 0),__decorate$15([RefSelector("eTitle")],AgGroupComponent2.prototype,"eTitle",void 0),__decorate$15([RefSelector("eContainer")],AgGroupComponent2.prototype,"eContainer",void 0),__decorate$15([PostConstruct],AgGroupComponent2.prototype,"postConstruct",null),AgGroupComponent2}(Component),__extends$13=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$14=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$14"),AgMenuList=function(_super){__extends$13(AgMenuList2,_super);function AgMenuList2(level,params){level===void 0&&(level=0);var _this=_super.call(this,'<div class="ag-menu-list" role="tree"></div>')||this;return _this.level=level,_this.menuItems=[],_this.params=params??{column:null,node:null,value:null},_this}return __name(AgMenuList2,"AgMenuList"),AgMenuList2.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)},onFocusIn:function(e){return _this.handleFocusIn(e)},onFocusOut:function(e){return _this.handleFocusOut(e)}})},AgMenuList2.prototype.onTabKeyDown=function(e){var parent=this.getParentComponent(),parentGui=parent&&parent.getGui(),isManaged=parentGui&&parentGui.classList.contains("ag-focus-managed");isManaged||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)},AgMenuList2.prototype.handleKeyDown=function(e){switch(e.key){case KeyCode.UP:case KeyCode.RIGHT:case KeyCode.DOWN:case KeyCode.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case KeyCode.ESCAPE:this.closeIfIsChild()&&stopPropagationForAgGrid(e);break}},AgMenuList2.prototype.handleFocusIn=function(e){var _a,_b,oldFocusedElement=e.relatedTarget;!this.tabGuardCtrl.isTabGuard(oldFocusedElement)&&(this.getGui().contains(oldFocusedElement)||!((_b=(_a=this.activeMenuItem)===null||_a===void 0?void 0:_a.getSubMenuGui())===null||_b===void 0)&&_b.contains(oldFocusedElement))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())},AgMenuList2.prototype.handleFocusOut=function(e){var _a,newFocusedElement=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(newFocusedElement)||!((_a=this.activeMenuItem.getSubMenuGui())===null||_a===void 0)&&_a.contains(newFocusedElement)||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()},AgMenuList2.prototype.clearActiveItem=function(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)},AgMenuList2.prototype.addMenuItems=function(menuItems){var _this=this;menuItems!=null&&AgPromise.all(menuItems.map(function(menuItemOrString){return menuItemOrString==="separator"?AgPromise.resolve({eGui:_this.createSeparator()}):typeof menuItemOrString=="string"?(console.warn("AG Grid: unrecognised menu item ".concat(menuItemOrString)),AgPromise.resolve({eGui:null})):_this.addItem(menuItemOrString)})).then(function(elements){elements.forEach(function(element){element!=null&&element.eGui&&(_this.appendChild(element.eGui),element.comp&&_this.menuItems.push(element.comp))})})},AgMenuList2.prototype.addItem=function(menuItemDef){var _this=this,menuItem=this.createManagedBean(new AgMenuItemComponent);return menuItem.init({menuItemDef,isAnotherSubMenuOpen:function(){return _this.menuItems.some(function(m){return m.isSubMenuOpen()})},level:this.level,contextParams:this.params}).then(function(){return menuItem.setParentComponent(_this),_this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_CLOSE_MENU,function(event){_this.dispatchEvent(event)}),_this.addManagedListener(menuItem,AgMenuItemComponent.EVENT_MENU_ITEM_ACTIVATED,function(event){_this.activeMenuItem&&_this.activeMenuItem!==event.menuItem&&_this.activeMenuItem.deactivate(),_this.activeMenuItem=event.menuItem}),{comp:menuItem,eGui:menuItem.getGui()}})},AgMenuList2.prototype.activateFirstItem=function(){var item=this.menuItems.filter(function(currentItem){return!currentItem.isDisabled()})[0];item&&item.activate()},AgMenuList2.prototype.createSeparator=function(){var separatorHtml=`
            <div class="ag-menu-separator" aria-hidden="true">
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
                <div class="ag-menu-separator-part"></div>
            </div>`;return loadTemplate(separatorHtml)},AgMenuList2.prototype.handleNavKey=function(key){switch(key){case KeyCode.UP:case KeyCode.DOWN:var nextItem=this.findNextItem(key===KeyCode.UP);nextItem&&nextItem!==this.activeMenuItem&&nextItem.activate();return}var left=this.gridOptionsService.get("enableRtl")?KeyCode.RIGHT:KeyCode.LEFT;key===left?this.closeIfIsChild():this.openChild()},AgMenuList2.prototype.closeIfIsChild=function(e){var parentItem=this.getParentComponent();return parentItem&&parentItem instanceof AgMenuItemComponent?(e&&e.preventDefault(),parentItem.closeSubMenu(),parentItem.getGui().focus(),!0):!1},AgMenuList2.prototype.openChild=function(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)},AgMenuList2.prototype.findNextItem=function(up){var items=this.menuItems.filter(function(item2){return!item2.isDisabled()});if(items.length){if(!this.activeMenuItem)return up?last(items):items[0];up&&items.reverse();for(var nextItem,foundCurrent=!1,i=0;i<items.length;i++){var item=items[i];if(!foundCurrent){item===this.activeMenuItem&&(foundCurrent=!0);continue}nextItem=item;break}return foundCurrent&&!nextItem?items[0]:nextItem||this.activeMenuItem}},AgMenuList2.prototype.destroy=function(){this.clearActiveItem(),_super.prototype.destroy.call(this)},__decorate$14([Autowired("focusService")],AgMenuList2.prototype,"focusService",void 0),__decorate$14([PostConstruct],AgMenuList2.prototype,"postConstruct",null),AgMenuList2}(TabGuardComp),__extends$12=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$13=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$13"),AgMenuPanel=function(_super){__extends$12(AgMenuPanel2,_super);function AgMenuPanel2(wrappedComponent){var _this=_super.call(this)||this;return _this.wrappedComponent=wrappedComponent,_this.setTemplateFromElement(wrappedComponent.getGui()),_this}return __name(AgMenuPanel2,"AgMenuPanel"),AgMenuPanel2.prototype.postConstruct=function(){var _this=this;this.initialiseTabGuard({onTabKeyDown:function(e){return _this.onTabKeyDown(e)},handleKeyDown:function(e){return _this.handleKeyDown(e)}})},AgMenuPanel2.prototype.handleKeyDown=function(e){e.key===KeyCode.ESCAPE&&this.closePanel()},AgMenuPanel2.prototype.onTabKeyDown=function(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())},AgMenuPanel2.prototype.closePanel=function(){var menuItem=this.parentComponent;menuItem.closeSubMenu(),setTimeout(function(){return menuItem.getGui().focus()},0)},__decorate$13([PostConstruct],AgMenuPanel2.prototype,"postConstruct",null),AgMenuPanel2}(TabGuardComp),__extends$11=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$8=__name(function(){return __assign$8=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$8.apply(this,arguments)},"__assign$8"),__decorate$12=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$12"),AgMenuItemComponent=function(_super){__extends$11(AgMenuItemComponent2,_super);function AgMenuItemComponent2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.isActive=!1,_this.subMenuIsOpen=!1,_this.subMenuIsOpening=!1,_this.suppressRootStyles=!0,_this.suppressAria=!0,_this.suppressFocus=!0,_this}return __name(AgMenuItemComponent2,"AgMenuItemComponent"),AgMenuItemComponent2.prototype.init=function(params){var _this=this,_a,_b,menuItemDef=params.menuItemDef,isAnotherSubMenuOpen=params.isAnotherSubMenuOpen,level=params.level,childComponent=params.childComponent,contextParams=params.contextParams;this.params=params.menuItemDef,this.level=level,this.isAnotherSubMenuOpen=isAnotherSubMenuOpen,this.childComponent=childComponent,this.contextParams=contextParams,this.cssClassPrefix=(_b=(_a=this.params.menuItemParams)===null||_a===void 0?void 0:_a.cssClassPrefix)!==null&&_b!==void 0?_b:"ag-menu-option";var compDetails=this.userComponentFactory.getMenuItemCompDetails(this.params,__assign$8(__assign$8({},menuItemDef),{level,isAnotherSubMenuOpen,openSubMenu:function(activateFirstItem){return _this.openSubMenu(activateFirstItem)},closeSubMenu:function(){return _this.closeSubMenu()},closeMenu:function(event){return _this.closeMenu(event)},updateTooltip:function(tooltip){return _this.updateTooltip(tooltip)},onItemActivated:function(){return _this.onItemActivated()}}));return compDetails.newAgStackInstance().then(function(comp){var _a2;_this.menuItemComp=comp;var configureDefaults=(_a2=comp.configureDefaults)===null||_a2===void 0?void 0:_a2.call(comp);configureDefaults&&_this.configureDefaults(configureDefaults===!0?void 0:configureDefaults)})},AgMenuItemComponent2.prototype.addListeners=function(eGui,params){var _this=this;params!=null&&params.suppressClick||this.addManagedListener(eGui,"click",function(e){return _this.onItemSelected(e)}),params!=null&&params.suppressKeyboardSelect||this.addManagedListener(eGui,"keydown",function(e){(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE)&&(e.preventDefault(),_this.onItemSelected(e))}),params!=null&&params.suppressMouseDown||this.addManagedListener(eGui,"mousedown",function(e){e.stopPropagation(),e.preventDefault()}),params!=null&&params.suppressMouseOver||(this.addManagedListener(eGui,"mouseenter",function(){return _this.onMouseEnter()}),this.addManagedListener(eGui,"mouseleave",function(){return _this.onMouseLeave()}))},AgMenuItemComponent2.prototype.isDisabled=function(){return!!this.params.disabled},AgMenuItemComponent2.prototype.openSubMenu=function(activateFirstItem){var _this=this,_a,_b;if(activateFirstItem===void 0&&(activateFirstItem=!1),this.closeSubMenu(),!!this.params.subMenu){this.subMenuIsOpening=!0;var ePopup=loadTemplate('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=ePopup;var destroySubMenu,afterGuiAttached=__name(function(){_this.subMenuIsOpening=!1},"afterGuiAttached");if(this.childComponent){var menuPanel=this.createBean(new AgMenuPanel(this.childComponent));menuPanel.setParentComponent(this);var subMenuGui_1=menuPanel.getGui(),mouseEvent_1="mouseenter",mouseEnterListener_1=__name(function(){return _this.cancelDeactivate()},"mouseEnterListener_1");subMenuGui_1.addEventListener(mouseEvent_1,mouseEnterListener_1),destroySubMenu=__name(function(){return subMenuGui_1.removeEventListener(mouseEvent_1,mouseEnterListener_1)},"destroySubMenu"),ePopup.appendChild(subMenuGui_1),this.childComponent.afterGuiAttached&&(afterGuiAttached=__name(function(){_this.childComponent.afterGuiAttached(),_this.subMenuIsOpening=!1},"afterGuiAttached"))}else if(this.params.subMenu){var childMenu_1=this.createBean(new AgMenuList(this.level+1,this.contextParams));childMenu_1.setParentComponent(this),childMenu_1.addMenuItems(this.params.subMenu),ePopup.appendChild(childMenu_1.getGui()),this.addManagedListener(childMenu_1,AgMenuItemComponent2.EVENT_CLOSE_MENU,function(e){return _this.dispatchEvent(e)}),childMenu_1.addGuiEventListener("mouseenter",function(){return _this.cancelDeactivate()}),destroySubMenu=__name(function(){return _this.destroyBean(childMenu_1)},"destroySubMenu"),activateFirstItem&&(afterGuiAttached=__name(function(){childMenu_1.activateFirstItem(),_this.subMenuIsOpening=!1},"afterGuiAttached"))}var positionCallback=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup}),translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal:!0,eChild:ePopup,positionCallback,anchorToElement:this.eGui,ariaLabel:translate("ariaLabelSubMenu","SubMenu"),afterGuiAttached});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=function(){var _a2,_b2;addPopupRes&&addPopupRes.hideFunc(),_this.subMenuIsOpen=!1,_this.setAriaExpanded(!1),destroySubMenu(),(_b2=(_a2=_this.menuItemComp).setExpanded)===null||_b2===void 0||_b2.call(_a2,!1),_this.eSubMenuGui=void 0},(_b=(_a=this.menuItemComp).setExpanded)===null||_b===void 0||_b.call(_a,!0)}},AgMenuItemComponent2.prototype.setAriaExpanded=function(expanded){this.suppressAria||setAriaExpanded(this.eGui,expanded)},AgMenuItemComponent2.prototype.closeSubMenu=function(){this.hideSubMenu&&(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))},AgMenuItemComponent2.prototype.isSubMenuOpen=function(){return this.subMenuIsOpen},AgMenuItemComponent2.prototype.isSubMenuOpening=function(){return this.subMenuIsOpening},AgMenuItemComponent2.prototype.activate=function(openSubMenu){var _this=this,_a,_b;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add("".concat(this.cssClassPrefix,"-active")),(_b=(_a=this.menuItemComp).setActive)===null||_b===void 0||_b.call(_a,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),openSubMenu&&this.params.subMenu&&window.setTimeout(function(){_this.isAlive()&&_this.isActive&&_this.openSubMenu()},300),this.onItemActivated())},AgMenuItemComponent2.prototype.deactivate=function(){var _a,_b;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove("".concat(this.cssClassPrefix,"-active")),(_b=(_a=this.menuItemComp).setActive)===null||_b===void 0||_b.call(_a,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()},AgMenuItemComponent2.prototype.getGui=function(){return this.menuItemComp.getGui()},AgMenuItemComponent2.prototype.getParentComponent=function(){return this.parentComponent},AgMenuItemComponent2.prototype.setParentComponent=function(component){this.parentComponent=component},AgMenuItemComponent2.prototype.getSubMenuGui=function(){return this.eSubMenuGui},AgMenuItemComponent2.prototype.onItemSelected=function(event){var _this=this,_a,_b;(_b=(_a=this.menuItemComp).select)===null||_b===void 0||_b.call(_a),this.params.action?this.getFrameworkOverrides().wrapOutgoing(function(){return _this.params.action(_this.gridOptionsService.addGridCommonParams(__assign$8({},_this.contextParams)))}):this.openSubMenu(event&&event.type==="keydown"),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(event)},AgMenuItemComponent2.prototype.closeMenu=function(event){var e={type:AgMenuItemComponent2.EVENT_CLOSE_MENU,event};this.dispatchEvent(e)},AgMenuItemComponent2.prototype.onItemActivated=function(){var event={type:AgMenuItemComponent2.EVENT_MENU_ITEM_ACTIVATED,menuItem:this};this.dispatchEvent(event)},AgMenuItemComponent2.prototype.cancelActivate=function(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)},AgMenuItemComponent2.prototype.cancelDeactivate=function(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)},AgMenuItemComponent2.prototype.onMouseEnter=function(){var _this=this;this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(function(){return _this.activate(!0)},AgMenuItemComponent2.ACTIVATION_DELAY):this.activate(!0)},AgMenuItemComponent2.prototype.onMouseLeave=function(){var _this=this;this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(function(){return _this.deactivate()},AgMenuItemComponent2.ACTIVATION_DELAY):this.deactivate()},AgMenuItemComponent2.prototype.configureDefaults=function(params){var _this=this,_a,_b,_c;if(this.tooltip=this.params.tooltip,!this.menuItemComp){setTimeout(function(){return _this.configureDefaults(params)});return}var eGui=this.menuItemComp.getGui(),rootElement=(_b=(_a=this.menuItemComp).getRootElement)===null||_b===void 0?void 0:_b.call(_a);rootElement&&(params!=null&&params.suppressRootStyles||eGui.classList.add("ag-menu-option-custom"),eGui=rootElement),this.eGui=eGui,this.suppressRootStyles=!!(params!=null&&params.suppressRootStyles),this.suppressRootStyles||(eGui.classList.add(this.cssClassPrefix),(_c=this.params.cssClasses)===null||_c===void 0||_c.forEach(function(it){return eGui.classList.add(it)}),this.params.disabled&&eGui.classList.add("".concat(this.cssClassPrefix,"-disabled"))),params!=null&&params.suppressTooltip||this.setTooltip(),this.suppressAria=!!(params!=null&&params.suppressAria),this.suppressAria||(setAriaRole(eGui,"treeitem"),setAriaLevel(eGui,this.level+1),this.params.disabled&&setAriaDisabled(eGui,!0)),params!=null&&params.suppressTabIndex||eGui.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(eGui,params),this.suppressFocus=!!(params!=null&&params.suppressFocus)},AgMenuItemComponent2.prototype.updateTooltip=function(tooltip){this.tooltip=tooltip,!this.tooltipFeature&&this.menuItemComp&&this.setTooltip()},AgMenuItemComponent2.prototype.setTooltip=function(){var _this=this;this.tooltip&&(this.tooltipFeature=this.createManagedBean(new TooltipFeature({getGui:function(){return _this.getGui()},getTooltipValue:function(){return _this.tooltip},getLocation:function(){return"menu"}},this.beans)),this.tooltipFeature.setComp(this.getGui()))},AgMenuItemComponent2.EVENT_CLOSE_MENU="closeMenu",AgMenuItemComponent2.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",AgMenuItemComponent2.ACTIVATION_DELAY=80,__decorate$12([Autowired("popupService")],AgMenuItemComponent2.prototype,"popupService",void 0),__decorate$12([Autowired("userComponentFactory")],AgMenuItemComponent2.prototype,"userComponentFactory",void 0),__decorate$12([Autowired("beans")],AgMenuItemComponent2.prototype,"beans",void 0),AgMenuItemComponent2}(BeanStub),__extends$10=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$11=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$11"),AgPanel=function(_super){__extends$10(AgPanel2,_super);function AgPanel2(config){var _this=_super.call(this,AgPanel2.getTemplate(config))||this;return _this.config=config,_this.closable=!0,_this}return __name(AgPanel2,"AgPanel"),AgPanel2.getTemplate=function(config){var cssIdentifier=config.cssIdentifier||"default";return'<div class="ag-panel ag-'.concat(cssIdentifier,`-panel" tabindex="-1">
            <div ref="eTitleBar" class="ag-panel-title-bar ag-`).concat(cssIdentifier,`-panel-title-bar ag-unselectable">
                <span ref="eTitle" class="ag-panel-title-bar-title ag-`).concat(cssIdentifier,`-panel-title-bar-title"></span>
                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-`).concat(cssIdentifier,`-panel-title-bar-buttons"></div>
            </div>
            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-`).concat(cssIdentifier,`-panel-content-wrapper"></div>
        </div>`)},AgPanel2.prototype.postConstruct=function(){var _this=this,_a=this.config,component=_a.component,closable=_a.closable,hideTitleBar=_a.hideTitleBar,title=_a.title,_b=_a.minWidth,minWidth=_b===void 0?250:_b,width=_a.width,_c=_a.minHeight,minHeight=_c===void 0?250:_c,height=_a.height,centered=_a.centered,popup=_a.popup,x=_a.x,y=_a.y;this.positionableFeature=new PositionableFeature(this.getGui(),{minWidth,width,minHeight,height,centered,x,y,popup,calculateTopBuffer:function(){return _this.positionableFeature.getHeight()-_this.getBodyHeight()}}),this.createManagedBean(this.positionableFeature);var eGui=this.getGui();component&&this.setBodyComponent(component),hideTitleBar?setDisplayed(this.eTitleBar,!1):(title&&this.setTitle(title),this.setClosable(closable??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",function(e){var eDocument=_this.gridOptionsService.getDocument();if(eGui.contains(e.relatedTarget)||eGui.contains(eDocument.activeElement)||_this.eTitleBarButtons.contains(e.target)){e.preventDefault();return}var focusEl=_this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");focusEl&&focusEl.focus()}),!(popup&&this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")},AgPanel2.prototype.renderComponent=function(){var _this=this,eGui=this.getGui();eGui.focus(),this.close=function(){eGui.parentElement.removeChild(eGui),_this.destroy()}},AgPanel2.prototype.getHeight=function(){return this.positionableFeature.getHeight()},AgPanel2.prototype.setHeight=function(height){this.positionableFeature.setHeight(height)},AgPanel2.prototype.getWidth=function(){return this.positionableFeature.getWidth()},AgPanel2.prototype.setWidth=function(width){this.positionableFeature.setWidth(width)},AgPanel2.prototype.setClosable=function(closable){if(closable!==this.closable&&(this.closable=closable),closable){var closeButtonComp=this.closeButtonComp=new Component(AgPanel2.CLOSE_BTN_TEMPLATE);this.getContext().createBean(closeButtonComp);var eGui=closeButtonComp.getGui(),child=createIconNoSpan("close",this.gridOptionsService);child.classList.add("ag-panel-title-bar-button-icon"),eGui.appendChild(child),this.addTitleBarButton(closeButtonComp),closeButtonComp.addManagedListener(eGui,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){var eGui=this.closeButtonComp.getGui();eGui.parentElement.removeChild(eGui),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}},AgPanel2.prototype.setBodyComponent=function(bodyComponent){bodyComponent.setParentComponent(this),this.eContentWrapper.appendChild(bodyComponent.getGui())},AgPanel2.prototype.addTitleBarButton=function(button,position){var eTitleBarButtons=this.eTitleBarButtons,buttons=eTitleBarButtons.children,len=buttons.length;position==null&&(position=len),position=Math.max(0,Math.min(position,len)),button.addCssClass("ag-panel-title-bar-button");var eGui=button.getGui();position===0?eTitleBarButtons.insertAdjacentElement("afterbegin",eGui):position===len?eTitleBarButtons.insertAdjacentElement("beforeend",eGui):buttons[position-1].insertAdjacentElement("afterend",eGui),button.setParentComponent(this)},AgPanel2.prototype.getBodyHeight=function(){return getInnerHeight(this.eContentWrapper)},AgPanel2.prototype.getBodyWidth=function(){return getInnerWidth(this.eContentWrapper)},AgPanel2.prototype.setTitle=function(title){this.eTitle.innerText=title},AgPanel2.prototype.onBtClose=function(){this.close()},AgPanel2.prototype.destroy=function(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));var eGui=this.getGui();eGui&&isVisible(eGui)&&this.close(),_super.prototype.destroy.call(this)},AgPanel2.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',__decorate$11([RefSelector("eContentWrapper")],AgPanel2.prototype,"eContentWrapper",void 0),__decorate$11([RefSelector("eTitleBar")],AgPanel2.prototype,"eTitleBar",void 0),__decorate$11([RefSelector("eTitleBarButtons")],AgPanel2.prototype,"eTitleBarButtons",void 0),__decorate$11([RefSelector("eTitle")],AgPanel2.prototype,"eTitle",void 0),__decorate$11([PostConstruct],AgPanel2.prototype,"postConstruct",null),AgPanel2}(Component),__extends$$=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$7=__name(function(){return __assign$7=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$7.apply(this,arguments)},"__assign$7"),__decorate$10=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$10"),AgDialog=function(_super){__extends$$(AgDialog2,_super);function AgDialog2(config){var _this=_super.call(this,__assign$7(__assign$7({},config),{popup:!0}))||this;return _this.isMaximizable=!1,_this.isMaximized=!1,_this.maximizeListeners=[],_this.resizeListenerDestroy=null,_this.lastPosition={x:0,y:0,width:0,height:0},_this}return __name(AgDialog2,"AgDialog"),AgDialog2.prototype.postConstruct=function(){var _this=this,eGui=this.getGui(),_a=this.config,movable=_a.movable,resizable=_a.resizable,maximizable=_a.maximizable;this.addCssClass("ag-dialog"),_super.prototype.postConstruct.call(this),this.addManagedListener(eGui,"focusin",function(e){eGui.contains(e.relatedTarget)||_this.popupService.bringPopupToFront(eGui)}),movable&&this.setMovable(movable),maximizable&&this.setMaximizable(maximizable),resizable&&this.setResizable(resizable)},AgDialog2.prototype.renderComponent=function(){var eGui=this.getGui(),_a=this.config,alwaysOnTop=_a.alwaysOnTop,modal=_a.modal,title=_a.title,afterGuiAttached=_a.afterGuiAttached,translate=this.localeService.getLocaleTextFunc(),addPopupRes=this.popupService.addPopup({modal,eChild:eGui,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop,ariaLabel:title||translate("ariaLabelDialog","Dialog"),afterGuiAttached});addPopupRes&&(this.close=addPopupRes.hideFunc)},AgDialog2.prototype.onClosed=function(event){var _a,_b;this.destroy(),(_b=(_a=this.config).closedCallback)===null||_b===void 0||_b.call(_a,event)},AgDialog2.prototype.toggleMaximize=function(){var position=this.positionableFeature.getPosition();if(this.isMaximized){var _a=this.lastPosition,x=_a.x,y=_a.y,width=_a.width,height=_a.height;this.setWidth(width),this.setHeight(height),this.positionableFeature.offsetElement(x,y)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=position.x,this.lastPosition.y=position.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()},AgDialog2.prototype.refreshMaximizeIcon=function(){setDisplayed(this.maximizeIcon,!this.isMaximized),setDisplayed(this.minimizeIcon,this.isMaximized)},AgDialog2.prototype.clearMaximizebleListeners=function(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(function(destroyListener){return destroyListener()}),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)},AgDialog2.prototype.destroy=function(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),_super.prototype.destroy.call(this)},AgDialog2.prototype.setResizable=function(resizable){this.positionableFeature.setResizable(resizable)},AgDialog2.prototype.setMovable=function(movable){this.positionableFeature.setMovable(movable,this.eTitleBar)},AgDialog2.prototype.setMaximizable=function(maximizable){var _this=this;if(!maximizable){this.clearMaximizebleListeners(),this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0);return}var eTitleBar=this.eTitleBar;if(!(!eTitleBar||maximizable===this.isMaximizable)){var maximizeButtonComp=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),maximizeButtonComp.addManagedListener(maximizeButtonComp.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(maximizeButtonComp,0),this.maximizeListeners.push(this.addManagedListener(eTitleBar,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",function(){_this.isMaximized=!1,_this.refreshMaximizeIcon()})}},AgDialog2.prototype.buildMaximizeAndMinimizeElements=function(){var maximizeButtonComp=this.maximizeButtonComp=this.createBean(new Component('<div class="ag-dialog-button"></span>')),eGui=maximizeButtonComp.getGui();return this.maximizeIcon=createIconNoSpan("maximize",this.gridOptionsService),eGui.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=createIconNoSpan("minimize",this.gridOptionsService),eGui.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),maximizeButtonComp},__decorate$10([Autowired("popupService")],AgDialog2.prototype,"popupService",void 0),AgDialog2}(AgPanel),__extends$_=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$6=__name(function(){return __assign$6=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$6.apply(this,arguments)},"__assign$6"),__decorate$$=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$$"),__read$g=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$g"),__spreadArray$e=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$e"),__values$2=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$2"),DIRECTION;(function(DIRECTION2){DIRECTION2[DIRECTION2.vertical=0]="vertical",DIRECTION2[DIRECTION2.horizontal=1]="horizontal"})(DIRECTION||(DIRECTION={}));var instanceIdSeq=0,PopupService=function(_super){__extends$_(PopupService2,_super);function PopupService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.popupList=[],_this}__name(PopupService2,"PopupService"),PopupService_1=PopupService2,PopupService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.gridCtrl=p.gridCtrl}),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))},PopupService2.prototype.getPopupParent=function(){var ePopupParent=this.gridOptionsService.get("popupParent");return ePopupParent||this.gridCtrl.getGui()},PopupService2.prototype.positionPopupForMenu=function(params){var eventSource=params.eventSource,ePopup=params.ePopup,popupIdx=this.getPopupIndex(ePopup);if(popupIdx!==-1){var popup=this.popupList[popupIdx];popup.alignedToElement=eventSource}var sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),y=this.keepXYWithinBounds(ePopup,sourceRect.top-parentRect.top,DIRECTION.vertical),minWidth=ePopup.clientWidth>0?ePopup.clientWidth:200;ePopup.style.minWidth="".concat(minWidth,"px");var widthOfParent=parentRect.right-parentRect.left,maxX=widthOfParent-minWidth,x;this.gridOptionsService.get("enableRtl")?(x=xLeftPosition(),x<0&&(x=xRightPosition(),this.setAlignedStyles(ePopup,"left")),x>maxX&&(x=0,this.setAlignedStyles(ePopup,"right"))):(x=xRightPosition(),x>maxX&&(x=xLeftPosition(),this.setAlignedStyles(ePopup,"right")),x<0&&(x=0,this.setAlignedStyles(ePopup,"left"))),ePopup.style.left="".concat(x,"px"),ePopup.style.top="".concat(y,"px");function xRightPosition(){return sourceRect.right-parentRect.left-2}__name(xRightPosition,"xRightPosition");function xLeftPosition(){return sourceRect.left-parentRect.left-minWidth}__name(xLeftPosition,"xLeftPosition")},PopupService2.prototype.positionPopupUnderMouseEvent=function(params){var _this=this,ePopup=params.ePopup,nudgeX=params.nudgeX,nudgeY=params.nudgeY,skipObserver=params.skipObserver;this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds:!0,skipObserver,updatePosition:function(){return _this.calculatePointerAlign(params.mouseEvent)},postProcessCallback:function(){return _this.callPostProcessPopup(params.type,params.ePopup,null,params.mouseEvent,params.column,params.rowNode)}})},PopupService2.prototype.calculatePointerAlign=function(e){var parentRect=this.getParentRect();return{x:e.clientX-parentRect.left,y:e.clientY-parentRect.top}},PopupService2.prototype.positionPopupByComponent=function(params){var _this=this,ePopup=params.ePopup,nudgeX=params.nudgeX,nudgeY=params.nudgeY,keepWithinBounds=params.keepWithinBounds,eventSource=params.eventSource,_a=params.alignSide,alignSide=_a===void 0?"left":_a,_b=params.position,position=_b===void 0?"over":_b,column=params.column,rowNode=params.rowNode,type=params.type,sourceRect=eventSource.getBoundingClientRect(),parentRect=this.getParentRect(),popupIdx=this.getPopupIndex(ePopup);if(popupIdx!==-1){var popup=this.popupList[popupIdx];popup.alignedToElement=eventSource}var updatePosition=__name(function(){var x=sourceRect.left-parentRect.left;alignSide==="right"&&(x-=ePopup.offsetWidth-sourceRect.width);var y;if(position==="over")y=sourceRect.top-parentRect.top,_this.setAlignedStyles(ePopup,"over");else{_this.setAlignedStyles(ePopup,"under");var alignSide_1=_this.shouldRenderUnderOrAbove(ePopup,sourceRect,parentRect,params.nudgeY||0);alignSide_1==="under"?y=sourceRect.top-parentRect.top+sourceRect.height:y=sourceRect.top-ePopup.offsetHeight-(nudgeY||0)*2-parentRect.top}return{x,y}},"updatePosition");this.positionPopup({ePopup,nudgeX,nudgeY,keepWithinBounds,updatePosition,postProcessCallback:function(){return _this.callPostProcessPopup(type,ePopup,eventSource,null,column,rowNode)}})},PopupService2.prototype.shouldRenderUnderOrAbove=function(ePopup,targetCompRect,parentRect,nudgeY){var spaceAvailableUnder=parentRect.bottom-targetCompRect.bottom,spaceAvailableAbove=targetCompRect.top-parentRect.top,spaceRequired=ePopup.offsetHeight+nudgeY;return spaceAvailableUnder>spaceRequired?"under":spaceAvailableAbove>spaceRequired||spaceAvailableAbove>spaceAvailableUnder?"above":"under"},PopupService2.prototype.setAlignedStyles=function(ePopup,positioned){var popupIdx=this.getPopupIndex(ePopup);if(popupIdx!==-1){var popup=this.popupList[popupIdx],alignedToElement=popup.alignedToElement;if(alignedToElement){var positions=["right","left","over","above","under"];positions.forEach(function(position){alignedToElement.classList.remove("ag-has-popup-positioned-".concat(position)),ePopup.classList.remove("ag-popup-positioned-".concat(position))}),positioned&&(alignedToElement.classList.add("ag-has-popup-positioned-".concat(positioned)),ePopup.classList.add("ag-popup-positioned-".concat(positioned)))}}},PopupService2.prototype.callPostProcessPopup=function(type,ePopup,eventSource,mouseEvent,column,rowNode){var callback=this.gridOptionsService.getCallback("postProcessPopup");if(callback){var params={column,rowNode,ePopup,type,eventSource,mouseEvent};callback(params)}},PopupService2.prototype.positionPopup=function(params){var _this=this,ePopup=params.ePopup,keepWithinBounds=params.keepWithinBounds,nudgeX=params.nudgeX,nudgeY=params.nudgeY,skipObserver=params.skipObserver,updatePosition=params.updatePosition,lastSize={width:0,height:0},updatePopupPosition=__name(function(fromResizeObserver){fromResizeObserver===void 0&&(fromResizeObserver=!1);var _a=updatePosition(),x=_a.x,y=_a.y;fromResizeObserver&&ePopup.clientWidth===lastSize.width&&ePopup.clientHeight===lastSize.height||(lastSize.width=ePopup.clientWidth,lastSize.height=ePopup.clientHeight,nudgeX&&(x+=nudgeX),nudgeY&&(y+=nudgeY),keepWithinBounds&&(x=_this.keepXYWithinBounds(ePopup,x,DIRECTION.horizontal),y=_this.keepXYWithinBounds(ePopup,y,DIRECTION.vertical)),ePopup.style.left="".concat(x,"px"),ePopup.style.top="".concat(y,"px"),params.postProcessCallback&&params.postProcessCallback())},"updatePopupPosition");if(updatePopupPosition(),!skipObserver){var resizeObserverDestroyFunc_1=this.resizeObserverService.observeResize(ePopup,function(){return updatePopupPosition(!0)});setTimeout(function(){return resizeObserverDestroyFunc_1()},PopupService_1.WAIT_FOR_POPUP_CONTENT_RESIZE)}},PopupService2.prototype.getActivePopups=function(){return this.popupList.map(function(popup){return popup.element})},PopupService2.prototype.getPopupList=function(){return this.popupList},PopupService2.prototype.getParentRect=function(){var eDocument=this.gridOptionsService.getDocument(),popupParent=this.getPopupParent();return popupParent===eDocument.body?popupParent=eDocument.documentElement:getComputedStyle(popupParent).position==="static"&&(popupParent=popupParent.offsetParent),getElementRectWithOffset(popupParent)},PopupService2.prototype.keepXYWithinBounds=function(ePopup,position,direction){var isVertical=direction===DIRECTION.vertical,sizeProperty=isVertical?"clientHeight":"clientWidth",anchorProperty=isVertical?"top":"left",offsetProperty=isVertical?"offsetHeight":"offsetWidth",scrollPositionProperty=isVertical?"scrollTop":"scrollLeft",eDocument=this.gridOptionsService.getDocument(),docElement=eDocument.documentElement,popupParent=this.getPopupParent(),parentRect=popupParent.getBoundingClientRect(),documentRect=eDocument.documentElement.getBoundingClientRect(),isBody=popupParent===eDocument.body,offsetSize=ePopup[offsetProperty],getSize=isVertical?getAbsoluteHeight:getAbsoluteWidth,sizeOfParent=isBody?getSize(docElement)+docElement[scrollPositionProperty]:popupParent[sizeProperty];isBody&&(sizeOfParent-=Math.abs(documentRect[anchorProperty]-parentRect[anchorProperty]));var max=sizeOfParent-offsetSize;return Math.min(Math.max(position,0),Math.abs(max))},PopupService2.prototype.addPopup=function(params){var eDocument=this.gridOptionsService.getDocument(),eChild=params.eChild,ariaLabel=params.ariaLabel,alwaysOnTop=params.alwaysOnTop,positionCallback=params.positionCallback,anchorToElement=params.anchorToElement;if(!eDocument)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:function(){}};var pos=this.getPopupIndex(eChild);if(pos!==-1){var popup=this.popupList[pos];return{hideFunc:popup.hideFunc}}this.initialisePopupPosition(eChild);var wrapperEl=this.createPopupWrapper(eChild,ariaLabel,!!alwaysOnTop),removeListeners=this.addEventListenersToPopup(__assign$6(__assign$6({},params),{wrapperEl}));return positionCallback&&positionCallback(),this.addPopupToPopupList(eChild,wrapperEl,removeListeners,anchorToElement),{hideFunc:removeListeners}},PopupService2.prototype.initialisePopupPosition=function(element){var ePopupParent=this.getPopupParent(),ePopupParentRect=ePopupParent.getBoundingClientRect();exists(element.style.top)||(element.style.top="".concat(ePopupParentRect.top*-1,"px")),exists(element.style.left)||(element.style.left="".concat(ePopupParentRect.left*-1,"px"))},PopupService2.prototype.createPopupWrapper=function(element,ariaLabel,alwaysOnTop){var _a,ePopupParent=this.getPopupParent(),eWrapper=document.createElement("div"),allThemes=this.environment.getTheme().allThemes;return allThemes.length&&(_a=eWrapper.classList).add.apply(_a,__spreadArray$e([],__read$g(allThemes),!1)),eWrapper.classList.add("ag-popup"),element.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),element.hasAttribute("role")||setAriaRole(element,"dialog"),setAriaLabel(element,ariaLabel),eWrapper.appendChild(element),ePopupParent.appendChild(eWrapper),alwaysOnTop?this.setAlwaysOnTop(element,!0):this.bringPopupToFront(element),eWrapper},PopupService2.prototype.handleThemeChange=function(){var e_1,_a,e_2,_b,_c,allThemes=this.environment.getTheme().allThemes;try{for(var _d=__values$2(this.popupList),_e=_d.next();!_e.done;_e=_d.next()){var popup=_e.value;try{for(var _f=(e_2=void 0,__values$2(Array.from(popup.wrapper.classList))),_g=_f.next();!_g.done;_g=_f.next()){var className=_g.value;className.startsWith("ag-theme-")&&popup.wrapper.classList.remove(className)}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_g&&!_g.done&&(_b=_f.return)&&_b.call(_f)}finally{if(e_2)throw e_2.error}}allThemes.length&&(_c=popup.wrapper.classList).add.apply(_c,__spreadArray$e([],__read$g(allThemes),!1))}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_e&&!_e.done&&(_a=_d.return)&&_a.call(_d)}finally{if(e_1)throw e_1.error}}},PopupService2.prototype.addEventListenersToPopup=function(params){var _this=this,eDocument=this.gridOptionsService.getDocument(),ePopupParent=this.getPopupParent(),wrapperEl=params.wrapperEl,popupEl=params.eChild;params.click;var closedCallback=params.closedCallback,afterGuiAttached=params.afterGuiAttached,closeOnEsc=params.closeOnEsc,modal=params.modal,popupHidden=!1,hidePopupOnKeyboardEvent=__name(function(event){if(wrapperEl.contains(eDocument.activeElement)){var key=event.key;key===KeyCode.ESCAPE&&!isStopPropagationForAgGrid(event)&&removeListeners({keyboardEvent:event})}},"hidePopupOnKeyboardEvent"),hidePopupOnMouseEvent=__name(function(event){return removeListeners({mouseEvent:event})},"hidePopupOnMouseEvent"),hidePopupOnTouchEvent=__name(function(event){return removeListeners({touchEvent:event})},"hidePopupOnTouchEvent"),removeListeners=__name(function(popupParams){popupParams===void 0&&(popupParams={});var mouseEvent=popupParams.mouseEvent,touchEvent=popupParams.touchEvent,keyboardEvent=popupParams.keyboardEvent;_this.isEventFromCurrentPopup({mouseEvent,touchEvent},popupEl)||popupHidden||(popupHidden=!0,ePopupParent.removeChild(wrapperEl),eDocument.removeEventListener("keydown",hidePopupOnKeyboardEvent),eDocument.removeEventListener("mousedown",hidePopupOnMouseEvent),eDocument.removeEventListener("touchstart",hidePopupOnTouchEvent),eDocument.removeEventListener("contextmenu",hidePopupOnMouseEvent),_this.eventService.removeEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),closedCallback&&closedCallback(mouseEvent||touchEvent||keyboardEvent),_this.removePopupFromPopupList(popupEl))},"removeListeners");return afterGuiAttached&&afterGuiAttached({hidePopup:removeListeners}),window.setTimeout(function(){closeOnEsc&&eDocument.addEventListener("keydown",hidePopupOnKeyboardEvent),modal&&(eDocument.addEventListener("mousedown",hidePopupOnMouseEvent),_this.eventService.addEventListener(Events.EVENT_DRAG_STARTED,hidePopupOnMouseEvent),eDocument.addEventListener("touchstart",hidePopupOnTouchEvent),eDocument.addEventListener("contextmenu",hidePopupOnMouseEvent))},0),removeListeners},PopupService2.prototype.addPopupToPopupList=function(element,wrapperEl,removeListeners,anchorToElement){this.popupList.push({element,wrapper:wrapperEl,hideFunc:removeListeners,instanceId:instanceIdSeq++,isAnchored:!!anchorToElement}),anchorToElement&&this.setPopupPositionRelatedToElement(element,anchorToElement)},PopupService2.prototype.getPopupIndex=function(el){return this.popupList.findIndex(function(p){return p.element===el})},PopupService2.prototype.setPopupPositionRelatedToElement=function(popupEl,relativeElement){var popupIndex=this.getPopupIndex(popupEl);if(popupIndex!==-1){var popup=this.popupList[popupIndex];if(popup.stopAnchoringPromise&&popup.stopAnchoringPromise.then(function(destroyFunc){return destroyFunc&&destroyFunc()}),popup.stopAnchoringPromise=void 0,popup.isAnchored=!1,!!relativeElement){var destroyPositionTracker=this.keepPopupPositionedRelativeTo({element:relativeElement,ePopup:popupEl,hidePopup:popup.hideFunc});return popup.stopAnchoringPromise=destroyPositionTracker,popup.isAnchored=!0,destroyPositionTracker}}},PopupService2.prototype.removePopupFromPopupList=function(element){this.setAlignedStyles(element,null),this.setPopupPositionRelatedToElement(element,null),this.popupList=this.popupList.filter(function(p){return p.element!==element})},PopupService2.prototype.keepPopupPositionedRelativeTo=function(params){var _this=this,eParent=this.getPopupParent(),parentRect=eParent.getBoundingClientRect(),element=params.element,ePopup=params.ePopup,sourceRect=element.getBoundingClientRect(),initialDiffTop=parentRect.top-sourceRect.top,initialDiffLeft=parentRect.left-sourceRect.left,lastDiffTop=initialDiffTop,lastDiffLeft=initialDiffLeft,topPx=ePopup.style.top,top=parseInt(topPx.substring(0,topPx.length-1),10),leftPx=ePopup.style.left,left=parseInt(leftPx.substring(0,leftPx.length-1),10);return new AgPromise(function(resolve){_this.getFrameworkOverrides().setInterval(function(){var pRect=eParent.getBoundingClientRect(),sRect=element.getBoundingClientRect(),elementNotInDom=sRect.top==0&&sRect.left==0&&sRect.height==0&&sRect.width==0;if(elementNotInDom){params.hidePopup();return}var currentDiffTop=pRect.top-sRect.top;if(currentDiffTop!=lastDiffTop){var newTop=_this.keepXYWithinBounds(ePopup,top+initialDiffTop-currentDiffTop,DIRECTION.vertical);ePopup.style.top="".concat(newTop,"px")}lastDiffTop=currentDiffTop;var currentDiffLeft=pRect.left-sRect.left;if(currentDiffLeft!=lastDiffLeft){var newLeft=_this.keepXYWithinBounds(ePopup,left+initialDiffLeft-currentDiffLeft,DIRECTION.horizontal);ePopup.style.left="".concat(newLeft,"px")}lastDiffLeft=currentDiffLeft},200).then(function(intervalId){var result=__name(function(){intervalId!=null&&window.clearInterval(intervalId)},"result");resolve(result)})})},PopupService2.prototype.hasAnchoredPopup=function(){return this.popupList.some(function(popup){return popup.isAnchored})},PopupService2.prototype.isEventFromCurrentPopup=function(params,target){var mouseEvent=params.mouseEvent,touchEvent=params.touchEvent,event=mouseEvent||touchEvent;if(!event)return!1;var indexOfThisChild=this.getPopupIndex(target);if(indexOfThisChild===-1)return!1;for(var i=indexOfThisChild;i<this.popupList.length;i++){var popup=this.popupList[i];if(isElementInEventPath(popup.element,event))return!0}return this.isElementWithinCustomPopup(event.target)},PopupService2.prototype.isElementWithinCustomPopup=function(el){for(var eDocument=this.gridOptionsService.getDocument();el&&el!==eDocument.body;){if(el.classList.contains("ag-custom-component-popup")||el.parentElement===null)return!0;el=el.parentElement}return!1},PopupService2.prototype.getWrapper=function(ePopup){for(;!ePopup.classList.contains("ag-popup")&&ePopup.parentElement;)ePopup=ePopup.parentElement;return ePopup.classList.contains("ag-popup")?ePopup:null},PopupService2.prototype.setAlwaysOnTop=function(ePopup,alwaysOnTop){var eWrapper=this.getWrapper(ePopup);eWrapper&&(eWrapper.classList.toggle("ag-always-on-top",!!alwaysOnTop),alwaysOnTop&&this.bringPopupToFront(eWrapper))},PopupService2.prototype.bringPopupToFront=function(ePopup){var parent=this.getPopupParent(),popupList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup")),popupLen=popupList.length,alwaysOnTopList=Array.prototype.slice.call(parent.querySelectorAll(".ag-popup.ag-always-on-top")),onTopLength=alwaysOnTopList.length,eWrapper=this.getWrapper(ePopup);if(!(!eWrapper||popupLen<=1||!parent.contains(ePopup))){var pos=popupList.indexOf(eWrapper),innerEls=eWrapper.querySelectorAll("div"),innerElsScrollMap=[];if(innerEls.forEach(function(el){el.scrollTop!==0&&innerElsScrollMap.push([el,el.scrollTop])}),onTopLength){var isPopupAlwaysOnTop=eWrapper.classList.contains("ag-always-on-top");isPopupAlwaysOnTop?pos!==popupLen-1&&last(alwaysOnTopList).insertAdjacentElement("afterend",eWrapper):pos!==popupLen-onTopLength-1&&alwaysOnTopList[0].insertAdjacentElement("beforebegin",eWrapper)}else pos!==popupLen-1&&last(popupList).insertAdjacentElement("afterend",eWrapper);for(;innerElsScrollMap.length;){var currentEl=innerElsScrollMap.pop();currentEl[0].scrollTop=currentEl[1]}var params={type:"popupToFront",eWrapper};this.eventService.dispatchEvent(params)}};var PopupService_1;return PopupService2.WAIT_FOR_POPUP_CONTENT_RESIZE=200,__decorate$$([Autowired("focusService")],PopupService2.prototype,"focusService",void 0),__decorate$$([Autowired("ctrlsService")],PopupService2.prototype,"ctrlsService",void 0),__decorate$$([Autowired("resizeObserverService")],PopupService2.prototype,"resizeObserverService",void 0),__decorate$$([PostConstruct],PopupService2.prototype,"postConstruct",null),PopupService2=PopupService_1=__decorate$$([Bean("popupService")],PopupService2),PopupService2}(BeanStub),__extends$Z=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),AgAutocompleteRow=function(_super){__extends$Z(AgAutocompleteRow2,_super);function AgAutocompleteRow2(){var _this=_super.call(this,`
        <div class="ag-autocomplete-row" role="presentation">
            <div class="ag-autocomplete-row-label"></div>
        </div>`)||this;return _this.hasHighlighting=!1,_this}return __name(AgAutocompleteRow2,"AgAutocompleteRow"),AgAutocompleteRow2.prototype.setState=function(value,selected){this.value=value,this.render(),this.updateSelected(selected)},AgAutocompleteRow2.prototype.updateSelected=function(selected){this.addOrRemoveCssClass("ag-autocomplete-row-selected",selected)},AgAutocompleteRow2.prototype.setSearchString=function(searchString){var _a,keepHighlighting=!1;if(exists(searchString)){var index=(_a=this.value)===null||_a===void 0?void 0:_a.toLocaleLowerCase().indexOf(searchString.toLocaleLowerCase());if(index>=0){keepHighlighting=!0,this.hasHighlighting=!0;var highlightEndIndex=index+searchString.length,startPart=escapeString(this.value.slice(0,index)),highlightedPart=escapeString(this.value.slice(index,highlightEndIndex)),endPart=escapeString(this.value.slice(highlightEndIndex));this.getGui().lastElementChild.innerHTML="".concat(startPart,"<b>").concat(highlightedPart,"</b>").concat(endPart)}}!keepHighlighting&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())},AgAutocompleteRow2.prototype.render=function(){var _a;this.getGui().lastElementChild.innerHTML=(_a=escapeString(this.value))!==null&&_a!==void 0?_a:"&nbsp;"},AgAutocompleteRow2}(Component),__extends$Y=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$_=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$_"),AgAutocompleteList=function(_super){__extends$Y(AgAutocompleteList2,_super);function AgAutocompleteList2(params){var _this=_super.call(this,AgAutocompleteList2.TEMPLATE)||this;return _this.params=params,_this.searchString="",_this}return __name(AgAutocompleteList2,"AgAutocompleteList"),AgAutocompleteList2.prototype.destroy=function(){_super.prototype.destroy.call(this)},AgAutocompleteList2.prototype.init=function(){var _this=this;this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new VirtualList({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:function(){return _this.autocompleteEntries.length},getRow:function(index){return _this.autocompleteEntries[index]}});var virtualListGui=this.virtualList.getGui();this.addManagedListener(virtualListGui,"click",function(){return _this.params.onConfirmed()}),this.addManagedListener(virtualListGui,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(virtualListGui,"mousedown",function(e){return e.preventDefault()}),this.setSelectedValue(0)},AgAutocompleteList2.prototype.onNavigationKeyDown=function(event,key){event.preventDefault();var oldIndex=this.autocompleteEntries.indexOf(this.selectedValue),newIndex=key===KeyCode.UP?oldIndex-1:oldIndex+1;this.checkSetSelectedValue(newIndex)},AgAutocompleteList2.prototype.setSearch=function(searchString){this.searchString=searchString,exists(searchString)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()},AgAutocompleteList2.prototype.runContainsSearch=function(searchString,searchStrings){var topMatch,topMatchStartsWithSearchString=!1,lowerCaseSearchString=searchString.toLocaleLowerCase(),allMatches=searchStrings.filter(function(string){var lowerCaseString=string.toLocaleLowerCase(),index=lowerCaseString.indexOf(lowerCaseSearchString),startsWithSearchString=index===0,isMatch=index>=0;return isMatch&&(!topMatch||!topMatchStartsWithSearchString&&startsWithSearchString||topMatchStartsWithSearchString===startsWithSearchString&&string.length<topMatch.length)&&(topMatch=string,topMatchStartsWithSearchString=startsWithSearchString),isMatch});return!topMatch&&allMatches.length&&(topMatch=allMatches[0]),{topMatch,allMatches}},AgAutocompleteList2.prototype.runSearch=function(){var _a,_b,autocompleteEntries=this.params.autocompleteEntries,searchStrings=autocompleteEntries.map(function(v){var _a2;return(_a2=v.displayValue)!==null&&_a2!==void 0?_a2:v.key}),matchingStrings,topSuggestion;if(this.params.useFuzzySearch)matchingStrings=fuzzySuggestions(this.searchString,searchStrings,!0).values,topSuggestion=matchingStrings.length?matchingStrings[0]:void 0;else{var containsMatches=this.runContainsSearch(this.searchString,searchStrings);matchingStrings=containsMatches.allMatches,topSuggestion=containsMatches.topMatch}var filteredEntries=autocompleteEntries.filter(function(_a2){var key=_a2.key,displayValue=_a2.displayValue;return matchingStrings.includes(displayValue??key)});if(!filteredEntries.length&&this.selectedValue&&(!((_b=(_a=this.params)===null||_a===void 0?void 0:_a.forceLastSelection)===null||_b===void 0)&&_b.call(_a,this.selectedValue,this.searchString))&&(filteredEntries=[this.selectedValue]),this.autocompleteEntries=filteredEntries,this.virtualList.refresh(),!!topSuggestion){var topSuggestionIndex=matchingStrings.indexOf(topSuggestion);this.checkSetSelectedValue(topSuggestionIndex)}},AgAutocompleteList2.prototype.updateSearchInList=function(){var _this=this;this.virtualList.forEachRenderedRow(function(row){return row.setSearchString(_this.searchString)})},AgAutocompleteList2.prototype.checkSetSelectedValue=function(index){index>=0&&index<this.autocompleteEntries.length&&this.setSelectedValue(index)},AgAutocompleteList2.prototype.setSelectedValue=function(index){var value=this.autocompleteEntries[index];this.selectedValue!==value&&(this.selectedValue=value,this.virtualList.ensureIndexVisible(index),this.virtualList.forEachRenderedRow(function(cmp,idx){cmp.updateSelected(index===idx)}))},AgAutocompleteList2.prototype.createRowComponent=function(value){var _a,row=new AgAutocompleteRow;return this.getContext().createBean(row),row.setState((_a=value.displayValue)!==null&&_a!==void 0?_a:value.key,value===this.selectedValue),row},AgAutocompleteList2.prototype.onMouseMove=function(mouseEvent){var rect=this.virtualList.getGui().getBoundingClientRect(),scrollTop=this.virtualList.getScrollTop(),mouseY=mouseEvent.clientY-rect.top+scrollTop,row=Math.floor(mouseY/this.virtualList.getRowHeight());this.checkSetSelectedValue(row)},AgAutocompleteList2.prototype.afterGuiAttached=function(){this.virtualList.refresh()},AgAutocompleteList2.prototype.getSelectedValue=function(){var _a;return this.autocompleteEntries.length&&(_a=this.selectedValue)!==null&&_a!==void 0?_a:null},AgAutocompleteList2.TEMPLATE=`<div class="ag-autocomplete-list-popup">
            <div ref="eList" class="ag-autocomplete-list"></div>
        <div>`,__decorate$_([RefSelector("eList")],AgAutocompleteList2.prototype,"eList",void 0),__decorate$_([PostConstruct],AgAutocompleteList2.prototype,"init",null),AgAutocompleteList2}(PopupComponent),__extends$X=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Z=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$Z"),AgAutocomplete=function(_super){__extends$X(AgAutocomplete2,_super);function AgAutocomplete2(){var _this=_super.call(this,`
            <div class="ag-autocomplete" role="presentation">
                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>
            </div>`)||this;return _this.isListOpen=!1,_this.lastPosition=0,_this.valid=!0,_this}return __name(AgAutocomplete2,"AgAutocomplete"),AgAutocomplete2.prototype.postConstruct=function(){var _this=this;this.eAutocompleteInput.onValueChange(function(value){return _this.onValueChanged(value)}),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(function(){_this.destroyBean(_this.autocompleteList)}),this.addGuiEventListener("focusout",function(){return _this.onFocusOut()})},AgAutocomplete2.prototype.onValueChanged=function(value){var parsedValue=makeNull(value);this.updateValue(parsedValue),this.updateAutocompleteList(parsedValue)},AgAutocomplete2.prototype.updateValue=function(value){this.updateLastPosition(),this.dispatchEvent({type:AgAutocomplete2.EVENT_VALUE_CHANGED,value}),this.validate(value)},AgAutocomplete2.prototype.updateAutocompleteList=function(value){var _a,_b,_c,_d,autocompleteListParams=(_b=(_a=this.listGenerator)===null||_a===void 0?void 0:_a.call(this,value,this.lastPosition))!==null&&_b!==void 0?_b:{enabled:!1};if((!autocompleteListParams.type||autocompleteListParams.type!==((_c=this.autocompleteListParams)===null||_c===void 0?void 0:_c.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=autocompleteListParams,!((_d=this.autocompleteListParams)===null||_d===void 0)&&_d.enabled){this.isListOpen||this.openList();var searchString=this.autocompleteListParams.searchString;this.autocompleteList.setSearch(searchString??"")}else this.isListOpen&&this.closeList()},AgAutocomplete2.prototype.onKeyDown=function(event){var _this=this,key=event.key;switch(this.updateLastPosition(),key){case KeyCode.ENTER:this.onEnterKeyDown(event);break;case KeyCode.TAB:this.onTabKeyDown(event);break;case KeyCode.DOWN:case KeyCode.UP:this.onUpDownKeyDown(event,key);break;case KeyCode.LEFT:case KeyCode.RIGHT:case KeyCode.PAGE_HOME:case KeyCode.PAGE_END:setTimeout(function(){_this.updatePositionAndList()});break;case KeyCode.ESCAPE:this.onEscapeKeyDown(event);break;case KeyCode.SPACE:event.ctrlKey&&!this.isListOpen&&(event.preventDefault(),this.forceOpenList());break}},AgAutocomplete2.prototype.confirmSelection=function(){var _a,selectedValue=(_a=this.autocompleteList)===null||_a===void 0?void 0:_a.getSelectedValue();selectedValue&&(this.closeList(),this.dispatchEvent({type:AgAutocomplete2.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:selectedValue,autocompleteType:this.autocompleteListParams.type}))},AgAutocomplete2.prototype.onTabKeyDown=function(event){this.isListOpen&&(event.preventDefault(),event.stopPropagation(),this.confirmSelection())},AgAutocomplete2.prototype.onEnterKeyDown=function(event){event.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()},AgAutocomplete2.prototype.onUpDownKeyDown=function(event,key){var _a;event.preventDefault(),this.isListOpen?(_a=this.autocompleteList)===null||_a===void 0||_a.onNavigationKeyDown(event,key):this.forceOpenList()},AgAutocomplete2.prototype.onEscapeKeyDown=function(event){this.isListOpen&&(event.preventDefault(),event.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))},AgAutocomplete2.prototype.onFocusOut=function(){this.isListOpen&&this.closeList()},AgAutocomplete2.prototype.updatePositionAndList=function(){var _a;this.updateLastPosition(),this.updateAutocompleteList((_a=this.eAutocompleteInput.getValue())!==null&&_a!==void 0?_a:null)},AgAutocomplete2.prototype.setCaret=function(position,setFocus){var eDocument=this.gridOptionsService.getDocument();setFocus&&eDocument.activeElement===eDocument.body&&this.eAutocompleteInput.getFocusableElement().focus();var eInput=this.eAutocompleteInput.getInputElement();eInput.setSelectionRange(position,position),position===eInput.value.length&&(eInput.scrollLeft=eInput.scrollWidth)},AgAutocomplete2.prototype.forceOpenList=function(){this.onValueChanged(this.eAutocompleteInput.getValue())},AgAutocomplete2.prototype.updateLastPosition=function(){var _a;this.lastPosition=(_a=this.eAutocompleteInput.getInputElement().selectionStart)!==null&&_a!==void 0?_a:0},AgAutocomplete2.prototype.validate=function(value){var _a;this.validator&&(this.validationMessage=this.validator(value),this.eAutocompleteInput.getInputElement().setCustomValidity((_a=this.validationMessage)!==null&&_a!==void 0?_a:""),this.valid=!this.validationMessage,this.dispatchEvent({type:AgAutocomplete2.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))},AgAutocomplete2.prototype.openList=function(){var _this=this;this.isListOpen=!0,this.autocompleteList=this.createBean(new AgAutocompleteList({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:function(){return _this.confirmSelection()},forceLastSelection:this.forceLastSelection}));var ePopupGui=this.autocompleteList.getGui(),positionParams={ePopup:ePopupGui,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},addPopupRes=this.popupService.addPopup({eChild:ePopupGui,anchorToElement:this.getGui(),positionCallback:function(){return _this.popupService.positionPopupByComponent(positionParams)},ariaLabel:this.listAriaLabel});this.hidePopup=addPopupRes.hideFunc,this.autocompleteList.afterGuiAttached()},AgAutocomplete2.prototype.closeList=function(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null},AgAutocomplete2.prototype.onCompleted=function(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:AgAutocomplete2.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})},AgAutocomplete2.prototype.getValue=function(){return makeNull(this.eAutocompleteInput.getValue())},AgAutocomplete2.prototype.setInputPlaceholder=function(placeholder){return this.eAutocompleteInput.setInputPlaceholder(placeholder),this},AgAutocomplete2.prototype.setInputAriaLabel=function(label){return this.eAutocompleteInput.setInputAriaLabel(label),this},AgAutocomplete2.prototype.setListAriaLabel=function(label){return this.listAriaLabel=label,this},AgAutocomplete2.prototype.setListGenerator=function(listGenerator){return this.listGenerator=listGenerator,this},AgAutocomplete2.prototype.setValidator=function(validator){return this.validator=validator,this},AgAutocomplete2.prototype.isValid=function(){return this.valid},AgAutocomplete2.prototype.setValue=function(params){var value=params.value,position=params.position,silent=params.silent,updateListOnlyIfOpen=params.updateListOnlyIfOpen,restoreFocus=params.restoreFocus;this.eAutocompleteInput.setValue(value,!0),this.setCaret(position??this.lastPosition,restoreFocus),silent||this.updateValue(value),(!updateListOnlyIfOpen||this.isListOpen)&&this.updateAutocompleteList(value)},AgAutocomplete2.prototype.setForceLastSelection=function(forceLastSelection){return this.forceLastSelection=forceLastSelection,this},AgAutocomplete2.prototype.setInputDisabled=function(disabled){return this.eAutocompleteInput.setDisabled(disabled),this},AgAutocomplete2.EVENT_VALUE_CHANGED="eventValueChanged",AgAutocomplete2.EVENT_VALUE_CONFIRMED="eventValueConfirmed",AgAutocomplete2.EVENT_OPTION_SELECTED="eventOptionSelected",AgAutocomplete2.EVENT_VALID_CHANGED="eventValidChanged",__decorate$Z([Autowired("popupService")],AgAutocomplete2.prototype,"popupService",void 0),__decorate$Z([RefSelector("eAutocompleteInput")],AgAutocomplete2.prototype,"eAutocompleteInput",void 0),__decorate$Z([PostConstruct],AgAutocomplete2.prototype,"postConstruct",null),AgAutocomplete2}(Component),PASSIVE_EVENTS=["touchstart","touchend","touchmove","touchcancel"],VanillaFrameworkOverrides=function(){function VanillaFrameworkOverrides2(frameworkName){frameworkName===void 0&&(frameworkName="javascript"),this.frameworkName=frameworkName,this.renderingEngine="vanilla",this.wrapIncoming=function(callback){return callback()},this.wrapOutgoing=function(callback){return callback()}}return __name(VanillaFrameworkOverrides2,"VanillaFrameworkOverrides"),VanillaFrameworkOverrides2.prototype.setInterval=function(action,timeout){return new AgPromise(function(resolve){resolve(window.setInterval(action,timeout))})},VanillaFrameworkOverrides2.prototype.addEventListener=function(element,type,listener,useCapture){var isPassive=includes(PASSIVE_EVENTS,type);element.addEventListener(type,listener,{capture:!!useCapture,passive:isPassive})},Object.defineProperty(VanillaFrameworkOverrides2.prototype,"shouldWrapOutgoing",{get:function(){return!1},enumerable:!1,configurable:!0}),VanillaFrameworkOverrides2.prototype.frameworkComponent=function(name){return null},VanillaFrameworkOverrides2.prototype.isFrameworkComponent=function(comp){return!1},VanillaFrameworkOverrides2.prototype.getDocLink=function(path){var framework=this.frameworkName==="solid"?"react":this.frameworkName;return"https://www.ag-grid.com/".concat(framework,"-data-grid").concat(path?"/".concat(path):"")},VanillaFrameworkOverrides2}(),__extends$W=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Y=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$Y"),__read$f=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$f"),__spreadArray$d=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$d"),CellNavigationService=function(_super){__extends$W(CellNavigationService2,_super);function CellNavigationService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(CellNavigationService2,"CellNavigationService"),CellNavigationService2.prototype.getNextCellToFocus=function(key,focusedCell,ctrlPressed){return ctrlPressed===void 0&&(ctrlPressed=!1),ctrlPressed?this.getNextCellToFocusWithCtrlPressed(key,focusedCell):this.getNextCellToFocusWithoutCtrlPressed(key,focusedCell)},CellNavigationService2.prototype.getNextCellToFocusWithCtrlPressed=function(key,focusedCell){var upKey=key===KeyCode.UP,downKey=key===KeyCode.DOWN,leftKey=key===KeyCode.LEFT,column,rowIndex;if(upKey||downKey)rowIndex=upKey?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),column=focusedCell.column;else{var allColumns=this.columnModel.getAllDisplayedColumns(),isRtl=this.gridOptionsService.get("enableRtl");rowIndex=focusedCell.rowIndex,column=leftKey!==isRtl?allColumns[0]:last(allColumns)}return{rowIndex,rowPinned:null,column}},CellNavigationService2.prototype.getNextCellToFocusWithoutCtrlPressed=function(key,focusedCell){for(var pointer=focusedCell,finished=!1;!finished;){switch(key){case KeyCode.UP:pointer=this.getCellAbove(pointer);break;case KeyCode.DOWN:pointer=this.getCellBelow(pointer);break;case KeyCode.RIGHT:this.gridOptionsService.get("enableRtl")?pointer=this.getCellToLeft(pointer):pointer=this.getCellToRight(pointer);break;case KeyCode.LEFT:this.gridOptionsService.get("enableRtl")?pointer=this.getCellToRight(pointer):pointer=this.getCellToLeft(pointer);break;default:pointer=null,console.warn("AG Grid: unknown key for navigation "+key);break}pointer?finished=this.isCellGoodToFocusOn(pointer):finished=!0}return pointer},CellNavigationService2.prototype.isCellGoodToFocusOn=function(gridCell){var column=gridCell.column,rowNode;switch(gridCell.rowPinned){case"top":rowNode=this.pinnedRowModel.getPinnedTopRow(gridCell.rowIndex);break;case"bottom":rowNode=this.pinnedRowModel.getPinnedBottomRow(gridCell.rowIndex);break;default:rowNode=this.rowModel.getRow(gridCell.rowIndex);break}if(!rowNode)return!1;var suppressNavigable=column.isSuppressNavigable(rowNode);return!suppressNavigable},CellNavigationService2.prototype.getCellToLeft=function(lastCell){if(!lastCell)return null;var colToLeft=this.columnModel.getDisplayedColBefore(lastCell.column);return colToLeft?{rowIndex:lastCell.rowIndex,column:colToLeft,rowPinned:lastCell.rowPinned}:null},CellNavigationService2.prototype.getCellToRight=function(lastCell){if(!lastCell)return null;var colToRight=this.columnModel.getDisplayedColAfter(lastCell.column);return colToRight?{rowIndex:lastCell.rowIndex,column:colToRight,rowPinned:lastCell.rowPinned}:null},CellNavigationService2.prototype.getRowBelow=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned;if(this.isLastRowInContainer(rowPosition))switch(pinned){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}var rowNode=this.rowModel.getRow(rowPosition.rowIndex),nextStickyPosition=this.getNextStickyPosition(rowNode);return nextStickyPosition||{rowIndex:index+1,rowPinned:pinned}},CellNavigationService2.prototype.getNextStickyPosition=function(rowNode,up){if(!(!this.gridOptionsService.isGroupRowsSticky()||!rowNode||!rowNode.sticky)){var stickyRowCtrls=__spreadArray$d([],__read$f(this.rowRenderer.getStickyTopRowCtrls()),!1).sort(function(a,b){return a.getRowNode().rowIndex-b.getRowNode().rowIndex}),diff=up?-1:1,idx=stickyRowCtrls.findIndex(function(ctrl){return ctrl.getRowNode().rowIndex===rowNode.rowIndex}),nextCtrl=stickyRowCtrls[idx+diff];if(nextCtrl)return{rowIndex:nextCtrl.getRowNode().rowIndex,rowPinned:null}}},CellNavigationService2.prototype.getCellBelow=function(lastCell){if(!lastCell)return null;var rowBelow=this.getRowBelow(lastCell);return rowBelow?{rowIndex:rowBelow.rowIndex,column:lastCell.column,rowPinned:rowBelow.rowPinned}:null},CellNavigationService2.prototype.isLastRowInContainer=function(rowPosition){var pinned=rowPosition.rowPinned,index=rowPosition.rowIndex;if(pinned==="top"){var lastTopIndex=this.pinnedRowModel.getPinnedTopRowData().length-1;return lastTopIndex<=index}if(pinned==="bottom"){var lastBottomIndex=this.pinnedRowModel.getPinnedBottomRowData().length-1;return lastBottomIndex<=index}var lastBodyIndex=this.paginationProxy.getPageLastRow();return lastBodyIndex<=index},CellNavigationService2.prototype.getRowAbove=function(rowPosition){var index=rowPosition.rowIndex,pinned=rowPosition.rowPinned,isFirstRow=pinned?index===0:index===this.paginationProxy.getPageFirstRow();if(isFirstRow)return pinned==="top"?null:pinned?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;var rowNode=this.rowModel.getRow(rowPosition.rowIndex),nextStickyPosition=this.getNextStickyPosition(rowNode,!0);return nextStickyPosition||{rowIndex:index-1,rowPinned:pinned}},CellNavigationService2.prototype.getCellAbove=function(lastCell){if(!lastCell)return null;var rowAbove=this.getRowAbove({rowIndex:lastCell.rowIndex,rowPinned:lastCell.rowPinned});return rowAbove?{rowIndex:rowAbove.rowIndex,column:lastCell.column,rowPinned:rowAbove.rowPinned}:null},CellNavigationService2.prototype.getLastBodyCell=function(){var lastBodyRow=this.paginationProxy.getPageLastRow();return{rowIndex:lastBodyRow,rowPinned:null}},CellNavigationService2.prototype.getLastFloatingTopRow=function(){var lastFloatingRow=this.pinnedRowModel.getPinnedTopRowData().length-1;return{rowIndex:lastFloatingRow,rowPinned:"top"}},CellNavigationService2.prototype.getNextTabbedCell=function(gridCell,backwards){return backwards?this.getNextTabbedCellBackwards(gridCell):this.getNextTabbedCellForwards(gridCell)},CellNavigationService2.prototype.getNextTabbedCellForwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColAfter(gridCell.column);if(!newColumn){newColumn=displayedColumns[0];var rowBelow=this.getRowBelow(gridCell);if(missing(rowBelow)||!rowBelow.rowPinned&&!this.paginationProxy.isRowInPage(rowBelow))return null;newRowIndex=rowBelow?rowBelow.rowIndex:null,newFloating=rowBelow?rowBelow.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},CellNavigationService2.prototype.getNextTabbedCellBackwards=function(gridCell){var displayedColumns=this.columnModel.getAllDisplayedColumns(),newRowIndex=gridCell.rowIndex,newFloating=gridCell.rowPinned,newColumn=this.columnModel.getDisplayedColBefore(gridCell.column);if(!newColumn){newColumn=last(displayedColumns);var rowAbove=this.getRowAbove({rowIndex:gridCell.rowIndex,rowPinned:gridCell.rowPinned});if(missing(rowAbove)||!rowAbove.rowPinned&&!this.paginationProxy.isRowInPage(rowAbove))return null;newRowIndex=rowAbove?rowAbove.rowIndex:null,newFloating=rowAbove?rowAbove.rowPinned:null}return{rowIndex:newRowIndex,column:newColumn,rowPinned:newFloating}},__decorate$Y([Autowired("columnModel")],CellNavigationService2.prototype,"columnModel",void 0),__decorate$Y([Autowired("rowModel")],CellNavigationService2.prototype,"rowModel",void 0),__decorate$Y([Autowired("rowRenderer")],CellNavigationService2.prototype,"rowRenderer",void 0),__decorate$Y([Autowired("pinnedRowModel")],CellNavigationService2.prototype,"pinnedRowModel",void 0),__decorate$Y([Autowired("paginationProxy")],CellNavigationService2.prototype,"paginationProxy",void 0),CellNavigationService2=__decorate$Y([Bean("cellNavigationService")],CellNavigationService2),CellNavigationService2}(BeanStub),__extends$V=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$X=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$X"),__param$4=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$4"),AlignedGridsService=function(_super){__extends$V(AlignedGridsService2,_super);function AlignedGridsService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.consuming=!1,_this}return __name(AlignedGridsService2,"AlignedGridsService"),AlignedGridsService2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("AlignedGridsService")},AlignedGridsService2.prototype.getAlignedGridApis=function(){var _this=this,_a,alignedGrids=(_a=this.gridOptionsService.get("alignedGrids"))!==null&&_a!==void 0?_a:[],isCallbackConfig=typeof alignedGrids=="function";typeof alignedGrids=="function"&&(alignedGrids=alignedGrids());var seeUrl=__name(function(){return"See ".concat(_this.getFrameworkOverrides().getDocLink("aligned-grids"))},"seeUrl"),apis=alignedGrids.map(function(alignedGrid){var _a2;if(!alignedGrid){errorOnce("alignedGrids contains an undefined option."),isCallbackConfig||errorOnce(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),errorOnce(seeUrl());return}if(alignedGrid instanceof GridApi)return alignedGrid;var refOrComp=alignedGrid;return"current"in refOrComp?(_a2=refOrComp.current)===null||_a2===void 0?void 0:_a2.api:(refOrComp.api||errorOnce("alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ".concat(seeUrl())),refOrComp.api)}).filter(function(api){return!!api&&!api.isDestroyed()});return apis},AlignedGridsService2.prototype.init=function(){this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))},AlignedGridsService2.prototype.fireEvent=function(callback){this.consuming||this.getAlignedGridApis().forEach(function(api){var alignedGridService=api.__getAlignedGridService();callback(alignedGridService)})},AlignedGridsService2.prototype.onEvent=function(callback){this.consuming=!0,callback(),this.consuming=!1},AlignedGridsService2.prototype.fireColumnEvent=function(event){this.fireEvent(function(alignedGridsService){alignedGridsService.onColumnEvent(event)})},AlignedGridsService2.prototype.fireScrollEvent=function(event){event.direction==="horizontal"&&this.fireEvent(function(alignedGridsService){alignedGridsService.onScrollEvent(event)})},AlignedGridsService2.prototype.onScrollEvent=function(event){var _this=this;this.onEvent(function(){var gridBodyCon=_this.ctrlsService.getGridBodyCtrl();gridBodyCon.getScrollFeature().setHorizontalScrollPosition(event.left,!0)})},AlignedGridsService2.prototype.getMasterColumns=function(event){var result=[];return event.columns?event.columns.forEach(function(column){result.push(column)}):event.column&&result.push(event.column),result},AlignedGridsService2.prototype.getColumnIds=function(event){var result=[];return event.columns?event.columns.forEach(function(column){result.push(column.getColId())}):event.column&&result.push(event.column.getColId()),result},AlignedGridsService2.prototype.onColumnEvent=function(event){var _this=this;this.onEvent(function(){switch(event.type){case Events.EVENT_COLUMN_MOVED:case Events.EVENT_COLUMN_VISIBLE:case Events.EVENT_COLUMN_PINNED:case Events.EVENT_COLUMN_RESIZED:var colEvent=event;_this.processColumnEvent(colEvent);break;case Events.EVENT_COLUMN_GROUP_OPENED:var groupOpenedEvent=event;_this.processGroupOpenedEvent(groupOpenedEvent);break;case Events.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})},AlignedGridsService2.prototype.processGroupOpenedEvent=function(groupOpenedEvent){var _this=this;groupOpenedEvent.columnGroups.forEach(function(masterGroup){var otherColumnGroup=null;if(masterGroup){var groupId=masterGroup.getGroupId();otherColumnGroup=_this.columnModel.getProvidedColumnGroup(groupId)}masterGroup&&!otherColumnGroup||(_this.logger.log("onColumnEvent-> processing "+groupOpenedEvent+" expanded = "+masterGroup.isExpanded()),_this.columnModel.setColumnGroupOpened(otherColumnGroup,masterGroup.isExpanded(),"alignedGridChanged"))})},AlignedGridsService2.prototype.processColumnEvent=function(colEvent){var _this=this,_a,masterColumn=colEvent.column,otherColumn=null;if(masterColumn&&(otherColumn=this.columnModel.getPrimaryColumn(masterColumn.getColId())),!(masterColumn&&!otherColumn)){var masterColumns=this.getMasterColumns(colEvent);switch(colEvent.type){case Events.EVENT_COLUMN_MOVED:{var movedEvent=colEvent,srcColState=colEvent.api.getColumnState(),destColState=srcColState.map(function(s){return{colId:s.colId}});this.columnModel.applyColumnState({state:destColState,applyOrder:!0},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(colEvent.type," toIndex = ").concat(movedEvent.toIndex))}break;case Events.EVENT_COLUMN_VISIBLE:{var visibleEvent=colEvent,srcColState=colEvent.api.getColumnState(),destColState=srcColState.map(function(s){return{colId:s.colId,hide:s.hide}});this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(colEvent.type," visible = ").concat(visibleEvent.visible))}break;case Events.EVENT_COLUMN_PINNED:{var pinnedEvent=colEvent,srcColState=colEvent.api.getColumnState(),destColState=srcColState.map(function(s){return{colId:s.colId,pinned:s.pinned}});this.columnModel.applyColumnState({state:destColState},"alignedGridChanged"),this.logger.log("onColumnEvent-> processing ".concat(colEvent.type," pinned = ").concat(pinnedEvent.pinned))}break;case Events.EVENT_COLUMN_RESIZED:var resizedEvent=colEvent,columnWidths_1={};masterColumns.forEach(function(column){_this.logger.log("onColumnEvent-> processing ".concat(colEvent.type," actualWidth = ").concat(column.getActualWidth())),columnWidths_1[column.getId()]={key:column.getColId(),newWidth:column.getActualWidth()}}),(_a=resizedEvent.flexColumns)===null||_a===void 0||_a.forEach(function(col){columnWidths_1[col.getId()]&&delete columnWidths_1[col.getId()]}),this.columnModel.setColumnWidths(Object.values(columnWidths_1),!1,resizedEvent.finished,"alignedGridChanged");break}var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),isVerticalScrollShowing2=gridBodyCon.isVerticalScrollShowing();this.getAlignedGridApis().forEach(function(api){api.setGridOption("alwaysShowVerticalScroll",isVerticalScrollShowing2)})}},__decorate$X([Autowired("columnModel")],AlignedGridsService2.prototype,"columnModel",void 0),__decorate$X([Autowired("ctrlsService")],AlignedGridsService2.prototype,"ctrlsService",void 0),__decorate$X([__param$4(0,Qualifier("loggerFactory"))],AlignedGridsService2.prototype,"setBeans",null),__decorate$X([PostConstruct],AlignedGridsService2.prototype,"init",null),AlignedGridsService2=__decorate$X([Bean("alignedGridsService")],AlignedGridsService2),AlignedGridsService2}(BeanStub),__extends$U=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$W=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$W"),SelectionService=function(_super){__extends$U(SelectionService2,_super);function SelectionService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.selectedNodes=new Map,_this.lastRowNode=null,_this}return __name(SelectionService2,"SelectionService"),SelectionService2.prototype.init=function(){var _this=this;this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],function(){_this.groupSelectsChildren=_this.gridOptionsService.get("groupSelectsChildren"),_this.rowSelection=_this.gridOptionsService.get("rowSelection"),_this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,Events.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))},SelectionService2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.resetNodes(),this.lastRowNode=null},SelectionService2.prototype.isMultiselect=function(){return this.rowSelection==="multiple"},SelectionService2.prototype.setNodesSelected=function(params){var _a,newValue=params.newValue,clearSelection=params.clearSelection,suppressFinishActions=params.suppressFinishActions,rangeSelect=params.rangeSelect,nodes=params.nodes,event=params.event,_b=params.source,source=_b===void 0?"api":_b;if(nodes.length===0)return 0;if(nodes.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;var groupSelectsFiltered=this.groupSelectsChildren&&params.groupSelectsFiltered===!0,filteredNodes=nodes.map(function(node2){return node2.footer?node2.sibling:node2});if(rangeSelect){if(nodes.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;var toNode=null;if(source==="checkboxSelected"&&newValue===!1&&this.lastRowNode&&(this.lastRowNode.id?toNode=this.lastRowNode:this.lastRowNode=null),toNode==null&&(toNode=this.getLastSelectedNode()),toNode){var fromNode=filteredNodes[0],newRowClicked=fromNode!==toNode;if(newRowClicked&&this.isMultiselect())return this.selectRange(fromNode,toNode,newValue,source)}}this.lastRowNode=newValue?null:filteredNodes[0];for(var updatedCount=0,i=0;i<filteredNodes.length;i++){var node=filteredNodes[i],skipThisNode=groupSelectsFiltered&&node.group;if(!skipThisNode){var thisNodeWasSelected=node.selectThisNode(newValue,event,source);thisNodeWasSelected&&updatedCount++}this.groupSelectsChildren&&(!((_a=node.childrenAfterGroup)===null||_a===void 0)&&_a.length)&&(updatedCount+=this.selectChildren(node,newValue,groupSelectsFiltered,source))}if(!suppressFinishActions){var clearOtherNodes=newValue&&(clearSelection||!this.isMultiselect());if(clearOtherNodes&&(updatedCount+=this.clearOtherNodes(filteredNodes[0],source)),updatedCount>0){this.updateGroupsFromChildrenSelections(source);var event_1={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event_1)}}return updatedCount},SelectionService2.prototype.selectRange=function(fromNode,toNode,value,source){var _this=this;value===void 0&&(value=!0);var nodesToSelect=this.rowModel.getNodesInRangeForSelection(fromNode,toNode),updatedCount=0;nodesToSelect.forEach(function(rowNode){if(!(rowNode.group&&_this.groupSelectsChildren)){var nodeWasSelected=rowNode.selectThisNode(value,void 0,source);nodeWasSelected&&updatedCount++}}),this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};return this.eventService.dispatchEvent(event),updatedCount},SelectionService2.prototype.selectChildren=function(node,newValue,groupSelectsFiltered,source){var children=groupSelectsFiltered?node.childrenAfterAggFilter:node.childrenAfterGroup;return missing(children)?0:this.setNodesSelected({newValue,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered,source,nodes:children})},SelectionService2.prototype.getLastSelectedNode=function(){var selectedKeys=Array.from(this.selectedNodes.keys());if(selectedKeys.length==0)return null;var node=this.selectedNodes.get(last(selectedKeys));return node||null},SelectionService2.prototype.getSelectedNodes=function(){var selectedNodes=[];return this.selectedNodes.forEach(function(rowNode){rowNode&&selectedNodes.push(rowNode)}),selectedNodes},SelectionService2.prototype.getSelectedRows=function(){var selectedRows=[];return this.selectedNodes.forEach(function(rowNode){rowNode&&rowNode.data&&selectedRows.push(rowNode.data)}),selectedRows},SelectionService2.prototype.getSelectionCount=function(){return this.selectedNodes.size},SelectionService2.prototype.filterFromSelection=function(predicate){var newSelectedNodes=new Map;this.selectedNodes.forEach(function(rowNode,key){var passesPredicate=rowNode&&predicate(rowNode);passesPredicate&&newSelectedNodes.set(key,rowNode)}),this.selectedNodes=newSelectedNodes},SelectionService2.prototype.updateGroupsFromChildrenSelections=function(source,changedPath){if(!this.groupSelectsChildren||this.rowModel.getType()!=="clientSide")return!1;var clientSideRowModel=this.rowModel,rootNode=clientSideRowModel.getRootNode();changedPath||(changedPath=new ChangedPath(!0,rootNode),changedPath.setInactive());var selectionChanged=!1;return changedPath.forEachChangedNodeDepthFirst(function(rowNode){if(rowNode!==rootNode){var selected=rowNode.calculateSelectedFromChildren();selectionChanged=rowNode.selectThisNode(selected===null?!1:selected,void 0,source)||selectionChanged}}),selectionChanged},SelectionService2.prototype.clearOtherNodes=function(rowNodeToKeepSelected,source){var _this=this,groupsToRefresh=new Map,updatedCount=0;return this.selectedNodes.forEach(function(otherRowNode){if(otherRowNode&&otherRowNode.id!==rowNodeToKeepSelected.id){var rowNode=_this.selectedNodes.get(otherRowNode.id);updatedCount+=rowNode.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source}),_this.groupSelectsChildren&&otherRowNode.parent&&groupsToRefresh.set(otherRowNode.parent.id,otherRowNode.parent)}}),groupsToRefresh.forEach(function(group){var selected=group.calculateSelectedFromChildren();group.selectThisNode(selected===null?!1:selected,void 0,source)}),updatedCount},SelectionService2.prototype.onRowSelected=function(event){var rowNode=event.node;this.groupSelectsChildren&&rowNode.group||(rowNode.isSelected()?this.selectedNodes.set(rowNode.id,rowNode):this.selectedNodes.delete(rowNode.id))},SelectionService2.prototype.syncInRowNode=function(rowNode,oldNode){this.syncInOldRowNode(rowNode,oldNode),this.syncInNewRowNode(rowNode)},SelectionService2.prototype.syncInOldRowNode=function(rowNode,oldNode){var oldNodeHasDifferentId=exists(oldNode)&&rowNode.id!==oldNode.id;if(oldNodeHasDifferentId&&oldNode){var id=oldNode.id,oldNodeSelected=this.selectedNodes.get(id)==rowNode;oldNodeSelected&&this.selectedNodes.set(oldNode.id,oldNode)}},SelectionService2.prototype.syncInNewRowNode=function(rowNode){this.selectedNodes.has(rowNode.id)?(rowNode.setSelectedInitialValue(!0),this.selectedNodes.set(rowNode.id,rowNode)):rowNode.setSelectedInitialValue(!1)},SelectionService2.prototype.reset=function(source){var selectionCount=this.getSelectionCount();if(this.resetNodes(),selectionCount){var event_2={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event_2)}},SelectionService2.prototype.resetNodes=function(){var _a;(_a=this.selectedNodes)===null||_a===void 0||_a.clear()},SelectionService2.prototype.getBestCostNodeSelection=function(){if(this.rowModel.getType()!=="clientSide")return;var clientSideRowModel=this.rowModel,topLevelNodes=clientSideRowModel.getTopLevelNodes();if(topLevelNodes===null)return;var result=[];function traverse(nodes){for(var i=0,l=nodes.length;i<l;i++){var node=nodes[i];if(node.isSelected())result.push(node);else{var maybeGroup=node;maybeGroup.group&&maybeGroup.children&&traverse(maybeGroup.children)}}}return __name(traverse,"traverse"),traverse(topLevelNodes),result},SelectionService2.prototype.isEmpty=function(){var count=0;return this.selectedNodes.forEach(function(rowNode){rowNode&&count++}),count===0},SelectionService2.prototype.deselectAllRowNodes=function(params){var callback=__name(function(rowNode){return rowNode.selectThisNode(!1,void 0,source)},"callback"),rowModelClientSide=this.rowModel.getType()==="clientSide",source=params.source,justFiltered=params.justFiltered,justCurrentPage=params.justCurrentPage;if(justCurrentPage||justFiltered){if(!rowModelClientSide){console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback)}else this.selectedNodes.forEach(function(rowNode){rowNode&&callback(rowNode)}),this.reset(source);rowModelClientSide&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event)},SelectionService2.prototype.getSelectedCounts=function(justFiltered,justCurrentPage){var _this=this,selectedCount=0,notSelectedCount=0,callback=__name(function(node){_this.groupSelectsChildren&&node.group||(node.isSelected()?selectedCount++:node.selectable&&notSelectedCount++)},"callback");return this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback),{selectedCount,notSelectedCount}},SelectionService2.prototype.getSelectAllState=function(justFiltered,justCurrentPage){var _a=this.getSelectedCounts(justFiltered,justCurrentPage),selectedCount=_a.selectedCount,notSelectedCount=_a.notSelectedCount;return selectedCount===0&&notSelectedCount===0?!1:selectedCount>0&&notSelectedCount>0?null:selectedCount>0},SelectionService2.prototype.hasNodesToSelect=function(justFiltered,justCurrentPage){return justFiltered===void 0&&(justFiltered=!1),justCurrentPage===void 0&&(justCurrentPage=!1),this.getNodesToSelect(justFiltered,justCurrentPage).filter(function(node){return node.selectable}).length>0},SelectionService2.prototype.getNodesToSelect=function(justFiltered,justCurrentPage){var _this=this;if(justFiltered===void 0&&(justFiltered=!1),justCurrentPage===void 0&&(justCurrentPage=!1),this.rowModel.getType()!=="clientSide")throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));var nodes=[];if(justCurrentPage)return this.paginationProxy.forEachNodeOnPage(function(node){if(!node.group){nodes.push(node);return}if(!node.expanded){var recursivelyAddChildren_1=__name(function(child){var _a;nodes.push(child),!((_a=child.childrenAfterFilter)===null||_a===void 0)&&_a.length&&child.childrenAfterFilter.forEach(recursivelyAddChildren_1)},"recursivelyAddChildren_1");recursivelyAddChildren_1(node);return}_this.groupSelectsChildren||nodes.push(node)}),nodes;var clientSideRowModel=this.rowModel;return justFiltered?(clientSideRowModel.forEachNodeAfterFilter(function(node){nodes.push(node)}),nodes):(clientSideRowModel.forEachNode(function(node){nodes.push(node)}),nodes)},SelectionService2.prototype.selectAllRowNodes=function(params){if(this.rowModel.getType()!=="clientSide")throw new Error("selectAll only available when rowModelType='clientSide', ie not ".concat(this.rowModel.getType()));var source=params.source,justFiltered=params.justFiltered,justCurrentPage=params.justCurrentPage,callback=__name(function(rowNode){return rowNode.selectThisNode(!0,void 0,source)},"callback");this.getNodesToSelect(justFiltered,justCurrentPage).forEach(callback),this.rowModel.getType()==="clientSide"&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(source);var event={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event)},SelectionService2.prototype.getSelectionState=function(){var selectedIds=[];return this.selectedNodes.forEach(function(node){node!=null&&node.id&&selectedIds.push(node.id)}),selectedIds.length?selectedIds:null},SelectionService2.prototype.setSelectionState=function(state,source){if(Array.isArray(state)){var rowIds=new Set(state),nodes=[];this.rowModel.forEachNode(function(node){rowIds.has(node.id)&&nodes.push(node)}),this.setNodesSelected({newValue:!0,nodes,source})}},__decorate$W([Autowired("rowModel")],SelectionService2.prototype,"rowModel",void 0),__decorate$W([Autowired("paginationProxy")],SelectionService2.prototype,"paginationProxy",void 0),__decorate$W([PostConstruct],SelectionService2.prototype,"init",null),SelectionService2=__decorate$W([Bean("selectionService")],SelectionService2),SelectionService2}(BeanStub),__decorate$V=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$V"),__read$e=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$e"),__spreadArray$c=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$c"),ColumnApi=function(){function ColumnApi2(gridAp){var _this=this;this.viaApi=function(funcName){for(var _a,args=[],_i=1;_i<arguments.length;_i++)args[_i-1]=arguments[_i];return warnOnce("Since v31, 'columnApi.".concat(funcName,"' is deprecated and moved to 'api.").concat(funcName,"'.")),(_a=_this.api)[funcName].apply(_a,__spreadArray$c([],__read$e(args),!1))},this.api=gridAp}return __name(ColumnApi2,"ColumnApi"),ColumnApi2.prototype.sizeColumnsToFit=function(gridWidth){this.viaApi("sizeColumnsToFit",gridWidth)},ColumnApi2.prototype.setColumnGroupOpened=function(group,newValue){this.viaApi("setColumnGroupOpened",group,newValue)},ColumnApi2.prototype.getColumnGroup=function(name,instanceId){return this.viaApi("getColumnGroup",name,instanceId)},ColumnApi2.prototype.getProvidedColumnGroup=function(name){return this.viaApi("getProvidedColumnGroup",name)},ColumnApi2.prototype.getDisplayNameForColumn=function(column,location){return this.viaApi("getDisplayNameForColumn",column,location)},ColumnApi2.prototype.getDisplayNameForColumnGroup=function(columnGroup,location){return this.viaApi("getDisplayNameForColumnGroup",columnGroup,location)},ColumnApi2.prototype.getColumn=function(key){return this.viaApi("getColumn",key)},ColumnApi2.prototype.getColumns=function(){return this.viaApi("getColumns")},ColumnApi2.prototype.applyColumnState=function(params){return this.viaApi("applyColumnState",params)},ColumnApi2.prototype.getColumnState=function(){return this.viaApi("getColumnState")},ColumnApi2.prototype.resetColumnState=function(){this.viaApi("resetColumnState")},ColumnApi2.prototype.getColumnGroupState=function(){return this.viaApi("getColumnGroupState")},ColumnApi2.prototype.setColumnGroupState=function(stateItems){this.viaApi("setColumnGroupState",stateItems)},ColumnApi2.prototype.resetColumnGroupState=function(){this.viaApi("resetColumnGroupState")},ColumnApi2.prototype.isPinning=function(){return this.viaApi("isPinning")},ColumnApi2.prototype.isPinningLeft=function(){return this.viaApi("isPinningLeft")},ColumnApi2.prototype.isPinningRight=function(){return this.viaApi("isPinningRight")},ColumnApi2.prototype.getDisplayedColAfter=function(col){return this.viaApi("getDisplayedColAfter",col)},ColumnApi2.prototype.getDisplayedColBefore=function(col){return this.viaApi("getDisplayedColBefore",col)},ColumnApi2.prototype.setColumnVisible=function(key,visible){this.viaApi("setColumnVisible",key,visible)},ColumnApi2.prototype.setColumnsVisible=function(keys2,visible){this.viaApi("setColumnsVisible",keys2,visible)},ColumnApi2.prototype.setColumnPinned=function(key,pinned){this.viaApi("setColumnPinned",key,pinned)},ColumnApi2.prototype.setColumnsPinned=function(keys2,pinned){this.viaApi("setColumnsPinned",keys2,pinned)},ColumnApi2.prototype.getAllGridColumns=function(){return this.viaApi("getAllGridColumns")},ColumnApi2.prototype.getDisplayedLeftColumns=function(){return this.viaApi("getDisplayedLeftColumns")},ColumnApi2.prototype.getDisplayedCenterColumns=function(){return this.viaApi("getDisplayedCenterColumns")},ColumnApi2.prototype.getDisplayedRightColumns=function(){return this.viaApi("getDisplayedRightColumns")},ColumnApi2.prototype.getAllDisplayedColumns=function(){return this.viaApi("getAllDisplayedColumns")},ColumnApi2.prototype.getAllDisplayedVirtualColumns=function(){return this.viaApi("getAllDisplayedVirtualColumns")},ColumnApi2.prototype.moveColumn=function(key,toIndex){this.viaApi("moveColumn",key,toIndex)},ColumnApi2.prototype.moveColumnByIndex=function(fromIndex,toIndex){this.viaApi("moveColumnByIndex",fromIndex,toIndex)},ColumnApi2.prototype.moveColumns=function(columnsToMoveKeys,toIndex){this.viaApi("moveColumns",columnsToMoveKeys,toIndex)},ColumnApi2.prototype.moveRowGroupColumn=function(fromIndex,toIndex){this.viaApi("moveRowGroupColumn",fromIndex,toIndex)},ColumnApi2.prototype.setColumnAggFunc=function(key,aggFunc){this.viaApi("setColumnAggFunc",key,aggFunc)},ColumnApi2.prototype.setColumnWidth=function(key,newWidth,finished,source){finished===void 0&&(finished=!0),this.viaApi("setColumnWidth",key,newWidth,finished,source)},ColumnApi2.prototype.setColumnWidths=function(columnWidths,finished,source){finished===void 0&&(finished=!0),this.viaApi("setColumnWidths",columnWidths,finished,source)},ColumnApi2.prototype.setPivotMode=function(pivotMode){this.viaApi("setPivotMode",pivotMode)},ColumnApi2.prototype.isPivotMode=function(){return this.viaApi("isPivotMode")},ColumnApi2.prototype.getPivotResultColumn=function(pivotKeys,valueColKey){return this.viaApi("getPivotResultColumn",pivotKeys,valueColKey)},ColumnApi2.prototype.setValueColumns=function(colKeys){this.viaApi("setValueColumns",colKeys)},ColumnApi2.prototype.getValueColumns=function(){return this.viaApi("getValueColumns")},ColumnApi2.prototype.removeValueColumn=function(colKey){this.viaApi("removeValueColumn",colKey)},ColumnApi2.prototype.removeValueColumns=function(colKeys){this.viaApi("removeValueColumns",colKeys)},ColumnApi2.prototype.addValueColumn=function(colKey){this.viaApi("addValueColumn",colKey)},ColumnApi2.prototype.addValueColumns=function(colKeys){this.viaApi("addValueColumns",colKeys)},ColumnApi2.prototype.setRowGroupColumns=function(colKeys){this.viaApi("setRowGroupColumns",colKeys)},ColumnApi2.prototype.removeRowGroupColumn=function(colKey){this.viaApi("removeRowGroupColumn",colKey)},ColumnApi2.prototype.removeRowGroupColumns=function(colKeys){this.viaApi("removeRowGroupColumns",colKeys)},ColumnApi2.prototype.addRowGroupColumn=function(colKey){this.viaApi("addRowGroupColumn",colKey)},ColumnApi2.prototype.addRowGroupColumns=function(colKeys){this.viaApi("addRowGroupColumns",colKeys)},ColumnApi2.prototype.getRowGroupColumns=function(){return this.viaApi("getRowGroupColumns")},ColumnApi2.prototype.setPivotColumns=function(colKeys){this.viaApi("setPivotColumns",colKeys)},ColumnApi2.prototype.removePivotColumn=function(colKey){this.viaApi("removePivotColumn",colKey)},ColumnApi2.prototype.removePivotColumns=function(colKeys){this.viaApi("removePivotColumns",colKeys)},ColumnApi2.prototype.addPivotColumn=function(colKey){this.viaApi("addPivotColumn",colKey)},ColumnApi2.prototype.addPivotColumns=function(colKeys){this.viaApi("addPivotColumns",colKeys)},ColumnApi2.prototype.getPivotColumns=function(){return this.viaApi("getPivotColumns")},ColumnApi2.prototype.getLeftDisplayedColumnGroups=function(){return this.viaApi("getLeftDisplayedColumnGroups")},ColumnApi2.prototype.getCenterDisplayedColumnGroups=function(){return this.viaApi("getCenterDisplayedColumnGroups")},ColumnApi2.prototype.getRightDisplayedColumnGroups=function(){return this.viaApi("getRightDisplayedColumnGroups")},ColumnApi2.prototype.getAllDisplayedColumnGroups=function(){return this.viaApi("getAllDisplayedColumnGroups")},ColumnApi2.prototype.autoSizeColumn=function(key,skipHeader){return this.viaApi("autoSizeColumn",key,skipHeader)},ColumnApi2.prototype.autoSizeColumns=function(keys2,skipHeader){this.viaApi("autoSizeColumns",keys2,skipHeader)},ColumnApi2.prototype.autoSizeAllColumns=function(skipHeader){this.viaApi("autoSizeAllColumns",skipHeader)},ColumnApi2.prototype.setPivotResultColumns=function(colDefs){this.viaApi("setPivotResultColumns",colDefs)},ColumnApi2.prototype.getPivotResultColumns=function(){return this.viaApi("getPivotResultColumns")},__decorate$V([Autowired("gridApi")],ColumnApi2.prototype,"api",void 0),ColumnApi2=__decorate$V([Bean("columnApi")],ColumnApi2),ColumnApi2}(),__extends$T=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$U=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$U"),ValueService=function(_super){__extends$T(ValueService2,_super);function ValueService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.initialised=!1,_this.isSsrm=!1,_this}return __name(ValueService2,"ValueService"),ValueService2.prototype.init=function(){var _this=this;this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;var listener=__name(function(event){return _this.callColumnCellValueChangedHandler(event)},"listener"),async=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(Events.EVENT_CELL_VALUE_CHANGED,listener,async),this.addDestroyFunc(function(){return _this.eventService.removeEventListener(Events.EVENT_CELL_VALUE_CHANGED,listener,async)}),this.addManagedPropertyListener("treeData",function(propChange){return _this.isTreeData=propChange.currentValue})},ValueService2.prototype.getValue=function(column,rowNode,forFilter,ignoreAggData){if(forFilter===void 0&&(forFilter=!1),ignoreAggData===void 0&&(ignoreAggData=!1),this.initialised||this.init(),!!rowNode){var colDef=column.getColDef(),field=colDef.field,colId=column.getColId(),data=rowNode.data,result,groupDataExists=rowNode.groupData&&rowNode.groupData[colId]!==void 0,aggDataExists=!ignoreAggData&&rowNode.aggData&&rowNode.aggData[colId]!==void 0,ignoreSsrmAggData=this.isSsrm&&ignoreAggData&&!!column.getColDef().aggFunc,ssrmFooterGroupCol=this.isSsrm&&rowNode.footer&&rowNode.field&&(column.getColDef().showRowGroup===!0||column.getColDef().showRowGroup===rowNode.field);if(forFilter&&colDef.filterValueGetter?result=this.executeFilterValueGetter(colDef.filterValueGetter,data,column,rowNode):this.isTreeData&&aggDataExists?result=rowNode.aggData[colId]:this.isTreeData&&colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):this.isTreeData&&field&&data?result=getValueUsingField(data,field,column.isFieldContainsDots()):groupDataExists?result=rowNode.groupData[colId]:aggDataExists?result=rowNode.aggData[colId]:colDef.valueGetter?result=this.executeValueGetter(colDef.valueGetter,data,column,rowNode):ssrmFooterGroupCol?result=getValueUsingField(data,rowNode.field,column.isFieldContainsDots()):field&&data&&!ignoreSsrmAggData&&(result=getValueUsingField(data,field,column.isFieldContainsDots())),this.cellExpressions&&typeof result=="string"&&result.indexOf("=")===0){var cellValueGetter=result.substring(1);result=this.executeValueGetter(cellValueGetter,data,column,rowNode)}if(result==null){var openedGroup=this.getOpenedGroup(rowNode,column);if(openedGroup!=null)return openedGroup}return result}},ValueService2.prototype.getOpenedGroup=function(rowNode,column){if(this.gridOptionsService.get("showOpenedGroup")){var colDef=column.getColDef();if(colDef.showRowGroup)for(var showRowGroup=column.getColDef().showRowGroup,pointer=rowNode.parent;pointer!=null;){if(pointer.rowGroupColumn&&(showRowGroup===!0||showRowGroup===pointer.rowGroupColumn.getColId()))return pointer.key;pointer=pointer.parent}}},ValueService2.prototype.setValue=function(rowNode,colKey,newValue,eventSource){var column=this.columnModel.getPrimaryColumn(colKey);if(!rowNode||!column)return!1;missing(rowNode.data)&&(rowNode.data={});var _a=column.getColDef(),field=_a.field,valueSetter=_a.valueSetter;if(missing(field)&&missing(valueSetter))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(column,newValue))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;var params=this.gridOptionsService.addGridCommonParams({node:rowNode,data:rowNode.data,oldValue:this.getValue(column,rowNode),newValue,colDef:column.getColDef(),column});params.newValue=newValue;var valueWasDifferent;if(exists(valueSetter)?typeof valueSetter=="function"?valueWasDifferent=valueSetter(params):valueWasDifferent=this.expressionService.evaluate(valueSetter,params):valueWasDifferent=this.setValueUsingField(rowNode.data,field,newValue,column.isFieldContainsDots()),valueWasDifferent===void 0&&(valueWasDifferent=!0),!valueWasDifferent)return!1;rowNode.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),params.newValue=this.getValue(column,rowNode);var event={type:Events.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:rowNode.rowIndex,rowPinned:rowNode.rowPinned,column:params.column,api:params.api,columnApi:params.columnApi,colDef:params.colDef,context:params.context,data:rowNode.data,node:rowNode,oldValue:params.oldValue,newValue:params.newValue,value:params.newValue,source:eventSource};return this.eventService.dispatchEvent(event),!0},ValueService2.prototype.callColumnCellValueChangedHandler=function(event){var onCellValueChanged=event.colDef.onCellValueChanged;typeof onCellValueChanged=="function"&&this.getFrameworkOverrides().wrapOutgoing(function(){onCellValueChanged({node:event.node,data:event.data,oldValue:event.oldValue,newValue:event.newValue,colDef:event.colDef,column:event.column,api:event.api,columnApi:event.columnApi,context:event.context})})},ValueService2.prototype.setValueUsingField=function(data,field,newValue,isFieldContainsDots){if(!field)return!1;var valuesAreSame=!1;if(!isFieldContainsDots)valuesAreSame=data[field]===newValue,valuesAreSame||(data[field]=newValue);else for(var fieldPieces=field.split("."),currentObject=data;fieldPieces.length>0&&currentObject;){var fieldPiece=fieldPieces.shift();fieldPieces.length===0?(valuesAreSame=currentObject[fieldPiece]===newValue,valuesAreSame||(currentObject[fieldPiece]=newValue)):currentObject=currentObject[fieldPiece]}return!valuesAreSame},ValueService2.prototype.executeFilterValueGetter=function(valueGetter,data,column,rowNode){var params=this.gridOptionsService.addGridCommonParams({data,node:rowNode,column,colDef:column.getColDef(),getValue:this.getValueCallback.bind(this,rowNode)});return typeof valueGetter=="function"?valueGetter(params):this.expressionService.evaluate(valueGetter,params)},ValueService2.prototype.executeValueGetter=function(valueGetter,data,column,rowNode){var colId=column.getColId(),valueFromCache=this.valueCache.getValue(rowNode,colId);if(valueFromCache!==void 0)return valueFromCache;var params=this.gridOptionsService.addGridCommonParams({data,node:rowNode,column,colDef:column.getColDef(),getValue:this.getValueCallback.bind(this,rowNode)}),result;return typeof valueGetter=="function"?result=valueGetter(params):result=this.expressionService.evaluate(valueGetter,params),this.valueCache.setValue(rowNode,colId,result),result},ValueService2.prototype.getValueCallback=function(node,field){var otherColumn=this.columnModel.getPrimaryColumn(field);return otherColumn?this.getValue(otherColumn,node):null},ValueService2.prototype.getKeyForNode=function(col,rowNode){var value=this.getValue(col,rowNode),keyCreator=col.getColDef().keyCreator,result=value;if(keyCreator){var keyParams=this.gridOptionsService.addGridCommonParams({value,colDef:col.getColDef(),column:col,node:rowNode,data:rowNode.data});result=keyCreator(keyParams)}return typeof result=="string"||result==null||(result=String(result),result==="[object Object]"&&warnOnce("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),result},__decorate$U([Autowired("expressionService")],ValueService2.prototype,"expressionService",void 0),__decorate$U([Autowired("columnModel")],ValueService2.prototype,"columnModel",void 0),__decorate$U([Autowired("valueCache")],ValueService2.prototype,"valueCache",void 0),__decorate$U([Autowired("dataTypeService")],ValueService2.prototype,"dataTypeService",void 0),__decorate$U([PostConstruct],ValueService2.prototype,"init",null),ValueService2=__decorate$U([Bean("valueService")],ValueService2),ValueService2}(BeanStub),__extends$S=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$T=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$T"),__param$3=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$3"),ExpressionService=function(_super){__extends$S(ExpressionService2,_super);function ExpressionService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.expressionToFunctionCache={},_this}return __name(ExpressionService2,"ExpressionService"),ExpressionService2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("ExpressionService")},ExpressionService2.prototype.evaluate=function(expression,params){if(typeof expression=="string")return this.evaluateExpression(expression,params);console.error("AG Grid: value should be either a string or a function",expression)},ExpressionService2.prototype.evaluateExpression=function(expression,params){try{var javaScriptFunction=this.createExpressionFunction(expression),result=javaScriptFunction(params.value,params.context,params.oldValue,params.newValue,params.value,params.node,params.data,params.colDef,params.rowIndex,params.api,params.columnApi,params.getValue,params.column,params.columnGroup);return result}catch(e){return console.log("Processing of the expression failed"),console.log("Expression = "+expression),console.log("Params =",params),console.log("Exception = "+e),null}},ExpressionService2.prototype.createExpressionFunction=function(expression){if(this.expressionToFunctionCache[expression])return this.expressionToFunctionCache[expression];var functionBody=this.createFunctionBody(expression),theFunction=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",functionBody);return this.expressionToFunctionCache[expression]=theFunction,theFunction},ExpressionService2.prototype.createFunctionBody=function(expression){return expression.indexOf("return")>=0?expression:"return "+expression+";"},__decorate$T([__param$3(0,Qualifier("loggerFactory"))],ExpressionService2.prototype,"setBeans",null),ExpressionService2=__decorate$T([Bean("expressionService")],ExpressionService2),ExpressionService2}(BeanStub),__extends$R=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$S=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$S"),TemplateService=function(_super){__extends$R(TemplateService2,_super);function TemplateService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.templateCache={},_this.waitingCallbacks={},_this}return __name(TemplateService2,"TemplateService"),TemplateService2.prototype.getTemplate=function(url,callback){var templateFromCache=this.templateCache[url];if(templateFromCache)return templateFromCache;var callbackList=this.waitingCallbacks[url],that=this;if(!callbackList){callbackList=[],this.waitingCallbacks[url]=callbackList;var client=new XMLHttpRequest;client.onload=function(){that.handleHttpResult(this,url)},client.open("GET",url),client.send()}return callback&&callbackList.push(callback),null},TemplateService2.prototype.handleHttpResult=function(httpResult,url){if(httpResult.status!==200||httpResult.response===null){console.warn("AG Grid: Unable to get template error ".concat(httpResult.status," - ").concat(url));return}this.templateCache[url]=httpResult.response||httpResult.responseText;for(var callbacks=this.waitingCallbacks[url],i=0;i<callbacks.length;i++){var callback=callbacks[i];callback()}},TemplateService2=__decorate$S([Bean("templateService")],TemplateService2),TemplateService2}(BeanStub),__extends$Q=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$R=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$R"),__param$2=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$2"),LoggerFactory=function(_super){__extends$Q(LoggerFactory2,_super);function LoggerFactory2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(LoggerFactory2,"LoggerFactory"),LoggerFactory2.prototype.setBeans=function(gridOptionsService){this.logging=gridOptionsService.get("debug")},LoggerFactory2.prototype.create=function(name){return new Logger(name,this.isLogging.bind(this))},LoggerFactory2.prototype.isLogging=function(){return this.logging},__decorate$R([__param$2(0,Qualifier("gridOptionsService"))],LoggerFactory2.prototype,"setBeans",null),LoggerFactory2=__decorate$R([Bean("loggerFactory")],LoggerFactory2),LoggerFactory2}(BeanStub),Logger=function(){function Logger2(name,isLoggingFunc){this.name=name,this.isLoggingFunc=isLoggingFunc}return __name(Logger2,"Logger"),Logger2.prototype.isLogging=function(){return this.isLoggingFunc()},Logger2.prototype.log=function(message){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+message)},Logger2}(),__extends$P=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$Q=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$Q"),GridCtrl=function(_super){__extends$P(GridCtrl2,_super);function GridCtrl2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(GridCtrl2,"GridCtrl"),GridCtrl2.prototype.setComp=function(view,eGridDiv,eGui){var _this=this;this.view=view,this.eGridHostDiv=eGridDiv,this.eGui=eGui,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:function(){return _this.eGui},isInterestedIn:function(type){return type===DragSourceType.HeaderCell||type===DragSourceType.ToolPanel},getIconName:function(){return DragAndDropService.ICON_NOT_ALLOWED}}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(eGridDiv),this.createManagedBean(new LayoutFeature(this.view)),this.addRtlSupport();var unsubscribeFromResize=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(function(){return unsubscribeFromResize()}),this.ctrlsService.registerGridCtrl(this)},GridCtrl2.prototype.isDetailGrid=function(){var _a,el=this.focusService.findTabbableParent(this.getGui());return((_a=el==null?void 0:el.getAttribute("row-id"))===null||_a===void 0?void 0:_a.startsWith("detail"))||!1},GridCtrl2.prototype.showDropZones=function(){return ModuleRegistry.__isRegistered(ModuleNames.RowGroupingModule,this.context.getGridId())},GridCtrl2.prototype.showSideBar=function(){return ModuleRegistry.__isRegistered(ModuleNames.SideBarModule,this.context.getGridId())},GridCtrl2.prototype.showStatusBar=function(){return ModuleRegistry.__isRegistered(ModuleNames.StatusBarModule,this.context.getGridId())},GridCtrl2.prototype.showWatermark=function(){return ModuleRegistry.__isRegistered(ModuleNames.EnterpriseCoreModule,this.context.getGridId())},GridCtrl2.prototype.onGridSizeChanged=function(){var event={type:Events.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight};this.eventService.dispatchEvent(event)},GridCtrl2.prototype.addRtlSupport=function(){var cssClass=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(cssClass)},GridCtrl2.prototype.destroyGridUi=function(){this.view.destroyGridUi()},GridCtrl2.prototype.getGui=function(){return this.eGui},GridCtrl2.prototype.setResizeCursor=function(on){this.view.setCursor(on?"ew-resize":null)},GridCtrl2.prototype.disableUserSelect=function(on){this.view.setUserSelect(on?"none":null)},GridCtrl2.prototype.focusNextInnerContainer=function(backwards){var eDocument=this.gridOptionsService.getDocument(),focusableContainers=this.view.getFocusableContainers(),idxWithFocus=focusableContainers.findIndex(function(container){return container.contains(eDocument.activeElement)}),nextIdx=idxWithFocus+(backwards?-1:1);return nextIdx<=0||nextIdx>=focusableContainers.length?!1:this.focusService.focusInto(focusableContainers[nextIdx])},GridCtrl2.prototype.focusInnerElement=function(fromBottom){var focusableContainers=this.view.getFocusableContainers(),allColumns=this.columnModel.getAllDisplayedColumns();if(fromBottom){if(focusableContainers.length>1)return this.focusService.focusInto(last(focusableContainers),!0);var lastColumn=last(allColumns);if(this.focusService.focusGridView(lastColumn,!0))return!0}if(this.gridOptionsService.get("headerHeight")===0||this.gridOptionsService.get("suppressHeaderFocus")){if(this.focusService.focusGridView(allColumns[0]))return!0;for(var i=1;i<focusableContainers.length;i++)if(this.focusService.focusInto(focusableContainers[i]))return!0;return!1}return this.focusService.focusFirstHeader()},GridCtrl2.prototype.forceFocusOutOfContainer=function(up){up===void 0&&(up=!1),this.view.forceFocusOutOfContainer(up)},__decorate$Q([Autowired("focusService")],GridCtrl2.prototype,"focusService",void 0),__decorate$Q([Autowired("resizeObserverService")],GridCtrl2.prototype,"resizeObserverService",void 0),__decorate$Q([Autowired("columnModel")],GridCtrl2.prototype,"columnModel",void 0),__decorate$Q([Autowired("ctrlsService")],GridCtrl2.prototype,"ctrlsService",void 0),__decorate$Q([Autowired("mouseEventService")],GridCtrl2.prototype,"mouseEventService",void 0),__decorate$Q([Autowired("dragAndDropService")],GridCtrl2.prototype,"dragAndDropService",void 0),GridCtrl2}(BeanStub),__extends$O=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$P=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$P"),GridComp=function(_super){__extends$O(GridComp2,_super);function GridComp2(eGridDiv){var _this=_super.call(this)||this;return _this.eGridDiv=eGridDiv,_this}return __name(GridComp2,"GridComp"),GridComp2.prototype.postConstruct=function(){var _this=this;this.logger=this.loggerFactory.create("GridComp");var compProxy={destroyGridUi:function(){return _this.destroyBean(_this)},setRtlClass:function(cssClass){return _this.addCssClass(cssClass)},forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:function(value){_this.getGui().style.userSelect=value??"",_this.getGui().style.webkitUserSelect=value??""},setCursor:function(value){_this.getGui().style.cursor=value??""}};this.ctrl=this.createManagedBean(new GridCtrl);var template=this.createTemplate();this.setTemplate(template),this.ctrl.setComp(compProxy,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:function(){},focusInnerElement:function(fromBottom){return _this.ctrl.focusInnerElement(fromBottom)},forceFocusOutWhenTabGuardsAreEmpty:!0})},GridComp2.prototype.insertGridIntoDom=function(){var _this=this,eGui=this.getGui();this.eGridDiv.appendChild(eGui),this.addDestroyFunc(function(){_this.eGridDiv.removeChild(eGui),_this.logger.log("Grid removed from DOM")})},GridComp2.prototype.updateLayoutClasses=function(cssClass,params){var eRootWrapperBodyClassList=this.eRootWrapperBody.classList;eRootWrapperBodyClassList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),eRootWrapperBodyClassList.toggle(LayoutCssClasses.NORMAL,params.normal),eRootWrapperBodyClassList.toggle(LayoutCssClasses.PRINT,params.print),this.addOrRemoveCssClass(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),this.addOrRemoveCssClass(LayoutCssClasses.NORMAL,params.normal),this.addOrRemoveCssClass(LayoutCssClasses.PRINT,params.print)},GridComp2.prototype.createTemplate=function(){var dropZones=this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":"",sideBar=this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':"",statusBar=this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':"",watermark=this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":"",template=`<div class="ag-root-wrapper" role="presentation">
                `.concat(dropZones,`
                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">
                    <ag-grid-body ref="gridBody"></ag-grid-body>
                    `).concat(sideBar,`
                </div>
                `).concat(statusBar,`
                <ag-pagination></ag-pagination>
                `).concat(watermark,`
            </div>`);return template},GridComp2.prototype.getFocusableElement=function(){return this.eRootWrapperBody},GridComp2.prototype.getFocusableContainers=function(){var focusableContainers=[this.gridBodyComp.getGui()];return this.sideBarComp&&focusableContainers.push(this.sideBarComp.getGui()),focusableContainers.filter(function(el){return isVisible(el)})},__decorate$P([Autowired("loggerFactory")],GridComp2.prototype,"loggerFactory",void 0),__decorate$P([RefSelector("gridBody")],GridComp2.prototype,"gridBodyComp",void 0),__decorate$P([RefSelector("sideBar")],GridComp2.prototype,"sideBarComp",void 0),__decorate$P([RefSelector("rootWrapperBody")],GridComp2.prototype,"eRootWrapperBody",void 0),__decorate$P([PostConstruct],GridComp2.prototype,"postConstruct",null),GridComp2}(TabGuardComp),__extends$N=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$O=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$O"),__read$d=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$d"),__spreadArray$b=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$b"),SortController=function(_super){__extends$N(SortController2,_super);function SortController2(){return _super!==null&&_super.apply(this,arguments)||this}__name(SortController2,"SortController"),SortController_1=SortController2,SortController2.prototype.progressSort=function(column,multiSort,source){var nextDirection=this.getNextSortDirection(column);this.setSortForColumn(column,nextDirection,multiSort,source)},SortController2.prototype.setSortForColumn=function(column,sort,multiSort,source){sort!=="asc"&&sort!=="desc"&&(sort=null);var isColumnsSortingCoupledToGroup=this.gridOptionsService.isColumnsSortingCoupledToGroup(),columnsToUpdate=[column];if(isColumnsSortingCoupledToGroup&&column.getColDef().showRowGroup){var rowGroupColumns=this.columnModel.getSourceColumnsForGroupColumn(column),sortableRowGroupColumns=rowGroupColumns==null?void 0:rowGroupColumns.filter(function(col){return col.isSortable()});sortableRowGroupColumns&&(columnsToUpdate=__spreadArray$b([column],__read$d(sortableRowGroupColumns),!1))}columnsToUpdate.forEach(function(col){return col.setSort(sort,source)});var doingMultiSort=(multiSort||this.gridOptionsService.get("alwaysMultiSort"))&&!this.gridOptionsService.get("suppressMultiSort"),updatedColumns=[];if(!doingMultiSort){var clearedColumns=this.clearSortBarTheseColumns(columnsToUpdate,source);updatedColumns.push.apply(updatedColumns,__spreadArray$b([],__read$d(clearedColumns),!1))}this.updateSortIndex(column),updatedColumns.push.apply(updatedColumns,__spreadArray$b([],__read$d(columnsToUpdate),!1)),this.dispatchSortChangedEvents(source,updatedColumns)},SortController2.prototype.updateSortIndex=function(lastColToChange){var isCoupled=this.gridOptionsService.isColumnsSortingCoupledToGroup(),groupParent=this.columnModel.getGroupDisplayColumnForGroup(lastColToChange.getId()),lastSortIndexCol=isCoupled&&groupParent||lastColToChange,allSortedCols=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(col){return col.setSortIndex(null)});var allSortedColsWithoutChangesOrGroups=allSortedCols.filter(function(col){return isCoupled&&col.getColDef().showRowGroup?!1:col!==lastSortIndexCol}),sortedColsWithIndices=lastSortIndexCol.getSort()?__spreadArray$b(__spreadArray$b([],__read$d(allSortedColsWithoutChangesOrGroups),!1),[lastSortIndexCol],!1):allSortedColsWithoutChangesOrGroups;sortedColsWithIndices.forEach(function(col,idx){col.setSortIndex(idx)})},SortController2.prototype.onSortChanged=function(source,columns){this.dispatchSortChangedEvents(source,columns)},SortController2.prototype.isSortActive=function(){var allCols=this.columnModel.getPrimaryAndSecondaryAndAutoColumns(),sortedCols=allCols.filter(function(column){return!!column.getSort()});return sortedCols&&sortedCols.length>0},SortController2.prototype.dispatchSortChangedEvents=function(source,columns){var event={type:Events.EVENT_SORT_CHANGED,source};columns&&(event.columns=columns),this.eventService.dispatchEvent(event)},SortController2.prototype.clearSortBarTheseColumns=function(columnsToSkip,source){var clearedColumns=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(function(columnToClear){columnsToSkip.includes(columnToClear)||(columnToClear.getSort()&&clearedColumns.push(columnToClear),columnToClear.setSort(void 0,source))}),clearedColumns},SortController2.prototype.getNextSortDirection=function(column){var sortingOrder;if(column.getColDef().sortingOrder?sortingOrder=column.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?sortingOrder=this.gridOptionsService.get("sortingOrder"):sortingOrder=SortController_1.DEFAULT_SORTING_ORDER,!Array.isArray(sortingOrder)||sortingOrder.length<=0)return console.warn("AG Grid: sortingOrder must be an array with at least one element, currently it's ".concat(sortingOrder)),null;var currentIndex=sortingOrder.indexOf(column.getSort()),notInArray=currentIndex<0,lastItemInArray=currentIndex==sortingOrder.length-1,result;return notInArray||lastItemInArray?result=sortingOrder[0]:result=sortingOrder[currentIndex+1],SortController_1.DEFAULT_SORTING_ORDER.indexOf(result)<0?(console.warn("AG Grid: invalid sort type "+result),null):result},SortController2.prototype.getIndexedSortMap=function(){var _this=this,allSortedCols=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(function(col){return!!col.getSort()});if(this.columnModel.isPivotMode()){var isSortingLinked_1=this.gridOptionsService.isColumnsSortingCoupledToGroup();allSortedCols=allSortedCols.filter(function(col){var isAggregated=!!col.getAggFunc(),isSecondary=!col.isPrimary(),isGroup=isSortingLinked_1?_this.columnModel.getGroupDisplayColumnForGroup(col.getId()):col.getColDef().showRowGroup;return isAggregated||isSecondary||isGroup})}var sortedRowGroupCols=this.columnModel.getRowGroupColumns().filter(function(col){return!!col.getSort()}),isSortLinked=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!sortedRowGroupCols.length;isSortLinked&&(allSortedCols=__spreadArray$b([],__read$d(new Set(allSortedCols.map(function(col){var _a;return(_a=_this.columnModel.getGroupDisplayColumnForGroup(col.getId()))!==null&&_a!==void 0?_a:col}))),!1));var allColsIndexes={};allSortedCols.forEach(function(col,index){return allColsIndexes[col.getId()]=index}),allSortedCols.sort(function(a,b){var iA=a.getSortIndex(),iB=b.getSortIndex();if(iA!=null&&iB!=null)return iA-iB;if(iA==null&&iB==null){var posA=allColsIndexes[a.getId()],posB=allColsIndexes[b.getId()];return posA>posB?1:-1}else return iB==null?-1:1});var indexMap=new Map;return allSortedCols.forEach(function(col,idx){return indexMap.set(col,idx)}),isSortLinked&&sortedRowGroupCols.forEach(function(col){var groupDisplayCol=_this.columnModel.getGroupDisplayColumnForGroup(col.getId());indexMap.set(col,indexMap.get(groupDisplayCol))}),indexMap},SortController2.prototype.getColumnsWithSortingOrdered=function(){return __spreadArray$b([],__read$d(this.getIndexedSortMap().entries()),!1).sort(function(_a,_b){var _c=__read$d(_a,2);_c[0];var idx1=_c[1],_d=__read$d(_b,2);_d[0];var idx2=_d[1];return idx1-idx2}).map(function(_a){var _b=__read$d(_a,1),col=_b[0];return col})},SortController2.prototype.getSortModel=function(){return this.getColumnsWithSortingOrdered().filter(function(column){return column.getSort()}).map(function(column){return{sort:column.getSort(),colId:column.getId()}})},SortController2.prototype.getSortOptions=function(){return this.getColumnsWithSortingOrdered().filter(function(column){return column.getSort()}).map(function(column){return{sort:column.getSort(),column}})},SortController2.prototype.canColumnDisplayMixedSort=function(column){var isColumnSortCouplingActive=this.gridOptionsService.isColumnsSortingCoupledToGroup(),isGroupDisplayColumn=!!column.getColDef().showRowGroup;return isColumnSortCouplingActive&&isGroupDisplayColumn},SortController2.prototype.getDisplaySortForColumn=function(column){var linkedColumns=this.columnModel.getSourceColumnsForGroupColumn(column);if(!this.canColumnDisplayMixedSort(column)||!(linkedColumns!=null&&linkedColumns.length))return column.getSort();var columnHasUniqueData=column.getColDef().field!=null||!!column.getColDef().valueGetter,sortableColumns=columnHasUniqueData?__spreadArray$b([column],__read$d(linkedColumns),!1):linkedColumns,firstSort=sortableColumns[0].getSort(),allMatch=sortableColumns.every(function(col){return col.getSort()==firstSort});return allMatch?firstSort:"mixed"},SortController2.prototype.getDisplaySortIndexForColumn=function(column){return this.getIndexedSortMap().get(column)};var SortController_1;return SortController2.DEFAULT_SORTING_ORDER=["asc","desc",null],__decorate$O([Autowired("columnModel")],SortController2.prototype,"columnModel",void 0),SortController2=SortController_1=__decorate$O([Bean("sortController")],SortController2),SortController2}(BeanStub),__extends$M=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$5=__name(function(){return __assign$5=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$5.apply(this,arguments)},"__assign$5"),__decorate$N=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$N"),FocusService=function(_super){__extends$M(FocusService2,_super);function FocusService2(){return _super!==null&&_super.apply(this,arguments)||this}__name(FocusService2,"FocusService"),FocusService_1=FocusService2,FocusService2.addKeyboardModeEvents=function(doc){this.instanceCount>0||(doc.addEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.addEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService2.removeKeyboardModeEvents=function(doc){this.instanceCount>0||(doc.addEventListener("keydown",FocusService_1.toggleKeyboardMode),doc.addEventListener("mousedown",FocusService_1.toggleKeyboardMode))},FocusService2.toggleKeyboardMode=function(event){var isKeyboardActive=FocusService_1.keyboardModeActive,isKeyboardEvent=event.type==="keydown";isKeyboardEvent&&(event.ctrlKey||event.metaKey||event.altKey)||isKeyboardActive!==isKeyboardEvent&&(FocusService_1.keyboardModeActive=isKeyboardEvent)},FocusService2.unregisterGridCompController=function(doc){FocusService_1.removeKeyboardModeEvents(doc)},FocusService2.prototype.init=function(){var _this=this,clearFocusedCellListener=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,clearFocusedCellListener),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,clearFocusedCellListener),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(function(p){_this.gridCtrl=p.gridCtrl})},FocusService2.prototype.registerKeyboardFocusEvents=function(){var eDocument=this.gridOptionsService.getDocument();FocusService_1.addKeyboardModeEvents(eDocument),FocusService_1.instanceCount++,this.addDestroyFunc(function(){FocusService_1.instanceCount--,FocusService_1.unregisterGridCompController(eDocument)})},FocusService2.prototype.onColumnEverythingChanged=function(){if(this.focusedCellPosition){var col=this.focusedCellPosition.column,colFromColumnModel=this.columnModel.getGridColumn(col.getId());col!==colFromColumnModel&&this.clearFocusedCell()}},FocusService2.prototype.isKeyboardMode=function(){return FocusService_1.keyboardModeActive},FocusService2.prototype.getFocusCellToUseAfterRefresh=function(){var eDocument=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,RowCtrl.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition},FocusService2.prototype.getFocusHeaderToUseAfterRefresh=function(){var eDocument=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(eDocument.activeElement,AbstractHeaderCellCtrl.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition},FocusService2.prototype.isDomDataMissingInHierarchy=function(eBrowserCell,key){for(var ePointer=eBrowserCell;ePointer;){var data=this.gridOptionsService.getDomData(ePointer,key);if(data)return!1;ePointer=ePointer.parentNode}return!0},FocusService2.prototype.getFocusedCell=function(){return this.focusedCellPosition},FocusService2.prototype.shouldRestoreFocus=function(cell){var _this=this;return this.isCellRestoreFocused(cell)?(setTimeout(function(){_this.restoredFocusedCellPosition=null},0),!0):!1},FocusService2.prototype.isCellRestoreFocused=function(cellPosition){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(cellPosition,this.restoredFocusedCellPosition)},FocusService2.prototype.setRestoreFocusedCell=function(cellPosition){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=cellPosition)},FocusService2.prototype.getFocusEventParams=function(){var _a=this.focusedCellPosition,rowIndex=_a.rowIndex,rowPinned=_a.rowPinned,column=_a.column,params={rowIndex,rowPinned,column,isFullWidthCell:!1},rowCtrl=this.rowRenderer.getRowByPosition({rowIndex,rowPinned});return rowCtrl&&(params.isFullWidthCell=rowCtrl.isFullWidth()),params},FocusService2.prototype.clearFocusedCell=function(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition!=null){var event=__assign$5({type:Events.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(event)}},FocusService2.prototype.setFocusedCell=function(params){var column=params.column,rowIndex=params.rowIndex,rowPinned=params.rowPinned,_a=params.forceBrowserFocus,forceBrowserFocus=_a===void 0?!1:_a,_b=params.preventScrollOnBrowserFocus,preventScrollOnBrowserFocus=_b===void 0?!1:_b,gridColumn=this.columnModel.getGridColumn(column);if(!gridColumn){this.focusedCellPosition=null;return}this.focusedCellPosition=gridColumn?{rowIndex,rowPinned:makeNull(rowPinned),column:gridColumn}:null;var event=__assign$5(__assign$5({type:Events.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus,preventScrollOnBrowserFocus,floating:null});this.eventService.dispatchEvent(event)},FocusService2.prototype.isCellFocused=function(cellPosition){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(cellPosition,this.focusedCellPosition)},FocusService2.prototype.isRowNodeFocused=function(rowNode){return this.isRowFocused(rowNode.rowIndex,rowNode.rowPinned)},FocusService2.prototype.isHeaderWrapperFocused=function(headerCtrl){if(this.focusedHeaderPosition==null)return!1;var column=headerCtrl.getColumnGroupChild(),headerRowIndex=headerCtrl.getRowIndex(),pinned=headerCtrl.getPinned(),_a=this.focusedHeaderPosition,focusedColumn=_a.column,focusedHeaderRowIndex=_a.headerRowIndex;return column===focusedColumn&&headerRowIndex===focusedHeaderRowIndex&&pinned==focusedColumn.getPinned()},FocusService2.prototype.clearFocusedHeader=function(){this.focusedHeaderPosition=null},FocusService2.prototype.getFocusedHeader=function(){return this.focusedHeaderPosition},FocusService2.prototype.setFocusedHeader=function(headerRowIndex,column){this.focusedHeaderPosition={headerRowIndex,column}},FocusService2.prototype.focusHeaderPosition=function(params){if(this.gridOptionsService.get("suppressHeaderFocus"))return!1;var direction=params.direction,fromTab=params.fromTab,allowUserOverride=params.allowUserOverride,event=params.event,fromCell=params.fromCell,rowWithoutSpanValue=params.rowWithoutSpanValue,headerPosition=params.headerPosition;if(fromCell&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(headerPosition);if(allowUserOverride){var currentPosition=this.getFocusedHeader(),headerRowCount=this.headerNavigationService.getHeaderRowCount();if(fromTab){var userFunc=this.gridOptionsService.getCallback("tabToNextHeader");if(userFunc){var params_1={backwards:direction==="Before",previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount};headerPosition=userFunc(params_1)}}else{var userFunc=this.gridOptionsService.getCallback("navigateToNextHeader");if(userFunc&&event){var params_2={key:event.key,previousHeaderPosition:currentPosition,nextHeaderPosition:headerPosition,headerRowCount,event};headerPosition=userFunc(params_2)}}}if(!headerPosition)return!1;if(headerPosition.headerRowIndex===-1)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(headerPosition):this.focusGridView(headerPosition.column);this.headerNavigationService.scrollToColumn(headerPosition.column,direction);var headerRowContainerCtrl=this.ctrlsService.getHeaderRowContainerCtrl(headerPosition.column.getPinned()),focusSuccess=headerRowContainerCtrl.focusHeader(headerPosition.headerRowIndex,headerPosition.column,event);return focusSuccess&&(rowWithoutSpanValue!=null||fromCell)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(rowWithoutSpanValue??-1),focusSuccess},FocusService2.prototype.focusFirstHeader=function(){var firstColumn=this.columnModel.getAllDisplayedColumns()[0];if(!firstColumn)return!1;firstColumn.getParent()&&(firstColumn=this.columnModel.getColumnGroupAtLevel(firstColumn,0));var headerPosition=this.headerPositionUtils.getHeaderIndexToFocus(firstColumn,0);return this.focusHeaderPosition({headerPosition,rowWithoutSpanValue:0})},FocusService2.prototype.focusLastHeader=function(event){var headerRowIndex=this.headerNavigationService.getHeaderRowCount()-1,column=last(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex,column},rowWithoutSpanValue:-1,event})},FocusService2.prototype.focusPreviousFromFirstCell=function(event){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(event)},FocusService2.prototype.isAnyCellFocused=function(){return!!this.focusedCellPosition},FocusService2.prototype.isRowFocused=function(rowIndex,floating){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===rowIndex&&this.focusedCellPosition.rowPinned===makeNull(floating)},FocusService2.prototype.findFocusableElements=function(rootNode,exclude,onlyUnmanaged){onlyUnmanaged===void 0&&(onlyUnmanaged=!1);var focusableString=FOCUSABLE_SELECTOR,excludeString=FOCUSABLE_EXCLUDE;exclude&&(excludeString+=", "+exclude),onlyUnmanaged&&(excludeString+=', [tabindex="-1"]');var nodes=Array.prototype.slice.apply(rootNode.querySelectorAll(focusableString)).filter(function(node){return isVisible(node)}),excludeNodes=Array.prototype.slice.apply(rootNode.querySelectorAll(excludeString));if(!excludeNodes.length)return nodes;var diff=__name(function(a,b){return a.filter(function(element){return b.indexOf(element)===-1})},"diff");return diff(nodes,excludeNodes)},FocusService2.prototype.focusInto=function(rootNode,up,onlyUnmanaged){up===void 0&&(up=!1),onlyUnmanaged===void 0&&(onlyUnmanaged=!1);var focusableElements=this.findFocusableElements(rootNode,null,onlyUnmanaged),toFocus=up?last(focusableElements):focusableElements[0];return toFocus?(toFocus.focus({preventScroll:!0}),!0):!1},FocusService2.prototype.findFocusableElementBeforeTabGuard=function(rootNode,referenceElement){if(!referenceElement)return null;var focusableElements=this.findFocusableElements(rootNode),referenceIndex=focusableElements.indexOf(referenceElement);if(referenceIndex===-1)return null;for(var lastTabGuardIndex=-1,i=referenceIndex-1;i>=0;i--)if(focusableElements[i].classList.contains(TabGuardClassNames.TAB_GUARD_TOP)){lastTabGuardIndex=i;break}return lastTabGuardIndex<=0?null:focusableElements[lastTabGuardIndex-1]},FocusService2.prototype.findNextFocusableElement=function(rootNode,onlyManaged,backwards){rootNode===void 0&&(rootNode=this.eGridDiv);var focusable=this.findFocusableElements(rootNode,onlyManaged?':not([tabindex="-1"])':null),eDocument=this.gridOptionsService.getDocument(),activeEl=eDocument.activeElement,currentIndex;onlyManaged?currentIndex=focusable.findIndex(function(el){return el.contains(activeEl)}):currentIndex=focusable.indexOf(activeEl);var nextIndex=currentIndex+(backwards?-1:1);return nextIndex<0||nextIndex>=focusable.length?null:focusable[nextIndex]},FocusService2.prototype.isTargetUnderManagedComponent=function(rootNode,target){if(!target)return!1;var managedContainers=rootNode.querySelectorAll(".".concat(ManagedFocusFeature.FOCUS_MANAGED_CLASS));if(!managedContainers.length)return!1;for(var i=0;i<managedContainers.length;i++)if(managedContainers[i].contains(target))return!0;return!1},FocusService2.prototype.findTabbableParent=function(node,limit){limit===void 0&&(limit=5);for(var counter=0;node&&getTabIndex(node)===null&&++counter<=limit;)node=node.parentElement;return getTabIndex(node)===null?null:node},FocusService2.prototype.focusGridView=function(column,backwards){if(this.gridOptionsService.get("suppressCellFocus"))return backwards?this.gridOptionsService.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);var nextRow=backwards?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!nextRow)return!1;var rowIndex=nextRow.rowIndex,rowPinned=nextRow.rowPinned,focusedHeader=this.getFocusedHeader();if(!column&&focusedHeader&&(column=focusedHeader.column),rowIndex==null||!column)return!1;if(this.navigationService.ensureCellVisible({rowIndex,column,rowPinned}),this.setFocusedCell({rowIndex,column,rowPinned:makeNull(rowPinned),forceBrowserFocus:!0}),this.rangeService){var cellPosition={rowIndex,rowPinned,column};this.rangeService.setRangeToCell(cellPosition)}return!0},FocusService2.prototype.focusNextGridCoreContainer=function(backwards,forceOut){return forceOut===void 0&&(forceOut=!1),!forceOut&&this.gridCtrl.focusNextInnerContainer(backwards)?!0:((forceOut||!backwards&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(backwards),!1)},FocusService2.prototype.focusAdvancedFilter=function(position){return this.advancedFilterFocusColumn=position==null?void 0:position.column,this.advancedFilterService.getCtrl().focusHeaderComp()},FocusService2.prototype.focusNextFromAdvancedFilter=function(backwards,forceFirstColumn){var _a,_b,column=(_a=forceFirstColumn?void 0:this.advancedFilterFocusColumn)!==null&&_a!==void 0?_a:(_b=this.columnModel.getAllDisplayedColumns())===null||_b===void 0?void 0:_b[0];return backwards?this.focusHeaderPosition({headerPosition:{column,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(column)},FocusService2.prototype.clearAdvancedFilterColumn=function(){this.advancedFilterFocusColumn=void 0};var FocusService_1;return FocusService2.keyboardModeActive=!1,FocusService2.instanceCount=0,__decorate$N([Autowired("eGridDiv")],FocusService2.prototype,"eGridDiv",void 0),__decorate$N([Autowired("columnModel")],FocusService2.prototype,"columnModel",void 0),__decorate$N([Autowired("headerNavigationService")],FocusService2.prototype,"headerNavigationService",void 0),__decorate$N([Autowired("headerPositionUtils")],FocusService2.prototype,"headerPositionUtils",void 0),__decorate$N([Autowired("rowRenderer")],FocusService2.prototype,"rowRenderer",void 0),__decorate$N([Autowired("rowPositionUtils")],FocusService2.prototype,"rowPositionUtils",void 0),__decorate$N([Autowired("cellPositionUtils")],FocusService2.prototype,"cellPositionUtils",void 0),__decorate$N([Optional("rangeService")],FocusService2.prototype,"rangeService",void 0),__decorate$N([Autowired("navigationService")],FocusService2.prototype,"navigationService",void 0),__decorate$N([Autowired("ctrlsService")],FocusService2.prototype,"ctrlsService",void 0),__decorate$N([Autowired("filterManager")],FocusService2.prototype,"filterManager",void 0),__decorate$N([Optional("advancedFilterService")],FocusService2.prototype,"advancedFilterService",void 0),__decorate$N([PostConstruct],FocusService2.prototype,"init",null),FocusService2=FocusService_1=__decorate$N([Bean("focusService")],FocusService2),FocusService2}(BeanStub),__extends$L=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$M=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$M"),ColumnHoverService=function(_super){__extends$L(ColumnHoverService2,_super);function ColumnHoverService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ColumnHoverService2,"ColumnHoverService"),ColumnHoverService2.prototype.setMouseOver=function(columns){this.selectedColumns=columns;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(event)},ColumnHoverService2.prototype.clearMouseOver=function(){this.selectedColumns=null;var event={type:Events.EVENT_COLUMN_HOVER_CHANGED};this.eventService.dispatchEvent(event)},ColumnHoverService2.prototype.isHovered=function(column){return!!this.selectedColumns&&this.selectedColumns.indexOf(column)>=0},ColumnHoverService2=__decorate$M([Bean("columnHoverService")],ColumnHoverService2),ColumnHoverService2}(BeanStub),__extends$K=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$L=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$L"),ColumnAnimationService=function(_super){__extends$K(ColumnAnimationService2,_super);function ColumnAnimationService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.executeNextFuncs=[],_this.executeLaterFuncs=[],_this.active=!1,_this.suppressAnimation=!1,_this.animationThreadCount=0,_this}return __name(ColumnAnimationService2,"ColumnAnimationService"),ColumnAnimationService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){return _this.gridBodyCtrl=p.gridBodyCtrl})},ColumnAnimationService2.prototype.isActive=function(){return this.active&&!this.suppressAnimation},ColumnAnimationService2.prototype.setSuppressAnimation=function(suppress){this.suppressAnimation=suppress},ColumnAnimationService2.prototype.start=function(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)},ColumnAnimationService2.prototype.finish=function(){var _this=this;this.active&&this.flush(function(){_this.active=!1})},ColumnAnimationService2.prototype.executeNextVMTurn=function(func){this.active?this.executeNextFuncs.push(func):func()},ColumnAnimationService2.prototype.executeLaterVMTurn=function(func){this.active?this.executeLaterFuncs.push(func):func()},ColumnAnimationService2.prototype.ensureAnimationCssClassPresent=function(){var _this=this;this.animationThreadCount++;var animationThreadCountCopy=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(function(){_this.animationThreadCount===animationThreadCountCopy&&_this.gridBodyCtrl.setColumnMovingCss(!1)})},ColumnAnimationService2.prototype.flush=function(callback){var _this=this;if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){callback();return}var runFuncs=__name(function(queue){for(;queue.length;){var func=queue.pop();func&&func()}},"runFuncs");this.getFrameworkOverrides().wrapIncoming(function(){window.setTimeout(function(){return runFuncs(_this.executeNextFuncs)},0),window.setTimeout(function(){runFuncs(_this.executeLaterFuncs),callback()},200)})},__decorate$L([Autowired("ctrlsService")],ColumnAnimationService2.prototype,"ctrlsService",void 0),__decorate$L([PostConstruct],ColumnAnimationService2.prototype,"postConstruct",null),ColumnAnimationService2=__decorate$L([Bean("columnAnimationService")],ColumnAnimationService2),ColumnAnimationService2}(BeanStub),__extends$J=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$K=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$K"),PaginationAutoPageSizeService=function(_super){__extends$J(PaginationAutoPageSizeService2,_super);function PaginationAutoPageSizeService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(PaginationAutoPageSizeService2,"PaginationAutoPageSizeService"),PaginationAutoPageSizeService2.prototype.postConstruct=function(){var _this=this;this.ctrlsService.whenReady(function(p){_this.centerRowContainerCon=p.centerRowContainerCtrl,_this.addManagedListener(_this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,_this.checkPageSize.bind(_this)),_this.addManagedListener(_this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,_this.checkPageSize.bind(_this)),_this.addManagedPropertyListener("paginationAutoPageSize",_this.onPaginationAutoSizeChanged.bind(_this)),_this.checkPageSize()})},PaginationAutoPageSizeService2.prototype.notActive=function(){return!this.gridOptionsService.get("paginationAutoPageSize")||this.centerRowContainerCon==null},PaginationAutoPageSizeService2.prototype.onPaginationAutoSizeChanged=function(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()},PaginationAutoPageSizeService2.prototype.checkPageSize=function(){var _this=this;if(!this.notActive()){var bodyHeight=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(bodyHeight>0){var update_1=__name(function(){var rowHeight=_this.gridOptionsService.getRowHeightAsNumber(),newPageSize=Math.floor(bodyHeight/rowHeight);_this.paginationProxy.setPageSize(newPageSize,"autoCalculated")},"update_1");this.isBodyRendered?debounce(function(){return update_1()},50)():(update_1(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}},__decorate$K([Autowired("ctrlsService")],PaginationAutoPageSizeService2.prototype,"ctrlsService",void 0),__decorate$K([Autowired("paginationProxy")],PaginationAutoPageSizeService2.prototype,"paginationProxy",void 0),__decorate$K([PostConstruct],PaginationAutoPageSizeService2.prototype,"postConstruct",null),PaginationAutoPageSizeService2=__decorate$K([Bean("paginationAutoPageSizeService")],PaginationAutoPageSizeService2),PaginationAutoPageSizeService2}(BeanStub),__extends$I=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$J=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$J"),ValueCache=function(_super){__extends$I(ValueCache2,_super);function ValueCache2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.cacheVersion=0,_this}return __name(ValueCache2,"ValueCache"),ValueCache2.prototype.init=function(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")},ValueCache2.prototype.onDataChanged=function(){this.neverExpires||this.expire()},ValueCache2.prototype.expire=function(){this.cacheVersion++},ValueCache2.prototype.setValue=function(rowNode,colId,value){this.active&&(rowNode.__cacheVersion!==this.cacheVersion&&(rowNode.__cacheVersion=this.cacheVersion,rowNode.__cacheData={}),rowNode.__cacheData[colId]=value)},ValueCache2.prototype.getValue=function(rowNode,colId){if(!(!this.active||rowNode.__cacheVersion!==this.cacheVersion))return rowNode.__cacheData[colId]},__decorate$J([PostConstruct],ValueCache2.prototype,"init",null),ValueCache2=__decorate$J([Bean("valueCache")],ValueCache2),ValueCache2}(BeanStub),__extends$H=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$I=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$I"),SOURCE_PASTE="paste",ChangeDetectionService=function(_super){__extends$H(ChangeDetectionService2,_super);function ChangeDetectionService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ChangeDetectionService2,"ChangeDetectionService"),ChangeDetectionService2.prototype.init=function(){this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))},ChangeDetectionService2.prototype.onCellValueChanged=function(event){event.source!==SOURCE_PASTE&&this.doChangeDetection(event.node,event.column)},ChangeDetectionService2.prototype.doChangeDetection=function(rowNode,column){if(!this.gridOptionsService.get("suppressChangeDetection")){var nodesToRefresh=[rowNode];if(this.clientSideRowModel&&!rowNode.isRowPinned()){var onlyChangedColumns=this.gridOptionsService.get("aggregateOnlyChangedColumns"),changedPath=new ChangedPath(onlyChangedColumns,this.clientSideRowModel.getRootNode());changedPath.addParentNode(rowNode.parent,[column]),this.clientSideRowModel.doAggregate(changedPath),changedPath.forEachChangedNodeDepthFirst(function(rowNode2){nodesToRefresh.push(rowNode2)})}this.rowRenderer.refreshCells({rowNodes:nodesToRefresh})}},__decorate$I([Autowired("rowModel")],ChangeDetectionService2.prototype,"rowModel",void 0),__decorate$I([Autowired("rowRenderer")],ChangeDetectionService2.prototype,"rowRenderer",void 0),__decorate$I([PostConstruct],ChangeDetectionService2.prototype,"init",null),ChangeDetectionService2=__decorate$I([Bean("changeDetectionService")],ChangeDetectionService2),ChangeDetectionService2}(BeanStub),__extends$G=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$H=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$H"),AgComponentUtils=function(_super){__extends$G(AgComponentUtils2,_super);function AgComponentUtils2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(AgComponentUtils2,"AgComponentUtils"),AgComponentUtils2.prototype.adaptFunction=function(propertyName,jsCompFunc){var metadata=this.componentMetadataProvider.retrieve(propertyName);return metadata&&metadata.functionAdapter?metadata.functionAdapter(jsCompFunc):null},AgComponentUtils2.prototype.adaptCellRendererFunction=function(callback){var Adapter=function(){function Adapter2(){}return __name(Adapter2,"Adapter"),Adapter2.prototype.refresh=function(params){return!1},Adapter2.prototype.getGui=function(){return this.eGui},Adapter2.prototype.init=function(params){var callbackResult=callback(params),type=typeof callbackResult;if(type==="string"||type==="number"||type==="boolean"){this.eGui=loadTemplate("<span>"+callbackResult+"</span>");return}if(callbackResult==null){this.eGui=loadTemplate("<span></span>");return}this.eGui=callbackResult},Adapter2}();return Adapter},AgComponentUtils2.prototype.doesImplementIComponent=function(candidate){return candidate?candidate.prototype&&"getGui"in candidate.prototype:!1},__decorate$H([Autowired("componentMetadataProvider")],AgComponentUtils2.prototype,"componentMetadataProvider",void 0),AgComponentUtils2=__decorate$H([Bean("agComponentUtils")],AgComponentUtils2),AgComponentUtils2}(BeanStub),__extends$F=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$G=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$G"),ComponentMetadataProvider=function(_super){__extends$F(ComponentMetadataProvider2,_super);function ComponentMetadataProvider2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ComponentMetadataProvider2,"ComponentMetadataProvider"),ComponentMetadataProvider2.prototype.postConstruct=function(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}},ComponentMetadataProvider2.prototype.retrieve=function(name){return this.componentMetaData[name]},__decorate$G([Autowired("agComponentUtils")],ComponentMetadataProvider2.prototype,"agComponentUtils",void 0),__decorate$G([PostConstruct],ComponentMetadataProvider2.prototype,"postConstruct",null),ComponentMetadataProvider2=__decorate$G([Bean("componentMetadataProvider")],ComponentMetadataProvider2),ComponentMetadataProvider2}(BeanStub),__extends$E=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$F=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$F"),__read$c=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$c"),__spreadArray$a=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$a"),DEFAULT_ROW_HEIGHT=25,MIN_COL_WIDTH=10,MAT_GRID_SIZE=8,BASE_GRID_SIZE=4,BALHAM_GRID_SIZE=4,ALPINE_GRID_SIZE=6,QUARTZ_ICON_SIZE=16,QUARTZ_FONT_SIZE=14,QUARTZ_GRID_SIZE=8,HARD_CODED_SIZES={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:BASE_GRID_SIZE*5,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:MAT_GRID_SIZE*7,headerCellMinWidth:48,listItemHeight:MAT_GRID_SIZE*4,rowHeight:MAT_GRID_SIZE*6,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:BALHAM_GRID_SIZE*8,headerCellMinWidth:24,listItemHeight:BALHAM_GRID_SIZE*6,rowHeight:BALHAM_GRID_SIZE*7,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:ALPINE_GRID_SIZE*8,headerCellMinWidth:36,listItemHeight:ALPINE_GRID_SIZE*4,rowHeight:ALPINE_GRID_SIZE*7,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:QUARTZ_FONT_SIZE+QUARTZ_GRID_SIZE*4.25,headerCellMinWidth:36,listItemHeight:QUARTZ_ICON_SIZE+QUARTZ_GRID_SIZE,rowHeight:QUARTZ_FONT_SIZE+QUARTZ_GRID_SIZE*3.5,chartMenuPanelWidth:260}},SASS_PROPERTY_BUILDER={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]},Environment=function(_super){__extends$E(Environment2,_super);function Environment2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.calculatedSizes={},_this}return __name(Environment2,"Environment"),Environment2.prototype.postConstruct=function(){var _this=this,_a,el=(_a=this.getTheme().el)!==null&&_a!==void 0?_a:this.eGridDiv;this.addManagedPropertyListener("rowHeight",function(){return _this.refreshRowHeightVariable()}),this.mutationObserver=new MutationObserver(function(){_this.calculatedSizes={},_this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(el||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})},Environment2.prototype.fireGridStylesChangedEvent=function(){var event={type:Events.EVENT_GRID_STYLES_CHANGED};this.eventService.dispatchEvent(event)},Environment2.prototype.getSassVariable=function(key){var _a=this.getTheme(),themeFamily=_a.themeFamily,el=_a.el;if(!(!themeFamily||themeFamily.indexOf("ag-theme")!==0)){this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[themeFamily]||(this.calculatedSizes[themeFamily]={});var size=this.calculatedSizes[themeFamily][key];return size??(this.calculatedSizes[themeFamily][key]=this.calculateValueForSassProperty(key,themeFamily,el),this.calculatedSizes[themeFamily][key])}},Environment2.prototype.calculateValueForSassProperty=function(property,theme,themeElement){var _a,useTheme="ag-theme-"+(theme.match("material")?"material":theme.match("balham")?"balham":theme.match("alpine")?"alpine":"custom"),defaultValue=HARD_CODED_SIZES[useTheme][property],eDocument=this.gridOptionsService.getDocument();if(themeElement||(themeElement=this.eGridDiv),!SASS_PROPERTY_BUILDER[property])return defaultValue;var classList=SASS_PROPERTY_BUILDER[property],div=eDocument.createElement("div"),classesFromThemeElement=Array.from(themeElement.classList);(_a=div.classList).add.apply(_a,__spreadArray$a([theme],__read$c(classesFromThemeElement),!1)),div.style.position="absolute";var el=classList.reduce(function(prevEl,currentClass){var currentDiv=eDocument.createElement("div");return currentDiv.style.position="static",currentDiv.classList.add(currentClass),prevEl.appendChild(currentDiv),currentDiv},div),calculatedValue=0;if(eDocument.body){eDocument.body.appendChild(div);var sizeName=property.toLowerCase().indexOf("height")!==-1?"height":"width";calculatedValue=parseInt(window.getComputedStyle(el)[sizeName],10),eDocument.body.removeChild(div)}return calculatedValue||defaultValue},Environment2.prototype.isThemeDark=function(){var theme=this.getTheme().theme;return!!theme&&theme.indexOf("dark")>=0},Environment2.prototype.chartMenuPanelWidth=function(){return this.getSassVariable("chartMenuPanelWidth")},Environment2.prototype.getTheme=function(){for(var reg=/\bag-(material|(?:theme-([\w\-]*)))\b/g,el=this.eGridDiv,themeMatch=null,allThemes=[];el;)if(themeMatch=reg.exec(el.className),!themeMatch)el=el.parentElement||void 0;else{var matched=el.className.match(reg);matched&&(allThemes=matched);break}if(!themeMatch)return{allThemes};var theme=themeMatch[0];return{theme,el,themeFamily:theme.replace(/-dark$/,""),allThemes}},Environment2.prototype.getFromTheme=function(defaultValue,sassVariableName){var _a;return(_a=this.getSassVariable(sassVariableName))!==null&&_a!==void 0?_a:defaultValue},Environment2.prototype.getDefaultRowHeight=function(){return this.getFromTheme(DEFAULT_ROW_HEIGHT,"rowHeight")},Environment2.prototype.getListItemHeight=function(){return this.getFromTheme(20,"listItemHeight")},Environment2.prototype.refreshRowHeightVariable=function(){var oldRowHeight=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),height=this.gridOptionsService.get("rowHeight");if(height==null||isNaN(height)||!isFinite(height))return oldRowHeight!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;var newRowHeight="".concat(height,"px");return oldRowHeight!=newRowHeight?(this.eGridDiv.style.setProperty("--ag-line-height",newRowHeight),height):oldRowHeight!=""?parseFloat(oldRowHeight):-1},Environment2.prototype.getMinColWidth=function(){var measuredMin=this.getFromTheme(null,"headerCellMinWidth");return exists(measuredMin)?Math.max(measuredMin,MIN_COL_WIDTH):MIN_COL_WIDTH},Environment2.prototype.destroy=function(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),_super.prototype.destroy.call(this)},__decorate$F([Autowired("eGridDiv")],Environment2.prototype,"eGridDiv",void 0),__decorate$F([PostConstruct],Environment2.prototype,"postConstruct",null),Environment2=__decorate$F([Bean("environment")],Environment2),Environment2}(BeanStub),__extends$D=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$E=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$E"),__param$1=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param$1"),RowContainerHeightService=function(_super){__extends$D(RowContainerHeightService2,_super);function RowContainerHeightService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.scrollY=0,_this.uiBodyHeight=0,_this}return __name(RowContainerHeightService2,"RowContainerHeightService"),RowContainerHeightService2.prototype.agWire=function(loggerFactory){this.logger=loggerFactory.create("RowContainerHeightService")},RowContainerHeightService2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=getMaxDivHeight(),this.logger.log("maxDivHeight = "+this.maxDivHeight)},RowContainerHeightService2.prototype.isStretching=function(){return this.stretching},RowContainerHeightService2.prototype.getDivStretchOffset=function(){return this.divStretchOffset},RowContainerHeightService2.prototype.updateOffset=function(){if(this.stretching){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),newScrollY=gridBodyCon.getScrollFeature().getVScrollPosition().top,newBodyHeight=this.getUiBodyHeight(),atLeastOneChanged=newScrollY!==this.scrollY||newBodyHeight!==this.uiBodyHeight;atLeastOneChanged&&(this.scrollY=newScrollY,this.uiBodyHeight=newBodyHeight,this.calculateOffset())}},RowContainerHeightService2.prototype.calculateOffset=function(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;var scrollPercent=this.scrollY/this.maxScrollY,divStretchOffset=scrollPercent*this.pixelsToShave;this.logger.log("Div Stretch Offset = ".concat(divStretchOffset," (").concat(this.pixelsToShave," * ").concat(scrollPercent,")")),this.setDivStretchOffset(divStretchOffset)},RowContainerHeightService2.prototype.setUiContainerHeight=function(height){height!==this.uiContainerHeight&&(this.uiContainerHeight=height,this.eventService.dispatchEvent({type:Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))},RowContainerHeightService2.prototype.clearOffset=function(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)},RowContainerHeightService2.prototype.setDivStretchOffset=function(newOffset){var newOffsetFloor=typeof newOffset=="number"?Math.floor(newOffset):null;this.divStretchOffset!==newOffsetFloor&&(this.divStretchOffset=newOffsetFloor,this.eventService.dispatchEvent({type:Events.EVENT_HEIGHT_SCALE_CHANGED}))},RowContainerHeightService2.prototype.setModelHeight=function(modelHeight){this.modelHeight=modelHeight,this.stretching=modelHeight!=null&&this.maxDivHeight>0&&modelHeight>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()},RowContainerHeightService2.prototype.getUiContainerHeight=function(){return this.uiContainerHeight},RowContainerHeightService2.prototype.getRealPixelPosition=function(modelPixel){return modelPixel-this.divStretchOffset},RowContainerHeightService2.prototype.getUiBodyHeight=function(){var gridBodyCon=this.ctrlsService.getGridBodyCtrl(),pos=gridBodyCon.getScrollFeature().getVScrollPosition();return pos.bottom-pos.top},RowContainerHeightService2.prototype.getScrollPositionForPixel=function(rowTop){if(this.pixelsToShave<=0)return rowTop;var modelMaxScroll=this.modelHeight-this.getUiBodyHeight(),scrollPercent=rowTop/modelMaxScroll,scrollPixel=this.maxScrollY*scrollPercent;return scrollPixel},__decorate$E([Autowired("ctrlsService")],RowContainerHeightService2.prototype,"ctrlsService",void 0),__decorate$E([__param$1(0,Qualifier("loggerFactory"))],RowContainerHeightService2.prototype,"agWire",null),__decorate$E([PostConstruct],RowContainerHeightService2.prototype,"postConstruct",null),RowContainerHeightService2=__decorate$E([Bean("rowContainerHeightService")],RowContainerHeightService2),RowContainerHeightService2}(BeanStub),__extends$C=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$D=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$D"),SelectableService=function(_super){__extends$C(SelectableService2,_super);function SelectableService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(SelectableService2,"SelectableService"),SelectableService2.prototype.init=function(){var _this=this;this.addManagedPropertyListener("isRowSelectable",function(){return _this.updateSelectable()})},SelectableService2.prototype.updateSelectableAfterGrouping=function(){this.updateSelectable(!0)},SelectableService2.prototype.updateSelectable=function(skipLeafNodes){skipLeafNodes===void 0&&(skipLeafNodes=!1);var isRowSelecting=!!this.gridOptionsService.get("rowSelection"),isRowSelectable=this.gridOptionsService.get("isRowSelectable");if(!(!isRowSelecting||!isRowSelectable)){var isGroupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),isCsrmGroupSelectsChildren=this.rowModel.getType()==="clientSide"&&isGroupSelectsChildren,nodesToDeselect=[],nodeCallback=__name(function(node){if(!(skipLeafNodes&&!node.group)){if(isCsrmGroupSelectsChildren&&node.group){var hasSelectableChild=node.childrenAfterGroup.some(function(rowNode){return rowNode.selectable===!0});node.setRowSelectable(hasSelectableChild,!0);return}var rowSelectable=isRowSelectable?isRowSelectable(node):!0;node.setRowSelectable(rowSelectable,!0),!rowSelectable&&node.isSelected()&&nodesToDeselect.push(node)}},"nodeCallback");if(isCsrmGroupSelectsChildren){var csrm=this.rowModel,changedPath=new ChangedPath(!1,csrm.getRootNode());changedPath.forEachChangedNodeDepthFirst(nodeCallback,!0,!0)}else this.rowModel.forEachNode(nodeCallback);nodesToDeselect.length&&this.selectionService.setNodesSelected({nodes:nodesToDeselect,newValue:!1,source:"selectableChanged"}),isCsrmGroupSelectsChildren&&this.selectionService instanceof SelectionService&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},__decorate$D([Autowired("rowModel")],SelectableService2.prototype,"rowModel",void 0),__decorate$D([Autowired("selectionService")],SelectableService2.prototype,"selectionService",void 0),__decorate$D([PostConstruct],SelectableService2.prototype,"init",null),SelectableService2=__decorate$D([Bean("selectableService")],SelectableService2),SelectableService2}(BeanStub),__extends$B=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$C=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$C"),PaginationComp=function(_super){__extends$B(PaginationComp2,_super);function PaginationComp2(){var _this=_super.call(this)||this;return _this.previousAndFirstButtonsDisabled=!1,_this.nextButtonDisabled=!1,_this.lastButtonDisabled=!1,_this.areListenersSetup=!1,_this}return __name(PaginationComp2,"PaginationComp"),PaginationComp2.prototype.postConstruct=function(){var _this=this,isRtl=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());var _a=this,btFirst=_a.btFirst,btPrevious=_a.btPrevious,btNext=_a.btNext,btLast=_a.btLast;_a.pageSizeComp,this.activateTabIndex([btFirst,btPrevious,btNext,btLast]),btFirst.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"last":"first",this.gridOptionsService)),btPrevious.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"next":"previous",this.gridOptionsService)),btNext.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"previous":"next",this.gridOptionsService)),btLast.insertAdjacentElement("afterbegin",createIconNoSpan(isRtl?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],function(){return _this.onPageSizeRelatedOptionsChange()}),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()},PaginationComp2.prototype.onPaginationChanged=function(){var isPaging=this.gridOptionsService.get("pagination"),paginationPanelEnabled=isPaging&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(paginationPanelEnabled),paginationPanelEnabled&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())},PaginationComp2.prototype.onPageSizeRelatedOptionsChange=function(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())},PaginationComp2.prototype.setupListeners=function(){var _this=this;this.areListenersSetup||(this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(function(item){var el=item.el,fn=item.fn;_this.addManagedListener(el,"click",fn),_this.addManagedListener(el,"keydown",function(e){(e.key===KeyCode.ENTER||e.key===KeyCode.SPACE)&&(e.preventDefault(),fn())})}),this.areListenersSetup=!0)},PaginationComp2.prototype.onBtFirst=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()},PaginationComp2.prototype.setCurrentPageLabel=function(){var pagesExist=this.paginationProxy.getTotalPages()>0,currentPage=this.paginationProxy.getCurrentPage(),toDisplay=pagesExist?currentPage+1:0;this.lbCurrent.textContent=this.formatNumber(toDisplay)},PaginationComp2.prototype.formatNumber=function(value){var userFunc=this.gridOptionsService.getCallback("paginationNumberFormatter");if(userFunc){var params={value};return userFunc(params)}var localeTextFunc=this.localeService.getLocaleTextFunc(),thousandSeparator=localeTextFunc("thousandSeparator",","),decimalSeparator=localeTextFunc("decimalSeparator",".");return formatNumberCommas(value,thousandSeparator,decimalSeparator)},PaginationComp2.prototype.getTemplate=function(){var localeTextFunc=this.localeService.getLocaleTextFunc(),strPage=localeTextFunc("page","Page"),strTo=localeTextFunc("to","to"),strOf=localeTextFunc("of","of"),strFirst=localeTextFunc("firstPage","First Page"),strPrevious=localeTextFunc("previousPage","Previous Page"),strNext=localeTextFunc("nextPage","Next Page"),strLast=localeTextFunc("lastPage","Last Page"),compId=this.getCompId();return'<div class="ag-paging-panel ag-unselectable" id="ag-'.concat(compId,`">
                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel" role="status">
                    <span id="ag-`).concat(compId,`-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`).concat(compId,'-to">').concat(strTo,`</span>
                    <span id="ag-`).concat(compId,`-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-`).concat(compId,'-of">').concat(strOf,`</span>
                    <span id="ag-`).concat(compId,`-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="`).concat(strFirst,`"></div>
                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="`).concat(strPrevious,`"></div>
                    <span class="ag-paging-description" role="status">
                        <span id="ag-`).concat(compId,'-start-page">').concat(strPage,`</span>
                        <span id="ag-`).concat(compId,`-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-`).concat(compId,'-of-page">').concat(strOf,`</span>
                        <span id="ag-`).concat(compId,`-of-page-number" ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="`).concat(strNext,`"></div>
                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="`).concat(strLast,`"></div>
                </span>
            </div>`)},PaginationComp2.prototype.onBtNext=function(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()},PaginationComp2.prototype.onBtPrevious=function(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()},PaginationComp2.prototype.onBtLast=function(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()},PaginationComp2.prototype.enableOrDisableButtons=function(){var currentPage=this.paginationProxy.getCurrentPage(),maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=currentPage===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);var zeroPagesToDisplay=this.isZeroPagesToDisplay(),onLastPage=currentPage===totalPages-1;this.nextButtonDisabled=onLastPage||zeroPagesToDisplay,this.lastButtonDisabled=!maxRowFound||zeroPagesToDisplay||currentPage===totalPages-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)},PaginationComp2.prototype.toggleButtonDisabled=function(button,disabled){setAriaDisabled(button,disabled),button.classList.toggle("ag-disabled",disabled)},PaginationComp2.prototype.updateRowLabels=function(){var currentPage=this.paginationProxy.getCurrentPage(),pageSize=this.paginationProxy.getPageSize(),maxRowFound=this.paginationProxy.isLastPageFound(),rowCount=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null,startRow,endRow;if(this.isZeroPagesToDisplay()?startRow=endRow=0:(startRow=pageSize*currentPage+1,endRow=startRow+pageSize-1,maxRowFound&&endRow>rowCount&&(endRow=rowCount)),this.lbFirstRowOnPage.textContent=this.formatNumber(startRow),this.rowNodeBlockLoader.isLoading()){var translate=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=translate("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(endRow)},PaginationComp2.prototype.isZeroPagesToDisplay=function(){var maxRowFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages();return maxRowFound&&totalPages===0},PaginationComp2.prototype.setTotalLabels=function(){var lastPageFound=this.paginationProxy.isLastPageFound(),totalPages=this.paginationProxy.getTotalPages(),rowCount=lastPageFound?this.paginationProxy.getMasterRowCount():null;if(rowCount===1){var firstRow=this.paginationProxy.getRow(0),hiddenGroupRow=firstRow&&firstRow.group&&!(firstRow.groupData||firstRow.aggData);if(hiddenGroupRow){this.setTotalLabelsToZero();return}}if(lastPageFound)this.lbTotal.textContent=this.formatNumber(totalPages),this.lbRecordCount.textContent=this.formatNumber(rowCount);else{var moreText=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=moreText,this.lbRecordCount.innerHTML=moreText}},PaginationComp2.prototype.setTotalLabelsToZero=function(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)},__decorate$C([Autowired("paginationProxy")],PaginationComp2.prototype,"paginationProxy",void 0),__decorate$C([Autowired("rowNodeBlockLoader")],PaginationComp2.prototype,"rowNodeBlockLoader",void 0),__decorate$C([RefSelector("btFirst")],PaginationComp2.prototype,"btFirst",void 0),__decorate$C([RefSelector("btPrevious")],PaginationComp2.prototype,"btPrevious",void 0),__decorate$C([RefSelector("btNext")],PaginationComp2.prototype,"btNext",void 0),__decorate$C([RefSelector("btLast")],PaginationComp2.prototype,"btLast",void 0),__decorate$C([RefSelector("lbRecordCount")],PaginationComp2.prototype,"lbRecordCount",void 0),__decorate$C([RefSelector("lbFirstRowOnPage")],PaginationComp2.prototype,"lbFirstRowOnPage",void 0),__decorate$C([RefSelector("lbLastRowOnPage")],PaginationComp2.prototype,"lbLastRowOnPage",void 0),__decorate$C([RefSelector("lbCurrent")],PaginationComp2.prototype,"lbCurrent",void 0),__decorate$C([RefSelector("lbTotal")],PaginationComp2.prototype,"lbTotal",void 0),__decorate$C([RefSelector("pageSizeComp")],PaginationComp2.prototype,"pageSizeComp",void 0),__decorate$C([PostConstruct],PaginationComp2.prototype,"postConstruct",null),PaginationComp2}(Component),__extends$A=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$B=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$B"),OverlayWrapperComponent=function(_super){__extends$A(OverlayWrapperComponent2,_super);function OverlayWrapperComponent2(){var _this=_super.call(this,OverlayWrapperComponent2.TEMPLATE)||this;return _this.inProgress=!1,_this.destroyRequested=!1,_this}return __name(OverlayWrapperComponent2,"OverlayWrapperComponent"),OverlayWrapperComponent2.prototype.updateLayoutClasses=function(cssClass,params){var overlayWrapperClassList=this.eOverlayWrapper.classList;overlayWrapperClassList.toggle(LayoutCssClasses.AUTO_HEIGHT,params.autoHeight),overlayWrapperClassList.toggle(LayoutCssClasses.NORMAL,params.normal),overlayWrapperClassList.toggle(LayoutCssClasses.PRINT,params.print)},OverlayWrapperComponent2.prototype.postConstruct=function(){this.createManagedBean(new LayoutFeature(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)},OverlayWrapperComponent2.prototype.setWrapperTypeClass=function(overlayWrapperCssClass){var overlayWrapperClassList=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&overlayWrapperClassList.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=overlayWrapperCssClass,overlayWrapperClassList.toggle(overlayWrapperCssClass,!0)},OverlayWrapperComponent2.prototype.showOverlay=function(overlayComp,overlayWrapperCssClass,updateListenerDestroyFunc){var _this=this;this.inProgress||(this.setWrapperTypeClass(overlayWrapperCssClass),this.destroyActiveOverlay(),this.inProgress=!0,overlayComp&&overlayComp.then(function(comp){_this.inProgress=!1,_this.eOverlayWrapper.appendChild(comp.getGui()),_this.activeOverlay=comp,_this.updateListenerDestroyFunc=updateListenerDestroyFunc,_this.destroyRequested&&(_this.destroyRequested=!1,_this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))},OverlayWrapperComponent2.prototype.destroyActiveOverlay=function(){var _a;if(this.inProgress){this.destroyRequested=!0;return}this.activeOverlay&&(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),(_a=this.updateListenerDestroyFunc)===null||_a===void 0||_a.call(this),clearElement(this.eOverlayWrapper))},OverlayWrapperComponent2.prototype.hideOverlay=function(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})},OverlayWrapperComponent2.prototype.destroy=function(){this.destroyActiveOverlay(),_super.prototype.destroy.call(this)},OverlayWrapperComponent2.TEMPLATE=`
        <div class="ag-overlay" role="presentation">
            <div class="ag-overlay-panel" role="presentation">
                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>
            </div>
        </div>`,__decorate$B([Autowired("overlayService")],OverlayWrapperComponent2.prototype,"overlayService",void 0),__decorate$B([RefSelector("eOverlayWrapper")],OverlayWrapperComponent2.prototype,"eOverlayWrapper",void 0),__decorate$B([PostConstruct],OverlayWrapperComponent2.prototype,"postConstruct",null),OverlayWrapperComponent2}(Component),__extends$z=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$A=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$A"),RowPositionUtils=function(_super){__extends$z(RowPositionUtils2,_super);function RowPositionUtils2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(RowPositionUtils2,"RowPositionUtils"),RowPositionUtils2.prototype.getFirstRow=function(){var rowIndex=0,rowPinned;return this.pinnedRowModel.getPinnedTopRowCount()?rowPinned="top":this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(rowPinned="bottom"),rowPinned===void 0?null:{rowIndex,rowPinned}},RowPositionUtils2.prototype.getLastRow=function(){var rowIndex,rowPinned=null,pinnedBottomCount=this.pinnedRowModel.getPinnedBottomRowCount(),pinnedTopCount=this.pinnedRowModel.getPinnedTopRowCount();return pinnedBottomCount?(rowPinned="bottom",rowIndex=pinnedBottomCount-1):this.rowModel.getRowCount()?(rowPinned=null,rowIndex=this.paginationProxy.getPageLastRow()):pinnedTopCount&&(rowPinned="top",rowIndex=pinnedTopCount-1),rowIndex===void 0?null:{rowIndex,rowPinned}},RowPositionUtils2.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},RowPositionUtils2.prototype.sameRow=function(rowA,rowB){return!rowA&&!rowB?!0:rowA&&!rowB||!rowA&&rowB?!1:rowA.rowIndex===rowB.rowIndex&&rowA.rowPinned==rowB.rowPinned},RowPositionUtils2.prototype.before=function(rowA,rowB){switch(rowA.rowPinned){case"top":if(rowB.rowPinned!=="top")return!0;break;case"bottom":if(rowB.rowPinned!=="bottom")return!1;break;default:if(exists(rowB.rowPinned))return rowB.rowPinned!=="top";break}return rowA.rowIndex<rowB.rowIndex},RowPositionUtils2.prototype.rowMax=function(rows){var _this=this,max;return rows.forEach(function(row){(max===void 0||_this.before(max,row))&&(max=row)}),max},RowPositionUtils2.prototype.rowMin=function(rows){var _this=this,min;return rows.forEach(function(row){(min===void 0||_this.before(row,min))&&(min=row)}),min},__decorate$A([Autowired("rowModel")],RowPositionUtils2.prototype,"rowModel",void 0),__decorate$A([Autowired("pinnedRowModel")],RowPositionUtils2.prototype,"pinnedRowModel",void 0),__decorate$A([Autowired("paginationProxy")],RowPositionUtils2.prototype,"paginationProxy",void 0),RowPositionUtils2=__decorate$A([Bean("rowPositionUtils")],RowPositionUtils2),RowPositionUtils2}(BeanStub),__extends$y=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$z=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$z"),CellPositionUtils=function(_super){__extends$y(CellPositionUtils2,_super);function CellPositionUtils2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(CellPositionUtils2,"CellPositionUtils"),CellPositionUtils2.prototype.createId=function(cellPosition){var rowIndex=cellPosition.rowIndex,rowPinned=cellPosition.rowPinned,column=cellPosition.column;return this.createIdFromValues({rowIndex,column,rowPinned})},CellPositionUtils2.prototype.createIdFromValues=function(cellPosition){var rowIndex=cellPosition.rowIndex,rowPinned=cellPosition.rowPinned,column=cellPosition.column;return"".concat(rowIndex,".").concat(rowPinned??"null",".").concat(column.getId())},CellPositionUtils2.prototype.equals=function(cellA,cellB){var colsMatch=cellA.column===cellB.column,floatingMatch=cellA.rowPinned===cellB.rowPinned,indexMatch=cellA.rowIndex===cellB.rowIndex;return colsMatch&&floatingMatch&&indexMatch},CellPositionUtils2=__decorate$z([Bean("cellPositionUtils")],CellPositionUtils2),CellPositionUtils2}(BeanStub),__extends$x=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),UndoRedoAction=function(){function UndoRedoAction2(cellValueChanges){this.cellValueChanges=cellValueChanges}return __name(UndoRedoAction2,"UndoRedoAction"),UndoRedoAction2}(),RangeUndoRedoAction=function(_super){__extends$x(RangeUndoRedoAction2,_super);function RangeUndoRedoAction2(cellValueChanges,initialRange,finalRange,ranges){var _this=_super.call(this,cellValueChanges)||this;return _this.initialRange=initialRange,_this.finalRange=finalRange,_this.ranges=ranges,_this}return __name(RangeUndoRedoAction2,"RangeUndoRedoAction"),RangeUndoRedoAction2}(UndoRedoAction),UndoRedoStack=function(){function UndoRedoStack2(maxStackSize){this.actionStack=[],this.maxStackSize=maxStackSize||UndoRedoStack2.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}return __name(UndoRedoStack2,"UndoRedoStack"),UndoRedoStack2.prototype.pop=function(){return this.actionStack.pop()},UndoRedoStack2.prototype.push=function(item){var shouldAddActions=item.cellValueChanges&&item.cellValueChanges.length>0;shouldAddActions&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(item))},UndoRedoStack2.prototype.clear=function(){this.actionStack=[]},UndoRedoStack2.prototype.getCurrentStackSize=function(){return this.actionStack.length},UndoRedoStack2.DEFAULT_STACK_SIZE=10,UndoRedoStack2}(),__extends$w=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$4=__name(function(){return __assign$4=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$4.apply(this,arguments)},"__assign$4"),__decorate$y=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$y"),__read$b=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$b"),__spreadArray$9=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$9"),UndoRedoService=function(_super){__extends$w(UndoRedoService2,_super);function UndoRedoService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.cellValueChanges=[],_this.activeCellEdit=null,_this.activeRowEdit=null,_this.isPasting=!1,_this.isRangeInAction=!1,_this.onCellValueChanged=function(event){var eventCell={column:event.column,rowIndex:event.rowIndex,rowPinned:event.rowPinned},isCellEditing=_this.activeCellEdit!==null&&_this.cellPositionUtils.equals(_this.activeCellEdit,eventCell),isRowEditing=_this.activeRowEdit!==null&&_this.rowPositionUtils.sameRow(_this.activeRowEdit,eventCell),shouldCaptureAction=isCellEditing||isRowEditing||_this.isPasting||_this.isRangeInAction;if(shouldCaptureAction){var rowPinned=event.rowPinned,rowIndex=event.rowIndex,column=event.column,oldValue=event.oldValue,value=event.value,cellValueChange={rowPinned,rowIndex,columnId:column.getColId(),newValue:value,oldValue};_this.cellValueChanges.push(cellValueChange)}},_this.clearStacks=function(){_this.undoStack.clear(),_this.redoStack.clear()},_this}return __name(UndoRedoService2,"UndoRedoService"),UndoRedoService2.prototype.init=function(){var _this=this;if(this.gridOptionsService.get("undoRedoCellEditing")){var undoRedoLimit=this.gridOptionsService.get("undoRedoCellEditingLimit");undoRedoLimit<=0||(this.undoStack=new UndoRedoStack(undoRedoLimit),this.redoStack=new UndoRedoStack(undoRedoLimit),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,Events.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,Events.EVENT_MODEL_UPDATED,function(e){e.keepUndoRedoStack||_this.clearStacks()}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,Events.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(function(){_this.gridBodyCtrl=_this.ctrlsService.getGridBodyCtrl()}))}},UndoRedoService2.prototype.getCurrentUndoStackSize=function(){return this.undoStack?this.undoStack.getCurrentStackSize():0},UndoRedoService2.prototype.getCurrentRedoStackSize=function(){return this.redoStack?this.redoStack.getCurrentStackSize():0},UndoRedoService2.prototype.undo=function(source){var startEvent={type:Events.EVENT_UNDO_STARTED,source};this.eventService.dispatchEvent(startEvent);var operationPerformed=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo"),endEvent={type:Events.EVENT_UNDO_ENDED,source,operationPerformed};this.eventService.dispatchEvent(endEvent)},UndoRedoService2.prototype.redo=function(source){var startEvent={type:Events.EVENT_REDO_STARTED,source};this.eventService.dispatchEvent(startEvent);var operationPerformed=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo"),endEvent={type:Events.EVENT_REDO_ENDED,source,operationPerformed};this.eventService.dispatchEvent(endEvent)},UndoRedoService2.prototype.undoRedo=function(undoRedoStack,opposingUndoRedoStack,rangeProperty,cellValueChangeProperty,source){if(!undoRedoStack)return!1;var undoRedoAction=undoRedoStack.pop();return!undoRedoAction||!undoRedoAction.cellValueChanges?!1:(this.processAction(undoRedoAction,function(cellValueChange){return cellValueChange[cellValueChangeProperty]},source),undoRedoAction instanceof RangeUndoRedoAction?this.processRange(undoRedoAction.ranges||[undoRedoAction[rangeProperty]]):this.processCell(undoRedoAction.cellValueChanges),opposingUndoRedoStack.push(undoRedoAction),!0)},UndoRedoService2.prototype.processAction=function(action,valueExtractor,source){var _this=this;action.cellValueChanges.forEach(function(cellValueChange){var rowIndex=cellValueChange.rowIndex,rowPinned=cellValueChange.rowPinned,columnId=cellValueChange.columnId,rowPosition={rowIndex,rowPinned},currentRow=_this.getRowNode(rowPosition);currentRow.displayed&&currentRow.setDataValue(columnId,valueExtractor(cellValueChange),source)})},UndoRedoService2.prototype.processRange=function(ranges){var _this=this,lastFocusedCell;this.rangeService.removeAllCellRanges(!0),ranges.forEach(function(range,idx){if(range){var startRow=range.startRow,endRow=range.endRow;idx===ranges.length-1&&(lastFocusedCell={rowPinned:startRow.rowPinned,rowIndex:startRow.rowIndex,columnId:range.startColumn.getColId()},_this.setLastFocusedCell(lastFocusedCell));var cellRangeParams={rowStartIndex:startRow.rowIndex,rowStartPinned:startRow.rowPinned,rowEndIndex:endRow.rowIndex,rowEndPinned:endRow.rowPinned,columnStart:range.startColumn,columns:range.columns};_this.rangeService.addCellRange(cellRangeParams)}})},UndoRedoService2.prototype.processCell=function(cellValueChanges){var cellValueChange=cellValueChanges[0],rowIndex=cellValueChange.rowIndex,rowPinned=cellValueChange.rowPinned,rowPosition={rowIndex,rowPinned},row=this.getRowNode(rowPosition),lastFocusedCell={rowPinned:cellValueChange.rowPinned,rowIndex:row.rowIndex,columnId:cellValueChange.columnId};this.setLastFocusedCell(lastFocusedCell,!!this.rangeService)},UndoRedoService2.prototype.setLastFocusedCell=function(lastFocusedCell,setRangeToCell){var rowIndex=lastFocusedCell.rowIndex,columnId=lastFocusedCell.columnId,rowPinned=lastFocusedCell.rowPinned,scrollFeature=this.gridBodyCtrl.getScrollFeature(),column=this.columnModel.getGridColumn(columnId);if(column){scrollFeature.ensureIndexVisible(rowIndex),scrollFeature.ensureColumnVisible(column);var cellPosition={rowIndex,column,rowPinned};this.focusService.setFocusedCell(__assign$4(__assign$4({},cellPosition),{forceBrowserFocus:!0})),setRangeToCell&&this.rangeService.setRangeToCell(cellPosition)}},UndoRedoService2.prototype.addRowEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STARTED,function(e){_this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,Events.EVENT_ROW_EDITING_STOPPED,function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.activeRowEdit=null})},UndoRedoService2.prototype.addCellEditingListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STARTED,function(e){_this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,Events.EVENT_CELL_EDITING_STOPPED,function(e){_this.activeCellEdit=null;var shouldPushAction=e.valueChanged&&!_this.activeRowEdit&&!_this.isPasting&&!_this.isRangeInAction;if(shouldPushAction){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action)}})},UndoRedoService2.prototype.addPasteListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_PASTE_START,function(){_this.isPasting=!0}),this.addManagedListener(this.eventService,Events.EVENT_PASTE_END,function(){var action=new UndoRedoAction(_this.cellValueChanges);_this.pushActionsToUndoStack(action),_this.isPasting=!1})},UndoRedoService2.prototype.addFillListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_FILL_START,function(){_this.isRangeInAction=!0}),this.addManagedListener(this.eventService,Events.EVENT_FILL_END,function(event){var action=new RangeUndoRedoAction(_this.cellValueChanges,event.initialRange,event.finalRange);_this.pushActionsToUndoStack(action),_this.isRangeInAction=!1})},UndoRedoService2.prototype.addCellKeyListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,function(){_this.isRangeInAction=!0}),this.addManagedListener(this.eventService,Events.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,function(){var action;_this.rangeService&&_this.gridOptionsService.get("enableRangeSelection")?action=new RangeUndoRedoAction(_this.cellValueChanges,void 0,void 0,__spreadArray$9([],__read$b(_this.rangeService.getCellRanges()),!1)):action=new UndoRedoAction(_this.cellValueChanges),_this.pushActionsToUndoStack(action),_this.isRangeInAction=!1})},UndoRedoService2.prototype.pushActionsToUndoStack=function(action){this.undoStack.push(action),this.cellValueChanges=[],this.redoStack.clear()},UndoRedoService2.prototype.getRowNode=function(gridRow){switch(gridRow.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[gridRow.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[gridRow.rowIndex];default:return this.rowModel.getRow(gridRow.rowIndex)}},__decorate$y([Autowired("focusService")],UndoRedoService2.prototype,"focusService",void 0),__decorate$y([Autowired("ctrlsService")],UndoRedoService2.prototype,"ctrlsService",void 0),__decorate$y([Autowired("rowModel")],UndoRedoService2.prototype,"rowModel",void 0),__decorate$y([Autowired("pinnedRowModel")],UndoRedoService2.prototype,"pinnedRowModel",void 0),__decorate$y([Autowired("cellPositionUtils")],UndoRedoService2.prototype,"cellPositionUtils",void 0),__decorate$y([Autowired("rowPositionUtils")],UndoRedoService2.prototype,"rowPositionUtils",void 0),__decorate$y([Autowired("columnModel")],UndoRedoService2.prototype,"columnModel",void 0),__decorate$y([Optional("rangeService")],UndoRedoService2.prototype,"rangeService",void 0),__decorate$y([PostConstruct],UndoRedoService2.prototype,"init",null),UndoRedoService2=__decorate$y([Bean("undoRedoService")],UndoRedoService2),UndoRedoService2}(BeanStub),__extends$v=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$x=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$x"),HeaderPositionUtils=function(_super){__extends$v(HeaderPositionUtils2,_super);function HeaderPositionUtils2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(HeaderPositionUtils2,"HeaderPositionUtils"),HeaderPositionUtils2.prototype.findHeader=function(focusedHeader,direction){var nextColumn,getGroupMethod,getColMethod;if(focusedHeader.column instanceof ColumnGroup?(getGroupMethod="getDisplayedGroup".concat(direction),nextColumn=this.columnModel[getGroupMethod](focusedHeader.column)):(getColMethod="getDisplayedCol".concat(direction),nextColumn=this.columnModel[getColMethod](focusedHeader.column)),!!nextColumn){var headerRowIndex=focusedHeader.headerRowIndex;if(this.getHeaderRowType(headerRowIndex)!==HeaderRowType.FLOATING_FILTER){for(var columnsInPath=[nextColumn];nextColumn.getParent();)nextColumn=nextColumn.getParent(),columnsInPath.push(nextColumn);nextColumn=columnsInPath[columnsInPath.length-1-headerRowIndex]}var _a=this.getHeaderIndexToFocus(nextColumn,headerRowIndex),column=_a.column,indexToFocus=_a.headerRowIndex;return{column,headerRowIndex:indexToFocus}}},HeaderPositionUtils2.prototype.getHeaderIndexToFocus=function(column,currentIndex){var nextColumn;if(column instanceof ColumnGroup&&this.isAnyChildSpanningHeaderHeight(column)&&column.isPadding()){var targetColumn=column;nextColumn=targetColumn.getLeafColumns()[0];for(var col=nextColumn;col!==targetColumn;)currentIndex++,col=col.getParent()}return{column:nextColumn||column,headerRowIndex:currentIndex}},HeaderPositionUtils2.prototype.isAnyChildSpanningHeaderHeight=function(columnGroup){return columnGroup?columnGroup.getLeafColumns().some(function(col){return col.isSpanHeaderHeight()}):!1},HeaderPositionUtils2.prototype.getColumnVisibleParent=function(currentColumn,currentIndex){var currentRowType=this.getHeaderRowType(currentIndex),isFloatingFilter=currentRowType===HeaderRowType.FLOATING_FILTER,isColumn=currentRowType===HeaderRowType.COLUMN,nextFocusColumn=isFloatingFilter?currentColumn:currentColumn.getParent(),nextRow=currentIndex-1,headerRowIndexWithoutSpan=nextRow;if(isColumn&&this.isAnyChildSpanningHeaderHeight(currentColumn.getParent())){for(;nextFocusColumn&&nextFocusColumn.isPadding();)nextFocusColumn=nextFocusColumn.getParent(),nextRow--;headerRowIndexWithoutSpan=nextRow,nextRow<0&&(nextFocusColumn=currentColumn,nextRow=currentIndex,headerRowIndexWithoutSpan=void 0)}return{column:nextFocusColumn,headerRowIndex:nextRow,headerRowIndexWithoutSpan}},HeaderPositionUtils2.prototype.getColumnVisibleChild=function(column,currentIndex,direction){direction===void 0&&(direction="After");var currentRowType=this.getHeaderRowType(currentIndex),nextFocusColumn=column,nextRow=currentIndex+1,headerRowIndexWithoutSpan=nextRow;if(currentRowType===HeaderRowType.COLUMN_GROUP){for(var leafColumns=column.getDisplayedLeafColumns(),leafColumn=direction==="After"?leafColumns[0]:last(leafColumns),columnsInTheWay=[],currentColumn=leafColumn;currentColumn.getParent()!==column;)currentColumn=currentColumn.getParent(),columnsInTheWay.push(currentColumn);if(nextFocusColumn=leafColumn,leafColumn.isSpanHeaderHeight())for(var i=columnsInTheWay.length-1;i>=0;i--){var colToFocus=columnsInTheWay[i];if(!colToFocus.isPadding()){nextFocusColumn=colToFocus;break}nextRow++}else nextFocusColumn=last(columnsInTheWay),nextFocusColumn||(nextFocusColumn=leafColumn)}return{column:nextFocusColumn,headerRowIndex:nextRow,headerRowIndexWithoutSpan}},HeaderPositionUtils2.prototype.getHeaderRowType=function(rowIndex){var centerHeaderContainer=this.ctrlsService.getHeaderRowContainerCtrl();if(centerHeaderContainer)return centerHeaderContainer.getRowType(rowIndex)},HeaderPositionUtils2.prototype.findColAtEdgeForHeaderRow=function(level,position){var displayedColumns=this.columnModel.getAllDisplayedColumns(),column=displayedColumns[position==="start"?0:displayedColumns.length-1];if(column){var childContainer=this.ctrlsService.getHeaderRowContainerCtrl(column.getPinned()),type=childContainer.getRowType(level);if(type==HeaderRowType.COLUMN_GROUP){var columnGroup=this.columnModel.getColumnGroupAtLevel(column,level);return{headerRowIndex:level,column:columnGroup}}return{headerRowIndex:type==null?-1:level,column}}},__decorate$x([Autowired("columnModel")],HeaderPositionUtils2.prototype,"columnModel",void 0),__decorate$x([Autowired("ctrlsService")],HeaderPositionUtils2.prototype,"ctrlsService",void 0),HeaderPositionUtils2=__decorate$x([Bean("headerPositionUtils")],HeaderPositionUtils2),HeaderPositionUtils2}(BeanStub),__decorate$w=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$w"),ColumnDefFactory=function(){function ColumnDefFactory2(){}return __name(ColumnDefFactory2,"ColumnDefFactory"),ColumnDefFactory2.prototype.buildColumnDefs=function(cols,rowGroupColumns,pivotColumns){var _this=this,res=[],colGroupDefs={};return cols.forEach(function(col){for(var colDef=_this.createDefFromColumn(col,rowGroupColumns,pivotColumns),addToResult=!0,childDef=colDef,pointer=col.getOriginalParent(),lastPointer=null;pointer;){var parentDef=null;if(pointer.isPadding()){pointer=pointer.getOriginalParent();continue}var existingParentDef=colGroupDefs[pointer.getGroupId()];if(existingParentDef){existingParentDef.children.push(childDef),addToResult=!1;break}if(parentDef=_this.createDefFromGroup(pointer),parentDef&&(parentDef.children=[childDef],colGroupDefs[parentDef.groupId]=parentDef,childDef=parentDef,pointer=pointer.getOriginalParent()),pointer!=null&&lastPointer===pointer){addToResult=!1;break}lastPointer=pointer}addToResult&&res.push(childDef)}),res},ColumnDefFactory2.prototype.createDefFromGroup=function(group){var defCloned=deepCloneDefinition(group.getColGroupDef(),["children"]);return defCloned&&(defCloned.groupId=group.getGroupId()),defCloned},ColumnDefFactory2.prototype.createDefFromColumn=function(col,rowGroupColumns,pivotColumns){var colDefCloned=deepCloneDefinition(col.getColDef());return colDefCloned.colId=col.getColId(),colDefCloned.width=col.getActualWidth(),colDefCloned.rowGroup=col.isRowGroupActive(),colDefCloned.rowGroupIndex=col.isRowGroupActive()?rowGroupColumns.indexOf(col):null,colDefCloned.pivot=col.isPivotActive(),colDefCloned.pivotIndex=col.isPivotActive()?pivotColumns.indexOf(col):null,colDefCloned.aggFunc=col.isValueActive()?col.getAggFunc():null,colDefCloned.hide=col.isVisible()?void 0:!0,colDefCloned.pinned=col.isPinned()?col.getPinned():null,colDefCloned.sort=col.getSort()?col.getSort():null,colDefCloned.sortIndex=col.getSortIndex()!=null?col.getSortIndex():null,colDefCloned},ColumnDefFactory2=__decorate$w([Bean("columnDefFactory")],ColumnDefFactory2),ColumnDefFactory2}(),__decorate$v=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$v"),RowCssClassCalculator=function(){function RowCssClassCalculator2(){}return __name(RowCssClassCalculator2,"RowCssClassCalculator"),RowCssClassCalculator2.prototype.getInitialRowClasses=function(params){var classes=[];return exists(params.extraCssClass)&&classes.push(params.extraCssClass),classes.push("ag-row"),classes.push(params.rowFocused?"ag-row-focus":"ag-row-no-focus"),params.fadeRowIn&&classes.push("ag-opacity-zero"),classes.push(params.rowIsEven?"ag-row-even":"ag-row-odd"),params.rowNode.isRowPinned()&&classes.push("ag-row-pinned"),params.rowNode.isSelected()&&classes.push("ag-row-selected"),params.rowNode.footer&&classes.push("ag-row-footer"),classes.push("ag-row-level-"+params.rowLevel),params.rowNode.stub&&classes.push("ag-row-loading"),params.fullWidthRow&&classes.push("ag-full-width-row"),params.expandable&&(classes.push("ag-row-group"),classes.push(params.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),params.rowNode.dragging&&classes.push("ag-row-dragging"),pushAll(classes,this.processClassesFromGridOptions(params.rowNode)),pushAll(classes,this.preProcessRowClassRules(params.rowNode)),classes.push(params.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),params.firstRowOnPage&&classes.push("ag-row-first"),params.lastRowOnPage&&classes.push("ag-row-last"),params.fullWidthRow&&(params.pinned==="left"&&classes.push("ag-cell-last-left-pinned"),params.pinned==="right"&&classes.push("ag-cell-first-right-pinned")),classes},RowCssClassCalculator2.prototype.processClassesFromGridOptions=function(rowNode){var res=[],process=__name(function(rowCls){typeof rowCls=="string"?res.push(rowCls):Array.isArray(rowCls)&&rowCls.forEach(function(e){return res.push(e)})},"process"),rowClass=this.gridOptionsService.get("rowClass");if(rowClass){if(typeof rowClass=="function")return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];process(rowClass)}var rowClassFunc=this.gridOptionsService.getCallback("getRowClass");if(rowClassFunc){var params={data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex},rowClassFuncResult=rowClassFunc(params);process(rowClassFuncResult)}return res},RowCssClassCalculator2.prototype.preProcessRowClassRules=function(rowNode){var res=[];return this.processRowClassRules(rowNode,function(className){res.push(className)},function(className){}),res},RowCssClassCalculator2.prototype.processRowClassRules=function(rowNode,onApplicableClass,onNotApplicableClass){var rowClassParams=this.gridOptionsService.addGridCommonParams({data:rowNode.data,node:rowNode,rowIndex:rowNode.rowIndex});this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),rowClassParams,onApplicableClass,onNotApplicableClass)},RowCssClassCalculator2.prototype.calculateRowLevel=function(rowNode){return rowNode.group?rowNode.level:rowNode.parent?rowNode.parent.level+1:0},__decorate$v([Autowired("stylingService")],RowCssClassCalculator2.prototype,"stylingService",void 0),__decorate$v([Autowired("gridOptionsService")],RowCssClassCalculator2.prototype,"gridOptionsService",void 0),RowCssClassCalculator2=__decorate$v([Bean("rowCssClassCalculator")],RowCssClassCalculator2),RowCssClassCalculator2}(),__extends$u=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$u=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$u"),RowNodeSorter=function(_super){__extends$u(RowNodeSorter2,_super);function RowNodeSorter2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(RowNodeSorter2,"RowNodeSorter"),RowNodeSorter2.prototype.init=function(){var _this=this;this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",function(propChange){return _this.isAccentedSort=propChange.currentValue}),this.addManagedPropertyListener("autoGroupColumnDef",function(){return _this.primaryColumnsSortGroups=_this.gridOptionsService.isColumnsSortingCoupledToGroup()})},RowNodeSorter2.prototype.doFullSort=function(rowNodes,sortOptions){var mapper=__name(function(rowNode,pos){return{currentPos:pos,rowNode}},"mapper"),sortedRowNodes=rowNodes.map(mapper);return sortedRowNodes.sort(this.compareRowNodes.bind(this,sortOptions)),sortedRowNodes.map(function(item){return item.rowNode})},RowNodeSorter2.prototype.compareRowNodes=function(sortOptions,sortedNodeA,sortedNodeB){for(var nodeA=sortedNodeA.rowNode,nodeB=sortedNodeB.rowNode,i=0,len=sortOptions.length;i<len;i++){var sortOption=sortOptions[i],isDescending=sortOption.sort==="desc",valueA=this.getValue(nodeA,sortOption.column),valueB=this.getValue(nodeB,sortOption.column),comparatorResult=void 0,providedComparator=this.getComparator(sortOption,nodeA);providedComparator?comparatorResult=providedComparator(valueA,valueB,nodeA,nodeB,isDescending):comparatorResult=_.defaultComparator(valueA,valueB,this.isAccentedSort);var validResult=!isNaN(comparatorResult);if(validResult&&comparatorResult!==0)return sortOption.sort==="asc"?comparatorResult:comparatorResult*-1}return sortedNodeA.currentPos-sortedNodeB.currentPos},RowNodeSorter2.prototype.getComparator=function(sortOption,rowNode){var column=sortOption.column,comparatorOnCol=column.getColDef().comparator;if(comparatorOnCol!=null)return comparatorOnCol;if(column.getColDef().showRowGroup){var groupLeafField=!rowNode.group&&column.getColDef().field;if(groupLeafField){var primaryColumn=this.columnModel.getPrimaryColumn(groupLeafField);if(primaryColumn)return primaryColumn.getColDef().comparator}}},RowNodeSorter2.prototype.getValue=function(node,column){var _a,_b;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(column,node,!1,!1);var isNodeGroupedAtLevel=node.rowGroupColumn===column;if(isNodeGroupedAtLevel){var isGroupRows=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive());if(isGroupRows){var leafChild=(_a=node.allLeafChildren)===null||_a===void 0?void 0:_a[0];return leafChild?this.valueService.getValue(column,leafChild,!1,!1):void 0}var displayCol=this.columnModel.getGroupDisplayColumnForGroup(column.getId());return displayCol?(_b=node.groupData)===null||_b===void 0?void 0:_b[displayCol.getId()]:void 0}if(!(node.group&&column.getColDef().showRowGroup))return this.valueService.getValue(column,node,!1,!1)},__decorate$u([Autowired("valueService")],RowNodeSorter2.prototype,"valueService",void 0),__decorate$u([Autowired("columnModel")],RowNodeSorter2.prototype,"columnModel",void 0),__decorate$u([PostConstruct],RowNodeSorter2.prototype,"init",null),RowNodeSorter2=__decorate$u([Bean("rowNodeSorter")],RowNodeSorter2),RowNodeSorter2}(BeanStub),__extends$t=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$t=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$t"),CtrlsService=function(_super){__extends$t(CtrlsService2,_super);function CtrlsService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.ready=!1,_this.readyCallbacks=[],_this}__name(CtrlsService2,"CtrlsService"),CtrlsService_1=CtrlsService2,CtrlsService2.prototype.checkReady=function(){if(this.ready=this.gridCtrl!=null&&this.gridBodyCtrl!=null&&this.centerRowContainerCtrl!=null&&this.leftRowContainerCtrl!=null&&this.rightRowContainerCtrl!=null&&this.bottomCenterRowContainerCtrl!=null&&this.bottomLeftRowContainerCtrl!=null&&this.bottomRightRowContainerCtrl!=null&&this.topCenterRowContainerCtrl!=null&&this.topLeftRowContainerCtrl!=null&&this.topRightRowContainerCtrl!=null&&this.stickyTopCenterRowContainerCtrl!=null&&this.stickyTopLeftRowContainerCtrl!=null&&this.stickyTopRightRowContainerCtrl!=null&&this.centerHeaderRowContainerCtrl!=null&&this.leftHeaderRowContainerCtrl!=null&&this.rightHeaderRowContainerCtrl!=null&&this.fakeHScrollComp!=null&&this.fakeVScrollComp!=null&&this.gridHeaderCtrl!=null,this.ready){var p_1=this.createReadyParams();this.readyCallbacks.forEach(function(c){return c(p_1)}),this.readyCallbacks.length=0}},CtrlsService2.prototype.whenReady=function(callback){this.ready?callback(this.createReadyParams()):this.readyCallbacks.push(callback)},CtrlsService2.prototype.createReadyParams=function(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}},CtrlsService2.prototype.registerFakeHScrollComp=function(comp){this.fakeHScrollComp=comp,this.checkReady()},CtrlsService2.prototype.registerFakeVScrollComp=function(comp){this.fakeVScrollComp=comp,this.checkReady()},CtrlsService2.prototype.registerGridHeaderCtrl=function(gridHeaderCtrl){this.gridHeaderCtrl=gridHeaderCtrl,this.checkReady()},CtrlsService2.prototype.registerCenterRowContainerCtrl=function(ctrl){this.centerRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerLeftRowContainerCtrl=function(ctrl){this.leftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerRightRowContainerCtrl=function(ctrl){this.rightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerTopCenterRowContainerCtrl=function(ctrl){this.topCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerTopLeftRowContainerCon=function(ctrl){this.topLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerTopRightRowContainerCtrl=function(ctrl){this.topRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerStickyTopCenterRowContainerCtrl=function(ctrl){this.stickyTopCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerStickyTopLeftRowContainerCon=function(ctrl){this.stickyTopLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerStickyTopRightRowContainerCtrl=function(ctrl){this.stickyTopRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerBottomCenterRowContainerCtrl=function(ctrl){this.bottomCenterRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerBottomLeftRowContainerCtrl=function(ctrl){this.bottomLeftRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerBottomRightRowContainerCtrl=function(ctrl){this.bottomRightRowContainerCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerHeaderContainer=function(ctrl,pinned){switch(pinned){case"left":this.leftHeaderRowContainerCtrl=ctrl;break;case"right":this.rightHeaderRowContainerCtrl=ctrl;break;default:this.centerHeaderRowContainerCtrl=ctrl;break}this.checkReady()},CtrlsService2.prototype.registerGridBodyCtrl=function(ctrl){this.gridBodyCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.registerGridCtrl=function(ctrl){this.gridCtrl=ctrl,this.checkReady()},CtrlsService2.prototype.getFakeHScrollComp=function(){return this.fakeHScrollComp},CtrlsService2.prototype.getFakeVScrollComp=function(){return this.fakeVScrollComp},CtrlsService2.prototype.getGridHeaderCtrl=function(){return this.gridHeaderCtrl},CtrlsService2.prototype.getGridCtrl=function(){return this.gridCtrl},CtrlsService2.prototype.getCenterRowContainerCtrl=function(){return this.centerRowContainerCtrl},CtrlsService2.prototype.getTopCenterRowContainerCtrl=function(){return this.topCenterRowContainerCtrl},CtrlsService2.prototype.getBottomCenterRowContainerCtrl=function(){return this.bottomCenterRowContainerCtrl},CtrlsService2.prototype.getStickyTopCenterRowContainerCtrl=function(){return this.stickyTopCenterRowContainerCtrl},CtrlsService2.prototype.getGridBodyCtrl=function(){return this.gridBodyCtrl},CtrlsService2.prototype.getHeaderRowContainerCtrls=function(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]},CtrlsService2.prototype.getHeaderRowContainerCtrl=function(pinned){switch(pinned){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}};var CtrlsService_1;return CtrlsService2.NAME="ctrlsService",CtrlsService2=CtrlsService_1=__decorate$t([Bean(CtrlsService_1.NAME)],CtrlsService2),CtrlsService2}(BeanStub),__extends$s=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$s=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$s"),CtrlsFactory=function(_super){__extends$s(CtrlsFactory2,_super);function CtrlsFactory2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.registry={},_this}return __name(CtrlsFactory2,"CtrlsFactory"),CtrlsFactory2.prototype.register=function(meta){this.registry[meta.controllerName]=meta.controllerClass},CtrlsFactory2.prototype.getInstance=function(name){var ControllerClass=this.registry[name];if(ControllerClass!=null)return new ControllerClass},CtrlsFactory2=__decorate$s([Bean("ctrlsFactory")],CtrlsFactory2),CtrlsFactory2}(BeanStub),__extends$r=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$r=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$r"),AbstractFakeScrollComp=function(_super){__extends$r(AbstractFakeScrollComp2,_super);function AbstractFakeScrollComp2(template,direction){var _this=_super.call(this,template)||this;return _this.direction=direction,_this.hideTimeout=null,_this}return __name(AbstractFakeScrollComp2,"AbstractFakeScrollComp"),AbstractFakeScrollComp2.prototype.postConstruct=function(){this.addManagedListener(this.eventService,Events.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",isMacOsUserAgent()||isIOSUserAgent())},AbstractFakeScrollComp2.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=isInvisibleScrollbar(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))},AbstractFakeScrollComp2.prototype.addActiveListenerToggles=function(){var _this=this,activateEvents=["mouseenter","mousedown","touchstart"],deactivateEvents=["mouseleave","touchend"],eGui=this.getGui();activateEvents.forEach(function(eventName){return _this.addManagedListener(eGui,eventName,function(){return _this.addOrRemoveCssClass("ag-scrollbar-active",!0)})}),deactivateEvents.forEach(function(eventName){return _this.addManagedListener(eGui,eventName,function(){return _this.addOrRemoveCssClass("ag-scrollbar-active",!1)})})},AbstractFakeScrollComp2.prototype.onScrollVisibilityChanged=function(){var _this=this;this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(function(){return _this.setScrollVisible()})},AbstractFakeScrollComp2.prototype.hideAndShowInvisibleScrollAsNeeded=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL,function(params){params.direction===_this.direction&&(_this.hideTimeout!==null&&(window.clearTimeout(_this.hideTimeout),_this.hideTimeout=null),_this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL_END,function(){_this.hideTimeout=window.setTimeout(function(){_this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),_this.hideTimeout=null},400)})},AbstractFakeScrollComp2.prototype.attemptSettingScrollPosition=function(value){var _this=this,viewport=this.getViewport();waitUntil(function(){return isVisible(viewport)},function(){return _this.setScrollPosition(value)},100)},AbstractFakeScrollComp2.prototype.getViewport=function(){return this.eViewport},AbstractFakeScrollComp2.prototype.getContainer=function(){return this.eContainer},AbstractFakeScrollComp2.prototype.onScrollCallback=function(fn){this.addManagedListener(this.getViewport(),"scroll",fn)},__decorate$r([RefSelector("eViewport")],AbstractFakeScrollComp2.prototype,"eViewport",void 0),__decorate$r([RefSelector("eContainer")],AbstractFakeScrollComp2.prototype,"eContainer",void 0),__decorate$r([Autowired("scrollVisibleService")],AbstractFakeScrollComp2.prototype,"scrollVisibleService",void 0),__decorate$r([Autowired("ctrlsService")],AbstractFakeScrollComp2.prototype,"ctrlsService",void 0),__decorate$r([Autowired("animationFrameService")],AbstractFakeScrollComp2.prototype,"animationFrameService",void 0),AbstractFakeScrollComp2}(Component),__extends$q=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$q=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$q"),FakeHScrollComp=function(_super){__extends$q(FakeHScrollComp2,_super);function FakeHScrollComp2(){return _super.call(this,FakeHScrollComp2.TEMPLATE,"horizontal")||this}return __name(FakeHScrollComp2,"FakeHScrollComp"),FakeHScrollComp2.prototype.postConstruct=function(){var _this=this;_super.prototype.postConstruct.call(this);var spacerWidthsListener=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,spacerWidthsListener),this.addManagedListener(this.eventService,Events.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",spacerWidthsListener),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new CenterWidthFeature(function(width){return _this.eContainer.style.width="".concat(width,"px")})),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))},FakeHScrollComp2.prototype.initialiseInvisibleScrollbar=function(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),_super.prototype.initialiseInvisibleScrollbar.call(this),this.invisibleScrollbar&&this.refreshCompBottom())},FakeHScrollComp2.prototype.onPinnedRowDataChanged=function(){this.refreshCompBottom()},FakeHScrollComp2.prototype.refreshCompBottom=function(){if(this.invisibleScrollbar){var bottomPinnedHeight=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom="".concat(bottomPinnedHeight,"px")}},FakeHScrollComp2.prototype.onScrollVisibilityChanged=function(){_super.prototype.onScrollVisibilityChanged.call(this),this.setFakeHScrollSpacerWidths()},FakeHScrollComp2.prototype.setFakeHScrollSpacerWidths=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),rightSpacing=this.columnModel.getDisplayedColumnsRightWidth(),scrollOnRight=!this.enableRtl&&vScrollShowing,scrollbarWidth=this.gridOptionsService.getScrollbarWidth();scrollOnRight&&(rightSpacing+=scrollbarWidth),setFixedWidth(this.eRightSpacer,rightSpacing),this.eRightSpacer.classList.toggle("ag-scroller-corner",rightSpacing<=scrollbarWidth);var leftSpacing=this.columnModel.getDisplayedColumnsLeftWidth(),scrollOnLeft=this.enableRtl&&vScrollShowing;scrollOnLeft&&(leftSpacing+=scrollbarWidth),setFixedWidth(this.eLeftSpacer,leftSpacing),this.eLeftSpacer.classList.toggle("ag-scroller-corner",leftSpacing<=scrollbarWidth)},FakeHScrollComp2.prototype.setScrollVisible=function(){var hScrollShowing=this.scrollVisibleService.isHorizontalScrollShowing(),invisibleScrollbar2=this.invisibleScrollbar,isSuppressHorizontalScroll=this.gridOptionsService.get("suppressHorizontalScroll"),scrollbarWidth=hScrollShowing&&this.gridOptionsService.getScrollbarWidth()||0,adjustedScrollbarWidth=scrollbarWidth===0&&invisibleScrollbar2?16:scrollbarWidth,scrollContainerSize=isSuppressHorizontalScroll?0:adjustedScrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),setFixedHeight(this.getGui(),scrollContainerSize),setFixedHeight(this.eViewport,scrollContainerSize),setFixedHeight(this.eContainer,scrollContainerSize),this.setDisplayed(hScrollShowing,{skipAriaHidden:!0})},FakeHScrollComp2.prototype.getScrollPosition=function(){return getScrollLeft(this.getViewport(),this.enableRtl)},FakeHScrollComp2.prototype.setScrollPosition=function(value){isVisible(this.getViewport())||this.attemptSettingScrollPosition(value),setScrollLeft(this.getViewport(),value,this.enableRtl)},FakeHScrollComp2.TEMPLATE=`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>
        </div>`,__decorate$q([RefSelector("eLeftSpacer")],FakeHScrollComp2.prototype,"eLeftSpacer",void 0),__decorate$q([RefSelector("eRightSpacer")],FakeHScrollComp2.prototype,"eRightSpacer",void 0),__decorate$q([Autowired("columnModel")],FakeHScrollComp2.prototype,"columnModel",void 0),__decorate$q([Autowired("pinnedRowModel")],FakeHScrollComp2.prototype,"pinnedRowModel",void 0),__decorate$q([PostConstruct],FakeHScrollComp2.prototype,"postConstruct",null),FakeHScrollComp2}(AbstractFakeScrollComp),__extends$p=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$p=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$p"),PinnedWidthService=function(_super){__extends$p(PinnedWidthService2,_super);function PinnedWidthService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(PinnedWidthService2,"PinnedWidthService"),PinnedWidthService2.prototype.postConstruct=function(){var listener=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_CHANGED,listener),this.addManagedListener(this.eventService,Events.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,listener),this.addManagedPropertyListener("domLayout",listener)},PinnedWidthService2.prototype.checkContainerWidths=function(){var printLayout=this.gridOptionsService.isDomLayout("print"),newLeftWidth=printLayout?0:this.columnModel.getDisplayedColumnsLeftWidth(),newRightWidth=printLayout?0:this.columnModel.getDisplayedColumnsRightWidth();newLeftWidth!=this.leftWidth&&(this.leftWidth=newLeftWidth,this.eventService.dispatchEvent({type:Events.EVENT_LEFT_PINNED_WIDTH_CHANGED})),newRightWidth!=this.rightWidth&&(this.rightWidth=newRightWidth,this.eventService.dispatchEvent({type:Events.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))},PinnedWidthService2.prototype.getPinnedRightWidth=function(){return this.rightWidth},PinnedWidthService2.prototype.getPinnedLeftWidth=function(){return this.leftWidth},__decorate$p([Autowired("columnModel")],PinnedWidthService2.prototype,"columnModel",void 0),__decorate$p([PostConstruct],PinnedWidthService2.prototype,"postConstruct",null),PinnedWidthService2=__decorate$p([Bean("pinnedWidthService")],PinnedWidthService2),PinnedWidthService2}(BeanStub),__extends$o=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$o=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$o"),RowNodeEventThrottle=function(_super){__extends$o(RowNodeEventThrottle2,_super);function RowNodeEventThrottle2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.events=[],_this}return __name(RowNodeEventThrottle2,"RowNodeEventThrottle"),RowNodeEventThrottle2.prototype.postConstruct=function(){this.rowModel.getType()=="clientSide"&&(this.clientSideRowModel=this.rowModel)},RowNodeEventThrottle2.prototype.dispatchExpanded=function(event){var _this=this;if(this.clientSideRowModel==null){this.eventService.dispatchEvent(event);return}this.events.push(event);var func=__name(function(){_this.clientSideRowModel&&_this.clientSideRowModel.onRowGroupOpened(),_this.events.forEach(function(e){return _this.eventService.dispatchEvent(e)}),_this.events=[]},"func");this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(func)),this.dispatchExpandedDebounced()},__decorate$o([Autowired("animationFrameService")],RowNodeEventThrottle2.prototype,"animationFrameService",void 0),__decorate$o([Autowired("rowModel")],RowNodeEventThrottle2.prototype,"rowModel",void 0),__decorate$o([PostConstruct],RowNodeEventThrottle2.prototype,"postConstruct",null),RowNodeEventThrottle2=__decorate$o([Bean("rowNodeEventThrottle")],RowNodeEventThrottle2),RowNodeEventThrottle2}(BeanStub),COLUMN_DEFINITION_DEPRECATIONS={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."}},CSRM_REQUIRES_ROW_GROUP_MODULE=__name(function(_options,gridOptions){var _a;return((_a=gridOptions.rowModelType)!==null&&_a!==void 0?_a:"clientSide")==="clientSide"?{module:ModuleNames.RowGroupingModule}:null},"CSRM_REQUIRES_ROW_GROUP_MODULE"),COLUMN_DEFINITION_VALIDATIONS={enableRowGroup:CSRM_REQUIRES_ROW_GROUP_MODULE,rowGroup:CSRM_REQUIRES_ROW_GROUP_MODULE,rowGroupIndex:CSRM_REQUIRES_ROW_GROUP_MODULE,enablePivot:CSRM_REQUIRES_ROW_GROUP_MODULE,enableValue:CSRM_REQUIRES_ROW_GROUP_MODULE,pivot:CSRM_REQUIRES_ROW_GROUP_MODULE,pivotIndex:CSRM_REQUIRES_ROW_GROUP_MODULE,aggFunc:CSRM_REQUIRES_ROW_GROUP_MODULE,cellEditor:function(options){return options.cellEditor==="agRichSelect"||options.cellEditor==="agRichSelectCellEditor"?{module:ModuleNames.RichSelectModule}:null},menuTabs:function(options){var _a,enterpriseMenuTabs=["columnsMenuTab","generalMenuTab"];return!((_a=options.menuTabs)===null||_a===void 0)&&_a.some(function(tab){return enterpriseMenuTabs.includes(tab)})?{module:ModuleNames.MenuModule}:null},columnsMenuParams:{module:[ModuleNames.MenuModule,ModuleNames.ColumnsToolPanelModule]},columnChooserParams:{module:[ModuleNames.MenuModule,ModuleNames.ColumnsToolPanelModule]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:function(_options,_a){var rowSelection=_a.rowSelection;return rowSelection==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"}},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:function(_options,_a){var rowSelection=_a.rowSelection;return rowSelection==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"}},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:function(_options,_a){var rowSelection=_a.rowSelection;return rowSelection==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"}},children:function(){return COL_DEF_VALIDATORS}},COL_DEF_VALIDATORS={objectName:"colDef",allProperties:ColDefUtil.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:COLUMN_DEFINITION_DEPRECATIONS,validations:COLUMN_DEFINITION_VALIDATIONS},__read$a=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$a"),__spreadArray$8=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$8"),GRID_OPTION_DEPRECATIONS={enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"}},GRID_OPTION_DEFAULTS={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1},GRID_OPTION_VALIDATIONS={sideBar:{module:ModuleNames.SideBarModule},statusBar:{module:ModuleNames.StatusBarModule},enableCharts:{module:ModuleNames.GridChartsModule},getMainMenuItems:{module:ModuleNames.MenuModule},getContextMenuItems:{module:ModuleNames.MenuModule},allowContextMenuWithControlKey:{module:ModuleNames.MenuModule},enableAdvancedFilter:{module:ModuleNames.AdvancedFilterModule},treeData:{supportedRowModels:["clientSide","serverSide"],module:ModuleNames.RowGroupingModule,dependencies:function(options){var _a,rowModel=(_a=options.rowModelType)!==null&&_a!==void 0?_a:"clientSide";switch(rowModel){case"clientSide":var csrmWarning="treeData requires 'getDataPath' in the ".concat(rowModel," row model.");return options.getDataPath?null:csrmWarning;case"serverSide":var ssrmWarning="treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ".concat(rowModel," row model.");return options.isServerSideGroup&&options.getServerSideGroupKey?null:ssrmWarning}return null}},masterDetail:{module:ModuleNames.MasterDetailModule},enableRangeSelection:{module:ModuleNames.RangeSelectionModule},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:function(options){var _a,rowModel=(_a=options.rowModelType)!==null&&_a!==void 0?_a:"clientSide";switch(rowModel){case"clientSide":return null;case"serverSide":var warning="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return options.suppressServerSideInfiniteScroll?warning:null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:ModuleNames.ViewportRowModelModule},serverSideDatasource:{supportedRowModels:["serverSide"],module:ModuleNames.ServerSideRowModelModule},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:ModuleNames.InfiniteRowModelModule},rowData:{supportedRowModels:["clientSide"],module:ModuleNames.ClientSideRowModelModule},columnDefs:function(){return COL_DEF_VALIDATORS},defaultColDef:function(){return COL_DEF_VALIDATORS},defaultColGroupDef:function(){return COL_DEF_VALIDATORS},autoGroupColumnDef:function(){return COL_DEF_VALIDATORS}},GRID_OPTIONS_VALIDATORS={objectName:"gridOptions",allProperties:__spreadArray$8(__spreadArray$8([],__read$a(PropertyKeys.ALL_PROPERTIES),!1),__read$a(ComponentUtil.EVENT_CALLBACKS),!1),propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:GRID_OPTION_DEPRECATIONS,validations:GRID_OPTION_VALIDATIONS},__decorate$n=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$n"),__read$9=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$9"),__spreadArray$7=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$7"),GridOptionsService=function(){function GridOptionsService2(){var _this=this;this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new EventService,this.globalEventHandlerFactory=function(restrictToSyncOnly){return function(eventName,event){if(!_this.destroyed){var alwaysSync=GridOptionsService_1.alwaysSyncGlobalEvents.has(eventName);if(!(alwaysSync&&!restrictToSyncOnly||!alwaysSync&&restrictToSyncOnly)){var eventHandlerName=ComponentUtil.getCallbackForEvent(eventName),eventHandler=_this.gridOptions[eventHandlerName];typeof eventHandler=="function"&&_this.frameworkOverrides.wrapOutgoing(function(){eventHandler(event)})}}}}}__name(GridOptionsService2,"GridOptionsService"),GridOptionsService_1=GridOptionsService2,Object.defineProperty(GridOptionsService2.prototype,"context",{get:function(){return this.gridOptions.context},enumerable:!1,configurable:!0}),GridOptionsService2.prototype.init=function(){this.columnApi=new ColumnApi(this.api);var async=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),async),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()},GridOptionsService2.prototype.destroy=function(){this.destroyed=!0,this.columnApi=void 0},GridOptionsService2.prototype.get=function(property){var _a;return(_a=this.gridOptions[property])!==null&&_a!==void 0?_a:GRID_OPTION_DEFAULTS[property]},GridOptionsService2.prototype.getCallback=function(property){return this.mergeGridCommonParams(this.gridOptions[property])},GridOptionsService2.prototype.exists=function(property){return exists(this.gridOptions[property])},GridOptionsService2.prototype.mergeGridCommonParams=function(callback){var _this=this;if(callback){var wrapped=__name(function(callbackParams){var mergedParams=callbackParams;return mergedParams.api=_this.api,mergedParams.columnApi=_this.columnApi,mergedParams.context=_this.context,callback(mergedParams)},"wrapped");return wrapped}return callback},GridOptionsService2.toBoolean=function(value){return typeof value=="boolean"?value:typeof value=="string"?value.toUpperCase()==="TRUE"||value=="":!1},GridOptionsService2.toNumber=function(value){if(typeof value=="number")return value;if(typeof value=="string"){var parsed=parseInt(value);return isNaN(parsed)?void 0:parsed}},GridOptionsService2.toConstrainedNum=function(min,max){return function(value){var num=GridOptionsService_1.toNumber(value);if(!(num==null||num<min||num>max))return num}},GridOptionsService2.getCoercedValue=function(key,value){var coerceFunc=GridOptionsService_1.PROPERTY_COERCIONS.get(key);return coerceFunc?coerceFunc(value):value},GridOptionsService2.getCoercedGridOptions=function(gridOptions){var newGo={};return Object.entries(gridOptions).forEach(function(_a){var _b=__read$9(_a,2),key=_b[0],value=_b[1],coercedValue=GridOptionsService_1.getCoercedValue(key,value);newGo[key]=coercedValue}),newGo},GridOptionsService2.prototype.updateGridOptions=function(_a){var _this=this,options=_a.options,_b=_a.source,source=_b===void 0?"api":_b,changeSet={id:GridOptionsService_1.changeSetId++,properties:[]},events=[];Object.entries(options).forEach(function(_a2){var _b2=__read$9(_a2,2),key=_b2[0],value=_b2[1];source==="api"&&INITIAL_GRID_OPTION_KEYS[key]&&warnOnce("".concat(key," is an initial property and cannot be updated."));var coercedValue=GridOptionsService_1.getCoercedValue(key,value),shouldForce=typeof coercedValue=="object"&&source==="api",previousValue=_this.gridOptions[key];if(shouldForce||previousValue!==coercedValue){_this.gridOptions[key]=coercedValue;var event_1={type:key,currentValue:coercedValue,previousValue,changeSet,source};events.push(event_1)}}),this.validationService.processGridOptions(this.gridOptions),changeSet.properties=events.map(function(event){return event.type}),events.forEach(function(event){_this.gridOptions.debug&&console.log("AG Grid: Updated property ".concat(event.type," from "),event.previousValue," to  ",event.currentValue),_this.propertyEventService.dispatchEvent(event)})},GridOptionsService2.prototype.addEventListener=function(key,listener){this.propertyEventService.addEventListener(key,listener)},GridOptionsService2.prototype.removeEventListener=function(key,listener){this.propertyEventService.removeEventListener(key,listener)},GridOptionsService2.prototype.getScrollbarWidth=function(){if(this.scrollbarWidth==null){var useGridOptions=typeof this.gridOptions.scrollbarWidth=="number"&&this.gridOptions.scrollbarWidth>=0,scrollbarWidth=useGridOptions?this.gridOptions.scrollbarWidth:getScrollbarWidth();scrollbarWidth!=null&&(this.scrollbarWidth=scrollbarWidth,this.eventService.dispatchEvent({type:Events.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth},GridOptionsService2.prototype.isRowModelType=function(rowModelType){return this.gridOptions.rowModelType===rowModelType||rowModelType==="clientSide"&&missing(this.gridOptions.rowModelType)},GridOptionsService2.prototype.isDomLayout=function(domLayout){var _a,gridLayout=(_a=this.gridOptions.domLayout)!==null&&_a!==void 0?_a:"normal";return gridLayout===domLayout},GridOptionsService2.prototype.isRowSelection=function(){return this.gridOptions.rowSelection==="single"||this.gridOptions.rowSelection==="multiple"},GridOptionsService2.prototype.useAsyncEvents=function(){return!this.get("suppressAsyncEvents")},GridOptionsService2.prototype.isGetRowHeightFunction=function(){return typeof this.gridOptions.getRowHeight=="function"},GridOptionsService2.prototype.getRowHeightForNode=function(rowNode,allowEstimate,defaultRowHeight){if(allowEstimate===void 0&&(allowEstimate=!1),defaultRowHeight==null&&(defaultRowHeight=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(allowEstimate)return{height:defaultRowHeight,estimated:!0};var params={node:rowNode,data:rowNode.data},height=this.getCallback("getRowHeight")(params);if(this.isNumeric(height))return height===0&&warnOnce("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,height),estimated:!1}}if(rowNode.detail&&this.get("masterDetail"))return this.getMasterDetailRowHeight();var rowHeight=this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:defaultRowHeight;return{height:rowHeight,estimated:!1}},GridOptionsService2.prototype.getMasterDetailRowHeight=function(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}},GridOptionsService2.prototype.getRowHeightAsNumber=function(){if(!this.gridOptions.rowHeight||missing(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();var rowHeight=this.environment.refreshRowHeightVariable();return rowHeight!==-1?rowHeight:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())},GridOptionsService2.prototype.isNumeric=function(value){return!isNaN(value)&&typeof value=="number"&&isFinite(value)},GridOptionsService2.prototype.getDomDataKey=function(){return this.domDataKey},GridOptionsService2.prototype.getDomData=function(element,key){var domData=element[this.getDomDataKey()];return domData?domData[key]:void 0},GridOptionsService2.prototype.setDomData=function(element,key,value){var domDataKey=this.getDomDataKey(),domData=element[domDataKey];missing(domData)&&(domData={},element[domDataKey]=domData),domData[key]=value},GridOptionsService2.prototype.getDocument=function(){var result=null;return this.gridOptions.getDocument&&exists(this.gridOptions.getDocument)?result=this.gridOptions.getDocument():this.eGridDiv&&(result=this.eGridDiv.ownerDocument),result&&exists(result)?result:document},GridOptionsService2.prototype.getWindow=function(){var eDocument=this.getDocument();return eDocument.defaultView||window},GridOptionsService2.prototype.getRootNode=function(){return this.eGridDiv.getRootNode()},GridOptionsService2.prototype.getAsyncTransactionWaitMillis=function(){return exists(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50},GridOptionsService2.prototype.isAnimateRows=function(){return this.get("ensureDomOrder")?!1:this.get("animateRows")},GridOptionsService2.prototype.isGroupRowsSticky=function(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))},GridOptionsService2.prototype.isColumnsSortingCoupledToGroup=function(){var autoGroupColumnDef=this.gridOptions.autoGroupColumnDef;return!(autoGroupColumnDef!=null&&autoGroupColumnDef.comparator)&&!this.get("treeData")},GridOptionsService2.prototype.getGroupAggFiltering=function(){var userValue=this.gridOptions.groupAggFiltering;if(typeof userValue=="function")return this.getCallback("groupAggFiltering");if(userValue===!0)return function(){return!0}},GridOptionsService2.prototype.isGroupIncludeFooterTrueOrCallback=function(){var userValue=this.gridOptions.groupIncludeFooter;return userValue===!0||typeof userValue=="function"},GridOptionsService2.prototype.getGroupIncludeFooter=function(){var userValue=this.gridOptions.groupIncludeFooter;return typeof userValue=="function"?this.getCallback("groupIncludeFooter"):userValue===!0?function(){return!0}:function(){return!1}},GridOptionsService2.prototype.isGroupMultiAutoColumn=function(){return this.gridOptions.groupDisplayType?this.gridOptions.groupDisplayType==="multipleColumns":this.get("groupHideOpenParents")},GridOptionsService2.prototype.isGroupUseEntireRow=function(pivotMode){return pivotMode?!1:this.gridOptions.groupDisplayType==="groupRows"},GridOptionsService2.prototype.getGridCommonParams=function(){return{api:this.api,columnApi:this.columnApi,context:this.context}},GridOptionsService2.prototype.addGridCommonParams=function(params){var updatedParams=params;return updatedParams.api=this.api,updatedParams.columnApi=this.columnApi,updatedParams.context=this.context,updatedParams};var GridOptionsService_1;return GridOptionsService2.alwaysSyncGlobalEvents=new Set([Events.EVENT_GRID_PRE_DESTROYED]),GridOptionsService2.PROPERTY_COERCIONS=new Map(__spreadArray$7(__spreadArray$7(__spreadArray$7([],__read$9(PropertyKeys.BOOLEAN_PROPERTIES.map(function(key){return[key,GridOptionsService_1.toBoolean]})),!1),__read$9(PropertyKeys.NUMBER_PROPERTIES.map(function(key){return[key,GridOptionsService_1.toNumber]})),!1),[["groupAggFiltering",function(val){return typeof val=="function"?val:GridOptionsService_1.toBoolean(val)}],["pageSize",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",GridOptionsService_1.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",GridOptionsService_1.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",GridOptionsService_1.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",GridOptionsService_1.toConstrainedNum(0,Number.MAX_VALUE)]],!1)),GridOptionsService2.changeSetId=0,__decorate$n([Autowired("gridOptions")],GridOptionsService2.prototype,"gridOptions",void 0),__decorate$n([Autowired("eventService")],GridOptionsService2.prototype,"eventService",void 0),__decorate$n([Autowired("environment")],GridOptionsService2.prototype,"environment",void 0),__decorate$n([Autowired("frameworkOverrides")],GridOptionsService2.prototype,"frameworkOverrides",void 0),__decorate$n([Autowired("eGridDiv")],GridOptionsService2.prototype,"eGridDiv",void 0),__decorate$n([Autowired("validationService")],GridOptionsService2.prototype,"validationService",void 0),__decorate$n([Autowired("gridApi")],GridOptionsService2.prototype,"api",void 0),__decorate$n([PostConstruct],GridOptionsService2.prototype,"init",null),__decorate$n([PreDestroy],GridOptionsService2.prototype,"destroy",null),GridOptionsService2=GridOptionsService_1=__decorate$n([Bean("gridOptionsService")],GridOptionsService2),GridOptionsService2}(),__extends$n=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$m=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$m"),LocaleService=function(_super){__extends$n(LocaleService2,_super);function LocaleService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(LocaleService2,"LocaleService"),LocaleService2.prototype.getLocaleTextFunc=function(){var getLocaleText=this.gridOptionsService.getCallback("getLocaleText");if(getLocaleText)return function(key,defaultValue,variableValues){var params={key,defaultValue,variableValues};return getLocaleText(params)};var localeText=this.gridOptionsService.get("localeText");return function(key,defaultValue,variableValues){var localisedText=localeText&&localeText[key];if(localisedText&&variableValues&&variableValues.length)for(var found=0;!(found>=variableValues.length);){var idx=localisedText.indexOf("${variable}");if(idx===-1)break;localisedText=localisedText.replace("${variable}",variableValues[found++])}return localisedText??defaultValue}},LocaleService2=__decorate$m([Bean("localeService")],LocaleService2),LocaleService2}(BeanStub),__extends$m=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$l=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$l"),FakeVScrollComp=function(_super){__extends$m(FakeVScrollComp2,_super);function FakeVScrollComp2(){return _super.call(this,FakeVScrollComp2.TEMPLATE,"vertical")||this}return __name(FakeVScrollComp2,"FakeVScrollComp"),FakeVScrollComp2.prototype.postConstruct=function(){_super.prototype.postConstruct.call(this),this.createManagedBean(new SetHeightFeature(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,Events.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))},FakeVScrollComp2.prototype.setScrollVisible=function(){var vScrollShowing=this.scrollVisibleService.isVerticalScrollShowing(),invisibleScrollbar2=this.invisibleScrollbar,scrollbarWidth=vScrollShowing&&this.gridOptionsService.getScrollbarWidth()||0,adjustedScrollbarWidth=scrollbarWidth===0&&invisibleScrollbar2?16:scrollbarWidth;this.addOrRemoveCssClass("ag-scrollbar-invisible",invisibleScrollbar2),setFixedWidth(this.getGui(),adjustedScrollbarWidth),setFixedWidth(this.eViewport,adjustedScrollbarWidth),setFixedWidth(this.eContainer,adjustedScrollbarWidth),this.setDisplayed(vScrollShowing,{skipAriaHidden:!0})},FakeVScrollComp2.prototype.onRowContainerHeightChanged=function(){var ctrlsService=this.ctrlsService,gridBodyCtrl=ctrlsService.getGridBodyCtrl(),gridBodyViewportEl=gridBodyCtrl.getBodyViewportElement(),eViewportScrollTop=this.getScrollPosition(),gridBodyViewportScrollTop=gridBodyViewportEl.scrollTop;eViewportScrollTop!=gridBodyViewportScrollTop&&this.setScrollPosition(gridBodyViewportScrollTop,!0)},FakeVScrollComp2.prototype.getScrollPosition=function(){return this.getViewport().scrollTop},FakeVScrollComp2.prototype.setScrollPosition=function(value,force){!force&&!isVisible(this.getViewport())&&this.attemptSettingScrollPosition(value),this.getViewport().scrollTop=value},FakeVScrollComp2.TEMPLATE=`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">
                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>
            </div>
        </div>`,__decorate$l([PostConstruct],FakeVScrollComp2.prototype,"postConstruct",null),FakeVScrollComp2}(AbstractFakeScrollComp),__extends$l=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$3=__name(function(){return __assign$3=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$3.apply(this,arguments)},"__assign$3"),__decorate$k=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$k"),__read$8=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$8"),__spreadArray$6=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$6"),MONTH_LOCALE_TEXT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},MONTH_KEYS=["january","february","march","april","may","june","july","august","september","october","november","december"],DataTypeService=function(_super){__extends$l(DataTypeService2,_super);function DataTypeService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.dataTypeDefinitions={},_this.isWaitingForRowData=!1,_this.isColumnTypeOverrideInDataTypeDefinitions=!1,_this.columnStateUpdatesPendingInference={},_this.columnStateUpdateListenerDestroyFuncs=[],_this}return __name(DataTypeService2,"DataTypeService"),DataTypeService2.prototype.init=function(){var _this=this;this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",function(){_this.groupHideOpenParents=_this.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",function(event){_this.processDataTypeDefinitions(),_this.columnModel.recreateColumnDefs(convertSourceType(event.source))})},DataTypeService2.prototype.processDataTypeDefinitions=function(){var _this=this,_a,defaultDataTypes=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(defaultDataTypes).forEach(function(_a2){var _b=__read$8(_a2,2),cellDataType=_b[0],dataTypeDefinition=_b[1];_this.dataTypeDefinitions[cellDataType]=__assign$3(__assign$3({},dataTypeDefinition),{groupSafeValueFormatter:_this.createGroupSafeValueFormatter(dataTypeDefinition)})});var dataTypeDefinitions=(_a=this.gridOptionsService.get("dataTypeDefinitions"))!==null&&_a!==void 0?_a:{};this.dataTypeMatchers={},Object.entries(dataTypeDefinitions).forEach(function(_a2){var _b=__read$8(_a2,2),cellDataType=_b[0],dataTypeDefinition=_b[1],mergedDataTypeDefinition=_this.processDataTypeDefinition(dataTypeDefinition,dataTypeDefinitions,[cellDataType],defaultDataTypes);mergedDataTypeDefinition&&(_this.dataTypeDefinitions[cellDataType]=mergedDataTypeDefinition,dataTypeDefinition.dataTypeMatcher&&(_this.dataTypeMatchers[cellDataType]=dataTypeDefinition.dataTypeMatcher))}),this.checkObjectValueHandlers(defaultDataTypes),["dateString","text","number","boolean","date"].forEach(function(cellDataType){var overriddenDataTypeMatcher=_this.dataTypeMatchers[cellDataType];overriddenDataTypeMatcher&&delete _this.dataTypeMatchers[cellDataType],_this.dataTypeMatchers[cellDataType]=overriddenDataTypeMatcher??defaultDataTypes[cellDataType].dataTypeMatcher})},DataTypeService2.prototype.mergeDataTypeDefinitions=function(parentDataTypeDefinition,childDataTypeDefinition){var mergedDataTypeDefinition=__assign$3(__assign$3({},parentDataTypeDefinition),childDataTypeDefinition);return parentDataTypeDefinition.columnTypes&&childDataTypeDefinition.columnTypes&&childDataTypeDefinition.appendColumnTypes&&(mergedDataTypeDefinition.columnTypes=__spreadArray$6(__spreadArray$6([],__read$8(this.convertColumnTypes(parentDataTypeDefinition.columnTypes)),!1),__read$8(this.convertColumnTypes(childDataTypeDefinition.columnTypes)),!1)),mergedDataTypeDefinition},DataTypeService2.prototype.processDataTypeDefinition=function(dataTypeDefinition,dataTypeDefinitions,alreadyProcessedDataTypes,defaultDataTypes){var mergedDataTypeDefinition,extendsCellDataType=dataTypeDefinition.extendsDataType;if(dataTypeDefinition.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),dataTypeDefinition.extendsDataType===dataTypeDefinition.baseDataType){var baseDataTypeDefinition=defaultDataTypes[extendsCellDataType],overriddenBaseDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(baseDataTypeDefinition&&overriddenBaseDataTypeDefinition&&(baseDataTypeDefinition=overriddenBaseDataTypeDefinition),!this.validateDataTypeDefinition(dataTypeDefinition,baseDataTypeDefinition,extendsCellDataType))return;mergedDataTypeDefinition=this.mergeDataTypeDefinitions(baseDataTypeDefinition,dataTypeDefinition)}else{if(alreadyProcessedDataTypes.includes(extendsCellDataType)){warnOnce('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}var extendedDataTypeDefinition=dataTypeDefinitions[extendsCellDataType];if(!this.validateDataTypeDefinition(dataTypeDefinition,extendedDataTypeDefinition,extendsCellDataType))return;var mergedExtendedDataTypeDefinition=this.processDataTypeDefinition(extendedDataTypeDefinition,dataTypeDefinitions,__spreadArray$6(__spreadArray$6([],__read$8(alreadyProcessedDataTypes),!1),[extendsCellDataType],!1),defaultDataTypes);if(!mergedExtendedDataTypeDefinition)return;mergedDataTypeDefinition=this.mergeDataTypeDefinitions(mergedExtendedDataTypeDefinition,dataTypeDefinition)}return __assign$3(__assign$3({},mergedDataTypeDefinition),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(mergedDataTypeDefinition)})},DataTypeService2.prototype.validateDataTypeDefinition=function(dataTypeDefinition,parentDataTypeDefinition,parentCellDataType){return parentDataTypeDefinition?parentDataTypeDefinition.baseDataType!==dataTypeDefinition.baseDataType?(warnOnce('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(warnOnce("The data type definition ".concat(parentCellDataType," does not exist.")),!1)},DataTypeService2.prototype.createGroupSafeValueFormatter=function(dataTypeDefinition){var _this=this;if(dataTypeDefinition.valueFormatter)return function(params){var _a,_b;if(!((_a=params.node)===null||_a===void 0)&&_a.group){var aggFunc=params.column.getAggFunc();if(aggFunc){if(aggFunc==="first"||aggFunc==="last")return dataTypeDefinition.valueFormatter(params);if(dataTypeDefinition.baseDataType==="number"&&aggFunc!=="count"){if(typeof params.value=="number")return dataTypeDefinition.valueFormatter(params);if(typeof params.value=="object"){if(!params.value)return;if("toNumber"in params.value)return dataTypeDefinition.valueFormatter(__assign$3(__assign$3({},params),{value:params.value.toNumber()}));if("value"in params.value)return dataTypeDefinition.valueFormatter(__assign$3(__assign$3({},params),{value:params.value.value}))}}}if(!_this.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(_this.groupHideOpenParents&&params.column.isRowGroupActive()){if(typeof params.value!="string"||!((_b=dataTypeDefinition.dataTypeMatcher)===null||_b===void 0)&&_b.call(dataTypeDefinition,params.value))return dataTypeDefinition.valueFormatter(params);if(!_this.gridOptionsService.get("suppressGroupMaintainValueType"))return}return dataTypeDefinition.valueFormatter(params)}},DataTypeService2.prototype.updateColDefAndGetDataTypeDefinitionColumnType=function(colDef,userColDef,colId){var cellDataType=userColDef.cellDataType,field=userColDef.field;if(cellDataType===void 0&&(cellDataType=colDef.cellDataType),(cellDataType==null||cellDataType===!0)&&(cellDataType=this.canInferCellDataType(colDef,userColDef)?this.inferCellDataType(field,colId):!1),!cellDataType){colDef.cellDataType=!1;return}var dataTypeDefinition=this.dataTypeDefinitions[cellDataType];if(!dataTypeDefinition){warnOnce('Missing data type definition - "'.concat(cellDataType,'"'));return}return colDef.cellDataType=cellDataType,dataTypeDefinition.groupSafeValueFormatter&&(colDef.valueFormatter=dataTypeDefinition.groupSafeValueFormatter),dataTypeDefinition.valueParser&&(colDef.valueParser=dataTypeDefinition.valueParser),dataTypeDefinition.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(colDef,dataTypeDefinition,colId),dataTypeDefinition.columnTypes},DataTypeService2.prototype.updateColDefAndGetColumnType=function(colDef,userColDef,colId){var _a,_b,dataTypeDefinitionColumnType=this.updateColDefAndGetDataTypeDefinitionColumnType(colDef,userColDef,colId),columnTypes=(_b=(_a=userColDef.type)!==null&&_a!==void 0?_a:dataTypeDefinitionColumnType)!==null&&_b!==void 0?_b:colDef.type;return colDef.type=columnTypes,columnTypes?this.convertColumnTypes(columnTypes):void 0},DataTypeService2.prototype.addColumnListeners=function(column){if(this.isWaitingForRowData){var columnStateUpdates=this.columnStateUpdatesPendingInference[column.getColId()];if(columnStateUpdates){var columnListener=__name(function(event){columnStateUpdates.add(event.key)},"columnListener");column.addEventListener(Column.EVENT_STATE_UPDATED,columnListener),this.columnStateUpdateListenerDestroyFuncs.push(function(){return column.removeEventListener(Column.EVENT_STATE_UPDATED,columnListener)})}}},DataTypeService2.prototype.canInferCellDataType=function(colDef,userColDef){var _this=this,_a;if(this.rowModel.getType()!=="clientSide")return!1;var propsToCheckForInference={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(userColDef,propsToCheckForInference))return!1;var columnTypes=userColDef.type===null?colDef.type:userColDef.type;if(columnTypes){var columnTypeDefs_1=(_a=this.gridOptionsService.get("columnTypes"))!==null&&_a!==void 0?_a:{},hasPropsPreventingInference=this.convertColumnTypes(columnTypes).some(function(columnType){var columnTypeDef=columnTypeDefs_1[columnType.trim()];return columnTypeDef&&_this.doColDefPropsPreventInference(columnTypeDef,propsToCheckForInference)});if(hasPropsPreventingInference)return!1}return!this.doColDefPropsPreventInference(colDef,propsToCheckForInference)},DataTypeService2.prototype.doColDefPropsPreventInference=function(colDef,propsToCheckForInference){var _this=this;return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(function(_a){var _b=__read$8(_a,2),prop=_b[0],comparisonValue=_b[1];return _this.doesColDefPropPreventInference(colDef,propsToCheckForInference,prop,comparisonValue)})},DataTypeService2.prototype.doesColDefPropPreventInference=function(colDef,checkProps,prop,comparisonValue){if(!checkProps[prop])return!1;var value=colDef[prop];return value===null?(checkProps[prop]=!1,!1):comparisonValue===void 0?!!value:value===comparisonValue},DataTypeService2.prototype.inferCellDataType=function(field,colId){var _a;if(field){var value,initialData=this.getInitialData();if(initialData){var fieldContainsDots=field.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");value=getValueUsingField(initialData,field,fieldContainsDots)}else this.initWaitForRowData(colId);if(value!=null){var _b=__read$8((_a=Object.entries(this.dataTypeMatchers).find(function(_a2){var _b2=__read$8(_a2,2);_b2[0];var dataTypeMatcher=_b2[1];return dataTypeMatcher(value)}))!==null&&_a!==void 0?_a:["object"],1),cellDataType=_b[0];return cellDataType}}},DataTypeService2.prototype.getInitialData=function(){var rowData=this.gridOptionsService.get("rowData");if(rowData!=null&&rowData.length)return rowData[0];if(this.initialData)return this.initialData;var rowNodes=this.rowModel.getRootNode().allLeafChildren;return rowNodes!=null&&rowNodes.length?rowNodes[0].data:null},DataTypeService2.prototype.initWaitForRowData=function(colId){var _this=this;if(this.columnStateUpdatesPendingInference[colId]=new Set,!this.isWaitingForRowData){this.isWaitingForRowData=!0;var columnTypeOverridesExist=this.isColumnTypeOverrideInDataTypeDefinitions;columnTypeOverridesExist&&this.columnModel.queueResizeOperations();var destroyFunc=this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATE_STARTED,function(event){var firstRowData=event.firstRowData;if(firstRowData){destroyFunc==null||destroyFunc(),_this.isWaitingForRowData=!1,_this.processColumnsPendingInference(firstRowData,columnTypeOverridesExist),_this.columnStateUpdatesPendingInference={},columnTypeOverridesExist&&_this.columnModel.processResizeOperations();var dataTypesInferredEvent={type:Events.EVENT_DATA_TYPES_INFERRED};_this.eventService.dispatchEvent(dataTypesInferredEvent)}})}},DataTypeService2.prototype.isPendingInference=function(){return this.isWaitingForRowData},DataTypeService2.prototype.processColumnsPendingInference=function(firstRowData,columnTypeOverridesExist){var _this=this;this.initialData=firstRowData;var state=[];this.columnStateUpdateListenerDestroyFuncs.forEach(function(destroyFunc){return destroyFunc()}),this.columnStateUpdateListenerDestroyFuncs=[];var newRowGroupColumnStateWithoutIndex={},newPivotColumnStateWithoutIndex={};Object.entries(this.columnStateUpdatesPendingInference).forEach(function(_a){var _b=__read$8(_a,2),colId=_b[0],columnStateUpdates=_b[1],column=_this.columnModel.getGridColumn(colId);if(column){var oldColDef=column.getColDef();if(_this.columnModel.resetColumnDefIntoColumn(column,"cellDataTypeInferred")){var newColDef=column.getColDef();if(columnTypeOverridesExist&&newColDef.type&&newColDef.type!==oldColDef.type){var updatedColumnState=_this.getUpdatedColumnState(column,columnStateUpdates);updatedColumnState.rowGroup&&updatedColumnState.rowGroupIndex==null&&(newRowGroupColumnStateWithoutIndex[colId]=updatedColumnState),updatedColumnState.pivot&&updatedColumnState.pivotIndex==null&&(newPivotColumnStateWithoutIndex[colId]=updatedColumnState),state.push(updatedColumnState)}}}}),columnTypeOverridesExist&&state.push.apply(state,__spreadArray$6([],__read$8(this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(newRowGroupColumnStateWithoutIndex,newPivotColumnStateWithoutIndex)),!1)),state.length&&this.columnModel.applyColumnState({state},"cellDataTypeInferred"),this.initialData=null},DataTypeService2.prototype.getUpdatedColumnState=function(column,columnStateUpdates){var columnState=this.columnModel.getColumnStateFromColDef(column);return columnStateUpdates.forEach(function(key){delete columnState[key],key==="rowGroup"?delete columnState.rowGroupIndex:key==="pivot"&&delete columnState.pivotIndex}),columnState},DataTypeService2.prototype.checkObjectValueHandlers=function(defaultDataTypes){var resolvedObjectDataTypeDefinition=this.dataTypeDefinitions.object,defaultObjectDataTypeDefinition=defaultDataTypes.object;this.hasObjectValueParser=resolvedObjectDataTypeDefinition.valueParser!==defaultObjectDataTypeDefinition.valueParser,this.hasObjectValueFormatter=resolvedObjectDataTypeDefinition.valueFormatter!==defaultObjectDataTypeDefinition.valueFormatter},DataTypeService2.prototype.convertColumnTypes=function(type){var typeKeys=[];if(type instanceof Array){var invalidArray=type.some(function(a){return typeof a!="string"});invalidArray?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):typeKeys=type}else typeof type=="string"?typeKeys=type.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'");return typeKeys},DataTypeService2.prototype.getDateStringTypeDefinition=function(column){var _a;return column?(_a=this.getDataTypeDefinition(column))!==null&&_a!==void 0?_a:this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString},DataTypeService2.prototype.getDateParserFunction=function(column){return this.getDateStringTypeDefinition(column).dateParser},DataTypeService2.prototype.getDateFormatterFunction=function(column){return this.getDateStringTypeDefinition(column).dateFormatter},DataTypeService2.prototype.getDataTypeDefinition=function(column){var colDef=column.getColDef();if(colDef.cellDataType)return this.dataTypeDefinitions[colDef.cellDataType]},DataTypeService2.prototype.getBaseDataType=function(column){var _a;return(_a=this.getDataTypeDefinition(column))===null||_a===void 0?void 0:_a.baseDataType},DataTypeService2.prototype.checkType=function(column,value){var _a;if(value==null)return!0;var dataTypeMatcher=(_a=this.getDataTypeDefinition(column))===null||_a===void 0?void 0:_a.dataTypeMatcher;return dataTypeMatcher?dataTypeMatcher(value):!0},DataTypeService2.prototype.validateColDef=function(colDef){colDef.cellDataType==="object"&&(colDef.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&warnOnce('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),colDef.editable&&colDef.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&warnOnce('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))},DataTypeService2.prototype.setColDefPropertiesForBaseDataType=function(colDef,dataTypeDefinition,colId){var _this=this,formatValue=__name(function(column,node,value){var valueFormatter=column.getColDef().valueFormatter;return valueFormatter===dataTypeDefinition.groupSafeValueFormatter&&(valueFormatter=dataTypeDefinition.valueFormatter),_this.valueFormatterService.formatValue(column,node,value,valueFormatter)},"formatValue"),usingSetFilter=ModuleRegistry.__isRegistered(ModuleNames.SetFilterModule,this.context.getGridId()),translate=this.localeService.getLocaleTextFunc(),mergeFilterParams=__name(function(params){var filterParams=colDef.filterParams;colDef.filterParams=typeof filterParams=="object"?__assign$3(__assign$3({},filterParams),params):params},"mergeFilterParams");switch(dataTypeDefinition.baseDataType){case"number":{colDef.cellEditor="agNumberCellEditor",usingSetFilter&&mergeFilterParams({comparator:function(a,b){var valA=a==null?0:parseInt(a),valB=b==null?0:parseInt(b);return valA===valB?0:valA>valB?1:-1}});break}case"boolean":{colDef.cellEditor="agCheckboxCellEditor",colDef.cellRenderer="agCheckboxCellRenderer",colDef.suppressKeyboardEvent=function(params){return!!params.colDef.editable&&params.event.key===KeyCode.SPACE},mergeFilterParams(usingSetFilter?{valueFormatter:function(params){return exists(params.value)?translate(String(params.value),params.value?"True":"False"):translate("blanks","(Blanks)")}}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:function(_filterValues,cellValue){return cellValue},numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:function(_filterValues,cellValue){return cellValue===!1},numberOfInputs:0}]});break}case"date":{colDef.cellEditor="agDateCellEditor",colDef.keyCreator=function(params){return formatValue(params.column,params.node,params.value)},usingSetFilter&&mergeFilterParams({valueFormatter:function(params){var valueFormatted=formatValue(params.column,params.node,params.value);return exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},treeList:!0,treeListFormatter:function(pathKey,level){if(level===1&&pathKey!=null){var monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return pathKey??translate("blanks","(Blanks)")}});break}case"dateString":{colDef.cellEditor="agDateStringCellEditor",colDef.keyCreator=function(params){return formatValue(params.column,params.node,params.value)};var convertToDate_1=dataTypeDefinition.dateParser;mergeFilterParams(usingSetFilter?{valueFormatter:function(params){var valueFormatted=formatValue(params.column,params.node,params.value);return exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")},treeList:!0,treeListPathGetter:function(value){var date=convertToDate_1(value??void 0);return date?[String(date.getFullYear()),String(date.getMonth()+1),String(date.getDate())]:null},treeListFormatter:function(pathKey,level){if(level===1&&pathKey!=null){var monthKey=MONTH_KEYS[Number(pathKey)-1];return translate(monthKey,MONTH_LOCALE_TEXT[monthKey])}return pathKey??translate("blanks","(Blanks)")}}:{comparator:function(filterDate,cellValue){var cellAsDate=convertToDate_1(cellValue);return cellValue==null||cellAsDate<filterDate?-1:cellAsDate>filterDate?1:0}});break}case"object":{colDef.cellEditorParams={useFormatter:!0},colDef.comparator=function(a,b){var column=_this.columnModel.getPrimaryColumn(colId),colDef2=column==null?void 0:column.getColDef();if(!column||!colDef2)return 0;var valA=a==null?"":formatValue(column,null,a),valB=b==null?"":formatValue(column,null,b);return valA===valB?0:valA>valB?1:-1},colDef.keyCreator=function(params){return formatValue(params.column,params.node,params.value)},usingSetFilter?mergeFilterParams({valueFormatter:function(params){var valueFormatted=formatValue(params.column,params.node,params.value);return exists(valueFormatted)?valueFormatted:translate("blanks","(Blanks)")}}):colDef.filterValueGetter=function(params){return formatValue(params.column,params.node,_this.valueService.getValue(params.column,params.node))};break}}},DataTypeService2.prototype.getDefaultDataTypes=function(){var defaultDateFormatMatcher=__name(function(value){return!!value.match("^\\d{4}-\\d{2}-\\d{2}$")},"defaultDateFormatMatcher"),translate=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:function(params){var _a,_b;return((_b=(_a=params.newValue)===null||_a===void 0?void 0:_a.trim)===null||_b===void 0?void 0:_b.call(_a))===""?null:Number(params.newValue)},valueFormatter:function(params){return params.value==null?"":typeof params.value!="number"||isNaN(params.value)?translate("invalidNumber","Invalid Number"):String(params.value)},dataTypeMatcher:function(value){return typeof value=="number"}},text:{baseDataType:"text",valueParser:function(params){return params.newValue===""?null:toStringOrNull(params.newValue)},dataTypeMatcher:function(value){return typeof value=="string"}},boolean:{baseDataType:"boolean",valueParser:function(params){var _a,_b;return params.newValue==null?params.newValue:((_b=(_a=params.newValue)===null||_a===void 0?void 0:_a.trim)===null||_b===void 0?void 0:_b.call(_a))===""?null:String(params.newValue).toLowerCase()==="true"},valueFormatter:function(params){return params.value==null?"":String(params.value)},dataTypeMatcher:function(value){return typeof value=="boolean"}},date:{baseDataType:"date",valueParser:function(params){return parseDateTimeFromString(params.newValue==null?null:String(params.newValue))},valueFormatter:function(params){var _a;return params.value==null?"":!(params.value instanceof Date)||isNaN(params.value.getTime())?translate("invalidDate","Invalid Date"):(_a=serialiseDate(params.value,!1))!==null&&_a!==void 0?_a:""},dataTypeMatcher:function(value){return value instanceof Date}},dateString:{baseDataType:"dateString",dateParser:function(value){var _a;return(_a=parseDateTimeFromString(value))!==null&&_a!==void 0?_a:void 0},dateFormatter:function(value){var _a;return(_a=serialiseDate(value??null,!1))!==null&&_a!==void 0?_a:void 0},valueParser:function(params){return defaultDateFormatMatcher(String(params.newValue))?params.newValue:null},valueFormatter:function(params){return defaultDateFormatMatcher(String(params.value))?params.value:""},dataTypeMatcher:function(value){return typeof value=="string"&&defaultDateFormatMatcher(value)}},object:{baseDataType:"object",valueParser:function(){return null},valueFormatter:function(params){var _a;return(_a=toStringOrNull(params.value))!==null&&_a!==void 0?_a:""}}}},__decorate$k([Autowired("rowModel")],DataTypeService2.prototype,"rowModel",void 0),__decorate$k([Autowired("columnModel")],DataTypeService2.prototype,"columnModel",void 0),__decorate$k([Autowired("columnUtils")],DataTypeService2.prototype,"columnUtils",void 0),__decorate$k([Autowired("valueService")],DataTypeService2.prototype,"valueService",void 0),__decorate$k([Autowired("valueFormatterService")],DataTypeService2.prototype,"valueFormatterService",void 0),__decorate$k([PostConstruct],DataTypeService2.prototype,"init",null),DataTypeService2=__decorate$k([Bean("dataTypeService")],DataTypeService2),DataTypeService2}(BeanStub),__extends$k=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$j=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$j"),ValueParserService=function(_super){__extends$k(ValueParserService2,_super);function ValueParserService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ValueParserService2,"ValueParserService"),ValueParserService2.prototype.parseValue=function(column,rowNode,newValue,oldValue){var colDef=column.getColDef(),params=this.gridOptionsService.addGridCommonParams({node:rowNode,data:rowNode==null?void 0:rowNode.data,oldValue,newValue,colDef,column}),valueParser=colDef.valueParser;return exists(valueParser)?typeof valueParser=="function"?valueParser(params):this.expressionService.evaluate(valueParser,params):newValue},__decorate$j([Autowired("expressionService")],ValueParserService2.prototype,"expressionService",void 0),ValueParserService2=__decorate$j([Bean("valueParserService")],ValueParserService2),ValueParserService2}(BeanStub),__extends$j=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$i=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$i"),SyncService=function(_super){__extends$j(SyncService2,_super);function SyncService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.waitingForColumns=!1,_this}return __name(SyncService2,"SyncService"),SyncService2.prototype.postConstruct=function(){var _this=this;this.addManagedPropertyListener("columnDefs",function(event){return _this.setColumnDefs(event)})},SyncService2.prototype.start=function(){var _this=this;this.ctrlsService.whenReady(function(){var columnDefs=_this.gridOptionsService.get("columnDefs");columnDefs?_this.setColumnsAndData(columnDefs):_this.waitingForColumns=!0,_this.gridReady()})},SyncService2.prototype.setColumnsAndData=function(columnDefs){this.columnModel.setColumnDefs(columnDefs??[],"gridInitializing"),this.rowModel.start()},SyncService2.prototype.gridReady=function(){var _this=this;this.dispatchGridReadyEvent();var isEnterprise=ModuleRegistry.__isRegistered(ModuleNames.EnterpriseCoreModule,this.context.getGridId()),logger=new Logger("AG Grid",function(){return _this.gridOptionsService.get("debug")});logger.log("initialised successfully, enterprise = ".concat(isEnterprise))},SyncService2.prototype.dispatchGridReadyEvent=function(){var readyEvent={type:Events.EVENT_GRID_READY};this.eventService.dispatchEvent(readyEvent)},SyncService2.prototype.setColumnDefs=function(event){var columnDefs=this.gridOptionsService.get("columnDefs");if(columnDefs){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(columnDefs);return}this.columnModel.setColumnDefs(columnDefs,convertSourceType(event.source))}},__decorate$i([Autowired("ctrlsService")],SyncService2.prototype,"ctrlsService",void 0),__decorate$i([Autowired("columnModel")],SyncService2.prototype,"columnModel",void 0),__decorate$i([Autowired("rowModel")],SyncService2.prototype,"rowModel",void 0),__decorate$i([PostConstruct],SyncService2.prototype,"postConstruct",null),SyncService2=__decorate$i([Bean("syncService")],SyncService2),SyncService2}(BeanStub),__extends$i=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$2=__name(function(){return __assign$2=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$2.apply(this,arguments)},"__assign$2"),__decorate$h=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$h"),OverlayService=function(_super){__extends$i(OverlayService2,_super);function OverlayService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.manuallyDisplayed=!1,_this}return __name(OverlayService2,"OverlayService"),OverlayService2.prototype.postConstruct=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_ROW_DATA_UPDATED,function(){return _this.onRowDataUpdated()}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return _this.onNewColumnsLoaded()})},OverlayService2.prototype.registerOverlayWrapperComp=function(overlayWrapperComp){this.overlayWrapperComp=overlayWrapperComp,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()},OverlayService2.prototype.showLoadingOverlay=function(){if(!this.gridOptionsService.get("suppressLoadingOverlay")){var params={},compDetails=this.userComponentFactory.getLoadingOverlayCompDetails(params);this.showOverlay(compDetails,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}},OverlayService2.prototype.showNoRowsOverlay=function(){if(!this.gridOptionsService.get("suppressNoRowsOverlay")){var params={},compDetails=this.userComponentFactory.getNoRowsOverlayCompDetails(params);this.showOverlay(compDetails,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}},OverlayService2.prototype.showOverlay=function(compDetails,wrapperCssClass,gridOption){var _this=this,promise=compDetails.newAgStackInstance(),listenerDestroyFunc=this.addManagedPropertyListener(gridOption,function(_a){var currentValue=_a.currentValue;promise.then(function(comp){comp.refresh&&comp.refresh(_this.gridOptionsService.addGridCommonParams(__assign$2({},currentValue??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(promise,wrapperCssClass,listenerDestroyFunc)},OverlayService2.prototype.hideOverlay=function(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()},OverlayService2.prototype.showOrHideOverlay=function(){var isEmpty=this.paginationProxy.isEmpty(),isSuppressNoRowsOverlay=this.gridOptionsService.get("suppressNoRowsOverlay");isEmpty&&!isSuppressNoRowsOverlay?this.showNoRowsOverlay():this.hideOverlay()},OverlayService2.prototype.onRowDataUpdated=function(){this.showOrHideOverlay()},OverlayService2.prototype.onNewColumnsLoaded=function(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()},__decorate$h([Autowired("userComponentFactory")],OverlayService2.prototype,"userComponentFactory",void 0),__decorate$h([Autowired("paginationProxy")],OverlayService2.prototype,"paginationProxy",void 0),__decorate$h([Autowired("columnModel")],OverlayService2.prototype,"columnModel",void 0),__decorate$h([PostConstruct],OverlayService2.prototype,"postConstruct",null),OverlayService2=__decorate$h([Bean("overlayService")],OverlayService2),OverlayService2}(BeanStub),__extends$h=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign$1=__name(function(){return __assign$1=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign$1.apply(this,arguments)},"__assign$1"),__decorate$g=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$g"),__values$1=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values$1"),__read$7=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$7"),StateService=function(_super){__extends$h(StateService2,_super);function StateService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.suppressEvents=!0,_this.queuedUpdateSources=new Set,_this.dispatchStateUpdateEventDebounced=debounce(function(){return _this.dispatchQueuedStateUpdateEvents()},0),_this}return __name(StateService2,"StateService"),StateService2.prototype.postConstruct=function(){var _this=this,_a;this.isClientSideRowModel=this.rowModel.getType()==="clientSide",this.cachedState=(_a=this.gridOptionsService.get("initialState"))!==null&&_a!==void 0?_a:{},this.ctrlsService.whenReady(function(){return _this.suppressEventsAndDispatchInitEvent(function(){return _this.setupStateOnGridReady()})});var newColumnsLoadedDestroyFunc=this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(_a2){var source=_a2.source;source==="gridInitializing"&&(newColumnsLoadedDestroyFunc==null||newColumnsLoadedDestroyFunc(),_this.suppressEventsAndDispatchInitEvent(function(){return _this.setupStateOnColumnsInitialised()}))}),rowCountReadyDestroyFunc=this.addManagedListener(this.eventService,Events.EVENT_ROW_COUNT_READY,function(){rowCountReadyDestroyFunc==null||rowCountReadyDestroyFunc(),_this.suppressEventsAndDispatchInitEvent(function(){return _this.setupStateOnRowCountReady()})}),firstDataRenderedDestroyFunc=this.addManagedListener(this.eventService,Events.EVENT_FIRST_DATA_RENDERED,function(){firstDataRenderedDestroyFunc==null||firstDataRenderedDestroyFunc(),_this.suppressEventsAndDispatchInitEvent(function(){return _this.setupStateOnFirstDataRendered()})})},StateService2.prototype.getState=function(){return this.cachedState},StateService2.prototype.setupStateOnGridReady=function(){var _this=this;this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,Events.EVENT_TOOL_PANEL_VISIBLE_CHANGED,function(){return _this.updateCachedState("sideBar",_this.getSideBarState())}),this.addManagedListener(this.eventService,Events.EVENT_SIDE_BAR_UPDATED,function(){return _this.updateCachedState("sideBar",_this.getSideBarState())})},StateService2.prototype.setupStateOnColumnsInitialised=function(){var _this=this,_a,initialState=(_a=this.gridOptionsService.get("initialState"))!==null&&_a!==void 0?_a:{};this.setColumnState(initialState),this.setColumnGroupState(initialState),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,function(){return _this.updateColumnState(["aggregation"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_MOVED,function(){return _this.updateColumnState(["columnOrder"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PINNED,function(){return _this.updateColumnState(["columnPinning"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_RESIZED,function(){return _this.updateColumnState(["columnSizing"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VISIBLE,function(){return _this.updateColumnState(["columnVisibility"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,function(){return _this.updateColumnState(["pivot"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,function(){return _this.updateColumnState(["pivot"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,function(){return _this.updateColumnState(["rowGroup"])}),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,function(){return _this.updateColumnState(["sort"])}),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,function(){return _this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])}),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_GROUP_OPENED,function(){return _this.updateCachedState("columnGroup",_this.getColumnGroupState())})},StateService2.prototype.setupStateOnRowCountReady=function(){var _this=this,_a,_b=(_a=this.gridOptionsService.get("initialState"))!==null&&_a!==void 0?_a:{},filterState=_b.filter,rowGroupExpansionState=_b.rowGroupExpansion,rowSelectionState=_b.rowSelection,paginationState=_b.pagination,advancedFilterModel=this.gridOptionsService.get("advancedFilterModel");(filterState||advancedFilterModel)&&this.setFilterState(filterState,advancedFilterModel),rowGroupExpansionState&&this.setRowGroupExpansionState(rowGroupExpansionState),rowSelectionState&&this.setRowSelectionState(rowSelectionState),paginationState&&this.setPaginationState(paginationState),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,function(){return _this.updateCachedState("filter",_this.getFilterState())}),this.addManagedListener(this.eventService,Events.EVENT_ROW_GROUP_OPENED,function(){return _this.updateCachedState("rowGroupExpansion",_this.getRowGroupExpansionState())}),this.addManagedListener(this.eventService,Events.EVENT_EXPAND_COLLAPSE_ALL,function(){return _this.updateCachedState("rowGroupExpansion",_this.getRowGroupExpansionState())}),this.addManagedListener(this.eventService,Events.EVENT_SELECTION_CHANGED,function(){return _this.updateCachedState("rowSelection",_this.getRowSelectionState())}),this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,function(event){(event.newPage||event.newPageSize)&&_this.updateCachedState("pagination",_this.getPaginationState())})},StateService2.prototype.setupStateOnFirstDataRendered=function(){var _this=this,_a,_b=(_a=this.gridOptionsService.get("initialState"))!==null&&_a!==void 0?_a:{},scrollState=_b.scroll,rangeSelectionState=_b.rangeSelection,focusedCellState=_b.focusedCell,columnOrderState=_b.columnOrder;focusedCellState&&this.setFocusedCellState(focusedCellState),rangeSelectionState&&this.setRangeSelectionState(rangeSelectionState),scrollState&&this.setScrollState(scrollState),this.setColumnPivotState(!!(columnOrderState!=null&&columnOrderState.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,Events.EVENT_CELL_FOCUSED,function(){return _this.updateCachedState("focusedCell",_this.getFocusedCellState())}),this.addManagedListener(this.eventService,Events.EVENT_RANGE_SELECTION_CHANGED,function(event){event.finished&&_this.updateCachedState("rangeSelection",_this.getRangeSelectionState())}),this.addManagedListener(this.eventService,Events.EVENT_BODY_SCROLL_END,function(){return _this.updateCachedState("scroll",_this.getScrollState())})},StateService2.prototype.getColumnState=function(){for(var pivotMode=this.columnModel.isPivotMode(),sortColumns=[],groupColIds=[],aggregationColumns=[],pivotColIds=[],leftColIds=[],rightColIds=[],hiddenColIds=[],columnSizes=[],columns=[],columnState=this.columnModel.getColumnState(),i=0;i<columnState.length;i++){var _a=columnState[i],colId=_a.colId,sort=_a.sort,sortIndex=_a.sortIndex,rowGroup=_a.rowGroup,rowGroupIndex=_a.rowGroupIndex,aggFunc=_a.aggFunc,pivot=_a.pivot,pivotIndex=_a.pivotIndex,pinned=_a.pinned,hide=_a.hide,width=_a.width,flex=_a.flex;columns.push(colId),sort&&(sortColumns[sortIndex??0]={colId,sort}),rowGroup&&(groupColIds[rowGroupIndex??0]=colId),typeof aggFunc=="string"&&aggregationColumns.push({colId,aggFunc}),pivot&&(pivotColIds[pivotIndex??0]=colId),pinned&&(pinned==="right"?rightColIds:leftColIds).push(colId),hide&&hiddenColIds.push(colId),(flex||width)&&columnSizes.push({colId,flex:flex??void 0,width})}return{sort:sortColumns.length?{sortModel:sortColumns}:void 0,rowGroup:groupColIds.length?{groupColIds}:void 0,aggregation:aggregationColumns.length?{aggregationModel:aggregationColumns}:void 0,pivot:pivotColIds.length||pivotMode?{pivotMode,pivotColIds}:void 0,columnPinning:leftColIds.length||rightColIds.length?{leftColIds,rightColIds}:void 0,columnVisibility:hiddenColIds.length?{hiddenColIds}:void 0,columnSizing:columnSizes.length?{columnSizingModel:columnSizes}:void 0,columnOrder:columns.length?{orderedColIds:columns}:void 0}},StateService2.prototype.setColumnState=function(initialState){var sortState=initialState.sort,groupState=initialState.rowGroup,aggregationState=initialState.aggregation,pivotState=initialState.pivot,columnPinningState=initialState.columnPinning,columnVisibilityState=initialState.columnVisibility,columnSizingState=initialState.columnSizing,columnOrderState=initialState.columnOrder,columnStateMap={},getColumnState=__name(function(colId){var columnState=columnStateMap[colId];return columnState||(columnState={colId},columnStateMap[colId]=columnState,columnState)},"getColumnState");sortState&&sortState.sortModel.forEach(function(_a,sortIndex){var colId=_a.colId,sort=_a.sort,columnState=getColumnState(colId);columnState.sort=sort,columnState.sortIndex=sortIndex}),groupState&&groupState.groupColIds.forEach(function(colId,rowGroupIndex){var columnState=getColumnState(colId);columnState.rowGroup=!0,columnState.rowGroupIndex=rowGroupIndex}),aggregationState&&aggregationState.aggregationModel.forEach(function(_a){var colId=_a.colId,aggFunc=_a.aggFunc;getColumnState(colId).aggFunc=aggFunc}),pivotState&&(pivotState.pivotColIds.forEach(function(colId,pivotIndex){var columnState=getColumnState(colId);columnState.pivot=!0,columnState.pivotIndex=pivotIndex}),this.gridOptionsService.updateGridOptions({options:{pivotMode:pivotState.pivotMode},source:"gridInitializing"})),columnPinningState&&(columnPinningState.leftColIds.forEach(function(colId){getColumnState(colId).pinned="left"}),columnPinningState.rightColIds.forEach(function(colId){getColumnState(colId).pinned="right"})),columnVisibilityState&&columnVisibilityState.hiddenColIds.forEach(function(colId){getColumnState(colId).hide=!0}),columnSizingState&&columnSizingState.columnSizingModel.forEach(function(_a){var colId=_a.colId,flex=_a.flex,width=_a.width,columnState=getColumnState(colId);columnState.flex=flex??null,columnState.width=width});var columns=columnOrderState==null?void 0:columnOrderState.orderedColIds,applyOrder=!!(columns!=null&&columns.length),columnStates=applyOrder?columns.map(function(colId){return getColumnState(colId)}):Object.values(columnStateMap);if(columnStates.length){this.columnStates=columnStates;var defaultState={sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};this.columnModel.applyColumnState({state:columnStates,applyOrder,defaultState},"gridInitializing")}},StateService2.prototype.setColumnPivotState=function(applyOrder){var e_1,_a,columnStates=this.columnStates;this.columnStates=void 0;var columnGroupStates=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.columnModel.isSecondaryColumnsPresent()){if(columnStates){var secondaryColumnStates=[];try{for(var columnStates_1=__values$1(columnStates),columnStates_1_1=columnStates_1.next();!columnStates_1_1.done;columnStates_1_1=columnStates_1.next()){var columnState=columnStates_1_1.value;this.columnModel.getSecondaryColumn(columnState.colId)&&secondaryColumnStates.push(columnState)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{columnStates_1_1&&!columnStates_1_1.done&&(_a=columnStates_1.return)&&_a.call(columnStates_1)}finally{if(e_1)throw e_1.error}}this.columnModel.applyColumnState({state:secondaryColumnStates,applyOrder},"gridInitializing")}columnGroupStates&&this.columnModel.setColumnGroupState(columnGroupStates,"gridInitializing")}},StateService2.prototype.getColumnGroupState=function(){var columnGroupState=this.columnModel.getColumnGroupState(),openColumnGroups=[];return columnGroupState.forEach(function(_a){var groupId=_a.groupId,open=_a.open;open&&openColumnGroups.push(groupId)}),openColumnGroups.length?{openColumnGroupIds:openColumnGroups}:void 0},StateService2.prototype.setColumnGroupState=function(initialState){var _a;if(initialState.hasOwnProperty("columnGroup")){var openColumnGroups=new Set((_a=initialState.columnGroup)===null||_a===void 0?void 0:_a.openColumnGroupIds),existingColumnGroupState=this.columnModel.getColumnGroupState(),stateItems=existingColumnGroupState.map(function(_a2){var groupId=_a2.groupId,open=openColumnGroups.has(groupId);return open&&openColumnGroups.delete(groupId),{groupId,open}});openColumnGroups.forEach(function(groupId){stateItems.push({groupId,open:!0})}),stateItems.length&&(this.columnGroupStates=stateItems),this.columnModel.setColumnGroupState(stateItems,"gridInitializing")}},StateService2.prototype.getFilterState=function(){var _a,filterModel=this.filterManager.getFilterModel();filterModel&&Object.keys(filterModel).length===0&&(filterModel=void 0);var advancedFilterModel=(_a=this.filterManager.getAdvancedFilterModel())!==null&&_a!==void 0?_a:void 0;return filterModel||advancedFilterModel?{filterModel,advancedFilterModel}:void 0},StateService2.prototype.setFilterState=function(filterState,gridOptionAdvancedFilterModel){var _a=filterState??{advancedFilterModel:gridOptionAdvancedFilterModel},filterModel=_a.filterModel,advancedFilterModel=_a.advancedFilterModel;filterModel&&this.filterManager.setFilterModel(filterModel,"columnFilter"),advancedFilterModel&&this.filterManager.setAdvancedFilterModel(advancedFilterModel)},StateService2.prototype.getRangeSelectionState=function(){var _a,cellRanges=(_a=this.rangeService)===null||_a===void 0?void 0:_a.getCellRanges().map(function(cellRange){var id=cellRange.id,type=cellRange.type,startRow=cellRange.startRow,endRow=cellRange.endRow,columns=cellRange.columns,startColumn=cellRange.startColumn;return{id,type,startRow,endRow,colIds:columns.map(function(column){return column.getColId()}),startColId:startColumn.getColId()}});return cellRanges!=null&&cellRanges.length?{cellRanges}:void 0},StateService2.prototype.setRangeSelectionState=function(rangeSelectionState){var _this=this,_a;if(this.gridOptionsService.get("enableRangeSelection")){var cellRanges=rangeSelectionState.cellRanges.map(function(cellRange){return __assign$1(__assign$1({},cellRange),{columns:cellRange.colIds.map(function(colId){return _this.columnModel.getGridColumn(colId)}),startColumn:_this.columnModel.getGridColumn(cellRange.startColId)})});(_a=this.rangeService)===null||_a===void 0||_a.setCellRanges(cellRanges)}},StateService2.prototype.getScrollState=function(){var _a,_b,_c;if(this.isClientSideRowModel){var scrollFeature=(_a=this.ctrlsService.getGridBodyCtrl())===null||_a===void 0?void 0:_a.getScrollFeature(),left=((_b=scrollFeature==null?void 0:scrollFeature.getHScrollPosition())!==null&&_b!==void 0?_b:{left:0}).left,top=((_c=scrollFeature==null?void 0:scrollFeature.getVScrollPosition())!==null&&_c!==void 0?_c:{top:0}).top;return top||left?{top,left}:void 0}},StateService2.prototype.setScrollState=function(scrollState){var _a;if(this.isClientSideRowModel){var top=scrollState.top,left=scrollState.left;(_a=this.ctrlsService.getGridBodyCtrl())===null||_a===void 0||_a.getScrollFeature().setScrollPosition(top,left)}},StateService2.prototype.getSideBarState=function(){var _a,_b;return(_b=(_a=this.sideBarService)===null||_a===void 0?void 0:_a.getSideBarComp())===null||_b===void 0?void 0:_b.getState()},StateService2.prototype.getFocusedCellState=function(){if(this.isClientSideRowModel){var focusedCell=this.focusService.getFocusedCell();if(focusedCell){var column=focusedCell.column,rowIndex=focusedCell.rowIndex,rowPinned=focusedCell.rowPinned;return{colId:column.getColId(),rowIndex,rowPinned}}}},StateService2.prototype.setFocusedCellState=function(focusedCellState){if(this.isClientSideRowModel){var colId=focusedCellState.colId,rowIndex=focusedCellState.rowIndex,rowPinned=focusedCellState.rowPinned;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(colId),rowIndex,rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}},StateService2.prototype.getPaginationState=function(){var page=this.paginationProxy.getCurrentPage(),pageSize=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(!(!page&&!pageSize))return{page,pageSize}},StateService2.prototype.setPaginationState=function(paginationState){paginationState.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(paginationState.pageSize,"initialState"),typeof paginationState.page=="number"&&this.paginationProxy.setPage(paginationState.page)},StateService2.prototype.getRowSelectionState=function(){var _a,selectionState=this.selectionService.getSelectionState(),noSelections=!selectionState||!Array.isArray(selectionState)&&(selectionState.selectAll===!1||selectionState.selectAllChildren===!1)&&!(!((_a=selectionState==null?void 0:selectionState.toggledNodes)===null||_a===void 0)&&_a.length);return noSelections?void 0:selectionState},StateService2.prototype.setRowSelectionState=function(rowSelectionState){this.selectionService.setSelectionState(rowSelectionState,"gridInitializing")},StateService2.prototype.getRowGroupExpansionState=function(){var expandedRowGroups=this.expansionService.getExpandedRows();return expandedRowGroups.length?{expandedRowGroupIds:expandedRowGroups}:void 0},StateService2.prototype.setRowGroupExpansionState=function(rowGroupExpansionState){this.expansionService.expandRows(rowGroupExpansionState.expandedRowGroupIds)},StateService2.prototype.updateColumnState=function(features){var _this=this,newColumnState=this.getColumnState(),hasChanged=!1;Object.entries(newColumnState).forEach(function(_a){var _b=__read$7(_a,2),key=_b[0],value=_b[1];jsonEquals(value,_this.cachedState[key])||(hasChanged=!0)}),this.cachedState=__assign$1(__assign$1({},this.cachedState),newColumnState),hasChanged&&this.dispatchStateUpdateEvent(features)},StateService2.prototype.updateCachedState=function(key,value){var _a,existingValue=this.cachedState[key];this.cachedState=__assign$1(__assign$1({},this.cachedState),(_a={},_a[key]=value,_a)),jsonEquals(value,existingValue)||this.dispatchStateUpdateEvent([key])},StateService2.prototype.dispatchStateUpdateEvent=function(sources){var _this=this;this.suppressEvents||(sources.forEach(function(source){return _this.queuedUpdateSources.add(source)}),this.dispatchStateUpdateEventDebounced())},StateService2.prototype.dispatchQueuedStateUpdateEvents=function(){var sources=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear();var event={type:Events.EVENT_STATE_UPDATED,sources,state:this.cachedState};this.eventService.dispatchEvent(event)},StateService2.prototype.suppressEventsAndDispatchInitEvent=function(updateFunc){var _this=this;this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),updateFunc(),setTimeout(function(){_this.suppressEvents=!1,_this.queuedUpdateSources.clear(),_this.isAlive()&&(_this.columnAnimationService.setSuppressAnimation(!1),_this.dispatchStateUpdateEvent(["gridInitializing"]))})},__decorate$g([Autowired("filterManager")],StateService2.prototype,"filterManager",void 0),__decorate$g([Optional("rangeService")],StateService2.prototype,"rangeService",void 0),__decorate$g([Autowired("ctrlsService")],StateService2.prototype,"ctrlsService",void 0),__decorate$g([Optional("sideBarService")],StateService2.prototype,"sideBarService",void 0),__decorate$g([Autowired("focusService")],StateService2.prototype,"focusService",void 0),__decorate$g([Autowired("columnModel")],StateService2.prototype,"columnModel",void 0),__decorate$g([Autowired("paginationProxy")],StateService2.prototype,"paginationProxy",void 0),__decorate$g([Autowired("rowModel")],StateService2.prototype,"rowModel",void 0),__decorate$g([Autowired("selectionService")],StateService2.prototype,"selectionService",void 0),__decorate$g([Autowired("expansionService")],StateService2.prototype,"expansionService",void 0),__decorate$g([Autowired("columnAnimationService")],StateService2.prototype,"columnAnimationService",void 0),__decorate$g([PostConstruct],StateService2.prototype,"postConstruct",null),StateService2=__decorate$g([Bean("stateService")],StateService2),StateService2}(BeanStub),__extends$g=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$f=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$f"),__read$6=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$6"),__spreadArray$5=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$5"),ValidationService=function(_super){__extends$g(ValidationService2,_super);function ValidationService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ValidationService2,"ValidationService"),ValidationService2.prototype.init=function(){this.processGridOptions(this.gridOptions)},ValidationService2.prototype.processGridOptions=function(options){this.processOptions(options,GRID_OPTIONS_VALIDATORS)},ValidationService2.prototype.processColumnDefs=function(options){this.processOptions(options,COL_DEF_VALIDATORS)},ValidationService2.prototype.processOptions=function(options,validator){var _this=this,validations=validator.validations,deprecations=validator.deprecations,allProperties=validator.allProperties,propertyExceptions=validator.propertyExceptions,objectName=validator.objectName,docsUrl=validator.docsUrl;allProperties&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(options,__spreadArray$5(__spreadArray$5([],__read$6(propertyExceptions??[]),!1),__read$6(Object.keys(deprecations)),!1),allProperties,objectName,docsUrl);var warnings=new Set,optionKeys=Object.keys(options);optionKeys.forEach(function(key){var _a,deprecation=deprecations[key];if(deprecation)if("renamed"in deprecation){var renamed=deprecation.renamed,version=deprecation.version;warnings.add("As of v".concat(version,", ").concat(String(key)," is deprecated. Please use ").concat(String(renamed)," instead.")),options[renamed]=options[key]}else{var message=deprecation.message,version=deprecation.version;warnings.add("As of v".concat(version,", ").concat(String(key)," is deprecated. ").concat(message??""))}var value=options[key];if(!(value==null||value===!1)){var rulesOrGetter=validations[key],rules;if(rulesOrGetter)if(typeof rulesOrGetter=="function"){var fromGetter_1=rulesOrGetter(options,_this.gridOptions);if(!fromGetter_1)return;if("objectName"in fromGetter_1){var value_1=options[key];if(Array.isArray(value_1)){value_1.forEach(function(item){_this.processOptions(item,fromGetter_1)});return}_this.processOptions(options[key],fromGetter_1);return}rules=fromGetter_1}else rules=rulesOrGetter;else return;var module=rules.module,dependencies=rules.dependencies,supportedRowModels=rules.supportedRowModels;if(supportedRowModels){var rowModel=(_a=_this.gridOptions.rowModelType)!==null&&_a!==void 0?_a:"clientSide";if(!supportedRowModels.includes(rowModel)){warnings.add("".concat(String(key)," is not supported with the '").concat(rowModel,"' row model."));return}}if(module){var modules=Array.isArray(module)?module:[module],allRegistered_1=!0;if(modules.forEach(function(m){ModuleRegistry.__assertRegistered(m,String(key),_this.context.getGridId())||(allRegistered_1=!1,warnings.add("".concat(String(key)," is only available when ").concat(m," is loaded.")))}),!allRegistered_1)return}if(dependencies){var warning=_this.checkForWarning(key,dependencies,options);if(warning){warnings.add(warning);return}}}}),warnings.size>0&&warnings.forEach(function(warning){warnOnce(warning)})},ValidationService2.prototype.checkForWarning=function(key,validator,options){if(typeof validator=="function")return validator(options,this.gridOptions);var optionEntries=Object.entries(validator),failed=optionEntries.find(function(_a2){var _b=__read$6(_a2,2),key2=_b[0],value=_b[1],gridOptionValue=options[key2];return!value.includes(gridOptionValue)});if(!failed)return null;var _a=__read$6(failed,2),failedKey=_a[0],possibleOptions=_a[1];return possibleOptions.length>1?"'".concat(String(key),"' requires '").concat(failedKey,"' to be one of [").concat(possibleOptions.join(", "),"]."):"'".concat(String(key),"' requires '").concat(failedKey,"' to be ").concat(possibleOptions[0],".")},ValidationService2.prototype.checkProperties=function(object,exceptions,validProperties,containerName,docsUrl){var VUE_FRAMEWORK_PROPS=["__ob__","__v_skip","__metadata__"],invalidProperties=fuzzyCheckStrings(Object.getOwnPropertyNames(object),__spreadArray$5(__spreadArray$5(__spreadArray$5([],__read$6(VUE_FRAMEWORK_PROPS),!1),__read$6(exceptions),!1),__read$6(validProperties),!1),validProperties);if(iterateObject(invalidProperties,function(key,value){warnOnce("invalid ".concat(containerName," property '").concat(key,"' did you mean any of these: ").concat(value.slice(0,8).join(", ")))}),Object.keys(invalidProperties).length>0&&docsUrl){var url=this.getFrameworkOverrides().getDocLink(docsUrl);warnOnce("to see all the valid ".concat(containerName," properties please check: ").concat(url))}},__decorate$f([Autowired("gridOptions")],ValidationService2.prototype,"gridOptions",void 0),__decorate$f([PostConstruct],ValidationService2.prototype,"init",null),ValidationService2=__decorate$f([Bean("validationService")],ValidationService2),ValidationService2}(BeanStub),__extends$f=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$e=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$e"),ApiEventService=function(_super){__extends$f(ApiEventService2,_super);function ApiEventService2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.syncEventListeners=new Map,_this.asyncEventListeners=new Map,_this.syncGlobalEventListeners=new Set,_this.asyncGlobalEventListeners=new Set,_this}return __name(ApiEventService2,"ApiEventService"),ApiEventService2.prototype.postConstruct=function(){this.frameworkEventWrappingService=new FrameworkEventListenerService(this.getFrameworkOverrides())},ApiEventService2.prototype.addEventListener=function(eventType,userListener){var listener=this.frameworkEventWrappingService.wrap(userListener),async=this.gridOptionsService.useAsyncEvents(),listeners=async?this.asyncEventListeners:this.syncEventListeners;listeners.has(eventType)||listeners.set(eventType,new Set),listeners.get(eventType).add(listener),this.eventService.addEventListener(eventType,listener,async)},ApiEventService2.prototype.addGlobalListener=function(userListener){var listener=this.frameworkEventWrappingService.wrapGlobal(userListener),async=this.gridOptionsService.useAsyncEvents(),listeners=async?this.asyncGlobalEventListeners:this.syncGlobalEventListeners;listeners.add(listener),this.eventService.addGlobalListener(listener,async)},ApiEventService2.prototype.removeEventListener=function(eventType,userListener){var _a,listener=this.frameworkEventWrappingService.unwrap(userListener),asyncListeners=this.asyncEventListeners.get(eventType),hasAsync=!!(asyncListeners!=null&&asyncListeners.delete(listener));hasAsync||(_a=this.asyncEventListeners.get(eventType))===null||_a===void 0||_a.delete(listener),this.eventService.removeEventListener(eventType,listener,hasAsync)},ApiEventService2.prototype.removeGlobalListener=function(userListener){var listener=this.frameworkEventWrappingService.unwrapGlobal(userListener),hasAsync=this.asyncGlobalEventListeners.delete(listener);hasAsync||this.syncGlobalEventListeners.delete(listener),this.eventService.removeGlobalListener(listener,hasAsync)},ApiEventService2.prototype.destroyEventListeners=function(map,async){var _this=this;map.forEach(function(listeners,eventType){listeners.forEach(function(listener){return _this.eventService.removeEventListener(eventType,listener,async)}),listeners.clear()}),map.clear()},ApiEventService2.prototype.destroyGlobalListeners=function(set,async){var _this=this;set.forEach(function(listener){return _this.eventService.removeGlobalListener(listener,async)}),set.clear()},ApiEventService2.prototype.destroy=function(){_super.prototype.destroy.call(this),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.destroyGlobalListeners(this.asyncGlobalEventListeners,!0)},__decorate$e([PostConstruct],ApiEventService2.prototype,"postConstruct",null),ApiEventService2=__decorate$e([Bean("apiEventService")],ApiEventService2),ApiEventService2}(BeanStub),__extends$e=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$d=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$d"),__read$5=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$5"),__spreadArray$4=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$4"),PageSizeSelectorComp=function(_super){__extends$e(PageSizeSelectorComp2,_super);function PageSizeSelectorComp2(){var _this=_super.call(this,'<span class="ag-paging-page-size"></span>')||this;return _this.hasEmptyOption=!1,_this.handlePageSizeItemSelected=function(){if(_this.selectPageSizeComp){var newValue=_this.selectPageSizeComp.getValue();if(newValue){var paginationPageSize=Number(newValue);isNaN(paginationPageSize)||paginationPageSize<1||paginationPageSize===_this.paginationProxy.getPageSize()||(_this.paginationProxy.setPageSize(paginationPageSize,"pageSizeSelector"),_this.hasEmptyOption&&_this.toggleSelectDisplay(!0),_this.selectPageSizeComp.getFocusableElement().focus())}}},_this}return __name(PageSizeSelectorComp2,"PageSizeSelectorComp"),PageSizeSelectorComp2.prototype.init=function(){var _this=this;this.addManagedPropertyListener("paginationPageSizeSelector",function(){_this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,Events.EVENT_PAGINATION_CHANGED,function(event){return _this.handlePaginationChanged(event)})},PageSizeSelectorComp2.prototype.handlePaginationChanged=function(paginationChangedEvent){if(!(!this.selectPageSizeComp||!(paginationChangedEvent!=null&&paginationChangedEvent.newPageSize))){var paginationPageSize=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(paginationPageSize)?this.selectPageSizeComp.setValue(paginationPageSize.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}},PageSizeSelectorComp2.prototype.toggleSelectDisplay=function(show){this.selectPageSizeComp&&this.reset(),show&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))},PageSizeSelectorComp2.prototype.reset=function(){clearElement(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)},PageSizeSelectorComp2.prototype.onPageSizeSelectorValuesChange=function(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()},PageSizeSelectorComp2.prototype.shouldShowPageSizeSelector=function(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.gridOptionsService.get("paginationPageSizeSelector")!==!1},PageSizeSelectorComp2.prototype.reloadPageSizesSelector=function(){var _this=this,pageSizeOptions=this.getPageSizeSelectorValues(),paginationPageSizeOption=this.paginationProxy.getPageSize(),shouldAddAndSelectEmptyOption=!paginationPageSizeOption||!pageSizeOptions.includes(paginationPageSizeOption);shouldAddAndSelectEmptyOption&&(pageSizeOptions.unshift(""),warnOnce(`The paginationPageSize grid option is set to a value that is not in the list of page size options.
                Please make sure that the paginationPageSize grid option is set to one of the values in the 
                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.`)),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);var localeTextFunc=this.localeService.getLocaleTextFunc(),localisedLabel=localeTextFunc("pageSizeSelectorLabel","Page Size:"),options=pageSizeOptions.map(function(value){return{value:String(value),text:String(value)}}),localisedAriaLabel=localeTextFunc("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new AgSelect).addOptions(options).setValue(String(shouldAddAndSelectEmptyOption?"":paginationPageSizeOption)).setAriaLabel(localisedAriaLabel).setLabel(localisedLabel).onValueChange(function(){return _this.handlePageSizeItemSelected()}),this.hasEmptyOption=shouldAddAndSelectEmptyOption},PageSizeSelectorComp2.prototype.getPageSizeSelectorValues=function(){var defaultValues=[20,50,100],paginationPageSizeSelectorValues=this.gridOptionsService.get("paginationPageSizeSelector");return!Array.isArray(paginationPageSizeSelectorValues)||!this.validateValues(paginationPageSizeSelectorValues)?defaultValues:__spreadArray$4([],__read$5(paginationPageSizeSelectorValues),!1).sort(function(a,b){return a-b})},PageSizeSelectorComp2.prototype.validateValues=function(values2){if(!values2.length)return warnOnce(`The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.
                If you want to hide the page size selector, please set the paginationPageSizeSelector to false.`),!1;for(var i=0;i<values2.length;i++){var value=values2[i],isNumber=typeof value=="number",isPositive=value>0;if(!isNumber)return warnOnce(`The paginationPageSizeSelector grid option contains a non-numeric value.
                    Please make sure that all values in the paginationPageSizeSelector array are numbers.`),!1;if(!isPositive)return warnOnce(`The paginationPageSizeSelector grid option contains a negative number or zero.
                    Please make sure that all values in the paginationPageSizeSelector array are positive.`),!1}return!0},PageSizeSelectorComp2.prototype.destroy=function(){this.toggleSelectDisplay(!1),_super.prototype.destroy.call(this)},__decorate$d([Autowired("localeService")],PageSizeSelectorComp2.prototype,"localeService",void 0),__decorate$d([Autowired("gridOptionsService")],PageSizeSelectorComp2.prototype,"gridOptionsService",void 0),__decorate$d([Autowired("paginationProxy")],PageSizeSelectorComp2.prototype,"paginationProxy",void 0),__decorate$d([PostConstruct],PageSizeSelectorComp2.prototype,"init",null),PageSizeSelectorComp2}(Component),__extends$d=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$c=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$c"),AriaAnnouncementService=function(_super){__extends$d(AriaAnnouncementService2,_super);function AriaAnnouncementService2(){var _this=_super.call(this)||this;return _this.descriptionContainer=null,_this.announceValue=debounce(_this.announceValue.bind(_this),200),_this}return __name(AriaAnnouncementService2,"AriaAnnouncementService"),AriaAnnouncementService2.prototype.postConstruct=function(){var eDocument=this.gridOptionsService.getDocument(),div=this.descriptionContainer=eDocument.createElement("div");div.classList.add("ag-aria-description-container"),setAriaLive(div,"polite"),setAriaRelevant(div,"additions text"),setAriaAtomic(div,!0),this.eGridDiv.appendChild(div)},AriaAnnouncementService2.prototype.announceValue=function(value){var _this=this;this.descriptionContainer&&(this.descriptionContainer.textContent="",setTimeout(function(){_this.descriptionContainer.textContent=value},50))},AriaAnnouncementService2.prototype.destroy=function(){_super.prototype.destroy.call(this);var descriptionContainer=this.descriptionContainer;descriptionContainer&&(clearElement(descriptionContainer),descriptionContainer.parentElement&&descriptionContainer.parentElement.removeChild(descriptionContainer)),this.descriptionContainer=null,this.eGridDiv=null},__decorate$c([Autowired("eGridDiv")],AriaAnnouncementService2.prototype,"eGridDiv",void 0),__decorate$c([PostConstruct],AriaAnnouncementService2.prototype,"postConstruct",null),AriaAnnouncementService2=__decorate$c([Bean("ariaAnnouncementService")],AriaAnnouncementService2),AriaAnnouncementService2}(BeanStub),__read$4=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$4"),__spreadArray$3=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$3");function createGrid(eGridDiv,gridOptions,params){if(!gridOptions)return errorOnce("No gridOptions provided to createGrid"),{};var shallowCopy=GridOptionsService.getCoercedGridOptions(gridOptions),api=new GridCoreCreator().create(eGridDiv,shallowCopy,function(context){var gridComp=new GridComp(eGridDiv);context.createBean(gridComp)},void 0,params);if(!Object.isFrozen(gridOptions)&&!(params!=null&&params.frameworkOverrides)){var apiUrl_1="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(gridOptions,"api",{get:function(){errorOnce("gridOptions.api is no longer supported. See ".concat(apiUrl_1,"."))},configurable:!0}),Object.defineProperty(gridOptions,"columnApi",{get:function(){errorOnce("gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ".concat(apiUrl_1,"."))},configurable:!0})}return api}__name(createGrid,"createGrid");var Grid=function(){function Grid2(eGridDiv,gridOptions,params){var _this=this;if(warnOnce("Since v31 new Grid(...) is deprecated. Use createGrid instead: `const gridApi = createGrid(...)`. The grid api is returned from createGrid and will not be available on gridOptions."),!gridOptions){errorOnce("No gridOptions provided to the grid");return}this.gridOptions=gridOptions;var api=new GridCoreCreator().create(eGridDiv,gridOptions,function(context){var gridComp=new GridComp(eGridDiv),bean=context.createBean(gridComp);bean.addDestroyFunc(function(){_this.destroy()})},void 0,params);this.gridOptions.api=api,this.gridOptions.columnApi=new ColumnApi(api)}return __name(Grid2,"Grid"),Grid2.prototype.destroy=function(){var _a;this.gridOptions&&((_a=this.gridOptions.api)===null||_a===void 0||_a.destroy(),delete this.gridOptions.api,delete this.gridOptions.columnApi)},Grid2}(),nextGridId=1,GridCoreCreator=function(){function GridCoreCreator2(){}return __name(GridCoreCreator2,"GridCoreCreator"),GridCoreCreator2.prototype.create=function(eGridDiv,gridOptions,createUi,acceptChanges,params){var _a,debug=!!gridOptions.debug,gridId=(_a=gridOptions.gridId)!==null&&_a!==void 0?_a:String(nextGridId++),registeredModules=this.getRegisteredModules(params,gridId),beanClasses=this.createBeansList(gridOptions.rowModelType,registeredModules,gridId),providedBeanInstances=this.createProvidedBeans(eGridDiv,gridOptions,params);if(!beanClasses){errorOnce("Failed to create grid.");return}var contextParams={providedBeanInstances,beanClasses,debug,gridId},contextLogger=new Logger("Context",function(){return contextParams.debug}),context=new Context(contextParams,contextLogger),beans=context.getBean("beans");return this.registerModuleUserComponents(beans,registeredModules),this.registerStackComponents(beans,registeredModules),this.registerControllers(beans,registeredModules),createUi(context),beans.syncService.start(),acceptChanges&&acceptChanges(context),beans.gridApi},GridCoreCreator2.prototype.registerControllers=function(beans,registeredModules){registeredModules.forEach(function(module){module.controllers&&module.controllers.forEach(function(meta){return beans.ctrlsFactory.register(meta)})})},GridCoreCreator2.prototype.registerStackComponents=function(beans,registeredModules){var agStackComponents=this.createAgStackComponentsList(registeredModules);beans.agStackComponentsRegistry.setupComponents(agStackComponents)},GridCoreCreator2.prototype.getRegisteredModules=function(params,gridId){var passedViaConstructor=params?params.modules:null,registered=ModuleRegistry.__getRegisteredModules(gridId),allModules=[],mapNames={},addModule=__name(function(moduleBased,mod,gridId2){var addIndividualModule=__name(function(currentModule){mapNames[currentModule.moduleName]||(mapNames[currentModule.moduleName]=!0,allModules.push(currentModule),ModuleRegistry.__register(currentModule,moduleBased,gridId2))},"addIndividualModule");addIndividualModule(mod),mod.dependantModules&&mod.dependantModules.forEach(function(m){return addModule(moduleBased,m,gridId2)})},"addModule");return passedViaConstructor&&passedViaConstructor.forEach(function(m){return addModule(!0,m,gridId)}),registered&&registered.forEach(function(m){return addModule(!ModuleRegistry.__isPackageBased(),m,void 0)}),allModules},GridCoreCreator2.prototype.registerModuleUserComponents=function(beans,registeredModules){var moduleUserComps=this.extractModuleEntity(registeredModules,function(module){return module.userComponents?module.userComponents:[]});moduleUserComps.forEach(function(compMeta){beans.userComponentRegistry.registerDefaultComponent(compMeta.componentName,compMeta.componentClass)})},GridCoreCreator2.prototype.createProvidedBeans=function(eGridDiv,gridOptions,params){var frameworkOverrides=params?params.frameworkOverrides:null;missing(frameworkOverrides)&&(frameworkOverrides=new VanillaFrameworkOverrides);var seed={gridOptions,eGridDiv,globalEventListener:params?params.globalEventListener:null,globalSyncEventListener:params?params.globalSyncEventListener:null,frameworkOverrides};return params&&params.providedBeanInstances&&Object.assign(seed,params.providedBeanInstances),seed},GridCoreCreator2.prototype.createAgStackComponentsList=function(registeredModules){var components=[{componentName:"AgCheckbox",componentClass:AgCheckbox},{componentName:"AgRadioButton",componentClass:AgRadioButton},{componentName:"AgToggleButton",componentClass:AgToggleButton},{componentName:"AgInputTextField",componentClass:AgInputTextField},{componentName:"AgInputTextArea",componentClass:AgInputTextArea},{componentName:"AgInputNumberField",componentClass:AgInputNumberField},{componentName:"AgInputDateField",componentClass:AgInputDateField},{componentName:"AgInputRange",componentClass:AgInputRange},{componentName:"AgRichSelect",componentClass:AgRichSelect},{componentName:"AgSelect",componentClass:AgSelect},{componentName:"AgSlider",componentClass:AgSlider},{componentName:"AgGridBody",componentClass:GridBodyComp},{componentName:"AgHeaderRoot",componentClass:GridHeaderComp},{componentName:"AgSortIndicator",componentClass:SortIndicatorComp},{componentName:"AgPagination",componentClass:PaginationComp},{componentName:"AgPageSizeSelector",componentClass:PageSizeSelectorComp},{componentName:"AgOverlayWrapper",componentClass:OverlayWrapperComponent},{componentName:"AgGroupComponent",componentClass:AgGroupComponent},{componentName:"AgRowContainer",componentClass:RowContainerComp},{componentName:"AgFakeHorizontalScroll",componentClass:FakeHScrollComp},{componentName:"AgFakeVerticalScroll",componentClass:FakeVScrollComp},{componentName:"AgAutocomplete",componentClass:AgAutocomplete}],moduleAgStackComps=this.extractModuleEntity(registeredModules,function(module){return module.agStackComponents?module.agStackComponents:[]});return components=components.concat(moduleAgStackComps),components},GridCoreCreator2.prototype.createBeansList=function(rowModelType,registeredModules,gridId){rowModelType===void 0&&(rowModelType="clientSide");var rowModelModules=registeredModules.filter(function(module){return!module.rowModel||module.rowModel===rowModelType}),rowModelModuleNames={clientSide:ModuleNames.ClientSideRowModelModule,infinite:ModuleNames.InfiniteRowModelModule,serverSide:ModuleNames.ServerSideRowModelModule,viewport:ModuleNames.ViewportRowModelModule};if(!rowModelModuleNames[rowModelType]){errorOnce("Could not find row model for rowModelType = "+rowModelType);return}if(ModuleRegistry.__assertRegistered(rowModelModuleNames[rowModelType],"rowModelType = '".concat(rowModelType,"'"),gridId)){var beans=[Beans,RowPositionUtils,CellPositionUtils,HeaderPositionUtils,PaginationAutoPageSizeService,GridApi,UserComponentRegistry,AgComponentUtils,ComponentMetadataProvider,ResizeObserverService,UserComponentFactory,RowContainerHeightService,HorizontalResizeService,LocaleService,ValidationService,PinnedRowModel,DragService,DisplayedGroupCreator,EventService,GridOptionsService,PopupService,SelectionService,FilterManager,ColumnModel,HeaderNavigationService,PaginationProxy,RowRenderer,ExpressionService,ColumnFactory,TemplateService,AlignedGridsService,NavigationService,ValueCache,ValueService,LoggerFactory,ColumnUtils,AutoWidthCalculator,StandardMenuFactory,DragAndDropService,ColumnApi,FocusService,MouseEventService,Environment,CellNavigationService,ValueFormatterService,StylingService,ScrollVisibleService,SortController,ColumnHoverService,ColumnAnimationService,SelectableService,AutoGroupColService,ChangeDetectionService,AnimationFrameService,UndoRedoService,AgStackComponentsRegistry,ColumnDefFactory,RowCssClassCalculator,RowNodeBlockLoader,RowNodeSorter,CtrlsService,PinnedWidthService,RowNodeEventThrottle,CtrlsFactory,DataTypeService,ValueParserService,QuickFilterService,SyncService,OverlayService,StateService,ExpansionService,ApiEventService,AriaAnnouncementService,MenuService],moduleBeans=this.extractModuleEntity(rowModelModules,function(module){return module.beans?module.beans:[]});beans.push.apply(beans,__spreadArray$3([],__read$4(moduleBeans),!1));var beansNoDuplicates=[];return beans.forEach(function(bean){beansNoDuplicates.indexOf(bean)<0&&beansNoDuplicates.push(bean)}),beansNoDuplicates}},GridCoreCreator2.prototype.extractModuleEntity=function(moduleEntities,extractor){return[].concat.apply([],__spreadArray$3([],__read$4(moduleEntities.map(extractor)),!1))},GridCoreCreator2}(),BaseComponentWrapper=function(){function BaseComponentWrapper2(){}return __name(BaseComponentWrapper2,"BaseComponentWrapper"),BaseComponentWrapper2.prototype.wrap=function(OriginalConstructor,mandatoryMethodList,optionalMethodList,componentType){var _this=this;optionalMethodList===void 0&&(optionalMethodList=[]);var wrapper=this.createWrapper(OriginalConstructor,componentType);return mandatoryMethodList.forEach(function(methodName){_this.createMethod(wrapper,methodName,!0)}),optionalMethodList.forEach(function(methodName){_this.createMethod(wrapper,methodName,!1)}),wrapper},BaseComponentWrapper2.prototype.unwrap=function(comp){return comp},BaseComponentWrapper2.prototype.createMethod=function(wrapper,methodName,mandatory){wrapper.addMethod(methodName,this.createMethodProxy(wrapper,methodName,mandatory))},BaseComponentWrapper2.prototype.createMethodProxy=function(wrapper,methodName,mandatory){return function(){return wrapper.hasMethod(methodName)?wrapper.callMethod(methodName,arguments):(mandatory&&console.warn("AG Grid: Framework component is missing the method "+methodName+"()"),null)}},BaseComponentWrapper2}(),DEFAULT_CHART_GROUPS={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},CHART_TOOL_PANEL_ALLOW_LIST=["chartSettings","chartData","chartFormat"],CHART_TOOLBAR_ALLOW_LIST=["chartUnlink","chartLink","chartDownload"],CHART_TOOL_PANEL_MENU_OPTIONS={settings:"chartSettings",data:"chartData",format:"chartFormat"},__FORCE_MODULE_DETECTION=0,BarColumnLabelPlacement;(function(BarColumnLabelPlacement2){BarColumnLabelPlacement2.InsideBase="insideBase",BarColumnLabelPlacement2.InsideEnd="insideEnd",BarColumnLabelPlacement2.Center="center",BarColumnLabelPlacement2.OutsideEnd="outsideEnd"})(BarColumnLabelPlacement||(BarColumnLabelPlacement={}));/**
 * @ag-grid-community/core - Advanced Data Grid / Data Table supporting Javascript / Typescript / React / Angular / Vue
 * @version v31.1.1
 * @link https://www.ag-grid.com/
 * @license MIT
 */var globalObj=typeof global>"u"?{}:global;globalObj.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;globalObj.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;globalObj.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;globalObj.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;globalObj.Node=typeof Node>"u"?{}:Node;globalObj.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var __read$3=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$3"),__spreadArray$2=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$2"),ClientSideNodeManager=function(){function ClientSideNodeManager2(rootNode,gridOptionsService,eventService,columnModel,selectionService,beans){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=rootNode,this.gridOptionsService=gridOptionsService,this.eventService=eventService,this.columnModel=columnModel,this.beans=beans,this.selectionService=selectionService,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=ClientSideNodeManager2.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}return __name(ClientSideNodeManager2,"ClientSideNodeManager"),ClientSideNodeManager2.prototype.getCopyOfNodesMap=function(){return _.cloneObject(this.allNodesMap)},ClientSideNodeManager2.prototype.getRowNode=function(id){return this.allNodesMap[id]},ClientSideNodeManager2.prototype.setRowData=function(rowData){var _this=this;if(typeof rowData=="string"){console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(rowData);var rootNode=this.rootNode,sibling=this.rootNode.sibling;rootNode.childrenAfterFilter=null,rootNode.childrenAfterGroup=null,rootNode.childrenAfterAggFilter=null,rootNode.childrenAfterSort=null,rootNode.childrenMapped=null,rootNode.updateHasChildren(),this.nextId=0,this.allNodesMap={},rowData?rootNode.allLeafChildren=rowData.map(function(dataItem){return _this.createNode(dataItem,_this.rootNode,ClientSideNodeManager2.TOP_LEVEL)}):(rootNode.allLeafChildren=[],rootNode.childrenAfterGroup=[]),sibling&&(sibling.childrenAfterFilter=rootNode.childrenAfterFilter,sibling.childrenAfterGroup=rootNode.childrenAfterGroup,sibling.childrenAfterAggFilter=rootNode.childrenAfterAggFilter,sibling.childrenAfterSort=rootNode.childrenAfterSort,sibling.childrenMapped=rootNode.childrenMapped,sibling.allLeafChildren=rootNode.allLeafChildren)},ClientSideNodeManager2.prototype.updateRowData=function(rowDataTran,rowNodeOrder){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(rowDataTran.add);var rowNodeTransaction={remove:[],update:[],add:[]},nodesToUnselect=[];return this.executeRemove(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeUpdate(rowDataTran,rowNodeTransaction,nodesToUnselect),this.executeAdd(rowDataTran,rowNodeTransaction),this.updateSelection(nodesToUnselect,"rowDataChanged"),rowNodeOrder&&_.sortRowNodesByOrder(this.rootNode.allLeafChildren,rowNodeOrder),rowNodeTransaction},ClientSideNodeManager2.prototype.isRowCountReady=function(){return this.rowCountReady},ClientSideNodeManager2.prototype.dispatchRowDataUpdateStartedEvent=function(rowData){var event={type:Events.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:rowData!=null&&rowData.length?rowData[0]:null};this.eventService.dispatchEvent(event)},ClientSideNodeManager2.prototype.updateSelection=function(nodesToUnselect,source){var selectionChanged=nodesToUnselect.length>0;if(selectionChanged&&this.selectionService.setNodesSelected({newValue:!1,nodes:nodesToUnselect,suppressFinishActions:!0,source}),this.selectionService.updateGroupsFromChildrenSelections(source),selectionChanged){var event_1={type:Events.EVENT_SELECTION_CHANGED,source};this.eventService.dispatchEvent(event_1)}},ClientSideNodeManager2.prototype.executeAdd=function(rowDataTran,rowNodeTransaction){var _this=this,_a,add=rowDataTran.add,addIndex=rowDataTran.addIndex;if(!_.missingOrEmpty(add)){var newNodes=add.map(function(item){return _this.createNode(item,_this.rootNode,ClientSideNodeManager2.TOP_LEVEL)});if(typeof addIndex=="number"&&addIndex>=0){var allLeafChildren=this.rootNode.allLeafChildren,len=allLeafChildren.length,normalisedAddIndex=addIndex,isTreeData=this.gridOptionsService.get("treeData");if(isTreeData&&addIndex>0&&len>0){for(var i=0;i<len;i++)if(((_a=allLeafChildren[i])===null||_a===void 0?void 0:_a.rowIndex)==addIndex-1){normalisedAddIndex=i+1;break}}var nodesBeforeIndex=allLeafChildren.slice(0,normalisedAddIndex),nodesAfterIndex=allLeafChildren.slice(normalisedAddIndex,allLeafChildren.length);this.rootNode.allLeafChildren=__spreadArray$2(__spreadArray$2(__spreadArray$2([],__read$3(nodesBeforeIndex),!1),__read$3(newNodes),!1),__read$3(nodesAfterIndex),!1)}else this.rootNode.allLeafChildren=__spreadArray$2(__spreadArray$2([],__read$3(this.rootNode.allLeafChildren),!1),__read$3(newNodes),!1);this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),rowNodeTransaction.add=newNodes}},ClientSideNodeManager2.prototype.executeRemove=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,remove=rowDataTran.remove;if(!_.missingOrEmpty(remove)){var rowIdsRemoved={};remove.forEach(function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.isSelected()&&nodesToUnselect.push(rowNode),rowNode.clearRowTopAndRowIndex(),rowIdsRemoved[rowNode.id]=!0,delete _this.allNodesMap[rowNode.id],rowNodeTransaction.remove.push(rowNode))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(function(rowNode){return!rowIdsRemoved[rowNode.id]}),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}},ClientSideNodeManager2.prototype.executeUpdate=function(rowDataTran,rowNodeTransaction,nodesToUnselect){var _this=this,update=rowDataTran.update;_.missingOrEmpty(update)||update.forEach(function(item){var rowNode=_this.lookupRowNode(item);rowNode&&(rowNode.updateData(item),!rowNode.selectable&&rowNode.isSelected()&&nodesToUnselect.push(rowNode),_this.setMasterForRow(rowNode,item,ClientSideNodeManager2.TOP_LEVEL,!1),rowNodeTransaction.update.push(rowNode))})},ClientSideNodeManager2.prototype.lookupRowNode=function(data){var getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),rowNode;if(getRowIdFunc){var id=getRowIdFunc({data,level:0});if(rowNode=this.allNodesMap[id],!rowNode)return console.error("AG Grid: could not find row id=".concat(id,", data item was not found for this id")),null}else if(rowNode=this.rootNode.allLeafChildren.find(function(node){return node.data===data}),!rowNode)return console.error("AG Grid: could not find data item as object was not found",data),console.error("Consider using getRowId to help the Grid find matching row data"),null;return rowNode||null},ClientSideNodeManager2.prototype.createNode=function(dataItem,parent,level){var node=new RowNode(this.beans);node.group=!1,this.setMasterForRow(node,dataItem,level,!0);var suppressParentsInRowNodes=this.gridOptionsService.get("suppressParentsInRowNodes");return parent&&!suppressParentsInRowNodes&&(node.parent=parent),node.level=level,node.setDataAndId(dataItem,this.nextId.toString()),this.allNodesMap[node.id]&&console.warn("AG Grid: duplicate node id '".concat(node.id,"' detected from getRowId callback, this could cause issues in your grid.")),this.allNodesMap[node.id]=node,this.nextId++,node},ClientSideNodeManager2.prototype.setMasterForRow=function(rowNode,data,level,setExpanded){var isTreeData=this.gridOptionsService.get("treeData");if(isTreeData)rowNode.setMaster(!1),setExpanded&&(rowNode.expanded=!1);else{var masterDetail=this.gridOptionsService.get("masterDetail");if(masterDetail){var isRowMasterFunc=this.gridOptionsService.get("isRowMaster");isRowMasterFunc?rowNode.setMaster(isRowMasterFunc(data)):rowNode.setMaster(!0)}else rowNode.setMaster(!1);if(setExpanded){var rowGroupColumns=this.columnModel.getRowGroupColumns(),numRowGroupColumns=rowGroupColumns?rowGroupColumns.length:0,masterRowLevel=level+numRowGroupColumns;rowNode.expanded=rowNode.master?this.isExpanded(masterRowLevel):!1}}},ClientSideNodeManager2.prototype.isExpanded=function(level){var expandByDefault=this.gridOptionsService.get("groupDefaultExpanded");return expandByDefault===-1?!0:level<expandByDefault},ClientSideNodeManager2.TOP_LEVEL=0,ClientSideNodeManager2.ROOT_NODE_ID="ROOT_NODE_ID",ClientSideNodeManager2}(),__extends$c=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$b=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$b"),__read$2=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$2"),__spreadArray$1=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray$1"),RecursionType;(function(RecursionType2){RecursionType2[RecursionType2.Normal=0]="Normal",RecursionType2[RecursionType2.AfterFilter=1]="AfterFilter",RecursionType2[RecursionType2.AfterFilterAndSort=2]="AfterFilterAndSort",RecursionType2[RecursionType2.PivotNodes=3]="PivotNodes"})(RecursionType||(RecursionType={}));var ClientSideRowModel=function(_super){__extends$c(ClientSideRowModel2,_super);function ClientSideRowModel2(){var _this=_super!==null&&_super.apply(this,arguments)||this;return _this.onRowHeightChanged_debounced=_.debounce(_this.onRowHeightChanged.bind(_this),100),_this.rowsToDisplay=[],_this.hasStarted=!1,_this.shouldSkipSettingDataOnStart=!1,_this.isRefreshingModel=!1,_this.rowCountReady=!1,_this}return __name(ClientSideRowModel2,"ClientSideRowModel"),ClientSideRowModel2.prototype.init=function(){var _this=this,refreshEverythingFunc=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.EVERYTHING}),animate=!this.gridOptionsService.get("suppressAnimationFrame"),refreshEverythingAfterColsChangedFunc=this.refreshModel.bind(this,{step:ClientSideRowModelSteps.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate});this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,refreshEverythingAfterColsChangedFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_ROW_GROUP_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:ClientSideRowModelSteps.PIVOT})),this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_COLUMN_PIVOT_MODE_CHANGED,refreshEverythingFunc),this.addManagedListener(this.eventService,Events.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_GRID_READY,function(){return _this.onGridReady()}),this.addPropertyListeners(),this.rootNode=new RowNode(this.beans),this.nodeManager=new ClientSideNodeManager(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)},ClientSideRowModel2.prototype.addPropertyListeners=function(){var _this=this,resetProps=new Set(["treeData","masterDetail"]),groupStageRefreshProps=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),filterStageRefreshProps=new Set(["excludeChildrenWhenTreeDataFiltering"]),pivotStageRefreshProps=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),aggregateStageRefreshProps=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),sortStageRefreshProps=new Set(["postSortRows","groupDisplayType","accentedSort"]),filterAggStageRefreshProps=new Set([]),flattenStageRefreshProps=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),allProps=__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1(__spreadArray$1([],__read$2(resetProps),!1),__read$2(groupStageRefreshProps),!1),__read$2(filterStageRefreshProps),!1),__read$2(pivotStageRefreshProps),!1),__read$2(pivotStageRefreshProps),!1),__read$2(aggregateStageRefreshProps),!1),__read$2(sortStageRefreshProps),!1),__read$2(filterAggStageRefreshProps),!1),__read$2(flattenStageRefreshProps),!1);this.addManagedPropertyListeners(allProps,function(params){var _a,properties=(_a=params.changeSet)===null||_a===void 0?void 0:_a.properties;if(properties){var arePropertiesImpacted=__name(function(propSet){return properties.some(function(prop){return propSet.has(prop)})},"arePropertiesImpacted");if(arePropertiesImpacted(resetProps)){_this.setRowData(_this.rootNode.allLeafChildren.map(function(child){return child.data}));return}if(arePropertiesImpacted(groupStageRefreshProps)){_this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING});return}if(arePropertiesImpacted(filterStageRefreshProps)){_this.refreshModel({step:ClientSideRowModelSteps.FILTER});return}if(arePropertiesImpacted(pivotStageRefreshProps)){_this.refreshModel({step:ClientSideRowModelSteps.PIVOT});return}if(arePropertiesImpacted(aggregateStageRefreshProps)){_this.refreshModel({step:ClientSideRowModelSteps.AGGREGATE});return}if(arePropertiesImpacted(sortStageRefreshProps)){_this.refreshModel({step:ClientSideRowModelSteps.SORT});return}if(arePropertiesImpacted(filterAggStageRefreshProps)){_this.refreshModel({step:ClientSideRowModelSteps.FILTER_AGGREGATES});return}arePropertiesImpacted(flattenStageRefreshProps)&&_this.refreshModel({step:ClientSideRowModelSteps.MAP})}}),this.addManagedPropertyListener("rowHeight",function(){return _this.resetRowHeights()})},ClientSideRowModel2.prototype.start=function(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()},ClientSideRowModel2.prototype.setInitialData=function(){var rowData=this.gridOptionsService.get("rowData");rowData&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(rowData))},ClientSideRowModel2.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){var atLeastOneChange,res=!1;do{atLeastOneChange=!1;for(var rowAtStartPixel=this.getRowIndexAtPixel(startPixel),rowAtEndPixel=this.getRowIndexAtPixel(endPixel),firstRow=Math.max(rowAtStartPixel,startLimitIndex),lastRow=Math.min(rowAtEndPixel,endLimitIndex),rowIndex=firstRow;rowIndex<=lastRow;rowIndex++){var rowNode=this.getRow(rowIndex);if(rowNode.rowHeightEstimated){var rowHeight=this.gridOptionsService.getRowHeightForNode(rowNode);rowNode.setRowHeight(rowHeight.height),atLeastOneChange=!0,res=!0}}atLeastOneChange&&this.setRowTopAndRowIndex()}while(atLeastOneChange);return res},ClientSideRowModel2.prototype.setRowTopAndRowIndex=function(){for(var defaultRowHeight=this.environment.getDefaultRowHeight(),nextRowTop=0,displayedRowsMapped=new Set,allowEstimate=this.gridOptionsService.isDomLayout("normal"),i=0;i<this.rowsToDisplay.length;i++){var rowNode=this.rowsToDisplay[i];if(rowNode.id!=null&&displayedRowsMapped.add(rowNode.id),rowNode.rowHeight==null){var rowHeight=this.gridOptionsService.getRowHeightForNode(rowNode,allowEstimate,defaultRowHeight);rowNode.setRowHeight(rowHeight.height,rowHeight.estimated)}rowNode.setRowTop(nextRowTop),rowNode.setRowIndex(i),nextRowTop+=rowNode.rowHeight}return displayedRowsMapped},ClientSideRowModel2.prototype.clearRowTopAndRowIndex=function(changedPath,displayedRowsMapped){var changedPathActive=changedPath.isActive(),clearIfNotDisplayed=__name(function(rowNode){rowNode&&rowNode.id!=null&&!displayedRowsMapped.has(rowNode.id)&&rowNode.clearRowTopAndRowIndex()},"clearIfNotDisplayed"),recurse=__name(function(rowNode){if(clearIfNotDisplayed(rowNode),clearIfNotDisplayed(rowNode.detailNode),clearIfNotDisplayed(rowNode.sibling),rowNode.hasChildren()&&rowNode.childrenAfterGroup){var isRootNode=rowNode.level==-1,skipChildren=changedPathActive&&!isRootNode&&!rowNode.expanded;skipChildren||rowNode.childrenAfterGroup.forEach(recurse)}},"recurse");recurse(this.rootNode)},ClientSideRowModel2.prototype.ensureRowsAtPixel=function(rowNodes,pixel,increment){var _this=this;increment===void 0&&(increment=0);var indexAtPixelNow=this.getRowIndexAtPixel(pixel),rowNodeAtPixelNow=this.getRow(indexAtPixelNow),animate=!this.gridOptionsService.get("suppressAnimationFrame");return rowNodeAtPixelNow===rowNodes[0]?!1:(rowNodes.forEach(function(rowNode){_.removeFromArray(_this.rootNode.allLeafChildren,rowNode)}),rowNodes.forEach(function(rowNode,idx){_.insertIntoArray(_this.rootNode.allLeafChildren,rowNode,Math.max(indexAtPixelNow+increment,0)+idx)}),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate}),!0)},ClientSideRowModel2.prototype.highlightRowAtPixel=function(rowNode,pixel){var indexAtPixelNow=pixel!=null?this.getRowIndexAtPixel(pixel):null,rowNodeAtPixelNow=indexAtPixelNow!=null?this.getRow(indexAtPixelNow):null;if(!rowNodeAtPixelNow||!rowNode||rowNodeAtPixelNow===rowNode||pixel==null){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null);return}var highlight=this.getHighlightPosition(pixel,rowNodeAtPixelNow);this.lastHighlightedRow&&this.lastHighlightedRow!==rowNodeAtPixelNow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),rowNodeAtPixelNow.setHighlighted(highlight),this.lastHighlightedRow=rowNodeAtPixelNow},ClientSideRowModel2.prototype.getHighlightPosition=function(pixel,rowNode){if(!rowNode){var index=this.getRowIndexAtPixel(pixel);if(rowNode=this.getRow(index||0),!rowNode)return RowHighlightPosition.Below}var rowTop=rowNode.rowTop,rowHeight=rowNode.rowHeight;return pixel-rowTop<rowHeight/2?RowHighlightPosition.Above:RowHighlightPosition.Below},ClientSideRowModel2.prototype.getLastHighlightedRowNode=function(){return this.lastHighlightedRow},ClientSideRowModel2.prototype.isLastRowIndexKnown=function(){return!0},ClientSideRowModel2.prototype.getRowCount=function(){return this.rowsToDisplay?this.rowsToDisplay.length:0},ClientSideRowModel2.prototype.getTopLevelRowCount=function(){var showingRootNode=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(showingRootNode)return 1;var filteredChildren=this.rootNode.childrenAfterAggFilter;return filteredChildren?filteredChildren.length:0},ClientSideRowModel2.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){var showingRootNode=this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode;if(showingRootNode)return topLevelIndex;var rowNode=this.rootNode.childrenAfterSort[topLevelIndex];if(this.gridOptionsService.get("groupHideOpenParents"))for(;rowNode.expanded&&rowNode.childrenAfterSort&&rowNode.childrenAfterSort.length>0;)rowNode=rowNode.childrenAfterSort[0];return rowNode.rowIndex},ClientSideRowModel2.prototype.getRowBounds=function(index){if(_.missing(this.rowsToDisplay))return null;var rowNode=this.rowsToDisplay[index];return rowNode?{rowTop:rowNode.rowTop,rowHeight:rowNode.rowHeight}:null},ClientSideRowModel2.prototype.onRowGroupOpened=function(){var animate=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,animate})},ClientSideRowModel2.prototype.onFilterChanged=function(event){if(!event.afterDataChange){var animate=this.gridOptionsService.isAnimateRows(),primaryOrQuickFilterChanged=event.columns.length===0||event.columns.some(function(col){return col.isPrimary()}),step=primaryOrQuickFilterChanged?ClientSideRowModelSteps.FILTER:ClientSideRowModelSteps.FILTER_AGGREGATES;this.refreshModel({step,keepRenderedRows:!0,animate})}},ClientSideRowModel2.prototype.onSortChanged=function(){var animate=this.gridOptionsService.isAnimateRows();this.refreshModel({step:ClientSideRowModelSteps.SORT,keepRenderedRows:!0,animate,keepEditingRows:!0})},ClientSideRowModel2.prototype.getType=function(){return"clientSide"},ClientSideRowModel2.prototype.onValueChanged=function(){this.columnModel.isPivotActive()?this.refreshModel({step:ClientSideRowModelSteps.PIVOT}):this.refreshModel({step:ClientSideRowModelSteps.AGGREGATE})},ClientSideRowModel2.prototype.createChangePath=function(rowNodeTransactions){var noTransactions=_.missingOrEmpty(rowNodeTransactions),changedPath=new ChangedPath(!1,this.rootNode);return(noTransactions||this.gridOptionsService.get("treeData"))&&changedPath.setInactive(),changedPath},ClientSideRowModel2.prototype.isSuppressModelUpdateAfterUpdateTransaction=function(params){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction")||params.rowNodeTransactions==null)return!1;var transWithAddsOrDeletes=params.rowNodeTransactions.filter(function(tx){return tx.add!=null&&tx.add.length>0||tx.remove!=null&&tx.remove.length>0}),transactionsContainUpdatesOnly=transWithAddsOrDeletes==null||transWithAddsOrDeletes.length==0;return transactionsContainUpdatesOnly},ClientSideRowModel2.prototype.buildRefreshModelParams=function(step){var paramsStep=ClientSideRowModelSteps.EVERYTHING,stepsMapped={everything:ClientSideRowModelSteps.EVERYTHING,group:ClientSideRowModelSteps.EVERYTHING,filter:ClientSideRowModelSteps.FILTER,map:ClientSideRowModelSteps.MAP,aggregate:ClientSideRowModelSteps.AGGREGATE,sort:ClientSideRowModelSteps.SORT,pivot:ClientSideRowModelSteps.PIVOT};if(_.exists(step)&&(paramsStep=stepsMapped[step]),_.missing(paramsStep)){console.error("AG Grid: invalid step ".concat(step,", available steps are ").concat(Object.keys(stepsMapped).join(", ")));return}var animate=!this.gridOptionsService.get("suppressAnimationFrame"),modelParams={step:paramsStep,keepRenderedRows:!0,keepEditingRows:!0,animate};return modelParams},ClientSideRowModel2.prototype.refreshModel=function(paramsOrStep){if(!(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())){var params=typeof paramsOrStep=="object"&&"step"in paramsOrStep?paramsOrStep:this.buildRefreshModelParams(paramsOrStep);if(params&&!this.isSuppressModelUpdateAfterUpdateTransaction(params)){var changedPath=this.createChangePath(params.rowNodeTransactions);switch(this.isRefreshingModel=!0,params.step){case ClientSideRowModelSteps.EVERYTHING:this.doRowGrouping(params.rowNodeTransactions,params.rowNodeOrder,changedPath,!!params.afterColumnsChanged);case ClientSideRowModelSteps.FILTER:this.doFilter(changedPath);case ClientSideRowModelSteps.PIVOT:this.doPivot(changedPath);case ClientSideRowModelSteps.AGGREGATE:this.doAggregate(changedPath);case ClientSideRowModelSteps.FILTER_AGGREGATES:this.doFilterAggregates(changedPath);case ClientSideRowModelSteps.SORT:this.doSort(params.rowNodeTransactions,changedPath);case ClientSideRowModelSteps.MAP:this.doRowsToDisplay()}var displayedNodesMapped=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(changedPath,displayedNodesMapped),this.isRefreshingModel=!1;var event={type:Events.EVENT_MODEL_UPDATED,animate:params.animate,keepRenderedRows:params.keepRenderedRows,newData:params.newData,newPage:!1,keepUndoRedoStack:params.keepUndoRedoStack};this.eventService.dispatchEvent(event)}}},ClientSideRowModel2.prototype.isEmpty=function(){var rowsMissing=_.missing(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return _.missing(this.rootNode)||rowsMissing||!this.columnModel.isReady()},ClientSideRowModel2.prototype.isRowsToRender=function(){return _.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0},ClientSideRowModel2.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){var started=!lastInRange,finished=!1,result=[],groupsSelectChildren=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(function(rowNode){if(!finished){if(started&&(rowNode===lastInRange||rowNode===firstInRange)&&(finished=!0,rowNode.group&&groupsSelectChildren)){result.push.apply(result,__spreadArray$1([],__read$2(rowNode.allLeafChildren),!1));return}if(!started){if(rowNode!==lastInRange&&rowNode!==firstInRange)return;started=!0}var includeThisNode=!rowNode.group||!groupsSelectChildren;if(includeThisNode){result.push(rowNode);return}}}),result},ClientSideRowModel2.prototype.setDatasource=function(datasource){console.error("AG Grid: should never call setDatasource on clientSideRowController")},ClientSideRowModel2.prototype.getTopLevelNodes=function(){return this.rootNode?this.rootNode.childrenAfterGroup:null},ClientSideRowModel2.prototype.getRootNode=function(){return this.rootNode},ClientSideRowModel2.prototype.getRow=function(index){return this.rowsToDisplay[index]},ClientSideRowModel2.prototype.isRowPresent=function(rowNode){return this.rowsToDisplay.indexOf(rowNode)>=0},ClientSideRowModel2.prototype.getRowIndexAtPixel=function(pixelToMatch){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;var bottomPointer=0,topPointer=this.rowsToDisplay.length-1;if(pixelToMatch<=0)return 0;var lastNode=_.last(this.rowsToDisplay);if(lastNode.rowTop<=pixelToMatch)return this.rowsToDisplay.length-1;for(var oldBottomPointer=-1,oldTopPointer=-1;;){var midPointer=Math.floor((bottomPointer+topPointer)/2),currentRowNode=this.rowsToDisplay[midPointer];if(this.isRowInPixel(currentRowNode,pixelToMatch))return midPointer;currentRowNode.rowTop<pixelToMatch?bottomPointer=midPointer+1:currentRowNode.rowTop>pixelToMatch&&(topPointer=midPointer-1);var caughtInInfiniteLoop=oldBottomPointer===bottomPointer&&oldTopPointer===topPointer;if(caughtInInfiniteLoop)return midPointer;oldBottomPointer=bottomPointer,oldTopPointer=topPointer}},ClientSideRowModel2.prototype.isRowInPixel=function(rowNode,pixelToMatch){var topPixel=rowNode.rowTop,bottomPixel=rowNode.rowTop+rowNode.rowHeight,pixelInRow=topPixel<=pixelToMatch&&bottomPixel>pixelToMatch;return pixelInRow},ClientSideRowModel2.prototype.forEachLeafNode=function(callback){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach(function(rowNode,index){return callback(rowNode,index)})},ClientSideRowModel2.prototype.forEachNode=function(callback,includeFooterNodes){includeFooterNodes===void 0&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spreadArray$1([],__read$2(this.rootNode.childrenAfterGroup||[]),!1),callback,recursionType:RecursionType.Normal,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.forEachNodeAfterFilter=function(callback,includeFooterNodes){includeFooterNodes===void 0&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spreadArray$1([],__read$2(this.rootNode.childrenAfterAggFilter||[]),!1),callback,recursionType:RecursionType.AfterFilter,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.forEachNodeAfterFilterAndSort=function(callback,includeFooterNodes){includeFooterNodes===void 0&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:__spreadArray$1([],__read$2(this.rootNode.childrenAfterSort||[]),!1),callback,recursionType:RecursionType.AfterFilterAndSort,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.forEachPivotNode=function(callback,includeFooterNodes){includeFooterNodes===void 0&&(includeFooterNodes=!1),this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback,recursionType:RecursionType.PivotNodes,index:0,includeFooterNodes})},ClientSideRowModel2.prototype.recursivelyWalkNodesAndCallback=function(params){for(var _a,nodes=params.nodes,callback=params.callback,recursionType=params.recursionType,includeFooterNodes=params.includeFooterNodes,index=params.index,i=0;i<nodes.length;i++){var node=nodes[i];if(callback(node,index++),node.hasChildren()&&!node.footer){var nodeChildren=null;switch(recursionType){case RecursionType.Normal:nodeChildren=node.childrenAfterGroup;break;case RecursionType.AfterFilter:nodeChildren=node.childrenAfterAggFilter;break;case RecursionType.AfterFilterAndSort:nodeChildren=node.childrenAfterSort;break;case RecursionType.PivotNodes:nodeChildren=node.leafGroup?null:node.childrenAfterSort;break}nodeChildren&&(index=this.recursivelyWalkNodesAndCallback({nodes:__spreadArray$1([],__read$2(nodeChildren),!1),callback,recursionType,index,includeFooterNodes}))}}var parentNode=(_a=nodes[0])===null||_a===void 0?void 0:_a.parent;if(!includeFooterNodes||!parentNode)return index;var isRootNode=parentNode===this.rootNode;if(isRootNode){var totalFooters=this.gridOptionsService.get("groupIncludeTotalFooter");if(!totalFooters)return index}else{var isGroupIncludeFooter=this.gridOptionsService.getGroupIncludeFooter();if(!isGroupIncludeFooter({node:parentNode}))return index}return parentNode.createFooter(),callback(parentNode.sibling,index++),index},ClientSideRowModel2.prototype.doAggregate=function(changedPath){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel2.prototype.doFilterAggregates=function(changedPath){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter},ClientSideRowModel2.prototype.expandOrCollapseAll=function(expand){var usingTreeData=this.gridOptionsService.get("treeData"),usingPivotMode=this.columnModel.isPivotActive(),recursiveExpandOrCollapse=__name(function(rowNodes){rowNodes&&rowNodes.forEach(function(rowNode){var actionRow=__name(function(){rowNode.expanded=expand,recursiveExpandOrCollapse(rowNode.childrenAfterGroup)},"actionRow");if(usingTreeData){var hasChildren=_.exists(rowNode.childrenAfterGroup);hasChildren&&actionRow();return}if(usingPivotMode){var notLeafGroup=!rowNode.leafGroup;notLeafGroup&&actionRow();return}var isRowGroup=rowNode.group;isRowGroup&&actionRow()})},"recursiveExpandOrCollapse");this.rootNode&&recursiveExpandOrCollapse(this.rootNode.childrenAfterGroup),this.refreshModel({step:ClientSideRowModelSteps.MAP});var eventSource=expand?"expandAll":"collapseAll",event={type:Events.EVENT_EXPAND_COLLAPSE_ALL,source:eventSource};this.eventService.dispatchEvent(event)},ClientSideRowModel2.prototype.doSort=function(rowNodeTransactions,changedPath){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions,changedPath})},ClientSideRowModel2.prototype.doRowGrouping=function(rowNodeTransactions,rowNodeOrder,changedPath,afterColumnsChanged){if(this.groupStage){if(rowNodeTransactions?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions,rowNodeOrder,changedPath}):this.groupStage.execute({rowNode:this.rootNode,changedPath,afterColumnsChanged}),this.gridOptionsService.get("groupSelectsChildren")){var selectionChanged=this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",changedPath);if(selectionChanged){var event_1={type:Events.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"};this.eventService.dispatchEvent(event_1)}}}else this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren();this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:Events.EVENT_ROW_COUNT_READY}))},ClientSideRowModel2.prototype.doFilter=function(changedPath){this.filterStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel2.prototype.doPivot=function(changedPath){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath})},ClientSideRowModel2.prototype.getCopyOfNodesMap=function(){return this.nodeManager.getCopyOfNodesMap()},ClientSideRowModel2.prototype.getRowNode=function(id){var idIsGroup=typeof id=="string"&&id.indexOf(RowNode.ID_PREFIX_ROW_GROUP)==0;if(idIsGroup){var res_1=void 0;return this.forEachNode(function(node){node.id===id&&(res_1=node)}),res_1}return this.nodeManager.getRowNode(id)},ClientSideRowModel2.prototype.setRowData=function(rowData){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(rowData),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()},ClientSideRowModel2.prototype.dispatchUpdateEventsAndRefresh=function(){var rowDataUpdatedEvent={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(rowDataUpdatedEvent),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,newData:!0})},ClientSideRowModel2.prototype.batchUpdateRowData=function(rowDataTransaction,callback){var _this=this;if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];var waitMillis=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(function(){_this.executeBatchUpdateRowData()},waitMillis)}this.rowDataTransactionBatch.push({rowDataTransaction,callback})},ClientSideRowModel2.prototype.flushAsyncTransactions=function(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())},ClientSideRowModel2.prototype.executeBatchUpdateRowData=function(){var _this=this;this.valueCache.onDataChanged();var callbackFuncsBound=[],rowNodeTrans=[],forceRowNodeOrder=!1;if(this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(function(tranItem){var rowNodeTran=_this.nodeManager.updateRowData(tranItem.rowDataTransaction,void 0);rowNodeTrans.push(rowNodeTran),tranItem.callback&&callbackFuncsBound.push(tranItem.callback.bind(null,rowNodeTran)),typeof tranItem.rowDataTransaction.addIndex=="number"&&(forceRowNodeOrder=!0)}),this.commonUpdateRowData(rowNodeTrans,void 0,forceRowNodeOrder),callbackFuncsBound.length>0&&window.setTimeout(function(){callbackFuncsBound.forEach(function(func){return func()})},0),rowNodeTrans.length>0){var event_2={type:Events.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:rowNodeTrans};this.eventService.dispatchEvent(event_2)}this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0},ClientSideRowModel2.prototype.updateRowData=function(rowDataTran,rowNodeOrder){this.valueCache.onDataChanged();var rowNodeTran=this.nodeManager.updateRowData(rowDataTran,rowNodeOrder),forceRowNodeOrder=typeof rowDataTran.addIndex=="number";return this.commonUpdateRowData([rowNodeTran],rowNodeOrder,forceRowNodeOrder),rowNodeTran},ClientSideRowModel2.prototype.createRowNodeOrder=function(){var suppressSortOrder=this.gridOptionsService.get("suppressMaintainUnsortedOrder");if(!suppressSortOrder){var orderMap={};if(this.rootNode&&this.rootNode.allLeafChildren)for(var index=0;index<this.rootNode.allLeafChildren.length;index++){var node=this.rootNode.allLeafChildren[index];orderMap[node.id]=index}return orderMap}},ClientSideRowModel2.prototype.commonUpdateRowData=function(rowNodeTrans,rowNodeOrder,forceRowNodeOrder){if(this.hasStarted){var animate=!this.gridOptionsService.get("suppressAnimationFrame");forceRowNodeOrder&&(rowNodeOrder=this.createRowNodeOrder());var event={type:Events.EVENT_ROW_DATA_UPDATED};this.eventService.dispatchEvent(event),this.refreshModel({step:ClientSideRowModelSteps.EVERYTHING,rowNodeTransactions:rowNodeTrans,rowNodeOrder,keepRenderedRows:!0,keepEditingRows:!0,animate})}},ClientSideRowModel2.prototype.doRowsToDisplay=function(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})},ClientSideRowModel2.prototype.onRowHeightChanged=function(){this.refreshModel({step:ClientSideRowModelSteps.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})},ClientSideRowModel2.prototype.onRowHeightChangedDebounced=function(){this.onRowHeightChanged_debounced()},ClientSideRowModel2.prototype.resetRowHeights=function(){var atLeastOne=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),atLeastOne&&this.onRowHeightChanged()},ClientSideRowModel2.prototype.resetRowHeightsForAllRowNodes=function(){var atLeastOne=!1;return this.forEachNode(function(rowNode){rowNode.setRowHeight(rowNode.rowHeight,!0);var detailNode=rowNode.detailNode;detailNode&&detailNode.setRowHeight(detailNode.rowHeight,!0),rowNode.sibling&&rowNode.sibling.setRowHeight(rowNode.sibling.rowHeight,!0),atLeastOne=!0}),atLeastOne},ClientSideRowModel2.prototype.onGridStylesChanges=function(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()},ClientSideRowModel2.prototype.onGridReady=function(){this.hasStarted||this.setInitialData()},ClientSideRowModel2.prototype.isRowDataLoaded=function(){return this.rowCountReady},__decorate$b([Autowired("columnModel")],ClientSideRowModel2.prototype,"columnModel",void 0),__decorate$b([Autowired("selectionService")],ClientSideRowModel2.prototype,"selectionService",void 0),__decorate$b([Autowired("filterManager")],ClientSideRowModel2.prototype,"filterManager",void 0),__decorate$b([Autowired("valueCache")],ClientSideRowModel2.prototype,"valueCache",void 0),__decorate$b([Autowired("beans")],ClientSideRowModel2.prototype,"beans",void 0),__decorate$b([Autowired("filterStage")],ClientSideRowModel2.prototype,"filterStage",void 0),__decorate$b([Autowired("sortStage")],ClientSideRowModel2.prototype,"sortStage",void 0),__decorate$b([Autowired("flattenStage")],ClientSideRowModel2.prototype,"flattenStage",void 0),__decorate$b([Optional("groupStage")],ClientSideRowModel2.prototype,"groupStage",void 0),__decorate$b([Optional("aggregationStage")],ClientSideRowModel2.prototype,"aggregationStage",void 0),__decorate$b([Optional("pivotStage")],ClientSideRowModel2.prototype,"pivotStage",void 0),__decorate$b([Optional("filterAggregatesStage")],ClientSideRowModel2.prototype,"filterAggregatesStage",void 0),__decorate$b([PostConstruct],ClientSideRowModel2.prototype,"init",null),ClientSideRowModel2=__decorate$b([Bean("rowModel")],ClientSideRowModel2),ClientSideRowModel2}(BeanStub),__extends$b=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$a=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$a"),FilterStage=function(_super){__extends$b(FilterStage2,_super);function FilterStage2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(FilterStage2,"FilterStage"),FilterStage2.prototype.execute=function(params){var changedPath=params.changedPath;this.filterService.filter(changedPath)},__decorate$a([Autowired("filterService")],FilterStage2.prototype,"filterService",void 0),FilterStage2=__decorate$a([Bean("filterStage")],FilterStage2),FilterStage2}(BeanStub),__extends$a=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$9=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$9"),SortStage=function(_super){__extends$a(SortStage2,_super);function SortStage2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(SortStage2,"SortStage"),SortStage2.prototype.execute=function(params){var _this=this,sortOptions=this.sortController.getSortOptions(),sortActive=_.exists(sortOptions)&&sortOptions.length>0,deltaSort=sortActive&&_.exists(params.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),sortContainsGroupColumns=sortOptions.some(function(opt){var isSortingCoupled=_this.gridOptionsService.isColumnsSortingCoupledToGroup();return isSortingCoupled?opt.column.isPrimary()&&opt.column.isRowGroupActive():!!opt.column.getColDef().showRowGroup});this.sortService.sort(sortOptions,sortActive,deltaSort,params.rowNodeTransactions,params.changedPath,sortContainsGroupColumns)},__decorate$9([Autowired("sortService")],SortStage2.prototype,"sortService",void 0),__decorate$9([Autowired("sortController")],SortStage2.prototype,"sortController",void 0),SortStage2=__decorate$9([Bean("sortStage")],SortStage2),SortStage2}(BeanStub),__extends$9=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$8=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$8"),FlattenStage=function(_super){__extends$9(FlattenStage2,_super);function FlattenStage2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(FlattenStage2,"FlattenStage"),FlattenStage2.prototype.execute=function(params){var rootNode=params.rowNode,result=[],skipLeafNodes=this.columnModel.isPivotMode(),showRootNode=skipLeafNodes&&rootNode.leafGroup,topList=showRootNode?[rootNode]:rootNode.childrenAfterSort,details=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(details,topList,result,skipLeafNodes,0);var atLeastOneRowPresent=result.length>0,includeGroupTotalFooter=!showRootNode&&atLeastOneRowPresent&&details.groupIncludeTotalFooter;return includeGroupTotalFooter&&(rootNode.createFooter(),this.addRowNodeToRowsToDisplay(details,rootNode.sibling,result,0)),result},FlattenStage2.prototype.getFlattenDetails=function(){var groupRemoveSingleChildren=this.gridOptionsService.get("groupRemoveSingleChildren"),groupRemoveLowestSingleChildren=!groupRemoveSingleChildren&&this.gridOptionsService.get("groupRemoveLowestSingleChildren");return{groupRemoveLowestSingleChildren,groupRemoveSingleChildren,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}},FlattenStage2.prototype.recursivelyAddToRowsToDisplay=function(details,rowsToFlatten,result,skipLeafNodes,uiLevel){if(!_.missingOrEmpty(rowsToFlatten))for(var i=0;i<rowsToFlatten.length;i++){var rowNode=rowsToFlatten[i],isParent=rowNode.hasChildren(),isSkippedLeafNode=skipLeafNodes&&!isParent,isRemovedSingleChildrenGroup=details.groupRemoveSingleChildren&&isParent&&rowNode.childrenAfterGroup.length===1,isRemovedLowestSingleChildrenGroup=details.groupRemoveLowestSingleChildren&&isParent&&rowNode.leafGroup&&rowNode.childrenAfterGroup.length===1,neverAllowToExpand=skipLeafNodes&&rowNode.leafGroup,isHiddenOpenParent=details.hideOpenParents&&rowNode.expanded&&!rowNode.master&&!neverAllowToExpand,thisRowShouldBeRendered=!isSkippedLeafNode&&!isHiddenOpenParent&&!isRemovedSingleChildrenGroup&&!isRemovedLowestSingleChildrenGroup;if(thisRowShouldBeRendered&&this.addRowNodeToRowsToDisplay(details,rowNode,result,uiLevel),!(skipLeafNodes&&rowNode.leafGroup)){if(isParent){var excludedParent=isRemovedSingleChildrenGroup||isRemovedLowestSingleChildrenGroup;if(rowNode.expanded||excludedParent){var uiLevelForChildren=excludedParent?uiLevel:uiLevel+1;this.recursivelyAddToRowsToDisplay(details,rowNode.childrenAfterSort,result,skipLeafNodes,uiLevelForChildren);var doesRowShowFooter=details.getGroupIncludeFooter({node:rowNode});doesRowShowFooter?(rowNode.createFooter(),this.addRowNodeToRowsToDisplay(details,rowNode.sibling,result,uiLevelForChildren)):rowNode.destroyFooter()}}else if(rowNode.master&&rowNode.expanded){var detailNode=this.createDetailNode(rowNode);this.addRowNodeToRowsToDisplay(details,detailNode,result,uiLevel)}}}},FlattenStage2.prototype.addRowNodeToRowsToDisplay=function(details,rowNode,result,uiLevel){result.push(rowNode),rowNode.setUiLevel(details.isGroupMultiAutoColumn?0:uiLevel)},FlattenStage2.prototype.createDetailNode=function(masterNode){if(_.exists(masterNode.detailNode))return masterNode.detailNode;var detailNode=new RowNode(this.beans);return detailNode.detail=!0,detailNode.selectable=!1,detailNode.parent=masterNode,_.exists(masterNode.id)&&(detailNode.id="detail_"+masterNode.id),detailNode.data=masterNode.data,detailNode.level=masterNode.level+1,masterNode.detailNode=detailNode,detailNode},__decorate$8([Autowired("columnModel")],FlattenStage2.prototype,"columnModel",void 0),__decorate$8([Autowired("beans")],FlattenStage2.prototype,"beans",void 0),FlattenStage2=__decorate$8([Bean("flattenStage")],FlattenStage2),FlattenStage2}(BeanStub),__extends$8=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$7=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$7"),SortService=function(_super){__extends$8(SortService2,_super);function SortService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(SortService2,"SortService"),SortService2.prototype.sort=function(sortOptions,sortActive,useDeltaSort,rowNodeTransactions,changedPath,sortContainsGroupColumns){var _this=this,groupMaintainOrder=this.gridOptionsService.get("groupMaintainOrder"),groupColumnsPresent=this.columnModel.getAllGridColumns().some(function(c){return c.isRowGroupActive()}),allDirtyNodes={};useDeltaSort&&rowNodeTransactions&&(allDirtyNodes=this.calculateDirtyNodes(rowNodeTransactions));var isPivotMode=this.columnModel.isPivotMode(),postSortFunc=this.gridOptionsService.getCallback("postSortRows"),callback=__name(function(rowNode){var _a;_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterAggFilter,!0);var skipSortingPivotLeafs=isPivotMode&&rowNode.leafGroup,skipSortingGroups=groupMaintainOrder&&groupColumnsPresent&&!rowNode.leafGroup&&!sortContainsGroupColumns;if(skipSortingGroups){var nextGroup=(_a=_this.columnModel.getRowGroupColumns())===null||_a===void 0?void 0:_a[rowNode.level+1],wasSortExplicitlyRemoved=(nextGroup==null?void 0:nextGroup.getSort())===null,childrenToBeSorted=rowNode.childrenAfterAggFilter.slice(0);if(rowNode.childrenAfterSort&&!wasSortExplicitlyRemoved){var indexedOrders_1={};rowNode.childrenAfterSort.forEach(function(node,idx){indexedOrders_1[node.id]=idx}),childrenToBeSorted.sort(function(row1,row2){var _a2,_b;return((_a2=indexedOrders_1[row1.id])!==null&&_a2!==void 0?_a2:0)-((_b=indexedOrders_1[row2.id])!==null&&_b!==void 0?_b:0)})}rowNode.childrenAfterSort=childrenToBeSorted}else!sortActive||skipSortingPivotLeafs?rowNode.childrenAfterSort=rowNode.childrenAfterAggFilter.slice(0):useDeltaSort?rowNode.childrenAfterSort=_this.doDeltaSort(rowNode,allDirtyNodes,changedPath,sortOptions):rowNode.childrenAfterSort=_this.rowNodeSorter.doFullSort(rowNode.childrenAfterAggFilter,sortOptions);if(rowNode.sibling&&(rowNode.sibling.childrenAfterSort=rowNode.childrenAfterSort),_this.updateChildIndexes(rowNode),postSortFunc){var params={nodes:rowNode.childrenAfterSort};postSortFunc(params)}},"callback");changedPath&&changedPath.forEachChangedNodeDepthFirst(callback),this.updateGroupDataForHideOpenParents(changedPath)},SortService2.prototype.calculateDirtyNodes=function(rowNodeTransactions){var dirtyNodes={},addNodesFunc=__name(function(rowNodes){rowNodes&&rowNodes.forEach(function(rowNode){return dirtyNodes[rowNode.id]=!0})},"addNodesFunc");return rowNodeTransactions&&rowNodeTransactions.forEach(function(tran){addNodesFunc(tran.add),addNodesFunc(tran.update),addNodesFunc(tran.remove)}),dirtyNodes},SortService2.prototype.doDeltaSort=function(rowNode,allTouchedNodes,changedPath,sortOptions){var _this=this,unsortedRows=rowNode.childrenAfterAggFilter,oldSortedRows=rowNode.childrenAfterSort;if(!oldSortedRows)return this.rowNodeSorter.doFullSort(unsortedRows,sortOptions);var untouchedRowsMap={},touchedRows=[];unsortedRows.forEach(function(row){allTouchedNodes[row.id]||!changedPath.canSkip(row)?touchedRows.push(row):untouchedRowsMap[row.id]=!0});var sortedUntouchedRows=oldSortedRows.filter(function(child){return untouchedRowsMap[child.id]}),mapNodeToSortedNode=__name(function(rowNode2,pos){return{currentPos:pos,rowNode:rowNode2}},"mapNodeToSortedNode"),sortedChangedRows=touchedRows.map(mapNodeToSortedNode).sort(function(a,b){return _this.rowNodeSorter.compareRowNodes(sortOptions,a,b)});return this.mergeSortedArrays(sortOptions,sortedChangedRows,sortedUntouchedRows.map(mapNodeToSortedNode)).map(function(_a){var rowNode2=_a.rowNode;return rowNode2})},SortService2.prototype.mergeSortedArrays=function(sortOptions,arr1,arr2){for(var res=[],i=0,j=0;i<arr1.length&&j<arr2.length;){var compareResult=this.rowNodeSorter.compareRowNodes(sortOptions,arr1[i],arr2[j]);compareResult<0?res.push(arr1[i++]):res.push(arr2[j++])}for(;i<arr1.length;)res.push(arr1[i++]);for(;j<arr2.length;)res.push(arr2[j++]);return res},SortService2.prototype.updateChildIndexes=function(rowNode){if(!_.missing(rowNode.childrenAfterSort))for(var listToSort=rowNode.childrenAfterSort,i=0;i<listToSort.length;i++){var child=listToSort[i],firstChild=i===0,lastChild=i===rowNode.childrenAfterSort.length-1;child.setFirstChild(firstChild),child.setLastChild(lastChild),child.setChildIndex(i)}},SortService2.prototype.updateGroupDataForHideOpenParents=function(changedPath){var _this=this;if(this.gridOptionsService.get("groupHideOpenParents")){if(this.gridOptionsService.get("treeData"))return _.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;var callback=__name(function(rowNode){_this.pullDownGroupDataForHideOpenParents(rowNode.childrenAfterSort,!1),rowNode.childrenAfterSort.forEach(function(child){child.hasChildren()&&callback(child)})},"callback");changedPath&&changedPath.executeFromRootNode(function(rowNode){return callback(rowNode)})}},SortService2.prototype.pullDownGroupDataForHideOpenParents=function(rowNodes,clearOperation){var _this=this;!this.gridOptionsService.get("groupHideOpenParents")||_.missing(rowNodes)||rowNodes.forEach(function(childRowNode){var groupDisplayCols=_this.columnModel.getGroupDisplayColumns();groupDisplayCols.forEach(function(groupDisplayCol){var showRowGroup=groupDisplayCol.getColDef().showRowGroup;if(typeof showRowGroup!="string"){console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}var displayingGroupKey=showRowGroup,rowGroupColumn=_this.columnModel.getPrimaryColumn(displayingGroupKey),thisRowNodeMatches=rowGroupColumn===childRowNode.rowGroupColumn;if(!thisRowNodeMatches)if(clearOperation)childRowNode.setGroupValue(groupDisplayCol.getId(),void 0);else{var parentToStealFrom=childRowNode.getFirstChildOfFirstChild(rowGroupColumn);parentToStealFrom&&childRowNode.setGroupValue(groupDisplayCol.getId(),parentToStealFrom.key)}})})},__decorate$7([Autowired("columnModel")],SortService2.prototype,"columnModel",void 0),__decorate$7([Autowired("rowNodeSorter")],SortService2.prototype,"rowNodeSorter",void 0),SortService2=__decorate$7([Bean("sortService")],SortService2),SortService2}(BeanStub),__extends$7=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$6=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$6"),FilterService=function(_super){__extends$7(FilterService2,_super);function FilterService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(FilterService2,"FilterService"),FilterService2.prototype.filter=function(changedPath){var filterActive=this.filterManager.isChildFilterPresent();this.filterNodes(filterActive,changedPath)},FilterService2.prototype.filterNodes=function(filterActive,changedPath){var _this=this,filterCallback=__name(function(rowNode,includeChildNodes){rowNode.hasChildren()&&filterActive&&!includeChildNodes?rowNode.childrenAfterFilter=rowNode.childrenAfterGroup.filter(function(childNode){var passBecauseChildren=childNode.childrenAfterFilter&&childNode.childrenAfterFilter.length>0,passBecauseDataPasses=childNode.data&&_this.filterManager.doesRowPassFilter({rowNode:childNode});return passBecauseChildren||passBecauseDataPasses}):rowNode.childrenAfterFilter=rowNode.childrenAfterGroup,rowNode.sibling&&(rowNode.sibling.childrenAfterFilter=rowNode.childrenAfterFilter)},"filterCallback");if(this.doingTreeDataFiltering()){var treeDataDepthFirstFilter_1=__name(function(rowNode,alreadyFoundInParent){if(rowNode.childrenAfterGroup)for(var i=0;i<rowNode.childrenAfterGroup.length;i++){var childNode=rowNode.childrenAfterGroup[i],foundInParent=alreadyFoundInParent||_this.filterManager.doesRowPassFilter({rowNode:childNode});childNode.childrenAfterGroup?treeDataDepthFirstFilter_1(rowNode.childrenAfterGroup[i],foundInParent):filterCallback(childNode,foundInParent)}filterCallback(rowNode,alreadyFoundInParent)},"treeDataDepthFirstFilter_1"),treeDataFilterCallback=__name(function(rowNode){return treeDataDepthFirstFilter_1(rowNode,!1)},"treeDataFilterCallback");changedPath.executeFromRootNode(treeDataFilterCallback)}else{var defaultFilterCallback=__name(function(rowNode){return filterCallback(rowNode,!1)},"defaultFilterCallback");changedPath.forEachChangedNodeDepthFirst(defaultFilterCallback,!0)}},FilterService2.prototype.doingTreeDataFiltering=function(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")},__decorate$6([Autowired("filterManager")],FilterService2.prototype,"filterManager",void 0),FilterService2=__decorate$6([Bean("filterService")],FilterService2),FilterService2}(BeanStub),__extends$6=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$5=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$5"),__read$1=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read$1"),ImmutableService=function(_super){__extends$6(ImmutableService2,_super);function ImmutableService2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(ImmutableService2,"ImmutableService"),ImmutableService2.prototype.postConstruct=function(){var _this=this;this.rowModel.getType()==="clientSide"&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",function(){return _this.onRowDataUpdated()}))},ImmutableService2.prototype.isActive=function(){var getRowIdProvided=this.gridOptionsService.exists("getRowId"),resetRowDataOnUpdate=this.gridOptionsService.get("resetRowDataOnUpdate");return resetRowDataOnUpdate?!1:getRowIdProvided},ImmutableService2.prototype.setRowData=function(rowData){var transactionAndMap=this.createTransactionForRowData(rowData);if(transactionAndMap){var _a=__read$1(transactionAndMap,2),transaction=_a[0],orderIdMap=_a[1];this.clientSideRowModel.updateRowData(transaction,orderIdMap)}},ImmutableService2.prototype.createTransactionForRowData=function(rowData){if(_.missing(this.clientSideRowModel)){console.error("AG Grid: ImmutableService only works with ClientSideRowModel");return}var getRowIdFunc=this.gridOptionsService.getCallback("getRowId");if(getRowIdFunc==null){console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");return}var transaction={remove:[],update:[],add:[]},existingNodesMap=this.clientSideRowModel.getCopyOfNodesMap(),suppressSortOrder=this.gridOptionsService.get("suppressMaintainUnsortedOrder"),orderMap=suppressSortOrder?void 0:{};return _.exists(rowData)&&rowData.forEach(function(data,index){var id=getRowIdFunc({data,level:0}),existingNode=existingNodesMap[id];if(orderMap&&(orderMap[id]=index),existingNode){var dataHasChanged=existingNode.data!==data;dataHasChanged&&transaction.update.push(data),existingNodesMap[id]=void 0}else transaction.add.push(data)}),_.iterateObject(existingNodesMap,function(id,rowNode){rowNode&&transaction.remove.push(rowNode.data)}),[transaction,orderMap]},ImmutableService2.prototype.onRowDataUpdated=function(){var rowData=this.gridOptionsService.get("rowData");rowData&&(this.isActive()?this.setRowData(rowData):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(rowData)))},__decorate$5([Autowired("rowModel")],ImmutableService2.prototype,"rowModel",void 0),__decorate$5([Autowired("rowRenderer")],ImmutableService2.prototype,"rowRenderer",void 0),__decorate$5([Autowired("selectionService")],ImmutableService2.prototype,"selectionService",void 0),__decorate$5([PostConstruct],ImmutableService2.prototype,"postConstruct",null),ImmutableService2=__decorate$5([Bean("immutableService")],ImmutableService2),ImmutableService2}(BeanStub),VERSION$2="31.1.1",ClientSideRowModelModule={version:VERSION$2,moduleName:ModuleNames.ClientSideRowModelModule,rowModel:"clientSide",beans:[ClientSideRowModel,FilterStage,SortStage,FlattenStage,SortService,FilterService,ImmutableService]},__extends$5=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$4=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$4"),InfiniteBlock=function(_super){__extends$5(InfiniteBlock2,_super);function InfiniteBlock2(id,parentCache,params){var _this=_super.call(this,id)||this;return _this.parentCache=parentCache,_this.params=params,_this.startRow=id*params.blockSize,_this.endRow=_this.startRow+params.blockSize,_this}return __name(InfiniteBlock2,"InfiniteBlock"),InfiniteBlock2.prototype.postConstruct=function(){this.createRowNodes()},InfiniteBlock2.prototype.getBlockStateJson=function(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}},InfiniteBlock2.prototype.setDataAndId=function(rowNode,data,index){_.exists(data)?rowNode.setDataAndId(data,index.toString()):rowNode.setDataAndId(void 0,void 0)},InfiniteBlock2.prototype.loadFromDatasource=function(){var _this=this,params=this.createLoadParams();if(_.missing(this.params.datasource.getRows)){console.warn("AG Grid: datasource is missing getRows method");return}window.setTimeout(function(){_this.params.datasource.getRows(params)},0)},InfiniteBlock2.prototype.processServerFail=function(){},InfiniteBlock2.prototype.createLoadParams=function(){var params={startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gridOptionsService.getGridCommonParams().context};return params},InfiniteBlock2.prototype.forEachNode=function(callback,sequence,rowCount){var _this=this;this.rowNodes.forEach(function(rowNode,index){var rowIndex=_this.startRow+index;rowIndex<rowCount&&callback(rowNode,sequence.next())})},InfiniteBlock2.prototype.getLastAccessed=function(){return this.lastAccessed},InfiniteBlock2.prototype.getRow=function(rowIndex,dontTouchLastAccessed){dontTouchLastAccessed===void 0&&(dontTouchLastAccessed=!1),dontTouchLastAccessed||(this.lastAccessed=this.params.lastAccessedSequence.next());var localIndex=rowIndex-this.startRow;return this.rowNodes[localIndex]},InfiniteBlock2.prototype.getStartRow=function(){return this.startRow},InfiniteBlock2.prototype.getEndRow=function(){return this.endRow},InfiniteBlock2.prototype.createRowNodes=function(){this.rowNodes=[];for(var i=0;i<this.params.blockSize;i++){var rowIndex=this.startRow+i,rowNode=new RowNode(this.beans);rowNode.setRowHeight(this.params.rowHeight),rowNode.uiLevel=0,rowNode.setRowIndex(rowIndex),rowNode.setRowTop(this.params.rowHeight*rowIndex),this.rowNodes.push(rowNode)}},InfiniteBlock2.prototype.processServerResult=function(params){var _this=this;this.rowNodes.forEach(function(rowNode,index){var data=params.rowData?params.rowData[index]:void 0;!rowNode.id&&rowNode.alreadyRendered&&data&&(_this.rowNodes[index]=new RowNode(_this.beans),_this.rowNodes[index].setRowIndex(rowNode.rowIndex),_this.rowNodes[index].setRowTop(rowNode.rowTop),_this.rowNodes[index].setRowHeight(rowNode.rowHeight),rowNode.clearRowTopAndRowIndex()),_this.setDataAndId(_this.rowNodes[index],data,_this.startRow+index)});var finalRowCount=params.rowCount!=null&&params.rowCount>=0?params.rowCount:void 0;this.parentCache.pageLoaded(this,finalRowCount)},InfiniteBlock2.prototype.destroyRowNodes=function(){this.rowNodes.forEach(function(rowNode){rowNode.clearRowTopAndRowIndex()})},__decorate$4([Autowired("beans")],InfiniteBlock2.prototype,"beans",void 0),__decorate$4([PostConstruct],InfiniteBlock2.prototype,"postConstruct",null),__decorate$4([PreDestroy],InfiniteBlock2.prototype,"destroyRowNodes",null),InfiniteBlock2}(RowNodeBlock),__extends$4=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$3=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$3"),__param=__name(function(paramIndex,decorator){return function(target,key){decorator(target,key,paramIndex)}},"__param"),InfiniteCache=function(_super){__extends$4(InfiniteCache2,_super);function InfiniteCache2(params){var _this=_super.call(this)||this;return _this.lastRowIndexKnown=!1,_this.blocks={},_this.blockCount=0,_this.rowCount=params.initialRowCount,_this.params=params,_this}return __name(InfiniteCache2,"InfiniteCache"),InfiniteCache2.prototype.setBeans=function(loggerFactory){this.logger=loggerFactory.create("InfiniteCache")},InfiniteCache2.prototype.getRow=function(rowIndex,dontCreatePage){dontCreatePage===void 0&&(dontCreatePage=!1);var blockId=Math.floor(rowIndex/this.params.blockSize),block=this.blocks[blockId];if(!block){if(dontCreatePage)return;block=this.createBlock(blockId)}return block.getRow(rowIndex)},InfiniteCache2.prototype.createBlock=function(blockNumber){var newBlock=this.createBean(new InfiniteBlock(blockNumber,this,this.params));return this.blocks[newBlock.getId()]=newBlock,this.blockCount++,this.purgeBlocksIfNeeded(newBlock),this.params.rowNodeBlockLoader.addBlock(newBlock),newBlock},InfiniteCache2.prototype.refreshCache=function(){var nothingToRefresh=this.blockCount==0;if(nothingToRefresh){this.purgeCache();return}this.getBlocksInOrder().forEach(function(block){return block.setStateWaitingToLoad()}),this.params.rowNodeBlockLoader.checkBlockToLoad()},InfiniteCache2.prototype.destroyAllBlocks=function(){var _this=this;this.getBlocksInOrder().forEach(function(block){return _this.destroyBlock(block)})},InfiniteCache2.prototype.getRowCount=function(){return this.rowCount},InfiniteCache2.prototype.isLastRowIndexKnown=function(){return this.lastRowIndexKnown},InfiniteCache2.prototype.pageLoaded=function(block,lastRow){this.isAlive()&&(this.logger.log("onPageLoaded: page = ".concat(block.getId(),", lastRow = ").concat(lastRow)),this.checkRowCount(block,lastRow),this.onCacheUpdated())},InfiniteCache2.prototype.purgeBlocksIfNeeded=function(blockToExclude){var _this=this,blocksForPurging=this.getBlocksInOrder().filter(function(b){return b!=blockToExclude}),lastAccessedComparator=__name(function(a,b){return b.getLastAccessed()-a.getLastAccessed()},"lastAccessedComparator");blocksForPurging.sort(lastAccessedComparator);var maxBlocksProvided=this.params.maxBlocksInCache>0,blocksToKeep=maxBlocksProvided?this.params.maxBlocksInCache-1:null,emptyBlocksToKeep=InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP-1;blocksForPurging.forEach(function(block,index){var purgeBecauseBlockEmpty=block.getState()===InfiniteBlock.STATE_WAITING_TO_LOAD&&index>=emptyBlocksToKeep,purgeBecauseCacheFull=maxBlocksProvided?index>=blocksToKeep:!1;if(purgeBecauseBlockEmpty||purgeBecauseCacheFull){if(_this.isBlockCurrentlyDisplayed(block)||_this.isBlockFocused(block))return;_this.removeBlockFromCache(block)}})},InfiniteCache2.prototype.isBlockFocused=function(block){var focusedCell=this.focusService.getFocusCellToUseAfterRefresh();if(!focusedCell||focusedCell.rowPinned!=null)return!1;var blockIndexStart=block.getStartRow(),blockIndexEnd=block.getEndRow(),hasFocus=focusedCell.rowIndex>=blockIndexStart&&focusedCell.rowIndex<blockIndexEnd;return hasFocus},InfiniteCache2.prototype.isBlockCurrentlyDisplayed=function(block){var startIndex=block.getStartRow(),endIndex=block.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(startIndex,endIndex)},InfiniteCache2.prototype.removeBlockFromCache=function(blockToRemove){blockToRemove&&this.destroyBlock(blockToRemove)},InfiniteCache2.prototype.checkRowCount=function(block,lastRow){if(typeof lastRow=="number"&&lastRow>=0)this.rowCount=lastRow,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){var lastRowIndex=(block.getId()+1)*this.params.blockSize,lastRowIndexPlusOverflow=lastRowIndex+this.params.overflowSize;this.rowCount<lastRowIndexPlusOverflow&&(this.rowCount=lastRowIndexPlusOverflow)}},InfiniteCache2.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.rowCount=rowCount,_.exists(lastRowIndexKnown)&&(this.lastRowIndexKnown=lastRowIndexKnown),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()},InfiniteCache2.prototype.forEachNodeDeep=function(callback){var _this=this,sequence=new NumberSequence;this.getBlocksInOrder().forEach(function(block){return block.forEachNode(callback,sequence,_this.rowCount)})},InfiniteCache2.prototype.getBlocksInOrder=function(){var blockComparator=__name(function(a,b){return a.getId()-b.getId()},"blockComparator"),blocks=_.getAllValuesInObject(this.blocks).sort(blockComparator);return blocks},InfiniteCache2.prototype.destroyBlock=function(block){delete this.blocks[block.getId()],this.destroyBean(block),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(block)},InfiniteCache2.prototype.onCacheUpdated=function(){if(this.isAlive()){this.destroyAllBlocksPastVirtualRowCount();var event_1={type:Events.EVENT_STORE_UPDATED};this.eventService.dispatchEvent(event_1)}},InfiniteCache2.prototype.destroyAllBlocksPastVirtualRowCount=function(){var _this=this,blocksToDestroy=[];this.getBlocksInOrder().forEach(function(block){var startRow=block.getId()*_this.params.blockSize;startRow>=_this.rowCount&&blocksToDestroy.push(block)}),blocksToDestroy.length>0&&blocksToDestroy.forEach(function(block){return _this.destroyBlock(block)})},InfiniteCache2.prototype.purgeCache=function(){var _this=this;this.getBlocksInOrder().forEach(function(block){return _this.removeBlockFromCache(block)}),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()},InfiniteCache2.prototype.getRowNodesInRange=function(firstInRange,lastInRange){var _this=this,result=[],lastBlockId=-1,inActiveRange=!1,numberSequence=new NumberSequence;_.missing(firstInRange)&&(inActiveRange=!0);var foundGapInSelection=!1;this.getBlocksInOrder().forEach(function(block){if(!foundGapInSelection){if(inActiveRange&&lastBlockId+1!==block.getId()){foundGapInSelection=!0;return}lastBlockId=block.getId(),block.forEachNode(function(rowNode){var hitFirstOrLast=rowNode===firstInRange||rowNode===lastInRange;(inActiveRange||hitFirstOrLast)&&result.push(rowNode),hitFirstOrLast&&(inActiveRange=!inActiveRange)},numberSequence,_this.rowCount)}});var invalidRange=foundGapInSelection||inActiveRange;return invalidRange?[]:result},InfiniteCache2.MAX_EMPTY_BLOCKS_TO_KEEP=2,__decorate$3([Autowired("rowRenderer")],InfiniteCache2.prototype,"rowRenderer",void 0),__decorate$3([Autowired("focusService")],InfiniteCache2.prototype,"focusService",void 0),__decorate$3([__param(0,Qualifier("loggerFactory"))],InfiniteCache2.prototype,"setBeans",null),__decorate$3([PreDestroy],InfiniteCache2.prototype,"destroyAllBlocks",null),InfiniteCache2}(BeanStub),__extends$3=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$2=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$2"),InfiniteRowModel=function(_super){__extends$3(InfiniteRowModel2,_super);function InfiniteRowModel2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(InfiniteRowModel2,"InfiniteRowModel"),InfiniteRowModel2.prototype.getRowBounds=function(index){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*index}},InfiniteRowModel2.prototype.ensureRowHeightsValid=function(startPixel,endPixel,startLimitIndex,endLimitIndex){return!1},InfiniteRowModel2.prototype.init=function(){var _this=this;this.gridOptionsService.isRowModelType("infinite")&&(this.rowHeight=this.gridOptionsService.getRowHeightAsNumber(),this.addEventListeners(),this.addDestroyFunc(function(){return _this.destroyCache()}),this.verifyProps())},InfiniteRowModel2.prototype.verifyProps=function(){this.gridOptionsService.exists("initialGroupOrderComparator")&&_.warnOnce("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")},InfiniteRowModel2.prototype.start=function(){this.setDatasource(this.gridOptionsService.get("datasource"))},InfiniteRowModel2.prototype.destroyDatasource=function(){this.datasource&&(this.getContext().destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)},InfiniteRowModel2.prototype.addEventListeners=function(){var _this=this;this.addManagedListener(this.eventService,Events.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverything.bind(this)),this.addManagedListener(this.eventService,Events.EVENT_STORE_UPDATED,this.onCacheUpdated.bind(this)),this.addManagedPropertyListener("datasource",function(){return _this.setDatasource(_this.gridOptionsService.get("datasource"))}),this.addManagedPropertyListener("cacheBlockSize",function(){return _this.resetCache()}),this.addManagedPropertyListener("rowHeight",function(){_this.rowHeight=_this.gridOptionsService.getRowHeightAsNumber(),_this.cacheParams.rowHeight=_this.rowHeight,_this.updateRowHeights()})},InfiniteRowModel2.prototype.onFilterChanged=function(){this.reset()},InfiniteRowModel2.prototype.onSortChanged=function(){this.reset()},InfiniteRowModel2.prototype.onColumnEverything=function(){var resetRequired;this.cacheParams?resetRequired=this.isSortModelDifferent():resetRequired=!0,resetRequired&&this.reset()},InfiniteRowModel2.prototype.isSortModelDifferent=function(){return!_.jsonEquals(this.cacheParams.sortModel,this.sortController.getSortModel())},InfiniteRowModel2.prototype.getType=function(){return"infinite"},InfiniteRowModel2.prototype.setDatasource=function(datasource){this.destroyDatasource(),this.datasource=datasource,datasource&&this.reset()},InfiniteRowModel2.prototype.isEmpty=function(){return!this.infiniteCache},InfiniteRowModel2.prototype.isRowsToRender=function(){return!!this.infiniteCache},InfiniteRowModel2.prototype.getNodesInRangeForSelection=function(firstInRange,lastInRange){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(firstInRange,lastInRange):[]},InfiniteRowModel2.prototype.reset=function(){if(this.datasource){var getRowIdFunc=this.gridOptionsService.getCallback("getRowId"),userGeneratingIds=getRowIdFunc!=null;userGeneratingIds||this.selectionService.reset("rowDataChanged"),this.resetCache()}},InfiniteRowModel2.prototype.createModelUpdatedEvent=function(){return{type:Events.EVENT_MODEL_UPDATED,newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1}},InfiniteRowModel2.prototype.resetCache=function(){this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:this.filterManager.getFilterModel(),sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gridOptionsService.get("infiniteInitialRowCount"),maxBlocksInCache:this.gridOptionsService.get("maxBlocksInCache"),rowHeight:this.gridOptionsService.getRowHeightAsNumber(),overflowSize:this.gridOptionsService.get("cacheOverflowSize"),blockSize:this.gridOptionsService.get("cacheBlockSize"),lastAccessedSequence:new NumberSequence},this.infiniteCache=this.createBean(new InfiniteCache(this.cacheParams)),this.eventService.dispatchEventOnce({type:Events.EVENT_ROW_COUNT_READY});var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)},InfiniteRowModel2.prototype.updateRowHeights=function(){var _this=this;this.forEachNode(function(node){node.setRowHeight(_this.rowHeight),node.setRowTop(_this.rowHeight*node.rowIndex)});var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)},InfiniteRowModel2.prototype.destroyCache=function(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))},InfiniteRowModel2.prototype.onCacheUpdated=function(){var event=this.createModelUpdatedEvent();this.eventService.dispatchEvent(event)},InfiniteRowModel2.prototype.getRow=function(rowIndex){if(this.infiniteCache&&!(rowIndex>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(rowIndex)},InfiniteRowModel2.prototype.getRowNode=function(id){var result;return this.forEachNode(function(rowNode){rowNode.id===id&&(result=rowNode)}),result},InfiniteRowModel2.prototype.forEachNode=function(callback){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(callback)},InfiniteRowModel2.prototype.getTopLevelRowCount=function(){return this.getRowCount()},InfiniteRowModel2.prototype.getTopLevelRowDisplayedIndex=function(topLevelIndex){return topLevelIndex},InfiniteRowModel2.prototype.getRowIndexAtPixel=function(pixel){if(this.rowHeight!==0){var rowIndexForPixel=Math.floor(pixel/this.rowHeight),lastRowIndex=this.getRowCount()-1;return rowIndexForPixel>lastRowIndex?lastRowIndex:rowIndexForPixel}return 0},InfiniteRowModel2.prototype.getRowCount=function(){return this.infiniteCache?this.infiniteCache.getRowCount():0},InfiniteRowModel2.prototype.isRowPresent=function(rowNode){var foundRowNode=this.getRowNode(rowNode.id);return!!foundRowNode},InfiniteRowModel2.prototype.refreshCache=function(){this.infiniteCache&&this.infiniteCache.refreshCache()},InfiniteRowModel2.prototype.purgeCache=function(){this.infiniteCache&&this.infiniteCache.purgeCache()},InfiniteRowModel2.prototype.isLastRowIndexKnown=function(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1},InfiniteRowModel2.prototype.setRowCount=function(rowCount,lastRowIndexKnown){this.infiniteCache&&this.infiniteCache.setRowCount(rowCount,lastRowIndexKnown)},__decorate$2([Autowired("filterManager")],InfiniteRowModel2.prototype,"filterManager",void 0),__decorate$2([Autowired("sortController")],InfiniteRowModel2.prototype,"sortController",void 0),__decorate$2([Autowired("selectionService")],InfiniteRowModel2.prototype,"selectionService",void 0),__decorate$2([Autowired("rowRenderer")],InfiniteRowModel2.prototype,"rowRenderer",void 0),__decorate$2([Autowired("rowNodeBlockLoader")],InfiniteRowModel2.prototype,"rowNodeBlockLoader",void 0),__decorate$2([PostConstruct],InfiniteRowModel2.prototype,"init",null),__decorate$2([PreDestroy],InfiniteRowModel2.prototype,"destroyDatasource",null),InfiniteRowModel2=__decorate$2([Bean("rowModel")],InfiniteRowModel2),InfiniteRowModel2}(BeanStub),VERSION$1="31.1.1",InfiniteRowModelModule={version:VERSION$1,moduleName:ModuleNames.InfiniteRowModelModule,rowModel:"infinite",beans:[InfiniteRowModel]},BaseCreator=function(){function BaseCreator2(){}return __name(BaseCreator2,"BaseCreator"),BaseCreator2.prototype.setBeans=function(beans){this.beans=beans},BaseCreator2.prototype.getFileName=function(fileName){var extension=this.getDefaultFileExtension();return(fileName==null||!fileName.length)&&(fileName=this.getDefaultFileName()),fileName.indexOf(".")===-1?"".concat(fileName,".").concat(extension):fileName},BaseCreator2.prototype.getData=function(params){var serializingSession=this.createSerializingSession(params);return this.beans.gridSerializer.serialize(serializingSession,params)},BaseCreator2.prototype.getDefaultFileName=function(){return"export.".concat(this.getDefaultFileExtension())},BaseCreator2}(),BaseGridSerializingSession=function(){function BaseGridSerializingSession2(config){this.groupColumns=[];var columnModel=config.columnModel,valueService=config.valueService,gridOptionsService=config.gridOptionsService,valueFormatterService=config.valueFormatterService,valueParserService=config.valueParserService,processCellCallback=config.processCellCallback,processHeaderCallback=config.processHeaderCallback,processGroupHeaderCallback=config.processGroupHeaderCallback,processRowGroupCallback=config.processRowGroupCallback;this.columnModel=columnModel,this.valueService=valueService,this.gridOptionsService=gridOptionsService,this.valueFormatterService=valueFormatterService,this.valueParserService=valueParserService,this.processCellCallback=processCellCallback,this.processHeaderCallback=processHeaderCallback,this.processGroupHeaderCallback=processGroupHeaderCallback,this.processRowGroupCallback=processRowGroupCallback}return __name(BaseGridSerializingSession2,"BaseGridSerializingSession"),BaseGridSerializingSession2.prototype.prepare=function(columnsToExport){this.groupColumns=columnsToExport.filter(function(col){return!!col.getColDef().showRowGroup})},BaseGridSerializingSession2.prototype.extractHeaderValue=function(column){var value=this.getHeaderName(this.processHeaderCallback,column);return value??""},BaseGridSerializingSession2.prototype.extractRowCellValue=function(column,index,accumulatedRowIndex,type,node){var hideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),value=(!hideOpenParents||node.footer)&&this.shouldRenderGroupSummaryCell(node,column,index)?this.createValueForGroupNode(column,node):this.valueService.getValue(column,node),processedValue=this.processCell({accumulatedRowIndex,rowNode:node,column,value,processCellCallback:this.processCellCallback,type});return processedValue},BaseGridSerializingSession2.prototype.shouldRenderGroupSummaryCell=function(node,column,currentColumnIndex){var _a,isGroupNode=node&&node.group;if(!isGroupNode)return!1;var currentColumnGroupIndex=this.groupColumns.indexOf(column);if(currentColumnGroupIndex!==-1){if(((_a=node.groupData)===null||_a===void 0?void 0:_a[column.getId()])!=null||this.gridOptionsService.isRowModelType("serverSide")&&node.group)return!0;if(node.footer&&node.level===-1){var colDef=column.getColDef(),isFullWidth=colDef==null||colDef.showRowGroup===!0;return isFullWidth||colDef.showRowGroup===this.columnModel.getRowGroupColumns()[0].getId()}}var isGroupUseEntireRow=this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotMode());return currentColumnIndex===0&&isGroupUseEntireRow},BaseGridSerializingSession2.prototype.getHeaderName=function(callback,column){return callback?callback(this.gridOptionsService.addGridCommonParams({column})):this.columnModel.getDisplayNameForColumn(column,"csv",!0)},BaseGridSerializingSession2.prototype.createValueForGroupNode=function(column,node){var _this=this;if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gridOptionsService.addGridCommonParams({column,node}));var isTreeData=this.gridOptionsService.get("treeData"),isSuppressGroupMaintainValueType=this.gridOptionsService.get("suppressGroupMaintainValueType"),getValueFromNode=__name(function(node2){var _a,_b;if(isTreeData||isSuppressGroupMaintainValueType)return node2.key;var value=(_a=node2.groupData)===null||_a===void 0?void 0:_a[column.getId()];return!value||!node2.rowGroupColumn||node2.rowGroupColumn.getColDef().useValueFormatterForExport===!1?value:(_b=_this.valueFormatterService.formatValue(node2.rowGroupColumn,node2,value))!==null&&_b!==void 0?_b:value},"getValueFromNode"),isFooter=node.footer,keys2=[getValueFromNode(node)];if(!this.gridOptionsService.isGroupMultiAutoColumn())for(;node.parent;)node=node.parent,keys2.push(getValueFromNode(node));var groupValue=keys2.reverse().join(" -> ");return isFooter?"Total ".concat(groupValue):groupValue},BaseGridSerializingSession2.prototype.processCell=function(params){var _this=this,_a,accumulatedRowIndex=params.accumulatedRowIndex,rowNode=params.rowNode,column=params.column,value=params.value,processCellCallback=params.processCellCallback,type=params.type;return processCellCallback?{value:(_a=processCellCallback(this.gridOptionsService.addGridCommonParams({accumulatedRowIndex,column,node:rowNode,value,type,parseValue:function(valueToParse){return _this.valueParserService.parseValue(column,rowNode,valueToParse,_this.valueService.getValue(column,rowNode))},formatValue:function(valueToFormat){var _a2;return(_a2=_this.valueFormatterService.formatValue(column,rowNode,valueToFormat))!==null&&_a2!==void 0?_a2:valueToFormat}})))!==null&&_a!==void 0?_a:""}:column.getColDef().useValueFormatterForExport!==!1?{value:value??"",valueFormatted:this.valueFormatterService.formatValue(column,rowNode,value)}:{value:value??""}},BaseGridSerializingSession2}(),Downloader=function(){function Downloader2(){}return __name(Downloader2,"Downloader"),Downloader2.download=function(fileName,content){var win=document.defaultView||window;if(!win){console.warn("AG Grid: There is no `window` associated with the current `document`");return}var element=document.createElement("a"),url=win.URL.createObjectURL(content);element.setAttribute("href",url),element.setAttribute("download",fileName),element.style.display="none",document.body.appendChild(element),element.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:win})),document.body.removeChild(element),win.setTimeout(function(){win.URL.revokeObjectURL(url)},0)},Downloader2}(),__extends$2=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),LINE_SEPARATOR$1=`\r
`,CsvSerializingSession=function(_super){__extends$2(CsvSerializingSession2,_super);function CsvSerializingSession2(config){var _this=_super.call(this,config)||this;_this.isFirstLine=!0,_this.result="";var suppressQuotes=config.suppressQuotes,columnSeparator=config.columnSeparator;return _this.suppressQuotes=suppressQuotes,_this.columnSeparator=columnSeparator,_this}return __name(CsvSerializingSession2,"CsvSerializingSession"),CsvSerializingSession2.prototype.addCustomContent=function(content){var _this=this;content&&(typeof content=="string"?(/^\s*\n/.test(content)||this.beginNewLine(),content=content.replace(/\r?\n/g,LINE_SEPARATOR$1),this.result+=content):content.forEach(function(row){_this.beginNewLine(),row.forEach(function(cell,index){index!==0&&(_this.result+=_this.columnSeparator),_this.result+=_this.putInQuotes(cell.data.value||""),cell.mergeAcross&&_this.appendEmptyCells(cell.mergeAcross)})}))},CsvSerializingSession2.prototype.onNewHeaderGroupingRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}},CsvSerializingSession2.prototype.onNewHeaderGroupingRowColumn=function(columnGroup,header,index,span){index!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(header),this.appendEmptyCells(span)},CsvSerializingSession2.prototype.appendEmptyCells=function(count){for(var i=1;i<=count;i++)this.result+=this.columnSeparator+this.putInQuotes("")},CsvSerializingSession2.prototype.onNewHeaderRow=function(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}},CsvSerializingSession2.prototype.onNewHeaderRowColumn=function(column,index){index!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(column))},CsvSerializingSession2.prototype.onNewBodyRow=function(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}},CsvSerializingSession2.prototype.onNewBodyRowColumn=function(column,index,node){var _a;index!=0&&(this.result+=this.columnSeparator);var rowCellValue=this.extractRowCellValue(column,index,index,"csv",node);this.result+=this.putInQuotes((_a=rowCellValue.valueFormatted)!==null&&_a!==void 0?_a:rowCellValue.value)},CsvSerializingSession2.prototype.putInQuotes=function(value){if(this.suppressQuotes)return value;if(value==null)return'""';var stringValue;typeof value=="string"?stringValue=value:typeof value.toString=="function"?stringValue=value.toString():(console.warn("AG Grid: unknown value type during csv conversion"),stringValue="");var valueEscaped=stringValue.replace(/"/g,'""');return'"'+valueEscaped+'"'},CsvSerializingSession2.prototype.parse=function(){return this.result},CsvSerializingSession2.prototype.beginNewLine=function(){this.isFirstLine||(this.result+=LINE_SEPARATOR$1),this.isFirstLine=!1},CsvSerializingSession2}(BaseGridSerializingSession),__extends$1=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate$1=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate$1"),CsvCreator=function(_super){__extends$1(CsvCreator2,_super);function CsvCreator2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(CsvCreator2,"CsvCreator"),CsvCreator2.prototype.postConstruct=function(){this.setBeans({gridSerializer:this.gridSerializer,gridOptionsService:this.gridOptionsService})},CsvCreator2.prototype.getMergedParams=function(params){var baseParams=this.gridOptionsService.get("defaultCsvExportParams");return Object.assign({},baseParams,params)},CsvCreator2.prototype.export=function(userParams){if(this.isExportSuppressed()){console.warn("AG Grid: Export cancelled. Export is not allowed as per your configuration.");return}var mergedParams=this.getMergedParams(userParams),data=this.getData(mergedParams),packagedFile=new Blob(["\uFEFF",data],{type:"text/plain"}),fileName=typeof mergedParams.fileName=="function"?mergedParams.fileName(this.gridOptionsService.getGridCommonParams()):mergedParams.fileName;Downloader.download(this.getFileName(fileName),packagedFile)},CsvCreator2.prototype.exportDataAsCsv=function(params){this.export(params)},CsvCreator2.prototype.getDataAsCsv=function(params,skipDefaultParams){skipDefaultParams===void 0&&(skipDefaultParams=!1);var mergedParams=skipDefaultParams?Object.assign({},params):this.getMergedParams(params);return this.getData(mergedParams)},CsvCreator2.prototype.getDefaultFileExtension=function(){return"csv"},CsvCreator2.prototype.createSerializingSession=function(params){var _a=this,columnModel=_a.columnModel,valueService=_a.valueService,gridOptionsService=_a.gridOptionsService,valueFormatterService=_a.valueFormatterService,valueParserService=_a.valueParserService,_b=params,processCellCallback=_b.processCellCallback,processHeaderCallback=_b.processHeaderCallback,processGroupHeaderCallback=_b.processGroupHeaderCallback,processRowGroupCallback=_b.processRowGroupCallback,suppressQuotes=_b.suppressQuotes,columnSeparator=_b.columnSeparator;return new CsvSerializingSession({columnModel,valueService,gridOptionsService,valueFormatterService,valueParserService,processCellCallback:processCellCallback||void 0,processHeaderCallback:processHeaderCallback||void 0,processGroupHeaderCallback:processGroupHeaderCallback||void 0,processRowGroupCallback:processRowGroupCallback||void 0,suppressQuotes:suppressQuotes||!1,columnSeparator:columnSeparator||","})},CsvCreator2.prototype.isExportSuppressed=function(){return this.gridOptionsService.get("suppressCsvExport")},__decorate$1([Autowired("columnModel")],CsvCreator2.prototype,"columnModel",void 0),__decorate$1([Autowired("valueService")],CsvCreator2.prototype,"valueService",void 0),__decorate$1([Autowired("gridSerializer")],CsvCreator2.prototype,"gridSerializer",void 0),__decorate$1([Autowired("gridOptionsService")],CsvCreator2.prototype,"gridOptionsService",void 0),__decorate$1([Autowired("valueFormatterService")],CsvCreator2.prototype,"valueFormatterService",void 0),__decorate$1([Autowired("valueParserService")],CsvCreator2.prototype,"valueParserService",void 0),__decorate$1([PostConstruct],CsvCreator2.prototype,"postConstruct",null),CsvCreator2=__decorate$1([Bean("csvCreator")],CsvCreator2),CsvCreator2}(BaseCreator),__extends=function(){var extendStatics=__name(function(d,b){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d2,b2){d2.__proto__=b2}||function(d2,b2){for(var p in b2)Object.prototype.hasOwnProperty.call(b2,p)&&(d2[p]=b2[p])},extendStatics(d,b)},"extendStatics");return function(d,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");extendStatics(d,b);function __(){this.constructor=d}__name(__,"__"),d.prototype=b===null?Object.create(b):(__.prototype=b.prototype,new __)}}(),__decorate=__name(function(decorators,target,key,desc){var c=arguments.length,r=c<3?target:desc===null?desc=Object.getOwnPropertyDescriptor(target,key):desc,d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(decorators,target,key,desc);else for(var i=decorators.length-1;i>=0;i--)(d=decorators[i])&&(r=(c<3?d(r):c>3?d(target,key,r):d(target,key))||r);return c>3&&r&&Object.defineProperty(target,key,r),r},"__decorate"),RowType;(function(RowType2){RowType2[RowType2.HEADER_GROUPING=0]="HEADER_GROUPING",RowType2[RowType2.HEADER=1]="HEADER",RowType2[RowType2.BODY=2]="BODY"})(RowType||(RowType={}));var GridSerializer=function(_super){__extends(GridSerializer2,_super);function GridSerializer2(){return _super!==null&&_super.apply(this,arguments)||this}return __name(GridSerializer2,"GridSerializer"),GridSerializer2.prototype.serialize=function(gridSerializingSession,params){params===void 0&&(params={});var allColumns=params.allColumns,columnKeys=params.columnKeys,skipRowGroups=params.skipRowGroups,columnsToExport=this.getColumnsToExport(allColumns,skipRowGroups,columnKeys),serializeChain=_.compose(this.prepareSession(columnsToExport),this.prependContent(params),this.exportColumnGroups(params,columnsToExport),this.exportHeaders(params,columnsToExport),this.processPinnedTopRows(params,columnsToExport),this.processRows(params,columnsToExport),this.processPinnedBottomRows(params,columnsToExport),this.appendContent(params));return serializeChain(gridSerializingSession).parse()},GridSerializer2.prototype.processRow=function(gridSerializingSession,params,columnsToExport,node){var rowSkipper=params.shouldRowBeSkipped||function(){return!1},skipSingleChildrenGroup=this.gridOptionsService.get("groupRemoveSingleChildren"),skipLowestSingleChildrenGroup=this.gridOptionsService.get("groupRemoveLowestSingleChildren"),isClipboardExport=params.rowPositions!=null,isExplicitExportSelection=isClipboardExport||!!params.onlySelected,hideOpenParents=this.gridOptionsService.get("groupHideOpenParents")&&!isExplicitExportSelection,isLeafNode=this.columnModel.isPivotMode()?node.leafGroup:!node.group,isFooter=!!node.footer;params.skipRowGroups;var shouldSkipLowestGroup=skipLowestSingleChildrenGroup&&node.leafGroup,shouldSkipCurrentGroup=node.allChildrenCount===1&&(skipSingleChildrenGroup||shouldSkipLowestGroup);if(!(!isLeafNode&&!isFooter&&(params.skipRowGroups||shouldSkipCurrentGroup||hideOpenParents)||params.onlySelected&&!node.isSelected()||params.skipPinnedTop&&node.rowPinned==="top"||params.skipPinnedBottom&&node.rowPinned==="bottom")){var nodeIsRootNode=node.level===-1;if(!(nodeIsRootNode&&!isLeafNode&&!isFooter)){var shouldRowBeSkipped=rowSkipper(this.gridOptionsService.addGridCommonParams({node}));if(!shouldRowBeSkipped){var rowAccumulator=gridSerializingSession.onNewBodyRow(node);if(columnsToExport.forEach(function(column,index){rowAccumulator.onColumn(column,index,node)}),params.getCustomContentBelowRow){var content=params.getCustomContentBelowRow(this.gridOptionsService.addGridCommonParams({node}));content&&gridSerializingSession.addCustomContent(content)}}}}},GridSerializer2.prototype.appendContent=function(params){return function(gridSerializingSession){var appendContent=params.appendContent;return appendContent&&gridSerializingSession.addCustomContent(appendContent),gridSerializingSession}},GridSerializer2.prototype.prependContent=function(params){return function(gridSerializingSession){var prependContent=params.prependContent;return prependContent&&gridSerializingSession.addCustomContent(prependContent),gridSerializingSession}},GridSerializer2.prototype.prepareSession=function(columnsToExport){return function(gridSerializingSession){return gridSerializingSession.prepare(columnsToExport),gridSerializingSession}},GridSerializer2.prototype.exportColumnGroups=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){if(!params.skipColumnGroupHeaders){var groupInstanceIdCreator=new GroupInstanceIdCreator,displayedGroups=_this.displayedGroupCreator.createDisplayedGroups(columnsToExport,groupInstanceIdCreator,null);_this.recursivelyAddHeaderGroups(displayedGroups,gridSerializingSession,params.processGroupHeaderCallback)}return gridSerializingSession}},GridSerializer2.prototype.exportHeaders=function(params,columnsToExport){return function(gridSerializingSession){if(!params.skipColumnHeaders){var gridRowIterator_1=gridSerializingSession.onNewHeaderRow();columnsToExport.forEach(function(column,index){gridRowIterator_1.onColumn(column,index,void 0)})}return gridSerializingSession}},GridSerializer2.prototype.processPinnedTopRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(function(position){return position.rowPinned==="top"}).sort(function(a,b){return a.rowIndex-b.rowIndex}).map(function(position){return _this.pinnedRowModel.getPinnedTopRow(position.rowIndex)}).forEach(processRow):_this.pinnedRowModel.forEachPinnedTopRow(processRow),gridSerializingSession}},GridSerializer2.prototype.processRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var rowModel=_this.rowModel,rowModelType=rowModel.getType(),usingCsrm=rowModelType==="clientSide",usingSsrm=rowModelType==="serverSide",onlySelectedNonStandardModel=!usingCsrm&&params.onlySelected,processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport),_a=params.exportedRows,exportedRows=_a===void 0?"filteredAndSorted":_a;if(params.rowPositions)params.rowPositions.filter(function(position){return position.rowPinned==null}).sort(function(a,b){return a.rowIndex-b.rowIndex}).map(function(position){return rowModel.getRow(position.rowIndex)}).forEach(processRow);else if(_this.columnModel.isPivotMode())usingCsrm?rowModel.forEachPivotNode(processRow,!0):usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);else if(params.onlySelectedAllPages||onlySelectedNonStandardModel){var selectedNodes=_this.selectionService.getSelectedNodes();_this.replicateSortedOrder(selectedNodes),selectedNodes.forEach(processRow)}else exportedRows==="all"?rowModel.forEachNode(processRow):usingCsrm||usingSsrm?rowModel.forEachNodeAfterFilterAndSort(processRow,!0):rowModel.forEachNode(processRow);return gridSerializingSession}},GridSerializer2.prototype.replicateSortedOrder=function(rows){var _this=this,sortOptions=this.sortController.getSortOptions(),compareNodes=__name(function(rowA,rowB){var _a,_b,_c,_d;return rowA.rowIndex!=null&&rowB.rowIndex!=null?rowA.rowIndex-rowB.rowIndex:rowA.level===rowB.level?((_a=rowA.parent)===null||_a===void 0?void 0:_a.id)===((_b=rowB.parent)===null||_b===void 0?void 0:_b.id)?_this.rowNodeSorter.compareRowNodes(sortOptions,{rowNode:rowA,currentPos:(_c=rowA.rowIndex)!==null&&_c!==void 0?_c:-1},{rowNode:rowB,currentPos:(_d=rowB.rowIndex)!==null&&_d!==void 0?_d:-1}):compareNodes(rowA.parent,rowB.parent):rowA.level>rowB.level?compareNodes(rowA.parent,rowB):compareNodes(rowA,rowB.parent)},"compareNodes");rows.sort(compareNodes)},GridSerializer2.prototype.processPinnedBottomRows=function(params,columnsToExport){var _this=this;return function(gridSerializingSession){var processRow=_this.processRow.bind(_this,gridSerializingSession,params,columnsToExport);return params.rowPositions?params.rowPositions.filter(function(position){return position.rowPinned==="bottom"}).sort(function(a,b){return a.rowIndex-b.rowIndex}).map(function(position){return _this.pinnedRowModel.getPinnedBottomRow(position.rowIndex)}).forEach(processRow):_this.pinnedRowModel.forEachPinnedBottomRow(processRow),gridSerializingSession}},GridSerializer2.prototype.getColumnsToExport=function(allColumns,skipRowGroups,columnKeys){allColumns===void 0&&(allColumns=!1),skipRowGroups===void 0&&(skipRowGroups=!1);var isPivotMode=this.columnModel.isPivotMode();if(columnKeys&&columnKeys.length)return this.columnModel.getGridColumns(columnKeys);var isTreeData=this.gridOptionsService.get("treeData"),columnsToExport=[];return allColumns&&!isPivotMode?columnsToExport=this.columnModel.getAllGridColumns():columnsToExport=this.columnModel.getAllDisplayedColumns(),skipRowGroups&&!isTreeData&&(columnsToExport=columnsToExport.filter(function(column){return column.getColId()!==GROUP_AUTO_COLUMN_ID})),columnsToExport},GridSerializer2.prototype.recursivelyAddHeaderGroups=function(displayedGroups,gridSerializingSession,processGroupHeaderCallback){var directChildrenHeaderGroups=[];displayedGroups.forEach(function(columnGroupChild){var columnGroup=columnGroupChild;columnGroup.getChildren&&columnGroup.getChildren().forEach(function(it){return directChildrenHeaderGroups.push(it)})}),displayedGroups.length>0&&displayedGroups[0]instanceof ColumnGroup&&this.doAddHeaderHeader(gridSerializingSession,displayedGroups,processGroupHeaderCallback),directChildrenHeaderGroups&&directChildrenHeaderGroups.length>0&&this.recursivelyAddHeaderGroups(directChildrenHeaderGroups,gridSerializingSession,processGroupHeaderCallback)},GridSerializer2.prototype.doAddHeaderHeader=function(gridSerializingSession,displayedGroups,processGroupHeaderCallback){var _this=this,gridRowIterator=gridSerializingSession.onNewHeaderGroupingRow(),columnIndex=0;displayedGroups.forEach(function(columnGroupChild){var columnGroup=columnGroupChild,name;processGroupHeaderCallback?name=processGroupHeaderCallback(_this.gridOptionsService.addGridCommonParams({columnGroup})):name=_this.columnModel.getDisplayNameForColumnGroup(columnGroup,"header");var collapsibleGroupRanges=columnGroup.getLeafColumns().reduce(function(collapsibleGroups,currentColumn,currentIdx,arr){var lastGroup=_.last(collapsibleGroups),groupShow=currentColumn.getColumnGroupShow()==="open";return groupShow?(!lastGroup||lastGroup[1]!=null)&&(lastGroup=[currentIdx],collapsibleGroups.push(lastGroup)):lastGroup&&lastGroup[1]==null&&(lastGroup[1]=currentIdx-1),currentIdx===arr.length-1&&lastGroup&&lastGroup[1]==null&&(lastGroup[1]=currentIdx),collapsibleGroups},[]);gridRowIterator.onColumn(columnGroup,name||"",columnIndex++,columnGroup.getLeafColumns().length-1,collapsibleGroupRanges)})},__decorate([Autowired("displayedGroupCreator")],GridSerializer2.prototype,"displayedGroupCreator",void 0),__decorate([Autowired("columnModel")],GridSerializer2.prototype,"columnModel",void 0),__decorate([Autowired("rowModel")],GridSerializer2.prototype,"rowModel",void 0),__decorate([Autowired("pinnedRowModel")],GridSerializer2.prototype,"pinnedRowModel",void 0),__decorate([Autowired("selectionService")],GridSerializer2.prototype,"selectionService",void 0),__decorate([Autowired("rowNodeSorter")],GridSerializer2.prototype,"rowNodeSorter",void 0),__decorate([Autowired("sortController")],GridSerializer2.prototype,"sortController",void 0),GridSerializer2=__decorate([Bean("gridSerializer")],GridSerializer2),GridSerializer2}(BeanStub),VERSION="31.1.1",CsvExportModule={version:VERSION,moduleName:ModuleNames.CsvExportModule,beans:[CsvCreator,GridSerializer]},LINE_SEPARATOR=`\r
`,XmlFactory=function(){function XmlFactory2(){}return __name(XmlFactory2,"XmlFactory"),XmlFactory2.createHeader=function(headerElement){headerElement===void 0&&(headerElement={});var headerStart="<?",headerEnd="?>",keys2=["version"];headerElement.version||(headerElement.version="1.0"),headerElement.encoding&&keys2.push("encoding"),headerElement.standalone&&keys2.push("standalone");var att=keys2.map(function(key){return"".concat(key,'="').concat(headerElement[key],'"')}).join(" ");return"".concat(headerStart,"xml ").concat(att," ").concat(headerEnd)},XmlFactory2.createXml=function(xmlElement,booleanTransformer){var _this=this,props="";xmlElement.properties&&(xmlElement.properties.prefixedAttributes&&xmlElement.properties.prefixedAttributes.forEach(function(prefixedSet){Object.keys(prefixedSet.map).forEach(function(key){props+=_this.returnAttributeIfPopulated(prefixedSet.prefix+key,prefixedSet.map[key],booleanTransformer)})}),xmlElement.properties.rawMap&&Object.keys(xmlElement.properties.rawMap).forEach(function(key){props+=_this.returnAttributeIfPopulated(key,xmlElement.properties.rawMap[key],booleanTransformer)}));var result="<"+xmlElement.name+props;return!xmlElement.children&&xmlElement.textNode==null?result+"/>"+LINE_SEPARATOR:xmlElement.textNode!=null?result+">"+xmlElement.textNode+"</"+xmlElement.name+">"+LINE_SEPARATOR:(result+=">"+LINE_SEPARATOR,xmlElement.children&&xmlElement.children.forEach(function(it){result+=_this.createXml(it,booleanTransformer)}),result+"</"+xmlElement.name+">"+LINE_SEPARATOR)},XmlFactory2.returnAttributeIfPopulated=function(key,value,booleanTransformer){if(!value&&value!==""&&value!==0)return"";var xmlValue=value;return typeof value=="boolean"&&booleanTransformer&&(xmlValue=booleanTransformer(value))," ".concat(key,'="').concat(xmlValue,'"')},XmlFactory2}(),convertTime=__name(function(date){var time=date.getHours();return time<<=6,time=time|date.getMinutes(),time<<=5,time=time|date.getSeconds()/2,time},"convertTime"),convertDate=__name(function(date){var dt=date.getFullYear()-1980;return dt<<=4,dt=dt|date.getMonth()+1,dt<<=5,dt=dt|date.getDate(),dt},"convertDate");function convertDecToHex(number,bytes){for(var hex="",i=0;i<bytes;i++)hex+=String.fromCharCode(number&255),number>>>=8;return hex}__name(convertDecToHex,"convertDecToHex");var getCrcFromCrc32TableAndByteArray=__name(function(content){if(!content.length)return 0;for(var crc=-1,j=0,k=0,l=0,i=0;i<content.length;i++)j=content[i],k=(crc^j)&255,l=crcTable[k],crc=crc>>>8^l;return crc^-1},"getCrcFromCrc32TableAndByteArray"),getCrcFromCrc32Table=__name(function(content){return content.length?getCrcFromCrc32TableAndByteArray(typeof content=="string"?new TextEncoder().encode(content):content):0},"getCrcFromCrc32Table"),crcTable=new Uint32Array([0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117]),__awaiter$2=__name(function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}__name(fulfilled,"fulfilled");function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}__name(rejected,"rejected");function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})},"__awaiter$2"),__generator$2=__name(function(thisArg,body){var _2={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_2;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _2.label++,{value:op[1],done:!1};case 5:_2.label++,y=op[1],op=[0];continue;case 7:op=_2.ops.pop(),_2.trys.pop();continue;default:if(t=_2.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_2=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_2.label=op[1];break}if(op[0]===6&&_2.label<t[1]){_2.label=t[1],t=op;break}if(t&&_2.label<t[2]){_2.label=t[2],_2.ops.push(op);break}t[2]&&_2.ops.pop(),_2.trys.pop();continue}op=body.call(thisArg,_2)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},"__generator$2"),compressBlob=__name(function(data){return __awaiter$2(void 0,void 0,void 0,function(){var chunksSize,chunks,writeCompressedData,readable,compressStream;return __generator$2(this,function(_a){switch(_a.label){case 0:return chunksSize=0,chunks=[],writeCompressedData=new WritableStream({write:function(chunk){chunks.push(chunk),chunksSize+=chunk.length}}),readable=new ReadableStream({start:function(controller){var reader=new FileReader;reader.onload=function(e){var _a2;!((_a2=e.target)===null||_a2===void 0)&&_a2.result&&controller.enqueue(e.target.result),controller.close()},reader.readAsArrayBuffer(data)}}),compressStream=new window.CompressionStream("deflate-raw"),[4,readable.pipeThrough(compressStream).pipeTo(writeCompressedData)];case 1:return _a.sent(),[2,{size:chunksSize,content:new Blob(chunks)}]}})})},"compressBlob"),deflateLocalFile=__name(function(rawContent){return __awaiter$2(void 0,void 0,void 0,function(){var contentAsBlob,_a,compressedSize,compressedContent,compressedContentAsUint8Array,_b;return __generator$2(this,function(_c){switch(_c.label){case 0:return contentAsBlob=new Blob([rawContent]),[4,compressBlob(contentAsBlob)];case 1:return _a=_c.sent(),compressedSize=_a.size,compressedContent=_a.content,_b=Uint8Array.bind,[4,compressedContent.arrayBuffer()];case 2:return compressedContentAsUint8Array=new(_b.apply(Uint8Array,[void 0,_c.sent()])),[2,{size:compressedSize,content:compressedContentAsUint8Array}]}})})},"deflateLocalFile"),__assign=__name(function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p])}return t},__assign.apply(this,arguments)},"__assign"),__awaiter$1=__name(function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}__name(fulfilled,"fulfilled");function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}__name(rejected,"rejected");function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})},"__awaiter$1"),__generator$1=__name(function(thisArg,body){var _2={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_2;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _2.label++,{value:op[1],done:!1};case 5:_2.label++,y=op[1],op=[0];continue;case 7:op=_2.ops.pop(),_2.trys.pop();continue;default:if(t=_2.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_2=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_2.label=op[1];break}if(op[0]===6&&_2.label<t[1]){_2.label=t[1],t=op;break}if(t&&_2.label<t[2]){_2.label=t[2],_2.ops.push(op);break}t[2]&&_2.ops.pop(),_2.trys.pop();continue}op=body.call(thisArg,_2)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},"__generator$1"),utf8_encode=_.utf8_encode,getDeflatedHeaderAndContent=__name(function(currentFile,offset){return __awaiter$1(void 0,void 0,void 0,function(){var content,_a,size,rawContent,deflatedContent,deflatedSize,deflationPerformed,shouldDeflate,result,headers;return __generator$1(this,function(_b){switch(_b.label){case 0:return content=currentFile.content,_a=content?getDecodedContent(content):{size:0,content:Uint8Array.from([])},size=_a.size,rawContent=_a.content,deflatedContent=void 0,deflatedSize=void 0,deflationPerformed=!1,shouldDeflate=currentFile.type==="file"&&rawContent&&size>0,shouldDeflate?[4,deflateLocalFile(rawContent)]:[3,2];case 1:result=_b.sent(),deflatedContent=result.content,deflatedSize=result.size,deflationPerformed=!0,_b.label=2;case 2:return headers=getHeaders(currentFile,deflationPerformed,offset,size,rawContent,deflatedSize),[2,__assign(__assign({},headers),{content:deflatedContent||rawContent,isCompressed:deflationPerformed})]}})})},"getDeflatedHeaderAndContent"),getHeaderAndContent=__name(function(currentFile,offset){var content=currentFile.content,rawContent=(content?getDecodedContent(content):{content:Uint8Array.from([])}).content,headers=getHeaders(currentFile,!1,offset,rawContent.length,rawContent,void 0);return __assign(__assign({},headers),{content:rawContent,isCompressed:!1})},"getHeaderAndContent"),getHeaders=__name(function(currentFile,isCompressed,offset,rawSize,rawContent,deflatedSize){var content=currentFile.content,path=currentFile.path,creationDate=currentFile.created,time=convertTime(creationDate),dt=convertDate(creationDate),crcFlag=getCrcFromCrc32Table(rawContent),zipSize=deflatedSize!==void 0?deflatedSize:rawSize,utfPath=utf8_encode(path),isUTF8=utfPath!==path,extraFields="";if(isUTF8){var uExtraFieldPath=convertDecToHex(1,1)+convertDecToHex(getCrcFromCrc32Table(utfPath),4)+utfPath;extraFields="up"+convertDecToHex(uExtraFieldPath.length,2)+uExtraFieldPath}var commonHeader="\0"+(isUTF8?"\0\b":"\0\0")+convertDecToHex(isCompressed?8:0,2)+convertDecToHex(time,2)+convertDecToHex(dt,2)+convertDecToHex(zipSize?crcFlag:0,4)+convertDecToHex(deflatedSize??rawSize,4)+convertDecToHex(rawSize,4)+convertDecToHex(utfPath.length,2)+convertDecToHex(extraFields.length,2),localFileHeader="PK"+commonHeader+utfPath+extraFields,centralDirectoryHeader="PK\0"+commonHeader+"\0\0\0\0\0\0"+(content?"\0\0\0\0":"\0\0\0")+convertDecToHex(offset,4)+utfPath+extraFields;return{localFileHeader:Uint8Array.from(localFileHeader,function(c){return c.charCodeAt(0)}),centralDirectoryHeader:Uint8Array.from(centralDirectoryHeader,function(c){return c.charCodeAt(0)})}},"getHeaders"),buildCentralDirectoryEnd=__name(function(tLen,cLen,lLen){var str="PK\0\0\0\0"+convertDecToHex(tLen,2)+convertDecToHex(tLen,2)+convertDecToHex(cLen,4)+convertDecToHex(lLen,4)+"\0\0";return Uint8Array.from(str,function(c){return c.charCodeAt(0)})},"buildCentralDirectoryEnd"),convertStringToByteArray=__name(function(str){for(var bytes=new Uint8Array(str.length),i=0;i<str.length;i++)bytes[i]=str.charCodeAt(i);return bytes},"convertStringToByteArray"),getDecodedContent=__name(function(content){var contentToUse;if(typeof content=="string"){var base64String=atob(content.split(";base64,")[1]);contentToUse=convertStringToByteArray(base64String)}else contentToUse=content;return{size:contentToUse.length,content:contentToUse}},"getDecodedContent"),__awaiter=__name(function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value)})}return __name(adopt,"adopt"),new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}__name(fulfilled,"fulfilled");function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}__name(rejected,"rejected");function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}__name(step,"step"),step((generator=generator.apply(thisArg,_arguments||[])).next())})},"__awaiter"),__generator=__name(function(thisArg,body){var _2={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_2;)try{if(f=1,y&&(t=op[0]&2?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[op[0]&2,t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _2.label++,{value:op[1],done:!1};case 5:_2.label++,y=op[1],op=[0];continue;case 7:op=_2.ops.pop(),_2.trys.pop();continue;default:if(t=_2.trys,!(t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_2=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_2.label=op[1];break}if(op[0]===6&&_2.label<t[1]){_2.label=t[1],t=op;break}if(t&&_2.label<t[2]){_2.label=t[2],_2.ops.push(op);break}t[2]&&_2.ops.pop(),_2.trys.pop();continue}op=body.call(thisArg,_2)}catch(e){op=[6,e],y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}},"__generator"),__values=__name(function(o){var s=typeof Symbol=="function"&&Symbol.iterator,m=s&&o[s],i=0;if(m)return m.call(o);if(o&&typeof o.length=="number")return{next:function(){return o&&i>=o.length&&(o=void 0),{value:o&&o[i++],done:!o}}};throw new TypeError(s?"Object is not iterable.":"Symbol.iterator is not defined.")},"__values"),__read=__name(function(o,n){var m=typeof Symbol=="function"&&o[Symbol.iterator];if(!m)return o;var i=m.call(o),r,ar=[],e;try{for(;(n===void 0||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},"__read"),__spreadArray=__name(function(to,from,pack){if(pack||arguments.length===2)for(var i=0,l=from.length,ar;i<l;i++)(ar||!(i in from))&&(ar||(ar=Array.prototype.slice.call(from,0,i)),ar[i]=from[i]);return to.concat(ar||Array.prototype.slice.call(from))},"__spreadArray"),ZipContainer=function(){function ZipContainer2(){}return __name(ZipContainer2,"ZipContainer"),ZipContainer2.addFolders=function(paths){paths.forEach(this.addFolder.bind(this))},ZipContainer2.addFolder=function(path){this.folders.push({path,created:new Date,isBase64:!1,type:"folder"})},ZipContainer2.addFile=function(path,content,isBase64){isBase64===void 0&&(isBase64=!1),this.files.push({path,created:new Date,content:isBase64?content:new TextEncoder().encode(content),isBase64,type:"file"})},ZipContainer2.getZipFile=function(mimeType){return mimeType===void 0&&(mimeType="application/zip"),__awaiter(this,void 0,void 0,function(){var textOutput;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.buildCompressedFileStream()];case 1:return textOutput=_a.sent(),this.clearStream(),[2,new Blob([textOutput],{type:mimeType})]}})})},ZipContainer2.getUncompressedZipFile=function(mimeType){mimeType===void 0&&(mimeType="application/zip");var textOutput=this.buildFileStream();return this.clearStream(),new Blob([textOutput],{type:mimeType})},ZipContainer2.clearStream=function(){this.folders=[],this.files=[]},ZipContainer2.packageFiles=function(files){var e_1,_a,fileData=new Uint8Array(0),folderData=new Uint8Array(0),filesContentAndHeaderLength=0,folderHeadersLength=0;try{for(var files_1=__values(files),files_1_1=files_1.next();!files_1_1.done;files_1_1=files_1.next()){var currentFile=files_1_1.value,localFileHeader=currentFile.localFileHeader,centralDirectoryHeader=currentFile.centralDirectoryHeader,content=currentFile.content,dataWithHeader=new Uint8Array(fileData.length+localFileHeader.length);dataWithHeader.set(fileData),dataWithHeader.set(localFileHeader,fileData.length),fileData=dataWithHeader;var dataWithContent=new Uint8Array(fileData.length+content.length);dataWithContent.set(fileData),dataWithContent.set(content,fileData.length),fileData=dataWithContent;var folderDataWithFolderHeader=new Uint8Array(folderData.length+centralDirectoryHeader.length);folderDataWithFolderHeader.set(folderData),folderDataWithFolderHeader.set(centralDirectoryHeader,folderData.length),folderData=folderDataWithFolderHeader,filesContentAndHeaderLength+=localFileHeader.length+content.length,folderHeadersLength+=centralDirectoryHeader.length}}catch(e_1_1){e_1={error:e_1_1}}finally{try{files_1_1&&!files_1_1.done&&(_a=files_1.return)&&_a.call(files_1)}finally{if(e_1)throw e_1.error}}var folderEnd=buildCentralDirectoryEnd(files.length,folderHeadersLength,filesContentAndHeaderLength),result=new Uint8Array(fileData.length+folderData.length+folderEnd.length);return result.set(fileData),result.set(folderData,fileData.length),result.set(folderEnd,fileData.length+folderData.length),result},ZipContainer2.buildCompressedFileStream=function(){return __awaiter(this,void 0,void 0,function(){var totalFiles,readyFiles,lL,totalFiles_1,totalFiles_1_1,currentFile,output,localFileHeader,content,e_2_1,e_2,_a;return __generator(this,function(_b){switch(_b.label){case 0:totalFiles=__spreadArray(__spreadArray([],__read(this.folders),!1),__read(this.files),!1),readyFiles=[],lL=0,_b.label=1;case 1:_b.trys.push([1,6,7,8]),totalFiles_1=__values(totalFiles),totalFiles_1_1=totalFiles_1.next(),_b.label=2;case 2:return totalFiles_1_1.done?[3,5]:(currentFile=totalFiles_1_1.value,[4,getDeflatedHeaderAndContent(currentFile,lL)]);case 3:output=_b.sent(),localFileHeader=output.localFileHeader,content=output.content,readyFiles.push(output),lL+=localFileHeader.length+content.length,_b.label=4;case 4:return totalFiles_1_1=totalFiles_1.next(),[3,2];case 5:return[3,8];case 6:return e_2_1=_b.sent(),e_2={error:e_2_1},[3,8];case 7:try{totalFiles_1_1&&!totalFiles_1_1.done&&(_a=totalFiles_1.return)&&_a.call(totalFiles_1)}finally{if(e_2)throw e_2.error}return[7];case 8:return[2,this.packageFiles(readyFiles)]}})})},ZipContainer2.buildFileStream=function(){var e_3,_a,totalFiles=__spreadArray(__spreadArray([],__read(this.folders),!1),__read(this.files),!1),readyFiles=[],lL=0;try{for(var totalFiles_2=__values(totalFiles),totalFiles_2_1=totalFiles_2.next();!totalFiles_2_1.done;totalFiles_2_1=totalFiles_2.next()){var currentFile=totalFiles_2_1.value,readyFile=getHeaderAndContent(currentFile,lL),localFileHeader=readyFile.localFileHeader,content=readyFile.content;readyFiles.push(readyFile),lL+=localFileHeader.length+content.length}}catch(e_3_1){e_3={error:e_3_1}}finally{try{totalFiles_2_1&&!totalFiles_2_1.done&&(_a=totalFiles_2.return)&&_a.call(totalFiles_2)}finally{if(e_3)throw e_3.error}}return this.packageFiles(readyFiles)},ZipContainer2.folders=[],ZipContainer2.files=[],ZipContainer2}(),AllCommunityModules=[ClientSideRowModelModule,InfiniteRowModelModule,CsvExportModule];ModuleRegistry.registerModules(AllCommunityModules);const agGridCommunity_auto_esm=Object.freeze(Object.defineProperty({__proto__:null,AbstractHeaderCellCtrl,AgAbstractField,AgAbstractLabel,AgAutocomplete,AgCheckbox,AgDialog,AgGroupComponent,AgInputDateField,AgInputNumberField,AgInputRange,AgInputTextArea,AgInputTextField,AgMenuItemComponent,AgMenuItemRenderer,AgMenuList,AgMenuPanel,AgPanel,AgPickerField,AgPromise,get AgPromiseStatus(){return AgPromiseStatus},AgRadioButton,AgRichSelect,AgSelect,AgSlider,AgStackComponentsRegistry,AgToggleButton,AlignedGridsService,AllCommunityModules,AnimateShowChangeCellRenderer,AnimateSlideCellRenderer,AnimationFrameService,AutoScrollService,AutoWidthCalculator,Autowired,get BarColumnLabelPlacement(){return BarColumnLabelPlacement},BaseComponentWrapper,BaseCreator,BaseGridSerializingSession,Bean,BeanStub,Beans,BodyDropPivotTarget,BodyDropTarget,CHART_TOOLBAR_ALLOW_LIST,CHART_TOOL_PANEL_ALLOW_LIST,CHART_TOOL_PANEL_MENU_OPTIONS,CellComp,CellCtrl,CellNavigationService,CellPositionUtils,get CellRangeType(){return CellRangeType},ChangedPath,CheckboxCellEditor,CheckboxCellRenderer,CheckboxSelectionComponent,ClientSideRowModelModule,get ClientSideRowModelSteps(){return ClientSideRowModelSteps},ColDefUtil,Column,ColumnApi,ColumnFactory,ColumnGroup,ColumnKeyCreator,ColumnModel,ColumnUtils,Component,ComponentUtil,Context,CssClassApplier,CssClassManager,CsvCreator,CsvExportModule,CtrlsService,CustomTooltipFeature,DEFAULT_CHART_GROUPS,DataTypeService,DateCellEditor,DateFilter,DateStringCellEditor,DisplayedGroupCreator,Downloader,DragAndDropService,DragService,get DragSourceType(){return DragSourceType},Environment,EventService,Events,get ExcelFactoryMode(){return ExcelFactoryMode},ExpansionService,ExpressionService,FilterManager,FloatingFilterMapper,FocusService,GROUP_AUTO_COLUMN_ID,Grid,GridApi,GridBodyComp,GridBodyCtrl,GridComp,GridCoreCreator,GridCtrl,GridHeaderComp,GridHeaderCtrl,GridOptionsService,GridSerializer,GroupCellRenderer,GroupCellRendererCtrl,GroupInstanceIdCreator,HeaderCellCtrl,HeaderFilterCellComp,HeaderFilterCellCtrl,HeaderGroupCellCtrl,get HeaderNavigationDirection(){return HeaderNavigationDirection},HeaderNavigationService,HeaderPositionUtils,HeaderRowComp,HeaderRowContainerComp,HeaderRowContainerCtrl,HeaderRowCtrl,get HeaderRowType(){return HeaderRowType},get HorizontalDirection(){return HorizontalDirection},HorizontalResizeService,InfiniteRowModelModule,KeyCode,LargeTextCellEditor,get LayoutCssClasses(){return LayoutCssClasses},LocaleService,Logger,LoggerFactory,ManagedFocusFeature,MenuService,get ModuleNames(){return ModuleNames},ModuleRegistry,MouseEventService,MoveColumnFeature,NavigationService,NumberCellEditor,NumberFilter,NumberSequence,Optional,PaginationProxy,PinnedRowModel,PopupComponent,PopupEditorWrapper,PopupService,PositionableFeature,PostConstruct,PreConstruct,PreDestroy,PropertyKeys,ProvidedColumnGroup,ProvidedFilter,Qualifier,QuerySelector,RefSelector,ResizeObserverService,get RowAnimationCssClasses(){return RowAnimationCssClasses},RowContainerComp,RowContainerCtrl,get RowContainerName(){return RowContainerName},get RowContainerType(){return RowContainerType},RowCtrl,get RowHighlightPosition(){return RowHighlightPosition},RowNode,RowNodeBlock,RowNodeBlockLoader,RowNodeSorter,RowPositionUtils,RowRenderer,get RowType(){return RowType},ScalarFilter,ScrollVisibleService,SelectCellEditor,SelectableService,get SelectionHandleType(){return SelectionHandleType},get ServerSideTransactionResultStatus(){return ServerSideTransactionResultStatus},SetLeftFeature,SimpleFilter,SortController,SortIndicatorComp,StandardMenuFactory,StylingService,get TabGuardClassNames(){return TabGuardClassNames},TabGuardComp,TabGuardCtrl,TabbedLayout,TemplateService,TextCellEditor,TextFilter,TextFloatingFilter,Timer,TooltipFeature,TouchListener,UserComponentFactory,UserComponentRegistry,ValueCache,ValueFormatterService,ValueParserService,ValueService,VanillaFrameworkOverrides,get VerticalDirection(){return VerticalDirection},VirtualList,VirtualListDragFeature,XmlFactory,ZipContainer,_,__FORCE_MODULE_DETECTION,createGrid,getRowContainerTypeForName},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(agGridCommunity_auto_esm);export{require$$0 as r};
//# sourceMappingURL=ag-grid-community-Dstgf3nq.js.map
