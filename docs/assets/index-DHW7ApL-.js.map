{"version":3,"file":"index-DHW7ApL-.js","sources":["../../src/shared/models/account-data.ts","../../src/shared/models/account.ts","../../src/shared/models/loan.ts","../../src/shared/models/mortgage.ts","../../src/shared/models/net-wealth.ts","../../src/shared/models/projected-wealth.ts","../../src/shared/models/store.ts","../../src/shared/store.ts","../../src/shared/utility/format-cash.ts","../../src/shared/utility/mortgage-calc.ts","../../src/shared/utility/graph-helpers.ts","../../src/capabilities/net-wealth/components/wealth-chart/use-graph-data.ts","../../src/capabilities/net-wealth/components/wealth-chart/wealth-chart.tsx","../../src/capabilities/net-wealth/components/new-account/new-account.tsx","../../src/shared/components/ag-grid/ag-grid.tsx","../../src/shared/utility/format-date.ts","../../src/shared/utility/sort-by-date.ts","../../src/capabilities/net-wealth/components/tab-types/components/delete-account.tsx","../../src/capabilities/net-wealth/components/tab-types/components/update-account.tsx","../../src/capabilities/net-wealth/components/tab-types/account/column-config.tsx","../../src/capabilities/net-wealth/components/tab-types/account/account.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/column-config.tsx","../../src/shared/utility/group-by.ts","../../src/capabilities/net-wealth/components/tab-types/mortgage/add-loan.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/add-entry.tsx","../../src/capabilities/net-wealth/components/tab-types/mortgage/mortgage.tsx","../../src/capabilities/net-wealth/components/account-tabs/account-tabs.tsx","../../src/capabilities/net-wealth/net-wealth.tsx","../../src/shared/utility/min-max-avg.ts","../../src/capabilities/projected-income/components/value.tsx","../../src/shared/components/formatters/cash.tsx","../../src/shared/components/formatters/duration.tsx","../../src/shared/utility/format-percent.ts","../../src/shared/components/formatters/percent.tsx","../../src/shared/components/formatters/until.tsx","../../src/capabilities/projected-income/components/bonus-outcome.tsx","../../src/capabilities/projected-income/components/data-entry/column-config.tsx","../../src/capabilities/projected-income/components/data-entry/data-entry.tsx","../../src/capabilities/projected-income/hooks/use-common-merit.ts","../../src/capabilities/projected-income/hooks/use-projected-pay.ts","../../src/capabilities/projected-income/hooks/use-base-income.ts","../../src/capabilities/projected-income/components/merit-increase.tsx","../../src/capabilities/projected-income/components/outcome.tsx","../../src/capabilities/projected-income/hooks/use-april-bonus.ts","../../src/capabilities/projected-income/hooks/use-june-bonus.ts","../../src/capabilities/projected-income/hooks/use-july-bonus.ts","../../src/capabilities/projected-income/projected-income.tsx","../../src/shared/components/safety-button/safety-button.tsx","../../src/shared/hooks/use-export.tsx","../../src/shared/hooks/use-import.tsx","../../src/app/app.tsx","../../src/main.tsx"],"sourcesContent":["import { z } from \"zod\";\r\n\r\nexport const accountDataValidator = z.object({\r\n  date: z.string(),\r\n  value: z.number(),\r\n  id: z.string(),\r\n});\r\n\r\nexport type AccountData = z.infer<typeof accountDataValidator>;\r\n\r\n","import { z } from \"zod\";\r\nimport { accountDataValidator } from \"./account-data\";\r\n\r\nexport const accountValidator = z.object({\r\n  type: z.literal(\"account\"),\r\n  data: z.array(accountDataValidator),\r\n});\r\n\r\nexport type Account = z.infer<typeof accountValidator>;\r\n\r\n","import { z } from \"zod\";\r\n\r\nexport const loanValidator = z.object({\r\n  principal: z.number(),\r\n  ratePct: z.number(),\r\n  paymentsPerYear: z.number(),\r\n  payment: z.number(),\r\n  firstPaymentDate: z.string(),\r\n  ownershipPct: z.number(),\r\n});\r\n\r\nexport type Loan = z.infer<typeof loanValidator>;\r\n\r\n","import { z } from \"zod\";\r\nimport { accountDataValidator } from \"./account-data\";\r\nimport { loanValidator } from \"./loan\";\r\n\r\nexport const mortgageValidator = z.object({\r\n  type: z.literal(\"mortgage\"),\r\n  loan: loanValidator.optional(),\r\n  data: z.array(accountDataValidator),\r\n});\r\n\r\nexport type Mortgage = z.infer<typeof mortgageValidator>;\r\n\r\n","import { z } from \"zod\";\r\nimport { accountValidator } from \"./account\";\r\nimport { mortgageValidator } from \"./mortgage\";\r\n\r\nexport const wealth = z.record(z.union([accountValidator, mortgageValidator]));\r\n\r\nexport type Wealth = z.infer<typeof wealth>;\r\n","import { z } from \"zod\";\r\nimport { accountDataValidator } from \"./account-data\";\r\n\r\nexport const projectedWealth = z.object({\r\n  timeSeries: z.object({\r\n    paycheck: z.array(accountDataValidator),\r\n    retirementRate: z.array(accountDataValidator),\r\n    savingsRate: z.array(accountDataValidator),\r\n    meritBonusPct: z.array(accountDataValidator),\r\n    companyBonusPct: z.array(accountDataValidator),\r\n    meritBonus: z.array(accountDataValidator),\r\n    companyBonus: z.array(accountDataValidator),\r\n    retirementBonus: z.array(accountDataValidator),\r\n    equityPct: z.array(accountDataValidator),\r\n    meritIncreasePct: z.array(accountDataValidator),\r\n  }),\r\n});\r\n\r\nexport const getDefaults = () => ({\r\n  projectedIncome: {\r\n    timeSeries: {\r\n      paycheck: [],\r\n      retirementRate: [],\r\n      savingsRate: [],\r\n      meritBonusPct: [],\r\n      companyBonusPct: [],\r\n      meritBonus: [],\r\n      companyBonus: [],\r\n      retirementBonus: [],\r\n      equityPct: [],\r\n      meritIncreasePct: [],\r\n    },\r\n  },\r\n  wealth: {},\r\n});\r\n\r\nexport type ProjectedWealth = z.infer<typeof projectedWealth>;\r\nexport type TimeSeries = keyof ProjectedWealth[\"timeSeries\"];\r\n","import { z } from \"zod\";\r\nimport { wealth } from \"./net-wealth\";\r\nimport { projectedWealth } from \"./projected-wealth\";\r\n\r\nexport const storeValidator = z.object({\r\n  wealth: wealth,\r\n  projectedIncome: projectedWealth,\r\n});\r\n\r\nexport type Store = z.infer<typeof storeValidator>;\r\n","import { Store as CreateStore } from \"@tanstack/store\";\r\nimport merge from \"deepmerge\";\r\nimport { ZodSchema } from \"zod\";\r\nimport { Store, storeValidator } from \"./models/store\";\r\n\r\nconst createStore = <T extends object>(\r\n  key: string,\r\n  validator: ZodSchema,\r\n  defaultValue: T\r\n) => {\r\n  const localData = localStorage.getItem(key);\r\n  let data = localData ? JSON.parse(localData) : defaultValue;\r\n  const parse = validator.safeParse(data);\r\n\r\n  if (!parse.success) {\r\n    console.log(\"zod error\", parse.error);\r\n    console.log(\"original\", data);\r\n\r\n    const next = merge(data, defaultValue);\r\n    console.log(\"merged\", next);\r\n    localStorage.setItem(`${key}-previous`, JSON.stringify(data));\r\n    localStorage.setItem(key, JSON.stringify(next));\r\n    data = next;\r\n  }\r\n\r\n  const store = new CreateStore<T>(data);\r\n  store.subscribe(() => {\r\n    const current = localStorage.getItem(key);\r\n    current && localStorage.setItem(`${key}-previous`, current);\r\n    localStorage.setItem(key, JSON.stringify(store.state));\r\n  });\r\n\r\n  return store;\r\n};\r\n\r\nexport const store = createStore<Store>(\"store\", storeValidator, {\r\n  projectedIncome: {\r\n    timeSeries: {\r\n      paycheck: [],\r\n      retirementRate: [],\r\n      savingsRate: [],\r\n      meritBonusPct: [],\r\n      companyBonusPct: [],\r\n      meritBonus: [],\r\n      companyBonus: [],\r\n      retirementBonus: [],\r\n      equityPct: [],\r\n      meritIncreasePct: [],\r\n    },\r\n  },\r\n  wealth: {},\r\n});\r\n","export const formatCashShort = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"currency\",\r\n  currency: \"USD\",\r\n  notation: \"compact\",\r\n  maximumFractionDigits: 1,\r\n}).format;\r\n\r\nexport const formatCash = new Intl.NumberFormat(\"en-US\", {\r\n  style: \"currency\",\r\n  currency: \"USD\",\r\n  maximumFractionDigits: 0,\r\n}).format;\r\n","import { DateTime } from \"luxon\";\r\nimport { Loan } from \"shared/models/loan\";\r\n\r\nexport const calcLoanBalance = (date: DateTime, loan: Loan) => {\r\n  const {\r\n    firstPaymentDate,\r\n    paymentsPerYear,\r\n    principal: pricipal,\r\n    ratePct: rate,\r\n    payment: monthlyPayment,\r\n  } = loan;\r\n  const anualizedRate = rate / paymentsPerYear;\r\n  const periods = date.diff(\r\n    DateTime.fromISO(firstPaymentDate),\r\n    \"months\"\r\n  ).months;\r\n  const totalRate = (1 + anualizedRate) ** periods;\r\n  const balance =\r\n    pricipal * totalRate - (monthlyPayment / anualizedRate) * (totalRate - 1);\r\n\r\n  return balance;\r\n};\r\n\r\nexport const calcEquity = (\r\n  ownershipPct: number,\r\n  houseValue: number | undefined,\r\n  loanBalance: number,\r\n  principal: number\r\n) => {\r\n  return houseValue\r\n    ? houseValue * ownershipPct - loanBalance\r\n    : principal - loanBalance;\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { Mortgage } from \"shared/models/mortgage\";\r\nimport { Account } from \"shared/models/account\";\r\nimport { calcEquity, calcLoanBalance } from \"./mortgage-calc\";\r\nimport { AccountData } from \"shared/models/account-data\";\r\n\r\nexport const findNearstOnOrBefore = (date: DateTime, data: AccountData[]) => {\r\n  return data.find((x, idx, array) => {\r\n    if (idx == 0 && DateTime.fromISO(x.date).startOf(\"day\") > date) {\r\n      return true;\r\n    }\r\n    if (idx < array.length - 1) {\r\n      if (\r\n        DateTime.fromISO(x.date).startOf(\"day\") <= date &&\r\n        DateTime.fromISO(data[idx + 1].date).startOf(\"day\") > date\r\n      ) {\r\n        return true;\r\n      }\r\n    }\r\n    if (idx === array.length - 1) {\r\n      return true;\r\n    }\r\n  });\r\n};\r\n\r\nexport const findSameYear = (date: DateTime, data: AccountData[]) => {\r\n  return data.find((x) => {\r\n    return DateTime.fromISO(x.date).year === date.year;\r\n  });\r\n};\r\n\r\nconst getMortgateValue = (date: DateTime, mortgage: Mortgage) => {\r\n  if (!mortgage.loan) {\r\n    return 0;\r\n  }\r\n  const entry = findNearstOnOrBefore(date, mortgage.data);\r\n  if (\r\n    entry?.date &&\r\n    mortgage.data[0] === entry &&\r\n    DateTime.fromISO(entry.date) > date\r\n  ) {\r\n    return 0;\r\n  }\r\n  const { ownershipPct, principal } = mortgage.loan;\r\n  const balance = calcLoanBalance(date, mortgage.loan);\r\n  return calcEquity(ownershipPct, entry?.value, balance, principal);\r\n};\r\n\r\nconst getAccountValue = (date: DateTime, account: Account) => {\r\n  const entry = findNearstOnOrBefore(date, account.data);\r\n  if (\r\n    entry?.date &&\r\n    account.data[0] === entry &&\r\n    DateTime.fromISO(entry.date) > date\r\n  ) {\r\n    return 0;\r\n  }\r\n  return entry?.value ?? 0;\r\n};\r\n\r\nexport const getGraphValue = (date: DateTime, account: Account | Mortgage) => {\r\n  switch (account.type) {\r\n    case \"account\":\r\n      return getAccountValue(date, account);\r\n    case \"mortgage\":\r\n      return getMortgateValue(date, account);\r\n  }\r\n};\r\n\r\nexport const getGraphDates = (accounts: (Account | Mortgage)[]) => {\r\n  return [\r\n    ...new Set(\r\n      accounts.flatMap((x) => {\r\n        return x.data.map((x) =>\r\n          DateTime.fromISO(x.date).startOf(\"day\").toISO()\r\n        );\r\n      })\r\n    ),\r\n  ]\r\n    .map((x) => DateTime.fromISO(x!))\r\n    .sort((a, b) => a.toMillis() - b.toMillis()) as DateTime<true>[];\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\r\nimport { useMemo } from \"react\";\r\nimport { store } from \"shared/store\";\r\nimport { getGraphDates, getGraphValue } from \"shared/utility/graph-helpers\";\r\n\r\nexport const useGraphData = () => {\r\n  const wealth = useStore(store, (x) => x.wealth);\r\n  return useMemo(() => {\r\n    const dates = getGraphDates(Object.values(wealth));\r\n    const accounts = Object.entries(wealth);\r\n    const graphData = dates.map((date) => {\r\n      return accounts.reduce(\r\n        (acc, [accountName, account]) => {\r\n          const value = getGraphValue(date, account);\r\n          acc[accountName] = value;\r\n          acc[\"total\"] = (acc[\"total\"] as number) + value;\r\n          acc[\"date\"] = date.toJSDate();\r\n          return acc;\r\n        },\r\n        { total: 0 } as Record<string, number | Date>\r\n      );\r\n    });\r\n    const firstNonZero = graphData.findIndex((x) => (x[\"total\"] as number) > 0);\r\n    return graphData.slice(firstNonZero);\r\n  }, [wealth]);\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\r\nimport {\r\n  AgAreaSeriesOptions,\r\n  AgCartesianChartOptions,\r\n  AgLineSeriesOptions,\r\n} from \"ag-charts-community\";\r\nimport { AgChartsReact } from \"ag-charts-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { store } from \"shared/store\";\r\nimport { formatCashShort } from \"shared/utility/format-cash\";\r\nimport { useGraphData } from \"./use-graph-data\";\r\n\r\nexport const WealthChart = () => {\r\n  const wealth = useStore(store, (x) => x.wealth);\r\n  const data = useGraphData();\r\n\r\n  const series = useMemo(() => {\r\n    return [\r\n      ...Object.keys(wealth).map((x) => {\r\n        return {\r\n          stacked: true,\r\n          type: \"area\",\r\n          xKey: \"date\",\r\n          yKey: x,\r\n          yName: x,\r\n          tooltip: {\r\n            renderer: ({ datum, yKey, xKey }) => ({\r\n              content: `${DateTime.fromJSDate(\r\n                datum[xKey]\r\n              ).toISODate()} ${formatCashShort(datum[yKey])}`,\r\n            }),\r\n          },\r\n        } as AgAreaSeriesOptions;\r\n      }),\r\n      {\r\n        type: \"line\",\r\n        xKey: \"date\",\r\n        yKey: \"total\",\r\n        yName: \"Total\",\r\n        tooltip: {\r\n          renderer: ({ datum, yKey, xKey }) => ({\r\n            content: `${DateTime.fromJSDate(\r\n              datum[xKey]\r\n            ).toISODate()} ${formatCashShort(datum[yKey])}`,\r\n          }),\r\n        },\r\n      } as AgLineSeriesOptions,\r\n    ];\r\n  }, [wealth]);\r\n\r\n  const options: AgCartesianChartOptions = useMemo(\r\n    () => ({\r\n      theme: \"ag-default-dark\",\r\n      title: {\r\n        text: `Total Wealth ${formatCashShort(\r\n          (data[data.length - 1]?.total ?? 0) as number\r\n        )}`,\r\n      },\r\n      data,\r\n      axes: [\r\n        {\r\n          type: \"time\",\r\n          position: \"bottom\",\r\n          label: {\r\n            format: \"%Y\",\r\n          },\r\n        },\r\n        {\r\n          type: \"number\",\r\n          position: \"left\",\r\n        },\r\n      ],\r\n      series,\r\n    }),\r\n    [data, series]\r\n  );\r\n  return <AgChartsReact options={options} />;\r\n};\r\n","import {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  MenuItem,\r\n  Stack,\r\n  TextField,\r\n} from \"@mui/material\";\r\nimport { create } from \"mutative\";\r\nimport { ReactNode, forwardRef, useRef, useState } from \"react\";\r\nimport { AssetType } from \"shared/models/asset-types\";\r\nimport { store } from \"shared/store\";\r\n\r\nexport const NewAccount = forwardRef<\r\n  HTMLButtonElement,\r\n  { children?: ReactNode }\r\n>((props, ref) => {\r\n  const [open, setOpen] = useState(false);\r\n  const nameRef = useRef<HTMLInputElement>(null);\r\n  const [error, setError] = useState(false);\r\n  const [accountType, setAccountType] = useState<AssetType>();\r\n\r\n  return (\r\n    <>\r\n      <Button\r\n        ref={ref}\r\n        onClick={() => {\r\n          setOpen(true);\r\n          setError(false);\r\n          setAccountType(undefined);\r\n        }}\r\n      >\r\n        add account\r\n      </Button>\r\n      <Dialog open={open} onClose={() => setOpen(false)}>\r\n        <DialogTitle>Add New Account</DialogTitle>\r\n        <DialogContent>\r\n          <Stack spacing={2} margin={2}>\r\n            <TextField\r\n              select\r\n              color={error ? \"error\" : \"primary\"}\r\n              onChange={(value) => {\r\n                setError(false);\r\n                setAccountType(value.target.value as AssetType);\r\n              }}\r\n              label=\"Type\"\r\n            >\r\n              <MenuItem value=\"mortgage\">Mortgage</MenuItem>\r\n              <MenuItem value=\"account\">Generic Account</MenuItem>\r\n            </TextField>\r\n\r\n            <TextField\r\n              placeholder=\"Name\"\r\n              onChange={() => {\r\n                setError(false);\r\n              }}\r\n              error={error}\r\n              inputRef={nameRef}\r\n            />\r\n          </Stack>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button\r\n            disabled={error}\r\n            onClick={() => {\r\n              store.setState((prev) => {\r\n                return create(prev, (next) => {\r\n                  if (\r\n                    !nameRef.current?.value ||\r\n                    !accountType ||\r\n                    prev.wealth[nameRef.current.value]\r\n                  ) {\r\n                    setError(true);\r\n                    return;\r\n                  }\r\n\r\n                  next.wealth[nameRef.current.value] = {\r\n                    type: accountType,\r\n                    data: [],\r\n                  };\r\n\r\n                  setOpen(false);\r\n                });\r\n              });\r\n            }}\r\n          >\r\n            Add\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      {props?.children}\r\n    </>\r\n  );\r\n});\r\n","import { AgGridReact, AgGridReactProps } from \"ag-grid-react\";\r\n\r\nexport const AgGrid = (props: AgGridReactProps & { id: string }) => {\r\n  const { id, ...rest } = props;\r\n  return (\r\n    <div id={id} className=\"ag-theme-quartz-dark\" style={{ height: \"100%\" }}>\r\n      <AgGridReact {...rest} />\r\n    </div>\r\n  );\r\n};\r\n","export const shortDate = \"yyyy-MM-dd\";\r\n","import { DateTime } from \"luxon\";\r\n\r\nexport const sortByDate =\r\n  <T>(select: (data: T) => DateTime, direction: \"asc\" | \"desc\") =>\r\n  (a: T, b: T) =>\r\n    direction === \"asc\"\r\n      ? select(a).toMillis() - select(b).toMillis()\r\n      : select(b).toMillis() - select(a).toMillis();\r\n","import { Button, Paper } from \"@mui/material\";\r\nimport { create } from \"mutative\";\r\nimport { store } from \"shared/store\";\r\n\r\nexport const DeleteAccount = (props: { accountName: string }) => {\r\n  const { accountName } = props;\r\n\r\n  const onDeleteAccount = () => {\r\n    store.setState((prev) => {\r\n      return create(prev, (next) => {\r\n        delete next.wealth[accountName];\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ padding: 2, width: \"100%\" }}>\r\n      <Button onClick={onDeleteAccount} color=\"error\">\r\n        Delete Account\r\n      </Button>\r\n    </Paper>\r\n  );\r\n};\r\n","import { Button, Paper, TextField, Stack } from \"@mui/material\";\r\nimport { create } from \"mutative\";\r\nimport { useState } from \"react\";\r\nimport { store } from \"shared/store\";\r\n\r\nexport const RenameAccount = (props: { accountName: string }) => {\r\n  const { accountName } = props;\r\n\r\n  const [nextAccountName, setNextAccountName] = useState<string>(accountName);\r\n\r\n  const onUpdateName = () => {\r\n    store.setState((prev) => {\r\n      return create(prev, (next) => {\r\n        next.wealth[nextAccountName] = next.wealth[accountName];\r\n        delete next.wealth[accountName];\r\n      });\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ padding: 2 }}>\r\n      <Stack spacing={1}>\r\n        <TextField\r\n          label=\"Account Name\"\r\n          value={nextAccountName}\r\n          onChange={(event) => setNextAccountName(event.target.value)}\r\n          placeholder=\"\"\r\n        />\r\n        <Button disabled={!nextAccountName} onClick={onUpdateName}>\r\n          Update Name\r\n        </Button>\r\n      </Stack>\r\n    </Paper>\r\n  );\r\n};\r\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\r\nimport { Button } from \"@mui/material\";\r\nimport { ColDef } from \"ag-grid-community\";\r\nimport { CustomCellRendererProps } from \"ag-grid-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { AccountData } from \"shared/models/account-data\";\r\nimport { store } from \"shared/store\";\r\nimport { formatCashShort } from \"shared/utility/format-cash\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const createAccountColumnConfig = (\r\n  accountName: string\r\n): ColDef<AccountData>[] => [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\r\n  },\r\n  {\r\n    headerName: \"Value\",\r\n    valueGetter: (x) => x.data?.value,\r\n    valueFormatter: (x) => formatCashShort(x.value),\r\n    type: \"numericColumn\",\r\n  },\r\n  {\r\n    headerName: \"Actions\",\r\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\r\n      return (\r\n        <Button\r\n          onClick={() => {\r\n            store.setState((prev) => {\r\n              return create(prev, (next) => {\r\n                const idxToRemove = next.wealth[accountName].data.findIndex(\r\n                  (x) => x.id === props.data?.id\r\n                );\r\n                next.wealth[accountName].data.splice(idxToRemove, 1);\r\n                return next;\r\n              });\r\n            });\r\n          }}\r\n          color=\"error\"\r\n        >\r\n          <DeleteForeverIcon />\r\n        </Button>\r\n      );\r\n    },\r\n  },\r\n];\r\n","import { Button, InputAdornment, Paper, Stack, TextField } from \"@mui/material\";\r\nimport Grid from \"@mui/system/Unstable_Grid\";\r\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { AgGrid } from \"shared/components/ag-grid\";\r\nimport { Account } from \"shared/models/account\";\r\nimport { store } from \"shared/store\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\nimport { sortByDate } from \"shared/utility/sort-by-date\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { DeleteAccount } from \"../components/delete-account\";\r\nimport { RenameAccount } from \"../components/update-account\";\r\nimport { createAccountColumnConfig } from \"./column-config\";\r\n\r\nexport const AccountTab = (props: { accountName: string }) => {\r\n  const { accountName } = props;\r\n  const account = useStore(\r\n    store,\r\n    (state) => state.wealth[accountName]\r\n  ) as Account;\r\n  const [date, setDate] = useState(DateTime.local());\r\n  const [amount, setamount] = useState(0);\r\n\r\n  const hasSameDate = useMemo(() => {\r\n    return !!account?.data?.find((x) =>\r\n      date.hasSame(DateTime.fromISO(x.date), \"day\")\r\n    );\r\n  }, [account?.data, date]);\r\n\r\n  const onAddEntry = () => {\r\n    store.setState((prev) => {\r\n      return create(prev, (next) => {\r\n        (next.wealth[accountName] as Account).data.push({\r\n          date: date.toString(),\r\n          value: amount,\r\n          id: uuid(),\r\n        });\r\n        next.wealth[accountName].data.sort(\r\n          sortByDate((x) => DateTime.fromISO(x.date), \"asc\")\r\n        );\r\n      });\r\n    });\r\n  };\r\n\r\n  const accountColumnConfig = useMemo(() => {\r\n    return createAccountColumnConfig(accountName);\r\n  }, [accountName]);\r\n\r\n  return (\r\n    <Grid container height=\"100%\" width={\"100%\"} padding={1} spacing={2}>\r\n      <Grid xs={3}>\r\n        <AgGrid\r\n          reactiveCustomComponents\r\n          rowData={account?.data ?? []}\r\n          columnDefs={accountColumnConfig}\r\n          id={account + \"-history\"}\r\n        />\r\n      </Grid>\r\n      <Grid xs={9}>\r\n        <div>\r\n          <Grid container spacing={2}>\r\n            <Grid xs={2}>\r\n              <Paper elevation={3} sx={{ padding: 2 }}>\r\n                <Stack spacing={1}>\r\n                  <DatePicker\r\n                    format={shortDate}\r\n                    sx={{ color: \"white\" }}\r\n                    label=\"Date\"\r\n                    defaultValue={date}\r\n                    onChange={(value) => value && setDate(value)}\r\n                  />\r\n                  <TextField\r\n                    label=\"amount\"\r\n                    value={amount}\r\n                    type=\"number\"\r\n                    onChange={(event) => setamount(+event.target.value)}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">$</InputAdornment>\r\n                      ),\r\n                    }}\r\n                    placeholder=\"\"\r\n                  />\r\n                  <Button\r\n                    disabled={!amount || !date || hasSameDate}\r\n                    onClick={onAddEntry}\r\n                  >\r\n                    Add Entry\r\n                  </Button>\r\n                </Stack>\r\n              </Paper>\r\n            </Grid>\r\n            <Grid xs={8}></Grid>\r\n            <Grid xs={2}>\r\n              <Stack spacing={2}>\r\n                <DeleteAccount accountName={accountName} />\r\n                <RenameAccount accountName={accountName} />\r\n              </Stack>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\r\nimport { Button } from \"@mui/material\";\r\nimport { ColDef } from \"ag-grid-community\";\r\nimport { CustomCellRendererProps } from \"ag-grid-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { AccountData } from \"shared/models/account-data\";\r\nimport { store } from \"shared/store\";\r\nimport { formatCashShort } from \"shared/utility/format-cash\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const createAccountColumnConfig = (\r\n  accountName: string\r\n): ColDef<AccountData>[] => [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\r\n  },\r\n  {\r\n    headerName: \"Home Value\",\r\n    valueGetter: (x) => x.data?.value,\r\n    valueFormatter: (x) => formatCashShort(x.value),\r\n    type: \"numericColumn\",\r\n  },\r\n  {\r\n    headerName: \"Actions\",\r\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\r\n      return (\r\n        <Button\r\n          onClick={() => {\r\n            store.setState((prev) => {\r\n              return create(prev, (next) => {\r\n                const account = next.wealth[accountName];\r\n                const idxToRemove = account.data.findIndex(\r\n                  (x) => x.id === props.data?.id\r\n                );\r\n                account.data.splice(idxToRemove, 1);\r\n                return next;\r\n              });\r\n            });\r\n          }}\r\n          color=\"error\"\r\n        >\r\n          <DeleteForeverIcon />\r\n        </Button>\r\n      );\r\n    },\r\n  },\r\n];\r\n\r\nexport const mortgageColumnConfig: ColDef<{\r\n  date: DateTime;\r\n  balance: number;\r\n}>[] = [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data?.date,\r\n  },\r\n  {\r\n    headerName: \"Loan Balance\",\r\n    valueGetter: (x) => x.data?.balance.toFixed(2),\r\n    valueFormatter: (x) => formatCashShort(x.value),\r\n    type: \"numericColumn\",\r\n  },\r\n];\r\n","export function groupBy<T, T2 extends string | number | symbol>(\r\n  array: T[],\r\n  selector: (x: T) => T2\r\n): Record<T2, T[]> {\r\n  return array.reduce((acc: Record<T2, T[]>, curr: T) => {\r\n    const key = selector(curr);\r\n    acc[key] ??= [];\r\n    acc[key].push(curr);\r\n    return acc;\r\n  }, {} as Record<T2, T[]>);\r\n}\r\n","import { ZodIssue, z } from \"zod\";\r\nimport { Button, Paper, Stack, TextField } from \"@mui/material\";\r\nimport { DatePicker } from \"@mui/x-date-pickers\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useRef, useState } from \"react\";\r\nimport { create } from \"mutative\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { Loan } from \"shared/models/loan\";\r\nimport { Mortgage } from \"shared/models/mortgage\";\r\nimport { store } from \"shared/store\";\r\nimport { groupBy } from \"shared/utility/group-by\";\r\n\r\nconst convertPct = (value: number) => {\r\n  return value > 1 ? value / 100 : value;\r\n};\r\n\r\nconst validator: z.ZodType<Loan> = z.object({\r\n  principal: z.number().min(0),\r\n  ratePct: z.number().min(0),\r\n  paymentsPerYear: z.number().min(0),\r\n  payment: z.number().min(0),\r\n  firstPaymentDate: z.string().datetime({ offset: true }),\r\n  ownershipPct: z.number().min(0),\r\n});\r\n\r\nexport const AddLoan = (props: { accountName: string }) => {\r\n  const { accountName } = props;\r\n\r\n  const loan = useStore(store, (x) => {\r\n    const account = x.wealth[accountName];\r\n    if (\"loan\" in account) {\r\n      return account.loan;\r\n    }\r\n  });\r\n\r\n  const ref = useRef<Partial<Loan>>(loan ?? {});\r\n  const [error, setError] = useState<Partial<Record<keyof Loan, ZodIssue>>>({});\r\n\r\n  return (\r\n    <Paper elevation={3} sx={{ padding: 2 }}>\r\n      <Stack spacing={1}>\r\n        <DatePicker\r\n          defaultValue={\r\n            ref.current?.firstPaymentDate\r\n              ? DateTime.fromISO(ref.current.firstPaymentDate)\r\n              : null\r\n          }\r\n          label=\"First Payment\"\r\n          slotProps={{\r\n            textField: {\r\n              error: !!error.firstPaymentDate,\r\n            },\r\n          }}\r\n          onChange={(value: DateTime | null) => {\r\n            if (value) {\r\n              ref.current.firstPaymentDate = value.toISO()!;\r\n            }\r\n          }}\r\n        />\r\n        <TextField\r\n          error={!!error.principal}\r\n          defaultValue={loan?.principal}\r\n          onChange={(event) => {\r\n            ref.current.principal = +event.target.value;\r\n          }}\r\n          variant=\"outlined\"\r\n          label=\"Principal\"\r\n          type=\"number\"\r\n        />\r\n        <TextField\r\n          error={!!error.ratePct}\r\n          defaultValue={loan?.ratePct}\r\n          onChange={(event) => {\r\n            ref.current.ratePct = convertPct(+event.target.value);\r\n          }}\r\n          variant=\"outlined\"\r\n          label=\"Rate\"\r\n          type=\"number\"\r\n        />\r\n        <TextField\r\n          error={!!error.paymentsPerYear}\r\n          defaultValue={loan?.paymentsPerYear}\r\n          onChange={(event) => {\r\n            ref.current.paymentsPerYear = +event.target.value;\r\n          }}\r\n          variant=\"outlined\"\r\n          label=\"Payments Per Year\"\r\n          type=\"number\"\r\n        />\r\n        <TextField\r\n          defaultValue={loan?.payment}\r\n          error={!!error.payment}\r\n          onChange={(event) => {\r\n            ref.current.payment = +event.target.value;\r\n          }}\r\n          variant=\"outlined\"\r\n          label=\"Payment\"\r\n          type=\"number\"\r\n        />\r\n        <TextField\r\n          defaultValue={loan?.ownershipPct}\r\n          error={!!error.ownershipPct}\r\n          onChange={(event) => {\r\n            ref.current.ownershipPct = convertPct(+event.target.value);\r\n          }}\r\n          variant=\"outlined\"\r\n          label=\"Ownership (%)\"\r\n          type=\"number\"\r\n        />\r\n        <Button\r\n          onClick={() => {\r\n            const parsed = validator.safeParse(ref.current);\r\n            if (parsed.success) {\r\n              setError({});\r\n              store.setState((prev) => {\r\n                return create(prev, (next) => {\r\n                  (next.wealth[accountName] as Mortgage).loan = parsed.data;\r\n                });\r\n              });\r\n            } else {\r\n              const issues = groupBy(parsed.error.issues, (x) =>\r\n                x.path.join(\"\")\r\n              );\r\n              setError(issues);\r\n            }\r\n          }}\r\n        >\r\n          Set Loan\r\n        </Button>\r\n      </Stack>\r\n    </Paper>\r\n  );\r\n};\r\n","import { Button, Paper, TextField } from \"@mui/material\";\r\nimport { Stack } from \"@mui/system\";\r\nimport { DatePicker } from \"@mui/x-date-pickers\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useRef } from \"react\";\r\nimport { store } from \"shared/store\";\r\nimport { create } from \"mutative\";\r\nimport { v4 as uuid } from \"uuid\";\r\n\r\nexport const AddEntry = (props: { accountName: string }) => {\r\n  const { accountName } = props;\r\n  const ref = useRef<{ date?: DateTime; value?: number }>({\r\n    date: DateTime.local(),\r\n    value: 0,\r\n  });\r\n  const onAddEntry = () => {\r\n    const { date, value } = ref.current;\r\n    if (!date || !value) {\r\n      return;\r\n    }\r\n    store.setState((prev) => {\r\n      return create(prev, (next) => {\r\n        next.wealth[accountName].data.push({\r\n          date: date.toISO()!,\r\n          value,\r\n          id: uuid(),\r\n        });\r\n      });\r\n    });\r\n  };\r\n  return (\r\n    <Paper elevation={3} sx={{ padding: 2 }}>\r\n      <Stack spacing={1}>\r\n        <DatePicker\r\n          defaultValue={DateTime.local()}\r\n          onChange={(date: DateTime | null) => {\r\n            if (date) {\r\n              ref.current.date = date;\r\n            }\r\n          }}\r\n        />\r\n        <TextField\r\n          label=\"Home value\"\r\n          type=\"numeric\"\r\n          onChange={(event) => {\r\n            ref.current.value = +event.target.value;\r\n          }}\r\n        />\r\n        <Button onClick={onAddEntry}>Add Home Value</Button>\r\n      </Stack>\r\n    </Paper>\r\n  );\r\n};\r\n","import Grid from \"@mui/system/Unstable_Grid\";\r\nimport { store } from \"shared/store\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { useMemo } from \"react\";\r\nimport {\r\n  createAccountColumnConfig,\r\n  mortgageColumnConfig,\r\n} from \"./column-config\";\r\nimport { AddLoan } from \"./add-loan\";\r\nimport { AddEntry } from \"./add-entry\";\r\nimport { AgGrid } from \"shared/components/ag-grid\";\r\nimport { Mortgage } from \"shared/models/mortgage\";\r\nimport { getGraphDates } from \"shared/utility/graph-helpers\";\r\nimport { calcLoanBalance } from \"shared/utility/mortgage-calc\";\r\nimport { DeleteAccount } from \"../components/delete-account\";\r\nimport { RenameAccount } from \"../components/update-account\";\r\nimport { Stack } from \"@mui/system\";\r\n\r\nexport const MortgageTab = (props: { accountName: string }) => {\r\n  const { accountName } = props;\r\n\r\n  const account = useStore(\r\n    store,\r\n    (state) => state.wealth[accountName]\r\n  ) as Mortgage;\r\n\r\n  const allAccounts = useStore(store, (x) => x.wealth);\r\n\r\n  const accountColumnConfig = useMemo(() => {\r\n    return createAccountColumnConfig(accountName);\r\n  }, [accountName]);\r\n\r\n  const mortgageData = useMemo(() => {\r\n    if (!account?.loan) {\r\n      return [];\r\n    }\r\n    return getGraphDates(Object.values(allAccounts)).map((date) => ({\r\n      date,\r\n      balance: calcLoanBalance(date, account.loan!),\r\n    }));\r\n  }, [account.loan, allAccounts]);\r\n\r\n  return (\r\n    <Grid container height=\"100%\" width={\"100%\"} padding={1} spacing={2}>\r\n      <Grid xs={3}>\r\n        <AgGrid\r\n          reactiveCustomComponents\r\n          rowData={account?.data ?? []}\r\n          columnDefs={accountColumnConfig}\r\n          id={account + \"-history\"}\r\n        />\r\n      </Grid>\r\n      <Grid xs={3}>\r\n        <AgGrid\r\n          rowData={mortgageData}\r\n          columnDefs={mortgageColumnConfig}\r\n          id={account + \"-history\"}\r\n        />\r\n      </Grid>\r\n      <Grid xs={6}>\r\n        <div>\r\n          <Grid container spacing={2}>\r\n            <Grid xs={3}>\r\n              <AddLoan accountName={accountName} />\r\n            </Grid>\r\n            <Grid xs={3}>\r\n              <AddEntry accountName={accountName} />\r\n            </Grid>\r\n            <Grid xs={3}></Grid>\r\n            <Grid xs={3}>\r\n              <Stack spacing={2}>\r\n                <DeleteAccount accountName={accountName} />\r\n                <RenameAccount accountName={accountName} />\r\n              </Stack>\r\n            </Grid>\r\n          </Grid>\r\n        </div>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","import { Box, Tab, Tabs } from \"@mui/material\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { store } from \"shared/store\";\r\nimport { NewAccount } from \"../new-account\";\r\nimport { AccountTab } from \"../tab-types/account/account\";\r\nimport { MortgageTab } from \"../tab-types/mortgage\";\r\n\r\nexport const AccountTabs = () => {\r\n  const accounts = useStore(store, (x) => x.wealth);\r\n  const firstAccount = Object.keys(accounts)?.[0] ?? \"\";\r\n  const [account, setAccount] = useState<string>(firstAccount);\r\n\r\n  useEffect(() => {\r\n    if (!accounts[account]) {\r\n      setAccount(Object.keys(accounts)?.[0] ?? \"\");\r\n    }\r\n  }, [account, accounts]);\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection={\"column\"} width=\"100%\" height=\"100%\">\r\n      <Box display={\"flex\"} flex={\"0 1 auto\"}>\r\n        <Tabs\r\n          value={account}\r\n          defaultValue={firstAccount}\r\n          onChange={(_, value) => {\r\n            setAccount(value as string);\r\n          }}\r\n        >\r\n          {Object.keys(accounts).map((account) => {\r\n            return <Tab key={account} value={account} label={account} />;\r\n          })}\r\n          <Tab component={NewAccount} />\r\n        </Tabs>\r\n      </Box>\r\n      <Box flex={\"1 1 auto\"}>\r\n        {accounts[account]?.type === \"account\" && (\r\n          <AccountTab accountName={account} />\r\n        )}\r\n        {accounts[account]?.type === \"mortgage\" && (\r\n          <MortgageTab accountName={account} />\r\n        )}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import Grid from \"@mui/system/Unstable_Grid\";\r\nimport { WealthChart } from \"./components/wealth-chart\";\r\nimport { AccountTabs } from \"./components/account-tabs\";\r\n\r\nexport const NetWealth = () => {\r\n  return (\r\n    <Grid container height={\"100%\"} width=\"100%\">\r\n      <Grid xs={12} height=\"50%\">\r\n        <WealthChart />\r\n      </Grid>\r\n      <Grid xs={12} height=\"50%\">\r\n        <AccountTabs />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","export interface Outcome {\r\n  min: number;\r\n  max: number;\r\n  avg: number;\r\n  actual?: number;\r\n}\r\n\r\nexport interface BonusOutcomes {\r\n  percent: Outcome;\r\n  cash: Outcome;\r\n}\r\n\r\nexport const minMaxAvg = (values: number[]): Outcome => {\r\n  if (values.length === 0) {\r\n    return { min: 0, max: 0, avg: 0 };\r\n  }\r\n  return values.reduce(\r\n    (acc, curr, index, arr) => {\r\n      const { min, max, avg } = acc;\r\n      return {\r\n        min: Math.min(curr, min),\r\n        max: Math.max(curr, max),\r\n        avg: index === arr.length - 1 ? (avg + curr) / arr.length : avg + curr,\r\n      };\r\n    },\r\n    { min: Infinity, max: 0, avg: 0 }\r\n  );\r\n};\r\n\r\nexport const outcomeFromSingle = (value: number): Outcome => {\r\n  return { min: value, max: value, avg: value, actual: value };\r\n};\r\n\r\nexport const scaleOutcome = (outcome: Outcome, value: number): Outcome => {\r\n  return {\r\n    min: outcome.min * value,\r\n    max: outcome.max * value,\r\n    avg: outcome.avg * value,\r\n    actual: outcome.actual ? outcome.actual * value : undefined,\r\n  };\r\n};\r\nexport const AddConstantOutcome = (\r\n  outcome: Outcome,\r\n  value: number\r\n): Outcome => {\r\n  return {\r\n    min: outcome.min + value,\r\n    max: outcome.max + value,\r\n    avg: outcome.avg + value,\r\n    actual: outcome.actual ? outcome.actual + value : undefined,\r\n  };\r\n};\r\n\r\nexport const MultiplyOutcome = (\r\n  outcomeA: Outcome,\r\n  outcomeB: Outcome\r\n): Outcome => {\r\n  return {\r\n    min: outcomeA.min * outcomeB.min,\r\n    max: outcomeA.max * outcomeB.max,\r\n    avg: outcomeA.avg * outcomeB.avg,\r\n    actual:\r\n      outcomeA.actual != undefined && outcomeB.actual != undefined\r\n        ? outcomeA.actual * outcomeB.avg\r\n        : undefined,\r\n  };\r\n};\r\n\r\nexport const AddOutcome = (...outcomes: Outcome[]): Outcome => {\r\n  const everyActualDefined = outcomes.every((x) => x.actual != undefined);\r\n  return outcomes.reduce(\r\n    (acc, curr) => {\r\n      return {\r\n        min: acc.min + curr.min,\r\n        avg: acc.avg + curr.avg,\r\n        max: acc.max + curr.max,\r\n        actual: everyActualDefined\r\n          ? (acc.actual ?? 0) + (curr.actual ?? 0)\r\n          : undefined,\r\n      };\r\n    },\r\n    { min: 0, max: 0, avg: 0, actual: undefined }\r\n  );\r\n};\r\n","import { Box } from \"@mui/material\";\r\nimport { ReactNode } from \"react\";\r\n\r\ninterface CellProps {\r\n  children?: ReactNode;\r\n  secondaryValue?: ReactNode;\r\n  title: string;\r\n}\r\n\r\nexport const Value = (props: CellProps) => {\r\n  const { children, secondaryValue, title } = props;\r\n  return (\r\n    <Box\r\n      sx={{\r\n        display: \"flex\",\r\n        minWidth: 106,\r\n        height: 64,\r\n        padding: \"0px 8px\",\r\n        flexDirection: \"column\",\r\n        justifyContent: \"center\",\r\n        alignItems: \"flex-start\",\r\n        gap: 0.5,\r\n        flexShrink: 0,\r\n      }}\r\n    >\r\n      <Box display={\"flex\"} alignItems={\"center\"} gap={0.5}>\r\n        <Box fontSize={18} fontWeight={700} lineHeight={\"20px\"}>\r\n          {children ? children : \"??\"}\r\n        </Box>\r\n        {!!secondaryValue && (\r\n          <Box\r\n            alignSelf={\"flex-end\"}\r\n            fontSize={12}\r\n            fontWeight={500}\r\n            lineHeight={\"16px\"}\r\n            textTransform={\"uppercase\"}\r\n            color={\"#888\"}\r\n          >\r\n            {secondaryValue}\r\n          </Box>\r\n        )}\r\n      </Box>\r\n      <Box\r\n        fontSize={12}\r\n        fontWeight={500}\r\n        lineHeight={\"16px\"}\r\n        textTransform={\"uppercase\"}\r\n      >\r\n        {title}\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { formatCashShort } from \"shared/utility/format-cash\";\r\n\r\ninterface CashProps {\r\n  value?: number;\r\n  fallback?: number;\r\n}\r\nexport const Cash = ({ value, fallback }: CashProps) => {\r\n  return value ? formatCashShort(value) : fallback;\r\n};\r\n","import { Box } from \"@mui/material\";\r\nimport { DateTime } from \"luxon\";\r\nimport { ReactNode, useMemo } from \"react\";\r\n\r\ninterface DurationProps {\r\n  dateTime: DateTime;\r\n  children?: ReactNode;\r\n}\r\nexport const Duration = ({ dateTime, children }: DurationProps) => {\r\n  const countDownStr = useMemo(\r\n    () => dateTime.diffNow([\"months\", \"days\", \"hours\"]).toFormat(\"d'd'\"),\r\n    [dateTime]\r\n  );\r\n\r\n  const countDownColor = useMemo(() => {\r\n    const days = dateTime.diffNow(\"days\").days;\r\n    if (days < 30) {\r\n      return \"green\";\r\n    } else if (days < 60) {\r\n      return \"yellow\";\r\n    }\r\n    return \"red\";\r\n  }, [dateTime]);\r\n\r\n  return dateTime > DateTime.local() ? (\r\n    <Box color={countDownColor}>{countDownStr}</Box>\r\n  ) : (\r\n    children\r\n  );\r\n};\r\n","export const formatPercent = new Intl.NumberFormat(\"en-us\", {\r\n  style: \"percent\",\r\n  maximumFractionDigits: 1,\r\n}).format;\r\n","import { formatPercent } from \"shared/utility/format-percent\";\r\n\r\ninterface PercentProps {\r\n  value: number;\r\n}\r\nexport const Percent = ({ value }: PercentProps) => {\r\n  return formatPercent(value);\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { ReactNode } from \"react\";\r\n\r\ninterface UntilProps {\r\n  dateTime: DateTime;\r\n  children: ReactNode;\r\n}\r\n\r\nexport const Until = (props: UntilProps) => {\r\n  const { dateTime, children } = props;\r\n  return DateTime.local() < dateTime && children;\r\n};\r\n","import { Box, Divider, Stack, Typography } from \"@mui/material\";\r\nimport { BonusOutcomes } from \"shared/utility/min-max-avg\";\r\nimport { Value } from \"./value\";\r\nimport { DateTime } from \"luxon\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { Duration } from \"shared/components/formatters/duration\";\r\nimport { Percent } from \"shared/components/formatters/percent\";\r\nimport { Until } from \"shared/components/formatters/until\";\r\n\r\nexport const BonusOutcome = (props: {\r\n  title: string;\r\n  outcome: BonusOutcomes;\r\n  payDate: DateTime;\r\n}) => {\r\n  const { outcome, title, payDate } = props;\r\n\r\n  return (\r\n    <Box sx={{ border: \"1px solid rgba(255,255,255,0.1)\", borderRadius: 2 }}>\r\n      <Typography\r\n        sx={{ paddingBottom: 1, paddingLeft: 2, paddingTop: 1 }}\r\n        variant=\"h5\"\r\n      >\r\n        {title}\r\n      </Typography>\r\n      <Divider />\r\n      <Stack padding={1} direction={\"row\"} spacing={0.5}>\r\n        <Value\r\n          secondaryValue={<Percent value={outcome.percent.min} />}\r\n          title={\"min\"}\r\n        >\r\n          <Cash value={outcome.cash.min} fallback={0} />\r\n        </Value>\r\n        <Value\r\n          secondaryValue={<Percent value={outcome.percent.avg} />}\r\n          title={\"avg\"}\r\n        >\r\n          <Cash value={outcome.cash.avg} fallback={0} />\r\n        </Value>\r\n        <Value\r\n          secondaryValue={<Percent value={outcome.percent.max} />}\r\n          title={\"max\"}\r\n        >\r\n          <Cash value={outcome.cash.max} fallback={0} />\r\n        </Value>\r\n        <Value\r\n          title={\"Actual\"}\r\n          secondaryValue={\r\n            <Until dateTime={payDate}>\r\n              <Cash value={outcome.cash.actual} />\r\n            </Until>\r\n          }\r\n        >\r\n          <Duration dateTime={payDate}>\r\n            <Cash value={outcome.cash.actual} />\r\n          </Duration>\r\n        </Value>\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n","import DeleteForeverIcon from \"@mui/icons-material/DeleteForever\";\r\nimport { Button, Tooltip } from \"@mui/material\";\r\nimport { ColDef, ICellRendererParams } from \"ag-grid-community\";\r\nimport { CustomCellRendererProps } from \"ag-grid-react\";\r\nimport { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { AccountData } from \"shared/models/account-data\";\r\nimport { TimeSeries } from \"shared/models/projected-wealth\";\r\nimport { store } from \"shared/store\";\r\nimport { formatCash } from \"shared/utility/format-cash\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\nimport UpdateIcon from \"@mui/icons-material/Update\";\r\nimport { Stack } from \"@mui/system\";\r\n\r\nexport const createAccountColumnConfig = (\r\n  accountName: TimeSeries,\r\n  variant: \"number\" | \"cash\" | \"percent\"\r\n): ColDef<AccountData>[] => [\r\n  {\r\n    headerName: \"Date\",\r\n    sort: \"desc\",\r\n    valueFormatter: (x) => x.value?.toFormat(shortDate),\r\n    valueGetter: (x) => x.data && DateTime.fromISO(x.data.date),\r\n    cellRenderer: (x: ICellRendererParams<unknown, DateTime>) => {\r\n      return (\r\n        <Stack direction={\"row\"} alignItems={\"center\"}>\r\n          {x.valueFormatted}&nbsp;\r\n          {x.value && x.value > DateTime.local() && (\r\n            <Tooltip title=\"Future Event\">\r\n              <UpdateIcon htmlColor=\"yellow\" />\r\n            </Tooltip>\r\n          )}\r\n        </Stack>\r\n      );\r\n    },\r\n  },\r\n  {\r\n    headerName: \"Value\",\r\n    valueGetter: (x) => x.data?.value,\r\n    valueFormatter: (x) =>\r\n      variant === \"number\"\r\n        ? x.value\r\n        : variant === \"cash\"\r\n        ? formatCash(x.value)\r\n        : (x.value * 100).toFixed(2) + \"%\",\r\n    type: \"numericColumn\",\r\n    editable: true,\r\n    cellEditor: \"agNumberCellEditor\",\r\n    valueSetter: (x) => {\r\n      store.setState((prev) => {\r\n        const next = create(prev, (next) => {\r\n          const account = next.projectedIncome.timeSeries[accountName];\r\n          const idx = account.findIndex(({ id }) => id === x.data.id);\r\n          account[idx].value = +x.newValue;\r\n        });\r\n        return next;\r\n      });\r\n      return true;\r\n    },\r\n  },\r\n  {\r\n    headerName: \"Actions\",\r\n    cellRenderer: (props: CustomCellRendererProps<AccountData>) => {\r\n      return (\r\n        <Button\r\n          onClick={() => {\r\n            store.setState((prev) => {\r\n              return create(prev, (next) => {\r\n                const idxToRemove = next.projectedIncome.timeSeries[\r\n                  accountName\r\n                ].findIndex((x) => x.id === props.data?.id);\r\n                next.projectedIncome.timeSeries[accountName].splice(\r\n                  idxToRemove,\r\n                  1\r\n                );\r\n              });\r\n            });\r\n          }}\r\n          color=\"error\"\r\n        >\r\n          <DeleteForeverIcon />\r\n        </Button>\r\n      );\r\n    },\r\n  },\r\n];\r\n","import {\r\n  Box,\r\n  Button,\r\n  InputAdornment,\r\n  Paper,\r\n  Stack,\r\n  TextField,\r\n  Typography,\r\n} from \"@mui/material\";\r\nimport { DatePicker } from \"@mui/x-date-pickers/DatePicker\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { create } from \"mutative\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { AgGrid } from \"shared/components/ag-grid\";\r\nimport { TimeSeries } from \"shared/models/projected-wealth\";\r\nimport { store } from \"shared/store\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\nimport { sortByDate } from \"shared/utility/sort-by-date\";\r\nimport { v4 as uuid } from \"uuid\";\r\nimport { createAccountColumnConfig } from \"./column-config\";\r\n\r\nexport const DataEntry = (props: {\r\n  accountName: TimeSeries;\r\n  defaultDate: DateTime;\r\n  variant?: \"number\" | \"cash\" | \"percent\";\r\n}) => {\r\n  const { accountName, defaultDate, variant = \"number\" } = props;\r\n  const account = useStore(\r\n    store,\r\n    (state) => state.projectedIncome.timeSeries[accountName]\r\n  );\r\n\r\n  const [date, setDate] = useState(defaultDate);\r\n  const [amount, setAmount] = useState<number | null>(null);\r\n\r\n  const hasSameDate = useMemo(() => {\r\n    return !!account?.find((x) =>\r\n      date.hasSame(DateTime.fromISO(x.date), \"day\")\r\n    );\r\n  }, [account, date]);\r\n\r\n  const onAddEntry = () => {\r\n    amount != null &&\r\n      store.setState((prev) => {\r\n        return create(prev, (next) => {\r\n          next.projectedIncome.timeSeries[accountName] =\r\n            next.projectedIncome.timeSeries[accountName]\r\n              .concat({\r\n                date: date.toString(),\r\n                value: variant === \"percent\" ? amount / 100 : amount,\r\n                id: uuid(),\r\n              })\r\n              .sort(sortByDate((x) => DateTime.fromISO(x.date), \"asc\"));\r\n        });\r\n      });\r\n  };\r\n\r\n  const accountColumnConfig = useMemo(() => {\r\n    return createAccountColumnConfig(accountName, variant);\r\n  }, [accountName, variant]);\r\n\r\n  return (\r\n    <Box display={\"flex\"} flexDirection={\"column\"} height=\"100%\">\r\n      <Stack spacing={2} flex=\"0 1 auto\">\r\n        <DatePicker\r\n          format={shortDate}\r\n          sx={{ color: \"white\" }}\r\n          label=\"Date\"\r\n          value={date}\r\n          onChange={(value) => {\r\n            console.log(value);\r\n            value && setDate(value);\r\n          }}\r\n        />\r\n        <TextField\r\n          label=\"amount\"\r\n          value={amount ?? \"\"}\r\n          type=\"number\"\r\n          onChange={(event) =>\r\n            event.target.value === \"\"\r\n              ? setAmount(null)\r\n              : setAmount(+event.target.value)\r\n          }\r\n          InputProps={{\r\n            startAdornment: variant !== \"number\" && (\r\n              <InputAdornment position=\"start\">\r\n                {variant === \"cash\" ? \"$\" : \"%\"}\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n        <Button\r\n          disabled={amount === null || !date || hasSameDate}\r\n          onClick={onAddEntry}\r\n        >\r\n          Add Entry\r\n        </Button>\r\n      </Stack>\r\n      <Box sx={{ paddingTop: 2, flex: \"1 1 auto\" }}>\r\n        <AgGrid\r\n          reactiveCustomComponents\r\n          rowData={account ?? []}\r\n          columnDefs={accountColumnConfig}\r\n          id={account + \"-history\"}\r\n          autoSizeStrategy={{\r\n            type: \"fitGridWidth\",\r\n          }}\r\n          stopEditingWhenCellsLoseFocus\r\n        />\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport interface LayoutProps {\r\n  title: string;\r\n  accountName: TimeSeries;\r\n  defaultDate: DateTime;\r\n  variant: \"percent\" | \"number\" | \"cash\";\r\n}\r\n\r\nexport const Layout = (props: LayoutProps) => {\r\n  const { title, accountName, defaultDate, variant } = props;\r\n  return (\r\n    <Paper sx={{ padding: 2, height: \"100%\", width: 450, flexShrink: 0 }}>\r\n      <Box display=\"flex\" flexDirection=\"column\" height=\"100%\">\r\n        <Box flex=\"0 1 auto\" marginBottom={2}>\r\n          <Typography sx={{ marginBottom: 2 }} variant=\"h5\">\r\n            {title}\r\n          </Typography>\r\n        </Box>\r\n        <Box flex=\"1 1 auto\">\r\n          <DataEntry\r\n            variant={variant}\r\n            accountName={accountName}\r\n            defaultDate={defaultDate}\r\n          />\r\n        </Box>\r\n      </Box>\r\n    </Paper>\r\n  );\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\r\nimport { useMemo } from \"react\";\r\nimport { store } from \"shared/store\";\r\n\r\nexport const useCommonMerit = () => {\r\n  const meritIncreasePcts = useStore(\r\n    store,\r\n    (x) => x.projectedIncome.timeSeries.meritIncreasePct\r\n  );\r\n\r\n  return useMemo(() => {\r\n    return Object.entries(\r\n      Object.groupBy(\r\n        meritIncreasePcts.map((x) => x.value),\r\n        (x) => x\r\n      )\r\n    )\r\n      .map(([key, values]) => [+key, values?.length ?? 0])\r\n      .sort(([, a], [, b]) => {\r\n        return b - a;\r\n      })[0][0];\r\n  }, [meritIncreasePcts]);\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { AccountData } from \"shared/models/account-data\";\r\nimport { store } from \"shared/store\";\r\nimport { findSameYear } from \"shared/utility/graph-helpers\";\r\nimport { sortByDate } from \"shared/utility/sort-by-date\";\r\nimport { useCommonMerit } from \"./use-common-merit\";\r\n\r\nconst valueByDateRange = (account: AccountData[]) => {\r\n  return account\r\n    .toSorted(sortByDate((x) => DateTime.fromISO(x.date), \"asc\"))\r\n    .map((x, index, array) => {\r\n      const next = array[index + 1];\r\n      return [\r\n        DateTime.fromISO(x.date),\r\n        (next?.date\r\n          ? DateTime.fromISO(next?.date).startOf(\"day\")\r\n          : DateTime.fromISO(x.date).startOf(\"day\").plus({ years: 1 })\r\n        ).minus({ days: 1 }),\r\n        x.value,\r\n      ] as const;\r\n    });\r\n};\r\n\r\nexport const useProjectedPay = () => {\r\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\r\n  const baseIncome = timeSeries.paycheck;\r\n  const lastMerit = useCommonMerit();\r\n\r\n  return useMemo(() => {\r\n    const payPerPeriod = valueByDateRange(baseIncome);\r\n    const mostRecentPay =\r\n      payPerPeriod.length > 0\r\n        ? payPerPeriod[payPerPeriod.length - 1]\r\n        : ([DateTime.local(), DateTime.local().plus({ years: 1 }), 1] as const);\r\n\r\n    const projectedPayPerPeriod: [DateTime, DateTime, number][] =\r\n      Array(11).fill(mostRecentPay);\r\n    for (let i = 0; i < projectedPayPerPeriod.length; i++) {\r\n      const [start, end] = projectedPayPerPeriod[i];\r\n      const [, , value] = projectedPayPerPeriod[i - 1] ?? mostRecentPay;\r\n      const startDate = start.plus({ years: i + 1 });\r\n      const multiplier =\r\n        1 +\r\n        lastMerit +\r\n        (findSameYear(startDate, timeSeries.equityPct)?.value ?? 0);\r\n      projectedPayPerPeriod[i] = [\r\n        startDate,\r\n        end.plus({ years: i + 1 }),\r\n        value * multiplier,\r\n      ] as const;\r\n    }\r\n\r\n    return [...payPerPeriod, ...projectedPayPerPeriod];\r\n  }, [baseIncome, lastMerit, timeSeries.equityPct]);\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { useProjectedPay } from \"./use-projected-pay\";\r\n\r\nexport const useBaseIncome = (startDate: DateTime, endDate: DateTime) => {\r\n  const pay = useProjectedPay();\r\n\r\n  return useMemo(() => {\r\n    const combinedPayPerPeriod = pay.filter(([start, end]) => {\r\n      const rangeOutside = startDate <= start && endDate >= end;\r\n      const rangeInside = startDate >= start && end >= endDate;\r\n      const overlapEnd = startDate <= start && endDate < end && endDate > start;\r\n      const overlapStart =\r\n        startDate <= end && startDate >= start && endDate > end;\r\n      return rangeInside || rangeOutside || overlapEnd || overlapStart;\r\n    });\r\n\r\n    const x = combinedPayPerPeriod.map(([start, end, value]) => {\r\n      return [\r\n        DateTime.max(start, startDate),\r\n        DateTime.min(end, endDate),\r\n        value,\r\n      ] as const;\r\n    });\r\n\r\n    const incomePerPeriod = x.map(([start, end, value]) => {\r\n      return (end.diff(start, \"weeks\").weeks / 2) * value;\r\n    });\r\n\r\n    const income = Math.round(\r\n      incomePerPeriod.reduce((acc, curr) => acc + curr, 0)\r\n    );\r\n\r\n    return income;\r\n  }, [pay, startDate, endDate]);\r\n};\r\n","import { Box, Divider, Stack, Typography } from \"@mui/material\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { Duration } from \"shared/components/formatters/duration\";\r\nimport { Percent } from \"shared/components/formatters/percent\";\r\nimport { Until } from \"shared/components/formatters/until\";\r\nimport { store } from \"shared/store\";\r\nimport { findSameYear } from \"shared/utility/graph-helpers\";\r\nimport { Value } from \"./value\";\r\nimport { useCommonMerit } from \"../hooks/use-common-merit\";\r\nimport { useProjectedPay } from \"../hooks/use-projected-pay\";\r\nimport { useMemo } from \"react\";\r\nimport { useBaseIncome } from \"../hooks/use-base-income\";\r\n\r\nexport const MeritOutcome = (props: { title: string; payDate: DateTime }) => {\r\n  const { title, payDate } = props;\r\n\r\n  const income = useBaseIncome(\r\n    DateTime.fromObject({ day: 1, month: 1, year: payDate.year }),\r\n    DateTime.fromObject({ day: 1, month: 1, year: payDate.year + 1 })\r\n  );\r\n\r\n  const commonMerit = useCommonMerit();\r\n  const meritPct = useStore(\r\n    store,\r\n    (x) =>\r\n      findSameYear(payDate, x.projectedIncome.timeSeries.meritIncreasePct)\r\n        ?.value ?? commonMerit\r\n  );\r\n  const payChecks = useProjectedPay();\r\n  const payCheck = useMemo(() => {\r\n    return payChecks.find(([start]) => start.year === payDate.year)?.[2] ?? 0;\r\n  }, [payChecks, payDate.year]);\r\n\r\n  const equityPct = useStore(\r\n    store,\r\n    (x) =>\r\n      payDate && findSameYear(payDate, x.projectedIncome.timeSeries.equityPct)\r\n  );\r\n\r\n  const totalAdjust = meritPct + (equityPct?.value ?? 0);\r\n  const multiplier = 1 + (DateTime.local() > payDate ? 0 : totalAdjust);\r\n  return (\r\n    <Box\r\n      sx={{\r\n        border: \"1px solid rgba(255,255,255,0.1)\",\r\n        borderRadius: 2,\r\n      }}\r\n    >\r\n      <Typography\r\n        sx={{ paddingBottom: 1, paddingLeft: 2, paddingTop: 1 }}\r\n        variant=\"h5\"\r\n      >\r\n        {title}\r\n      </Typography>\r\n      <Divider />\r\n\r\n      <Stack padding={1} direction={\"row\"} spacing={0.5}>\r\n        <Value\r\n          title={\"Paycheck\"}\r\n          secondaryValue={<Percent value={totalAdjust} />}\r\n        >\r\n          <Cash value={payCheck * multiplier} />\r\n        </Value>\r\n        <Value\r\n          title={\"Base Pay\"}\r\n          secondaryValue={<Percent value={totalAdjust} />}\r\n        >\r\n          <Cash value={income ?? 0} />\r\n        </Value>\r\n        <Value\r\n          title={\"Actual\"}\r\n          secondaryValue={\r\n            <Until dateTime={payDate}>\r\n              <Percent value={totalAdjust} />\r\n            </Until>\r\n          }\r\n        >\r\n          <Duration dateTime={payDate}>\r\n            <Percent value={totalAdjust} />\r\n          </Duration>\r\n        </Value>\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n","import { Box, Divider, Stack, Typography } from \"@mui/material\";\r\nimport { Outcome as TOutcome } from \"shared/utility/min-max-avg\";\r\nimport { Value } from \"./value\";\r\nimport { DateTime } from \"luxon\";\r\nimport { Cash } from \"shared/components/formatters/cash\";\r\nimport { Duration } from \"shared/components/formatters/duration\";\r\nimport { Until } from \"shared/components/formatters/until\";\r\nimport { ReactNode } from \"react\";\r\n\r\nexport const Outcome = (props: {\r\n  title: ReactNode;\r\n  outcome: TOutcome;\r\n  payDate?: DateTime;\r\n}) => {\r\n  const { outcome, title, payDate } = props;\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        border: \"1px solid rgba(255,255,255,0.1)\",\r\n        borderRadius: 2,\r\n      }}\r\n    >\r\n      <Typography\r\n        sx={{ paddingBottom: 1, paddingLeft: 2, paddingTop: 1 }}\r\n        variant=\"h5\"\r\n      >\r\n        {title}\r\n      </Typography>\r\n      <Divider />\r\n\r\n      <Stack padding={1} direction={\"row\"} spacing={0.5}>\r\n        <Value title={\"min\"}>\r\n          <Cash value={outcome.min} fallback={0} />\r\n        </Value>\r\n        <Value title={\"avg\"}>\r\n          <Cash value={outcome.avg} fallback={0} />\r\n        </Value>\r\n        <Value title={\"max\"}>\r\n          <Cash value={outcome.max} fallback={0} />\r\n        </Value>\r\n        {payDate && (\r\n          <Value\r\n            title={\"Actual\"}\r\n            secondaryValue={\r\n              <Until dateTime={payDate}>\r\n                <Cash value={outcome.actual} />\r\n              </Until>\r\n            }\r\n          >\r\n            <Duration dateTime={payDate}>\r\n              <Cash value={outcome.actual} />\r\n            </Duration>\r\n          </Value>\r\n        )}\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { useBaseIncome } from \"./use-base-income\";\r\nimport { store } from \"shared/store\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport {\r\n  BonusOutcomes,\r\n  scaleOutcome,\r\n  minMaxAvg,\r\n} from \"shared/utility/min-max-avg\";\r\nimport { findSameYear } from \"shared/utility/graph-helpers\";\r\n\r\nexport const useAprilBonus = (year: number): BonusOutcomes => {\r\n  const payedOn = useMemo(\r\n    () => DateTime.fromObject({ day: 15, month: 4, year }),\r\n    [year]\r\n  );\r\n  const timeSeries = useStore(store, (x) => x.projectedIncome.timeSeries);\r\n  const income = useBaseIncome(\r\n    DateTime.fromObject({ day: 1, month: 1, year: year - 1 }),\r\n    DateTime.fromObject({ day: 1, month: 1, year })\r\n  );\r\n\r\n  const bonusAmmount = useMemo(() => {\r\n    return findSameYear(payedOn, timeSeries.meritBonus)?.value;\r\n  }, [payedOn, timeSeries.meritBonus]);\r\n\r\n  const bonusPercent = useMemo(() => {\r\n    return findSameYear(payedOn, timeSeries.meritBonusPct)?.value;\r\n  }, [payedOn, timeSeries.meritBonusPct]);\r\n\r\n  return useMemo(() => {\r\n    const meritOutcome = minMaxAvg(\r\n      timeSeries.meritBonusPct\r\n        .filter((x) => DateTime.fromISO(x.date).year <= year)\r\n        .slice(-3)\r\n        .map((x) => x.value)\r\n    );\r\n\r\n    return {\r\n      percent: { ...meritOutcome, actual: bonusPercent },\r\n      cash: {\r\n        ...scaleOutcome(meritOutcome, income),\r\n        actual: bonusAmmount,\r\n      },\r\n    };\r\n  }, [bonusAmmount, bonusPercent, income, timeSeries.meritBonusPct, year]);\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { useBaseIncome } from \"./use-base-income\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { store } from \"shared/store\";\r\nimport { findSameYear } from \"shared/utility/graph-helpers\";\r\nimport {\r\n  BonusOutcomes,\r\n  scaleOutcome,\r\n  minMaxAvg,\r\n} from \"shared/utility/min-max-avg\";\r\n\r\nexport const useJuneBonus = (year: number): BonusOutcomes => {\r\n  const payedOn = useMemo(\r\n    () => DateTime.fromObject({ day: 15, month: 6, year }),\r\n    [year]\r\n  );\r\n  const timeseries = useStore(store, (x) => x.projectedIncome.timeSeries);\r\n  const income = useBaseIncome(\r\n    DateTime.fromObject({ day: 1, month: 4, year: year - 1 }),\r\n    DateTime.fromObject({ day: 31, month: 3, year })\r\n  );\r\n\r\n  return useMemo(() => {\r\n    const mostRecentBonus = findSameYear(payedOn, timeseries.companyBonus);\r\n    const mostRecentPercent = findSameYear(payedOn, timeseries.companyBonusPct);\r\n\r\n    const meritFactor = timeseries.meritBonusPct\r\n      .filter((x) => DateTime.fromISO(x.date).year <= year)\r\n      .slice(-3)\r\n      .reduce((acc, curr) => acc + curr.value, 0);\r\n\r\n    const outcomes = minMaxAvg(timeseries.companyBonusPct.map((x) => x.value));\r\n\r\n    const cash = scaleOutcome(outcomes, meritFactor * income);\r\n\r\n    return {\r\n      percent: { ...outcomes, actual: mostRecentPercent?.value },\r\n      cash: { ...cash, actual: mostRecentBonus?.value },\r\n    };\r\n  }, [\r\n    income,\r\n    payedOn,\r\n    timeseries.companyBonus,\r\n    timeseries.companyBonusPct,\r\n    timeseries.meritBonusPct,\r\n    year,\r\n  ]);\r\n};\r\n","import { DateTime } from \"luxon\";\r\nimport { useMemo } from \"react\";\r\nimport { useBaseIncome } from \"./use-base-income\";\r\nimport { useAprilBonus } from \"./use-april-bonus\";\r\nimport { useJuneBonus } from \"./use-june-bonus\";\r\nimport {\r\n  AddOutcome,\r\n  Outcome,\r\n  outcomeFromSingle,\r\n  scaleOutcome,\r\n} from \"shared/utility/min-max-avg\";\r\nimport { useStore } from \"@tanstack/react-store\";\r\nimport { store } from \"shared/store\";\r\nimport { findSameYear } from \"shared/utility/graph-helpers\";\r\n\r\nconst bonusPercent = 0.15;\r\nexport const useJulyBonus = (year: number): Outcome => {\r\n  const payDay = useMemo(\r\n    () => DateTime.fromObject({ day: 15, month: 7, year }),\r\n    [year]\r\n  );\r\n\r\n  const actual = useStore(\r\n    store,\r\n    (x) =>\r\n      findSameYear(payDay, x.projectedIncome.timeSeries.retirementBonus)?.value\r\n  );\r\n\r\n  const income = useBaseIncome(\r\n    DateTime.fromObject({ day: 1, month: 7, year: year - 1 }),\r\n    DateTime.fromObject({ day: 1, month: 7, year })\r\n  );\r\n\r\n  const meritBonus = useAprilBonus(year);\r\n  const juneBonus = useJuneBonus(year);\r\n\r\n  return useMemo(() => {\r\n    const eligbleIncome = outcomeFromSingle(income);\r\n    const outcome = scaleOutcome(\r\n      AddOutcome(eligbleIncome, meritBonus.cash, juneBonus.cash),\r\n      bonusPercent\r\n    );\r\n    return { ...outcome, actual: actual ?? outcome.actual };\r\n  }, [actual, income, juneBonus.cash, meritBonus.cash]);\r\n};\r\n","import { Box, Stack } from \"@mui/system\";\r\nimport { DatePicker } from \"@mui/x-date-pickers\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useMemo, useState } from \"react\";\r\nimport { AddOutcome, outcomeFromSingle } from \"shared/utility/min-max-avg\";\r\nimport { BonusOutcome } from \"./components/bonus-outcome\";\r\nimport { Layout } from \"./components/data-entry/data-entry\";\r\nimport { MeritOutcome } from \"./components/merit-increase\";\r\nimport { Outcome } from \"./components/outcome\";\r\nimport { useAprilBonus } from \"./hooks/use-april-bonus\";\r\nimport { useBaseIncome } from \"./hooks/use-base-income\";\r\nimport { useJulyBonus } from \"./hooks/use-july-bonus\";\r\nimport { useJuneBonus } from \"./hooks/use-june-bonus\";\r\n\r\nexport const ProjectedIncome = () => {\r\n  const [year, setYear] = useState(DateTime.local().year);\r\n\r\n  const income = useBaseIncome(\r\n    DateTime.fromObject({ day: 1, month: 1, year: year }),\r\n    DateTime.fromObject({ day: 1, month: 1, year: year + 1 })\r\n  );\r\n\r\n  const junePayDay = useMemo(\r\n    () => DateTime.fromObject({ day: 15, month: 6, year: year }),\r\n    [year]\r\n  );\r\n\r\n  const meritPayDay = useMemo(\r\n    () => DateTime.fromObject({ day: 15, month: 4, year: year }),\r\n    [year]\r\n  );\r\n\r\n  const meritIncreaseDay = useMemo(\r\n    () => DateTime.fromObject({ day: 1, month: 4, year: year }),\r\n    [year]\r\n  );\r\n\r\n  const julyPayDay = useMemo(\r\n    () => DateTime.fromObject({ day: 15, month: 7, year: year }),\r\n    [year]\r\n  );\r\n\r\n  const meritBonus = useAprilBonus(year);\r\n  const juneBonus = useJuneBonus(year);\r\n  const julyBonus = useJulyBonus(year);\r\n\r\n  const incomeOutcome = useMemo(() => {\r\n    return AddOutcome(\r\n      outcomeFromSingle(income),\r\n      meritBonus.cash,\r\n      juneBonus.cash,\r\n      julyBonus\r\n    );\r\n  }, [income, julyBonus, juneBonus, meritBonus]);\r\n\r\n  return (\r\n    <Box display=\"flex\" flexDirection=\"column\" height=\"100%\" gap={2}>\r\n      <Box flex=\"0 1 auto\">\r\n        <Stack gap={2} direction={\"row\"} overflow={\"auto\"}>\r\n          <Outcome\r\n            title={\r\n              <Box display=\"flex\" alignItems={\"center\"} gap={2} width={\"100%\"}>\r\n                <span>Projected Income</span>\r\n                <DatePicker\r\n                  sx={{ width: 90, marginLeft: \"auto\", marginRight: 2 }}\r\n                  label={\"year\"}\r\n                  views={[\"year\"]}\r\n                  minDate={DateTime.local().plus({ years: -1 })}\r\n                  maxDate={DateTime.local().plus({ years: 10 })}\r\n                  defaultValue={DateTime.local()}\r\n                  slotProps={{\r\n                    textField: {\r\n                      variant: \"standard\",\r\n                      label: \"\",\r\n                    },\r\n                  }}\r\n                  onYearChange={(year) => {\r\n                    setYear(year.year);\r\n                  }}\r\n                />\r\n              </Box>\r\n            }\r\n            outcome={incomeOutcome}\r\n            payDate={junePayDay}\r\n          />\r\n          <MeritOutcome title=\"Merit Increase\" payDate={meritIncreaseDay} />\r\n          <BonusOutcome\r\n            title=\"Merit Bonus\"\r\n            outcome={meritBonus}\r\n            payDate={meritPayDay}\r\n          />\r\n          <BonusOutcome\r\n            title=\"Company Bonus\"\r\n            outcome={juneBonus}\r\n            payDate={junePayDay}\r\n          />\r\n          <Outcome\r\n            title=\"Retirement Bonus\"\r\n            outcome={julyBonus}\r\n            payDate={julyPayDay}\r\n          />\r\n        </Stack>\r\n      </Box>\r\n      <Box flex=\"1 1 auto\">\r\n        <Box overflow={\"auto\"} width={\"100%\"} height={\"100%\"}>\r\n          <Box\r\n            height={\"100%\"}\r\n            display={\"flex\"}\r\n            gap={2}\r\n            flexWrap={\"nowrap\"}\r\n            flexShrink={0}\r\n          >\r\n            <Layout\r\n              accountName=\"paycheck\"\r\n              variant=\"cash\"\r\n              defaultDate={DateTime.fromObject({ day: 1, month: 4 })}\r\n              title=\"Income Per Check ($)\"\r\n            />\r\n            <Layout\r\n              title=\"Merit Increase (%)\"\r\n              accountName=\"meritIncreasePct\"\r\n              variant=\"percent\"\r\n              defaultDate={meritIncreaseDay}\r\n            />\r\n            <Layout\r\n              title=\"Equity Increase (%)\"\r\n              accountName=\"equityPct\"\r\n              variant=\"percent\"\r\n              defaultDate={meritIncreaseDay}\r\n            />\r\n            <Layout\r\n              title=\"Merit Bonus (%)\"\r\n              accountName=\"meritBonusPct\"\r\n              variant=\"percent\"\r\n              defaultDate={meritPayDay}\r\n            />\r\n            <Layout\r\n              title=\"Merit Bonus ($)\"\r\n              accountName=\"meritBonus\"\r\n              variant=\"cash\"\r\n              defaultDate={meritPayDay}\r\n            />\r\n            <Layout\r\n              title=\"Company Bonus Factor (%)\"\r\n              accountName=\"companyBonusPct\"\r\n              defaultDate={junePayDay}\r\n              variant=\"percent\"\r\n            />\r\n            <Layout\r\n              title=\"Company Bonus ($)\"\r\n              accountName=\"companyBonus\"\r\n              defaultDate={junePayDay}\r\n              variant=\"cash\"\r\n            />\r\n            <Layout\r\n              title=\"Retirement Bonus ($)\"\r\n              accountName=\"retirementBonus\"\r\n              defaultDate={julyPayDay}\r\n              variant=\"cash\"\r\n            />\r\n          </Box>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","import { Box, Button, ButtonProps } from \"@mui/material\";\r\nimport { ReactNode, useEffect, useState } from \"react\";\r\n\r\ntype SafetyState = \"inactive\" | \"activating\" | \"active\";\r\n\r\ninterface SafetyButtonProps {\r\n  inactiveLabel: string;\r\n  activatingLabel: string;\r\n  activeLabel: string;\r\n  icon?: ReactNode;\r\n  onConfirm: () => void;\r\n}\r\n\r\nexport const SafetyButton = (\r\n  props: Omit<ButtonProps, \"children\"> & SafetyButtonProps\r\n) => {\r\n  const {\r\n    inactiveLabel,\r\n    activatingLabel,\r\n    activeLabel,\r\n    onConfirm,\r\n    icon,\r\n    variant,\r\n    disabled,\r\n    ...rest\r\n  } = props;\r\n  const [safetyState, setSafetyState] = useState<SafetyState>(\"inactive\");\r\n\r\n  useEffect(() => {\r\n    if (safetyState === \"active\") {\r\n      setTimeout(() => {\r\n        setSafetyState((prev) => {\r\n          return prev === \"active\" ? \"inactive\" : prev;\r\n        });\r\n      }, 2000);\r\n    } else if (safetyState === \"activating\") {\r\n      setTimeout(() => {\r\n        setSafetyState(\"active\");\r\n      }, 2000);\r\n    }\r\n  }, [safetyState]);\r\n\r\n  return (\r\n    <Box\r\n      sx={{\r\n        minWidth: 130,\r\n        padding: safetyState === \"active\" ? \"8px\" : \"unset\",\r\n      }}\r\n    >\r\n      <Button\r\n        {...rest}\r\n        sx={{ height: \"100%\", width: \"100%\" }}\r\n        disabled={disabled || safetyState === \"activating\"}\r\n        variant={safetyState === \"active\" ? \"contained\" : variant}\r\n        size=\"small\"\r\n        onClick={() => {\r\n          safetyState === \"inactive\" && setSafetyState(\"activating\");\r\n          safetyState === \"active\" && onConfirm?.();\r\n        }}\r\n      >\r\n        {icon}\r\n        {safetyState === \"inactive\" && inactiveLabel}\r\n        {safetyState === \"activating\" && activatingLabel}\r\n        {safetyState === \"active\" && activeLabel}\r\n      </Button>\r\n    </Box>\r\n  );\r\n};\r\n","import { useStore } from \"@tanstack/react-store\";\r\nimport { DateTime } from \"luxon\";\r\nimport { useCallback } from \"react\";\r\nimport { store } from \"shared/store\";\r\nimport { shortDate } from \"shared/utility/format-date\";\r\n\r\nexport const useExport = () => {\r\n  const storeData = useStore(store);\r\n  const onExport = useCallback(() => {\r\n    const data = JSON.stringify(storeData, null, 2);\r\n    const link = document.createElement(\"a\");\r\n    link.download = `wealth-tracker-${DateTime.local().toFormat(\r\n      shortDate\r\n    )}.json`;\r\n    const blob = new Blob([data], { type: \"application/json\" });\r\n    link.href = window.URL.createObjectURL(blob);\r\n    link.click();\r\n  }, [storeData]);\r\n\r\n  return onExport;\r\n};\r\n","import { useCallback } from \"react\";\r\nimport { storeValidator } from \"shared/models/store\";\r\nimport { store } from \"shared/store\";\r\n\r\nfunction selectFile(contentType: string) {\r\n  return new Promise<File>((resolve) => {\r\n    const input = document.createElement(\"input\");\r\n    input.type = \"file\";\r\n    input.multiple = false;\r\n    input.accept = contentType;\r\n\r\n    input.onchange = () => {\r\n      const files = Array.from(input.files ?? []);\r\n      resolve(files[0]);\r\n    };\r\n\r\n    input.click();\r\n  });\r\n}\r\n\r\nexport const useImport = () => {\r\n  return useCallback(async () => {\r\n    const file = await selectFile(\"application/json\");\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = (readerEvent) => {\r\n      const content = readerEvent.target?.result?.toString();\r\n      if (content) {\r\n        const data = JSON.parse(window.atob(content.split(\",\")[1]));\r\n        const validation = storeValidator.safeParse(data);\r\n        validation.success && store.setState(() => data);\r\n      }\r\n    };\r\n  }, []);\r\n};\r\n","import DeleteForever from \"@mui/icons-material/DeleteForever\";\nimport { Box, Button, Stack, Tab, Tabs } from \"@mui/material\";\nimport { NetWealth } from \"capabilities/net-wealth\";\nimport { ProjectedIncome } from \"capabilities/projected-income\";\nimport { useState } from \"react\";\nimport { SafetyButton } from \"shared/components/safety-button\";\nimport { useExport } from \"shared/hooks/use-export\";\nimport { useImport } from \"shared/hooks/use-import\";\nimport { getDefaults } from \"shared/models/projected-wealth\";\nimport { store } from \"shared/store\";\n\nexport const App = () => {\n  const [tab, setTab] = useState<string>(\"projected-income\");\n  const onExport = useExport();\n  const onImport = useImport();\n  return (\n    <>\n      <Stack direction=\"row\">\n        <Tabs value={tab} onChange={(_, value) => setTab(value)}>\n          <Tab value=\"wealth\" label=\"Total Wealth\" />\n          <Tab value=\"projected-income\" label=\"Projected Income\" />\n          <Tab disabled value=\"projected-wealth\" label=\"Projected Wealth\" />\n        </Tabs>\n        <Box marginLeft={\"auto\"} gap={2} display={\"flex\"}>\n          <Button onClick={onImport}>Import</Button>\n          <Button onClick={onExport}>Export</Button>\n          <SafetyButton\n            onConfirm={() => {\n              store.setState(() => getDefaults());\n            }}\n            inactiveLabel=\"Reset\"\n            activatingLabel=\"Wait\"\n            activeLabel=\"Confirm\"\n            color=\"error\"\n            icon={<DeleteForever />}\n          />\n        </Box>\n      </Stack>\n      <Box padding={2} height={\"95%\"} width={\"100%\"}>\n        {tab === \"wealth\" && <NetWealth />}\n        {tab === \"projected-income\" && <ProjectedIncome />}\n      </Box>\n    </>\n  );\n};\n","import { CssBaseline, ThemeProvider, createTheme } from \"@mui/material\";\r\nimport { LocalizationProvider } from \"@mui/x-date-pickers\";\r\nimport { AdapterLuxon } from \"@mui/x-date-pickers/AdapterLuxon\";\r\nimport \"ag-grid-community/styles/ag-grid.css\";\r\nimport \"ag-grid-community/styles/ag-theme-quartz.css\";\r\nimport { App } from \"app/app.tsx\";\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom/client\";\r\nimport { ErrorBoundary } from \"react-error-boundary\";\r\nimport \"./index.css\";\r\n\r\nconst darkTheme = createTheme({\r\n  palette: {\r\n    mode: \"dark\",\r\n  },\r\n});\r\n\r\nReactDOM.createRoot(document.getElementById(\"root\")!).render(\r\n  <React.StrictMode>\r\n    <ErrorBoundary\r\n      fallbackRender={(props) => {\r\n        return (\r\n          <>\r\n            <div style={{ backgroundColor: \"#FFF\" }}>{props.error.message}</div>\r\n            <div style={{ backgroundColor: \"#FFF\" }}>\r\n              {props.error.stackTrace}\r\n            </div>\r\n          </>\r\n        );\r\n      }}\r\n    >\r\n      <LocalizationProvider dateAdapter={AdapterLuxon}>\r\n        <ThemeProvider theme={darkTheme}>\r\n          <CssBaseline />\r\n          <App />\r\n        </ThemeProvider>\r\n      </LocalizationProvider>\r\n    </ErrorBoundary>\r\n  </React.StrictMode>\r\n);\r\n\r\n"],"names":["accountDataValidator","z","object","date","string","value","number","id","accountValidator","type","literal","data","array","loanValidator","principal","ratePct","paymentsPerYear","payment","firstPaymentDate","ownershipPct","mortgageValidator","loan","optional","wealth","record","union","projectedWealth","timeSeries","paycheck","retirementRate","savingsRate","meritBonusPct","companyBonusPct","meritBonus","companyBonus","retirementBonus","equityPct","meritIncreasePct","getDefaults","projectedIncome","storeValidator","createStore","key","validator","defaultValue","localData","localStorage","getItem","JSON","parse","safeParse","success","log","error","next","merge","setItem","stringify","store","CreateStore","subscribe","current","state","formatCashShort","Intl","NumberFormat","style","currency","notation","maximumFractionDigits","format","formatCash","calcLoanBalance","pricipal","rate","monthlyPayment","anualizedRate","periods","diff","DateTime","fromISO","months","totalRate","balance","calcEquity","houseValue","loanBalance","findNearstOnOrBefore","find","x","idx","startOf","length","findSameYear","year","getMortgateValue","mortgage","entry","getAccountValue","account","getGraphValue","getGraphDates","accounts","Set","flatMap","map","toISO","sort","a","b","toMillis","useGraphData","useStore","useMemo","dates","Object","values","entries","graphData","reduce","acc","accountName","toJSDate","total","firstNonZero","findIndex","slice","WealthChart","series","keys","stacked","xKey","yKey","yName","tooltip","renderer","datum","content","fromJSDate","toISODate","options","theme","title","text","axes","position","label","NewAccount","forwardRef","props","ref","open","setOpen","useState","nameRef","useRef","setError","accountType","setAccountType","undefined","target","setState","create","prev","children","AgGrid","rest","height","AgGridReact","shortDate","sortByDate","select","direction","DeleteAccount","padding","width","onDeleteAccount","RenameAccount","nextAccountName","setNextAccountName","event","onUpdateName","createAccountColumnConfig","headerName","valueFormatter","toFormat","valueGetter","cellRenderer","idxToRemove","splice","DeleteForeverIcon","AccountTab","setDate","local","amount","setamount","hasSameDate","hasSame","onAddEntry","push","toString","uuid","accountColumnConfig","color","startAdornment","mortgageColumnConfig","toFixed","groupBy","selector","curr","convertPct","min","datetime","offset","AddLoan","textField","parsed","issues","path","join","AddEntry","Stack","MortgageTab","allAccounts","mortgageData","AccountTabs","firstAccount","setAccount","useEffect","_","NetWealth","minMaxAvg","max","avg","index","arr","Math","Infinity","outcomeFromSingle","actual","scaleOutcome","outcome","AddOutcome","outcomes","everyActualDefined","every","Value","secondaryValue","display","minWidth","flexDirection","justifyContent","alignItems","gap","flexShrink","Cash","fallback","Duration","dateTime","countDownStr","diffNow","countDownColor","days","formatPercent","Percent","Until","BonusOutcome","payDate","border","borderRadius","paddingBottom","paddingLeft","paddingTop","percent","cash","variant","valueFormatted","UpdateIcon","editable","cellEditor","valueSetter","newValue","DataEntry","defaultDate","setAmount","concat","console","flex","Layout","marginBottom","useCommonMerit","meritIncreasePcts","valueByDateRange","toSorted","plus","years","minus","useProjectedPay","baseIncome","lastMerit","payPerPeriod","mostRecentPay","projectedPayPerPeriod","Array","fill","i","start","end","startDate","multiplier","useBaseIncome","endDate","pay","incomePerPeriod","filter","rangeOutside","rangeInside","overlapEnd","overlapStart","weeks","income","round","MeritOutcome","fromObject","day","month","commonMerit","meritPct","payChecks","payCheck","totalAdjust","Outcome","useAprilBonus","payedOn","bonusAmmount","bonusPercent","meritOutcome","useJuneBonus","timeseries","mostRecentBonus","mostRecentPercent","meritFactor","useJulyBonus","payDay","juneBonus","eligbleIncome","ProjectedIncome","setYear","junePayDay","meritPayDay","meritIncreaseDay","julyPayDay","julyBonus","incomeOutcome","Box","marginLeft","marginRight","SafetyButton","inactiveLabel","activatingLabel","activeLabel","onConfirm","icon","disabled","safetyState","setSafetyState","setTimeout","useExport","storeData","onExport","useCallback","link","document","createElement","download","blob","Blob","href","window","URL","createObjectURL","click","selectFile","contentType","Promise","input","multiple","accept","onchange","files","from","useImport","file","reader","FileReader","readAsDataURL","onload","readerEvent","result","atob","split","App","tab","setTab","onImport","DeleteForever","darkTheme","createTheme","palette","mode","ReactDOM","createRoot","getElementById","render","backgroundColor","message","stackTrace","AdapterLuxon"],"mappings":"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"}