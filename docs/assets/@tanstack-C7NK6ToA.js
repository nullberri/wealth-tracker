var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,"name",{value,configurable:!0});import{w as withSelectorExports}from"./use-sync-external-store-BvrDn2mX.js";const _Store=class _Store{constructor(initialState,options){this.listeners=new Set,this._batching=!1,this._flushing=0,this.subscribe=listener=>{var _a,_b;this.listeners.add(listener);const unsub=(_b=(_a=this.options)==null?void 0:_a.onSubscribe)==null?void 0:_b.call(_a,listener,this);return()=>{this.listeners.delete(listener),unsub==null||unsub()}},this.setState=updater=>{var _a,_b,_c;const previous=this.state;this.state=(_a=this.options)!=null&&_a.updateFn?this.options.updateFn(previous)(updater):updater(previous),(_c=(_b=this.options)==null?void 0:_b.onUpdate)==null||_c.call(_b),this._flush()},this._flush=()=>{if(this._batching)return;const flushId=++this._flushing;this.listeners.forEach(listener=>{this._flushing===flushId&&listener()})},this.batch=cb=>{if(this._batching)return cb();this._batching=!0,cb(),this._batching=!1,this._flush()},this.state=initialState,this.options=options}};__name(_Store,"Store");let Store=_Store;function useStore(store,selector=d=>d){return withSelectorExports.useSyncExternalStoreWithSelector(store.subscribe,()=>store.state,()=>store.state,selector,shallow)}__name(useStore,"useStore");function shallow(objA,objB){if(Object.is(objA,objB))return!0;if(typeof objA!="object"||objA===null||typeof objB!="object"||objB===null)return!1;const keysA=Object.keys(objA);if(keysA.length!==Object.keys(objB).length)return!1;for(let i=0;i<keysA.length;i++)if(!Object.prototype.hasOwnProperty.call(objB,keysA[i])||!Object.is(objA[keysA[i]],objB[keysA[i]]))return!1;return!0}__name(shallow,"shallow");export{Store as S,useStore as u};
//# sourceMappingURL=@tanstack-C7NK6ToA.js.map
